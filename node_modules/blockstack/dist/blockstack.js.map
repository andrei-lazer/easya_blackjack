{"version":3,"sources":["webpack://blockstack/webpack/universalModuleDefinition","webpack://blockstack/webpack/bootstrap","webpack://blockstack/./node_modules/tslib/tslib.es6.js","webpack://blockstack/./src/operations/utils.ts","webpack://blockstack/./node_modules/bitcoinjs-lib/src/index.js","webpack://blockstack/./node_modules/buffer/index.js","webpack://blockstack/./src/errors.ts","webpack://blockstack/./src/config.ts","webpack://blockstack/./src/fetchUtil.ts","webpack://blockstack/./src/utils.ts","webpack://blockstack/./src/logger.ts","webpack://blockstack/./src/keys.ts","webpack://blockstack/./node_modules/bitcoinjs-lib/src/script.js","webpack://blockstack/./node_modules/bn.js/lib/bn.js","webpack://blockstack/index.ts","webpack://blockstack/./src/operations/skeletons.ts","webpack://blockstack/./node_modules/inherits/inherits_browser.js","webpack://blockstack/./node_modules/safe-buffer/index.js","webpack://blockstack/./src/profiles/profileTokens.ts","webpack://blockstack/./src/encryption/sha2Hash.ts","webpack://blockstack/./node_modules/typeforce/index.js","webpack://blockstack/./src/storage/hub.ts","webpack://blockstack/./src/encryption/ec.ts","webpack://blockstack/./src/auth/authConstants.ts","webpack://blockstack/./src/auth/authVerification.ts","webpack://blockstack/./src/dids.ts","webpack://blockstack/./node_modules/elliptic/lib/elliptic/utils.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/networks.js","webpack://blockstack/./node_modules/bip174/src/lib/typeFields.js","webpack://blockstack/./src/auth/authApp.ts","webpack://blockstack/./src/auth/protocolLaunch.ts","webpack://blockstack/./src/auth/authMessages.ts","webpack://blockstack/./src/storage/index.ts","webpack://blockstack/./node_modules/hash.js/lib/hash/utils.js","webpack://blockstack/./src/profiles/profileZoneFiles.ts","webpack://blockstack/./src/encryption/cryptoUtils.ts","webpack://blockstack/./src/encryption/cryptoRandom.ts","webpack://blockstack/(webpack)/buildin/global.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/types.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/crypto.js","webpack://blockstack/./src/profiles/profile.ts","webpack://blockstack/./node_modules/schema-inspector/index.js","webpack://blockstack/./node_modules/process/browser.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_duplex.js","webpack://blockstack/./node_modules/tiny-secp256k1/js.js","webpack://blockstack/./node_modules/minimalistic-assert/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/lazy.js","webpack://blockstack/./node_modules/sha.js/index.js","webpack://blockstack/./src/auth/sessionData.ts","webpack://blockstack/./src/auth/sessionStore.ts","webpack://blockstack/./src/auth/userSession.ts","webpack://blockstack/./src/encryption/hashRipemd160.ts","webpack://blockstack/./node_modules/bip39/src/index.js","webpack://blockstack/./node_modules/sha.js/hash.js","webpack://blockstack/./src/auth/authProvider.ts","webpack://blockstack/./src/profiles/services/serviceUtils.ts","webpack://blockstack/./src/encryption/wallet.ts","webpack://blockstack/./src/profiles/profileSchemas/person.ts","webpack://blockstack/./src/profiles/profileSchemas/personUtils.ts","webpack://blockstack/./src/encryption/aesCipher.ts","webpack://blockstack/./node_modules/core-util-is/lib/util.js","webpack://blockstack/./node_modules/bs58check/index.js","webpack://blockstack/./node_modules/hash.js/lib/hash/common.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/bufferutils.js","webpack://blockstack/./src/auth/protocolEchoDetection.ts","webpack://blockstack/./src/encryption/hmacSha256.ts","webpack://blockstack/./node_modules/zone-file/lib/index.js","webpack://blockstack/./node_modules/create-hash/browser.js","webpack://blockstack/./node_modules/process-nextick-args/index.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/base.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/index.js","webpack://blockstack/./node_modules/randombytes/browser.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/transaction.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/varint.js","webpack://blockstack/errors.ts","webpack://blockstack/./src/auth/appConfig.ts","webpack://blockstack/./src/network.ts","webpack://blockstack/./node_modules/elliptic/lib/elliptic.js","webpack://blockstack/./src/profiles/profileLookup.ts","webpack://blockstack/./src/profiles/profileSchemas/personLegacy.ts","webpack://blockstack/./src/operations/signers.ts","webpack://blockstack/./src/profiles/services/service.ts","webpack://blockstack/./src/profiles/services/index.ts","webpack://blockstack/./src/profiles/services/facebook.ts","webpack://blockstack/./src/profiles/services/github.ts","webpack://blockstack/./src/profiles/services/twitter.ts","webpack://blockstack/./src/profiles/services/instagram.ts","webpack://blockstack/./src/profiles/services/hackerNews.ts","webpack://blockstack/./src/profiles/services/linkedIn.ts","webpack://blockstack/./src/profiles/profileProofs.ts","webpack://blockstack/./node_modules/query-string/index.js","webpack://blockstack/./node_modules/events/events.js","webpack://blockstack/./node_modules/readable-stream/readable-browser.js","webpack://blockstack/./node_modules/readable-stream/node_modules/safe-buffer/index.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_writable.js","webpack://blockstack/./node_modules/string_decoder/lib/string_decoder.js","webpack://blockstack/./node_modules/ripemd160/index.js","webpack://blockstack/./node_modules/cipher-base/index.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curves.js","webpack://blockstack/./node_modules/hash.js/lib/hash.js","webpack://blockstack/./node_modules/typeforce/native.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/address.js","webpack://blockstack/./node_modules/bech32/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/ecpair.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/index.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/tools.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/multisig/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkey/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkeyhash/index.js","webpack://blockstack/./node_modules/base64url/index.js","webpack://blockstack/cryptoClients/index.ts","webpack://blockstack/./src/encryption/pbkdf2.ts","webpack://blockstack/./node_modules/isarray/index.js","webpack://blockstack/./node_modules/md5.js/index.js","webpack://blockstack/./node_modules/hash-base/index.js","webpack://blockstack/./node_modules/stream-browserify/index.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_readable.js","webpack://blockstack/./node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack://blockstack/./node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_transform.js","webpack://blockstack/./node_modules/sha.js/sha256.js","webpack://blockstack/./node_modules/sha.js/sha512.js","webpack://blockstack/./node_modules/create-hmac/browser.js","webpack://blockstack/./node_modules/create-hash/md5.js","webpack://blockstack/./node_modules/minimalistic-crypto-utils/lib/utils.js","webpack://blockstack/./node_modules/brorand/index.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/index.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/common.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/256.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/512.js","webpack://blockstack/./node_modules/typeforce/errors.js","webpack://blockstack/./node_modules/wif/index.js","webpack://blockstack/./node_modules/bip66/index.js","webpack://blockstack/./node_modules/varuint-bitcoin/index.js","webpack://blockstack/./node_modules/bip174/src/lib/parser/index.js","webpack://blockstack/./node_modules/bip174/src/lib/utils.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnessscripthash/output.js","webpack://blockstack/./node_modules/cross-fetch/dist/browser-polyfill.js","webpack://blockstack/cryptoClients/sha256.ts","webpack://blockstack/./node_modules/zone-file/lib/makeZoneFile.js","webpack://blockstack/./node_modules/zone-file/lib/parseZoneFile.js","webpack://blockstack/./src/operations/txbuild.ts","webpack://blockstack/./src/wallet.ts","webpack://blockstack/./node_modules/pbkdf2/lib/precondition.js","webpack://blockstack/./node_modules/pbkdf2/lib/default-encoding.js","webpack://blockstack/./node_modules/pbkdf2/lib/sync-browser.js","webpack://blockstack/./node_modules/bip39/src/_wordlists.js","webpack://blockstack/./node_modules/form-data/lib/browser.js","webpack://blockstack/./node_modules/ripemd160-min/dist-esm/index.js","webpack://blockstack/./node_modules/base64-js/index.js","webpack://blockstack/./node_modules/ieee754/index.js","webpack://blockstack/./node_modules/bip32/src/index.js","webpack://blockstack/./node_modules/bip32/src/bip32.js","webpack://blockstack/./node_modules/bip32/src/crypto.js","webpack://blockstack/./node_modules/readable-stream/lib/internal/streams/BufferList.js","webpack://blockstack/./node_modules/timers-browserify/main.js","webpack://blockstack/./node_modules/setimmediate/setImmediate.js","webpack://blockstack/./node_modules/util-deprecate/browser.js","webpack://blockstack/./node_modules/string_decoder/node_modules/safe-buffer/index.js","webpack://blockstack/./node_modules/readable-stream/lib/_stream_passthrough.js","webpack://blockstack/./node_modules/readable-stream/writable-browser.js","webpack://blockstack/./node_modules/readable-stream/duplex-browser.js","webpack://blockstack/./node_modules/readable-stream/transform.js","webpack://blockstack/./node_modules/readable-stream/passthrough.js","webpack://blockstack/./node_modules/sha.js/sha.js","webpack://blockstack/./node_modules/sha.js/sha1.js","webpack://blockstack/./node_modules/sha.js/sha224.js","webpack://blockstack/./node_modules/sha.js/sha384.js","webpack://blockstack/./node_modules/create-hmac/legacy.js","webpack://blockstack/./node_modules/bs58check/base.js","webpack://blockstack/./node_modules/bs58/index.js","webpack://blockstack/./node_modules/base-x/src/index.js","webpack://blockstack/(webpack)/buildin/module.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/short.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/mont.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/curve/edwards.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/1.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/224.js","webpack://blockstack/./node_modules/hash.js/lib/hash/sha/384.js","webpack://blockstack/./node_modules/hash.js/lib/hash/ripemd.js","webpack://blockstack/./node_modules/hash.js/lib/hash/hmac.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/precomputed/secp256k1.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/ec/index.js","webpack://blockstack/./node_modules/hmac-drbg/lib/hmac-drbg.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/ec/key.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/ec/signature.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/eddsa/index.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/eddsa/key.js","webpack://blockstack/./node_modules/elliptic/lib/elliptic/eddsa/signature.js","webpack://blockstack/./node_modules/tiny-secp256k1/rfc6979.js","webpack://blockstack/./node_modules/typeforce/extra.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/embed.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/script_number.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/script_signature.js","webpack://blockstack/./node_modules/pushdata-bitcoin/index.js","webpack://blockstack/./node_modules/bitcoin-ops/map.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2ms.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2pk.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2pkh.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2sh.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2wpkh.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/payments/p2wsh.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/block.js","webpack://blockstack/./node_modules/merkle-lib/fastRoot.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/psbt.js","webpack://blockstack/./node_modules/bip174/src/lib/psbt.js","webpack://blockstack/./node_modules/bip174/src/lib/combiner/index.js","webpack://blockstack/./node_modules/bip174/src/lib/parser/fromBuffer.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/global/globalXpub.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/global/unsignedTx.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/finalScriptSig.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/finalScriptWitness.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/nonWitnessUtxo.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/partialSig.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/porCommitment.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/sighashType.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/input/witnessUtxo.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/shared/bip32Derivation.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/shared/checkPubkey.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/shared/redeemScript.js","webpack://blockstack/./node_modules/bip174/src/lib/converter/shared/witnessScript.js","webpack://blockstack/./node_modules/bip174/src/lib/parser/toBuffer.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/transaction_builder.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/classify.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/multisig/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/multisig/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/nulldata.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkey/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkey/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkeyhash/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/pubkeyhash/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/scripthash/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/scripthash/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/scripthash/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesscommitment/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesscommitment/output.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnesspubkeyhash/input.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnessscripthash/index.js","webpack://blockstack/./node_modules/bitcoinjs-lib/src/templates/witnessscripthash/input.js","webpack://blockstack/signer.ts","webpack://blockstack/./node_modules/base64url/dist/base64url.js","webpack://blockstack/./node_modules/base64url/dist/pad-string.js","webpack://blockstack/cryptoClients/secp256k1.ts","webpack://blockstack/./node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js","webpack://blockstack/./node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js","webpack://blockstack/verifier.ts","webpack://blockstack/decode.ts","webpack://blockstack/./node_modules/zone-file/lib/zoneFileTemplate.js","webpack://blockstack/./node_modules/zone-file/lib/zoneFile.js","webpack://blockstack/./node_modules/schema-inspector/lib/schema-inspector.js","webpack://blockstack/./node_modules/async/dist/async.mjs","webpack://blockstack/./node_modules/strict-uri-encode/index.js","webpack://blockstack/./node_modules/decode-uri-component/index.js","webpack://blockstack/./node_modules/split-on-first/index.js","webpack://blockstack/./node_modules/pbkdf2/browser.js","webpack://blockstack/./node_modules/pbkdf2/lib/async.js","webpack://blockstack/./src/profiles/profileSchemas/organization.ts","webpack://blockstack/./src/profiles/profileSchemas/creativework.ts","webpack://blockstack/./src/profiles/profileSchemas/personZoneFiles.ts","webpack://blockstack/./src/operations/safety.ts","webpack://blockstack/./src/public.ts","webpack://blockstack/./src/index.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","DUST_MINIMUM","hash160","buff","sha256","hash128","slice","TX_EMPTY_SIZE","TX_INPUT_BASE","TX_INPUT_PUBKEYHASH","TX_OUTPUT_BASE","TX_OUTPUT_PUBKEYHASH","transactionBytes","inputs","outputs","reduce","a","x","input","script","length","inputBytes","output","outputBytes","getTransactionInsideBuilder","txBuilder","__TX","getTransaction","txIn","estimateTXBytes","additionalInputs","additionalOutputs","innerTx","dummyInputs","Array","fill","dummyOutputs","concat","ins","outs","sumOutputValues","agg","decodeB40","base","split","reverse","map","character","exponent","indexOf","mul","pow","cur","add","toString","addUTXOsToFund","txBuilderIn","utxos","amountToFund","feeRate","fundNewFees","newFees","utxoThreshhold","goodUtxos","filter","utxo","sort","b","selected","change","addInput","tx_hash","tx_output_n","largest","remainToFund","signInputs","txB","defaultSigner","otherSigners","txInner","signerArray","forEach","signerPair","index","signer","signingPromise","signTransaction","bip32","require","address","crypto","ECPair","networks","payments","block_1","Block","psbt_1","Psbt","script_1","opcodes","OPS","transaction_1","Transaction","transaction_builder_1","TransactionBuilder","base64","ieee754","isArray","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","Error","allocUnsafe","from","TypeError","ArrayBuffer","array","byteOffset","byteLength","undefined","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","obj","isBuffer","len","checked","copy","buffer","val","type","data","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","push","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","Math","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","allocUnsafeSlow","_isBuffer","compare","y","list","pos","swap16","swap32","swap64","arguments","equals","inspect","max","match","join","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","trim","replace","stringtrim","base64clean","src","dst","ERROR_CODES","MISSING_PARAMETER","REMOTE_SERVICE_ERROR","INVALID_STATE","NO_SESSION_DATA","DOES_NOT_EXIST","FAILED_DECRYPTION_ERROR","INVALID_DID_ERROR","NOT_ENOUGH_FUNDS_ERROR","INVALID_AMOUNT_ERROR","LOGIN_FAILED_ERROR","SIGNATURE_VERIFICATION_ERROR","CONFLICT_ERROR","NOT_ENOUGH_PROOF_ERROR","BAD_PATH_ERROR","VALIDATION_ERROR","PAYLOAD_TOO_LARGE_ERROR","PRECONDITION_FAILED_ERROR","UNKNOWN","freeze","BlockstackError","error","super","message","bugDetails","stack","parameter","InvalidParameterError","MissingParameterError","RemoteServiceError","response","InvalidDIDError","NotEnoughFundsError","leftToFund","InvalidAmountError","fees","specifiedAmount","LoginFailedError","reason","SignatureVerificationError","FailedDecryptionError","InvalidStateError","NoSessionDataError","GaiaHubError","hubError","statusCode","status","statusText","body","assign","DoesNotExist","ConflictError","NotEnoughProofError","BadPathError","ValidationError","PayloadTooLargeError","maxUploadByteSize","PreconditionFailedError","config","network","defaults","MAINNET_DEFAULT","logLevel","fetchPrivate","init","fetchOpts","referrer","referrerPolicy","fetch","BLOCKSTACK_HANDLER","nextYear","Date","setFullYear","getFullYear","nextMonth","setMonth","getMonth","nextHour","setHours","getHours","megabytesToBytes","megabytes","getAesCbcOutputLength","inputByteLength","getBase64OutputLength","ceil","updateQueryStringParameter","uri","re","RegExp","separator","isLaterVersion","v1","v2","v1tuple","v2tuple","makeUUID4","getTime","performance","now","random","isSameOriginAbsoluteUrl","uri1","uri2","parseUrl","URL","url","nodeUrl","console","log","parsedUri1","parsedUri2","port1","port","protocol","port2","scheme","hostname","absolute","getGlobalScope","self","window","getAPIUsageErrorMessage","scopeObject","apiName","usageDesc","getGlobalObject","throwIfUnavailable","returnEmptyObject","globalScope","errMsg","getGlobalObjects","names","getBlockstackErrorFromResponse","errorMsg","hubConfig","ok","gaiaResponse","responseJson","responseMsg","text","JSON","parse","debug","getGaiaErrorResponse","maxBytes","max_file_upload_size_megabytes","levels","levelToInt","intToLevel","level","Logger","shouldLog","logMessage","warn","toUpperCase","getEntropy","makeECPrivateKey","makeRandom","rng","privateKey","publicKeyToAddress","publicKey","publicKeyBuffer","publicKeyHash160","toBase58Check","bitcoin","pubKeyHash","getPublicKeyFromPrivate","privateKeyBuffer","fromPrivateKey","hexStringToECPair","skHex","ecPairOptions","layer1","compressed","ecPairToHexString","secretKey","ecPointHex","ecPairToAddress","keyPair","scriptNumber","scriptSignature","types","bip66","ecc","pushdata","typeforce","REVERSE_OPS","OP_INT_BASE","OP_RESERVED","isPushOnlyChunk","OP_0","OP_1","OP_16","OP_1NEGATE","isOPInt","isPushOnly","every","asMinimalOP","chunksIsBuffer","singleChunkIsBuffer","compile","chunks","bufferSize","accum","chunk","encodingLength","opcode","encode","decompile","OP_PUSHDATA4","decode","number","op","isDefinedHashType","hashType","hashTypeMod","toASM","fromASM","asm","chunkStr","Hex","toStack","isCanonicalPubKey","isPoint","isCanonicalScriptSignature","check","signature","assert","msg","inherits","ctor","superCtor","super_","TempCtor","constructor","BN","endian","isBN","negative","words","red","_init","wordSize","parseHex","parseBase","num","left","right","cmp","_initNumber","_initArray","_parseHex","_parseBase","strip","toArray","w","off","limbLen","limbPow","total","mod","word","imuln","_iaddn","dest","clone","_expand","_normSign","zeros","groupSizes","groupBases","smallMulTo","carry","k","ncarry","rword","maxJ","padding","groupSize","groupBase","isZero","modn","idivn","toNumber","toBuffer","toArrayLike","ArrayType","reqLength","q","andln","iushrn","clz32","_countBits","_zeroBits","bitLength","zeroBits","toTwos","width","abs","inotn","iaddn","fromTwos","testn","notn","ineg","isNeg","neg","iuor","ior","or","uor","iuand","iand","and","uand","iuxor","ixor","xor","uxor","bytesNeeded","bitsLeft","setn","bit","wbit","iadd","isub","comb10MulTo","mid","a0","al0","ah0","a1","al1","ah1","a2","al2","ah2","a3","al3","ah3","a4","al4","ah4","a5","al5","ah5","a6","al6","ah6","a7","al7","ah7","a8","al8","ah8","a9","al9","ah9","b0","bl0","bh0","b1","bl1","bh1","b2","bl2","bh2","b3","bl3","bh3","b4","bl4","bh4","b5","bl5","bh5","b6","bl6","bh6","b7","bl7","bh7","b8","bl8","bh8","b9","bl9","bh9","w0","imul","w1","w2","w3","w4","w5","w6","w7","w8","w9","w10","w11","w12","w13","w14","w15","w16","w17","w18","jumboMulTo","FFTM","mulp","mulTo","hncarry","bigMulTo","makeRBT","N","revBin","rb","permute","rbt","rws","iws","rtws","itws","transform","rtwdf","cos","PI","itwdf","sin","rtwdf_","itwdf_","ie","ro","io","rx","guessLen13b","odd","conjugate","normalize13b","ws","round","convert13b","stub","ph","_","rwst","iwst","nrws","nrwst","niwst","rmws","mulf","muln","sqr","isqr","toBitArray","iushln","bits","carryMask","newCarry","ishln","hint","extended","h","mask","maskedWords","ishrn","shln","ushln","shrn","ushrn","imaskn","maskn","isubn","addn","subn","iabs","_ishlnsubmul","shift","_wordDiv","bhi","diff","qj","div","divmod","positive","divn","umod","divRound","dm","half","r2","acc","egcd","A","B","C","D","g","isEven","yp","xp","im","isOdd","jm","gcd","_invmp","x1","x2","delta","cmpn","invm","bincn","ucmp","gtn","gt","gten","gte","ltn","lt","lten","lte","eqn","eq","Red","toRed","ctx","convertTo","_forceRed","fromRed","convertFrom","forceRed","redAdd","redIAdd","redSub","redISub","redShl","shl","redMul","_verify2","redIMul","redSqr","_verify1","redISqr","redSqrt","sqrt","redInvm","redNeg","redPow","primes","k256","p224","p192","p25519","MPrime","tmp","_tmp","K256","P224","P192","P25519","prime","_prime","Mont","imod","rinv","minv","ireduce","rlen","imulK","outLen","prev","mod3","one","nOne","lpow","z","inv","wnd","current","currentLen","mont","u","BlockstackNamespace","namespaceID","version","lifetime","coeff","buckets","nonalphaDiscount","noVowelDiscount","setVersion","setLifetime","setCoeff","setBase","setBuckets","setNonalphaDiscount","setNoVowelDiscount","asAmountV2","amount","makeTXbuilder","txb","opEncode","MAGIC_BYTES","makePreorderSkeleton","fullyQualifiedName","consensusHash","preorderAddress","burnAddress","burn","registerAddress","burnAmount","dataBuffers","toOutputScript","registerBuff","dataBuff","hashed","opReturnBufferLen","opReturnBuffer","burnHex","paddedBurnHex","nullOutput","embed","tx","addOutput","btcBurnAmount","buildIncomplete","makeRegisterSkeleton","ownerAddress","valueHash","burnTokenAmountHex","payload","payloadLen","makeRenewalSkeleton","nextOwnerAddress","lastOwnerAddress","burnTokenAmount","burnBTCAmount","burnTokenHex","registerTX","fromTransaction","makeTransferSkeleton","newOwner","keepZonefile","opRet","keepChar","opRetPayload","makeUpdateSkeleton","nameBuff","consensusBuff","hashedName","makeRevokeSkeleton","makeNamespacePreorderSkeleton","getDefaultBurnAddress","makeNamespaceRevealSkeleton","namespace","revealAddress","hexPayload","toHexPayload","makeNamespaceReadySkeleton","makeNameImportSkeleton","recipientAddr","zonefileHash","zonefileHashB58","makeAnnounceSkeleton","messageHash","makeTokenTransferSkeleton","recipientAddress","tokenType","tokenAmount","scratchArea","tokenTypeHexPadded","tokenValueHex","tokenValueHexPadded","writable","copyProps","SafeBuffer","signProfileToken","profile","subject","issuer","signingAlgorithm","issuedAt","expiresAt","derivePublicKey","tokenSigner","jti","iat","toISOString","exp","claim","sign","wrapProfileToken","token","decodedToken","verifyProfileToken","publicKeyOrAddress","issuerPublicKey","compressedKeyPair","fromPublicKey","compressedAddress","uncompressedKeyPair","uncompressedAddress","tokenVerifier","header","alg","verify","extractProfile","NodeCryptoSha2Hash","createHash","algorithm","update","digest","hashSha256Sync","hashSha512Sync","WebCryptoSha2Hash","subtleCrypto","algo","hash","createSha2Hash","cryptoLib","lib","ERRORS","NATIVE","tfJSON","TfTypeError","TfPropertyTypeError","tfSubError","getValueTypeName","TYPES","arrayOf","options","_arrayOf","strict","Nil","minLength","maxLength","maybe","_maybe","propertyType","propertyKeyType","_map","propertyName","propertyValue","uncompiled","typePropertyName","_object","anyOf","_anyOf","some","allOf","_allOf","quacksLike","_quacksLike","tuple","_tuple","values","expected","_value","Function","surrogate","typeName","oneOf","EXTRA","uploadToGaiaHub","filename","contents","contentType","newFile","etag","dangerouslyIgnoreEtag","server","headers","Authorization","method","responseText","deleteFromGaiaHub","getFullReadUrl","url_prefix","makeV1GaiaAuthToken","hubInfo","signerKeyHex","hubUrl","associationToken","challengeText","challenge_text","handlesV1Auth","latest_auth_version","iss","parsedChallenge","err","signatureBuffer","SIGHASH_NONE","publickey","stringify","makeLegacyAuthToken","gaiaChallenge","salt","connectToGaiaHub","gaiaHubUrl","challengeSignerHex","json","readURL","read_url_prefix","getBucketUrl","appPrivateKey","challengeSigner","ecurve","hmacSha256","content","sharedSecretToKeys","sharedSecret","hashedSecret","encryptionKey","hmacKey","getBufferFromBN","bnInput","eciesGetJsonStringLength","opts","payloadShell","payloadValuesLength","shell","iv","ephemeralPK","mac","cipherText","wasString","cipherTextEncoding","ivLength","getCipherObjectWrapper","cipherTextLength","contentLength","encodedCipherTextLength","signedPayloadShell","signedPayloadValuesLength","signatureLength","getSignedCipherObjectWrapper","encryptECIES","ecPK","keyFromPublic","getPublic","ephemeralSK","genKeyPair","encodeCompressed","sharedKeys","derive","initializationVector","plaintext","cipher","encrypt","aes256CbcEncrypt","macData","cipherTextString","decryptECIES","cipherObject","ecSK","keyFromPrivate","ivBuffer","cipherTextBuffer","actualMac","equalConstTime","plainText","ciphertext","decrypt","aes256CbcDecrypt","signECDSA","contentBuffer","ecPrivate","contentHash","toDER","verifyECDSA","getBuffer","ecPublic","DEFAULT_BLOCKSTACK_HOST","DEFAULT_SCOPE","BLOCKSTACK_DEFAULT_GAIA_HUB_URL","NAME_LOOKUP_PATH","LOCALSTORAGE_SESSION_KEY","doSignaturesMatchPublicKeys","publicKeys","public_keys","doPublicKeysMatchIssuer","addressFromIssuer","doPublicKeysMatchUsername","nameLookupURL","username","responseJSON","isIssuanceDateValid","isExpirationDateValid","isManifestUriValid","domain_name","manifest_uri","isRedirectUriValid","redirect_uri","verifyAuthRequest","all","verifyAuthRequestAndLoadManifest","verifyAuthResponse","makeDIDFromAddress","makeDIDFromPublicKey","getDIDType","decentralizedID","didParts","getAddressFromDID","utils","minAssert","minUtils","zero2","getNAF","naf","getJSF","k1","k2","jsf","d1","d2","u1","u2","m8","m14","m24","cachedProperty","computer","parseBytes","intFromLE","messagePrefix","bech32","public","private","scriptHash","wif","regtest","testnet","GlobalTypes","GLOBAL_TYPE_NAMES","InputTypes","INPUT_TYPE_NAMES","OutputTypes","OUTPUT_TYPE_NAMES","DEFAULT_PROFILE","isSignInPending","info","getAuthResponseToken","search","queryDict","authResponse","signUserOut","redirectURL","caller","store","deleteSessionData","href","redirectToSignInWithAuthRequest","authRequest","blockstackIDHost","httpsURI","navigator","location","test","userAgent","successCallback","failCallback","echoReplyID","echoReplyKey","localStorage","document","setTimeout","clearTimeout","addEventListener","removeEventListener","setItem","cleanUpLocalStorage","removeItem","storageKey","startsWith","storageValue","getItem","redirectToWebAuthTimer","cancelWebAuthRedirectTimer","startWebAuthRedirectTimer","timeout","nextFunc","inputPromptTracker","createElement","style","cssText","inputBlurredFunc","isRefocused","once","capture","appendChild","focus","pageVisibilityChanged","hidden","replyEventListener","event","locationSrc","iframe","launchCustomProtocol","handlePendingSignIn","authResponseToken","transitKey","_resolve","sessionData","getSessionData","userData","coreNode","appConfig","blockstackAPIUrl","tokenPayload","private_key","coreSessionToken","core_token","ecPairError","gaiaAssociationToken","email","identityAddress","profileURL","profile_url","wrappedProfile","setSessionData","VERSION","generateTransitKey","makeAuthRequest","transitPrivateKey","redirectURI","manifestURI","scopes","appDomain","extraParams","generateAndStoreTransitKey","getWindowOrigin","paramName","origin","do_not_include_profile","supports_hub_url","encryptPrivateKey","encryptedObj","encryptedJSON","decryptPrivateKey","hexedEncrypted","unhexedString","decrypted","makeAuthResponse","metadata","coreToken","transitPublicKey","privateKeyPayload","coreTokenPayload","additionalProperties","profileUrl","SIGNATURE_FILE_SUFFIX","getUserAppFileUrl","path","appOrigin","zoneFileLookupURL","bucketUrl","apps","encryptContent","loadUserData","cipherPayload","signatureObject","signedCipherObject","decryptContent","SyntaxError","getGaiaAddress","app","normalizeOptions","fileUrl","gaiaHubConfig","getOrSetLocalGaiaHubConnection","matches","configuredCoreNode","getFileUrl","readUrl","getFileContents","forceText","etags","arrayBuffer","getFile","opt","sigPath","fileContents","signatureContents","gaiaAddress","sigObject","signerAddress","getFileSignedUnencrypted","storedContents","decryptOpt","decryptionKey","appPublicKey","signerPublicKey","handleSignedEncryptedContents","FileContentLoader","normalizeContentDataType","detectContentType","contentByteLength","detectContentLength","charset","TextEncoder","encodedString","Blob","isInteger","supportedTypesMsg","reader","FileReader","readPromise","onerror","onload","readAsArrayBuffer","loadContentError","loadedData","loadContent","putFile","maxUploadBytes","hasMaxUpload","contentLoader","sizeErrMsg","sizeErr","encryptedSize","uploadFn","contentData","load","signatureContent","writeResponse","publicURL","contentForUpload","isRecoverableGaiaError","freshHubConfig","setLocalGaiaHubConnection","deleteFile","wasSigned","getAppBucketUrl","listFiles","callback","listFilesLoop","page","callCount","fileCount","pageRequest","fetchOptions","entries","nextPage","entriesLength","isSurrogatePair","htonl","zero8","enc","toHex32","join32","split32","rotr32","rotl32","sum32","sum32_3","sum32_4","sum32_5","sum64","ah","al","bh","sum64_hi","bl","sum64_lo","sum64_4_hi","ch","cl","dh","dl","sum64_4_lo","sum64_5_hi","eh","el","sum64_5_lo","rotr64_hi","rotr64_lo","shr64_hi","shr64_lo","makeProfileZoneFile","tokenFileUrl","urlScheme","urlParts","zoneFile","$origin","$ttl","priority","weight","getTokenFileUrl","zoneFileJson","firstUriRecord","resolveZoneFileToProfile","keys","tokenRecords","catch","fromLegacyFormat","isNodeCryptoAvailable","withFeature","cryptoModule","NO_CRYPTO_LIB","getCryptoLib","subtle","UINT31_MAX","BIP32Path","UInt31","UInt32","Signer","getPublicKey","SATOSHI_MAX","Satoshi","UInt53","ECPoint","Network","UInt8","Buffer256bit","BufferN","Hash160bit","Hash256bit","Boolean","Null","ripemd160","sha1","hash256","schemaDefinition","properties","optional","Profile","_profile","domainName","tokenFileURL","cheerio","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","args","title","browser","env","argv","versions","on","addListener","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","pna","objectKeys","Duplex","util","Readable","Writable","v","readable","allowHalfOpen","onend","_writableState","ended","onEndNT","highWaterMark","_readableState","destroyed","_destroy","cb","secp256k1","EC","ec","deterministicGenerateK","ZERO32","EC_GROUP_ORDER","EC_P","curve","nDiv2","G","THROW_BAD_PRIVATE","THROW_BAD_POINT","THROW_BAD_TWEAK","THROW_BAD_HASH","THROW_BAD_SIGNATURE","THROW_BAD_EXTRA_DATA","isScalar","isOrderScalar","decodeFrom","__isPointCompressed","isPrivate","assumeCompression","pubkey","fromBuffer","decodePoint","getEncoded","_encode","__sign","addData","kI","Q","isInfinity","isPointCompressed","pointAdd","pA","pB","__compressed","pp","pointAddScalar","tweak","tt","qq","uu","pointCompress","pointFromScalar","dd","pointMultiply","privateAdd","dt","privateSub","signWithEntropy","isSignature","sInv","R","mulAdd","equal","prop","f","Algorithm","sha","sha224","sha384","sha512","SESSION_VERSION","sessionOptions","newSessionData","session","storeOptions","localStorageKey","dataJSON","fromJSON","runningInBrowser","sessionStore","authenticatorURL","authMessages","storage","gaiaConfig","Ripemd160PolyfillDigest","instance","NodeCryptoRipemd160Digest","nodeCryptoCreateHash","_err","hashRipemd160","nodeCrypto","createHashRipemd160","pbkdf2_1","randomBytes","_wordlists_1","DEFAULT_WORDLIST","_default","INVALID_MNEMONIC","INVALID_ENTROPY","INVALID_CHECKSUM","WORDLIST_REQUIRED","lpad","padString","binaryToByte","bin","bytesToBinary","deriveChecksumBits","entropyBuffer","CS","password","mnemonicToEntropy","mnemonic","wordlist","normalize","dividerIndex","entropyBits","checksumBits","entropyBytes","entropy","entropyToMnemonic","binary","mnemonicToSeedSync","mnemonicBuffer","saltBuffer","pbkdf2Sync","mnemonicToSeed","pbkdf2","generateMnemonic","strength","validateMnemonic","setDefaultWordlist","language","wordlists","getDefaultWordlist","lang","_wordlists_2","Hash","blockSize","finalSize","_block","_finalSize","_blockSize","_len","block","assigned","remainder","_update","rem","lowBits","highBits","_hash","getAuthRequestFromURL","fetchAppManifest","redirectUserToApp","containsValidProofStatement","searchText","endsWith","verificationStyles","verificationStyle","containsValidAddressProofStatement","proofStatement","encryptMnemonic","phrase","mnemonicEntropy","plaintextNormalized","getRandomBytes","keysAndIV","encKey","macKey","hmacPayload","hmacDigest","PasswordError","decryptMnemonic","triplesecDecrypt","dataBuffer","hmacSig","decipher","decryptedResult","sha2Hash","hmacSigHash","hmacDigestHash","decryptMnemonicBuffer","plaintextBuffer","decryptLegacy","givenName","familyName","description","image","items","contentUrl","website","account","service","identifier","proofType","proofUrl","proofMessage","proofSignature","worksFor","knows","streetAddress","addressLocality","postalCode","addressCountry","birthDate","taxID","legacyProfile","avatarUrl","verifiedAccounts","connections","organizations","getName","getGivenName","pop","getFamilyName","getDescription","avatarContentUrl","getAvatarUrl","verifications","filteredAccounts","accountIsValid","verification","proof_url","valid","getVerifiedAccounts","addressString","addressParts","getAddress","monthNames","birthDateString","date","getDate","getBirthDate","getConnections","NodeCryptoAesCipher","createCipher","createDecipher","final","WebCryptoAesCipher","cryptoKey","importKey","createCipheriv","createDecipheriv","objectToString","isBoolean","isNull","isNullOrUndefined","isNumber","isString","isSymbol","isUndefined","isRegExp","isObject","isDate","isError","isFunction","isPrimitive","bs58checkBase","BlockHash","pending","pendingTotal","outSize","hmacStrength","padLength","_delta8","_delta32","_pad","_digest","verifuint","readUInt64LE","writeUInt64LE","reverseBuffer","GLOBAL_DETECTION_CACHE_KEY","ECHO_REPLY_PARAM","AUTH_CONTINUATION_PARAM","protocolEchoReplyDetection","existingDetection","searchParams","query","params","param","decodeURIComponent","echoReplyParam","authContinuationParam","NodeCryptoHmacSha256","createHmac","WebCryptoHmacSha256","sig","createHmacSha256","_makeZoneFile","makeZoneFile","_parseZoneFile","parseZoneFile","_zoneFile","ZoneFile","MD5","RIPEMD160","Base","_final","fn","arg1","arg2","arg3","BaseCurve","conf","zero","two","pointFromJSON","gRed","_wnafT1","_wnafT2","_wnafT3","_wnafT4","_bitLength","adjustCount","redN","_maxwellTrick","BasePoint","precomputed","point","validate","_fixedNafMul","doubles","_getDoubles","I","repr","nafW","jpoint","mixedAdd","points","toP","_wnafMul","nafPoints","_getNAFPoints","dblp","_wnafMulAdd","defW","coeffs","jacobianResult","wndWidth","comb","toJ","ja","jb","pointFromX","compact","getX","getY","precompute","power","beta","_getBeta","_hasDoubles","dbl","embed_1","p2data","p2ms_1","p2ms","p2pk_1","p2pk","p2pkh_1","p2pkh","p2sh_1","p2sh","p2wpkh_1","p2wpkh","p2wsh_1","p2wsh","MAX_BYTES","MAX_UINT32","msCrypto","getRandomValues","generated","bufferutils","bufferutils_1","bcrypto","bscript","varuint","varSliceSize","someScript","EMPTY_SCRIPT","EMPTY_WITNESS","ZERO","ONE","VALUE_UINT64_MAX","BLANK_OUTPUT","valueBuffer","locktime","_NO_STRICT","readSlice","readUInt32","readUInt64","readVarInt","vi","readVarSlice","readVector","count","vector","readInt32","flag","hasWitnesses","ADVANCED_TRANSACTION_MARKER","ADVANCED_TRANSACTION_FLAG","vinLen","sequence","witness","voutLen","hex","isCoinbase","isCoinbaseHash","scriptSig","DEFAULT_SEQUENCE","scriptPubKey","__byteLength","virtualSize","newTx","txOut","hashForSignature","inIndex","prevOutScript","ourScript","OP_CODESEPARATOR","txTmp","SIGHASH_SINGLE","SIGHASH_ANYONECANPAY","__toBuffer","hashForWitnessV0","tbuffer","toffset","writeSlice","writeUInt32","writeUInt64","writeVarSlice","hashOutputs","hashPrevouts","hashSequence","txOutsSize","sum","getHash","forWitness","getId","initialOffset","setInputScript","setWitness","_ALLOW_WITNESS","someVector","vectorSize","writeVarInt","isOutput","writeVector","SIGHASH_ALL","MAX_SAFE_INTEGER","checkUInt53","_number","first","AppConfig","redirectPath","manifestPath","SATOSHIS_PER_BTC","TX_BROADCAST_SERVICE_ZONE_FILE_ENDPOINT","TX_BROADCAST_SERVICE_REGISTRATION_ENDPOINT","TX_BROADCAST_SERVICE_TX_ENDPOINT","BitcoinNetwork","transaction","txid","BlockstackNetwork","apiUrl","broadcastServiceUrl","bitcoinAPI","btc","includeUtxoMap","excludeUtxoSet","fromBase58Check","scriptHashes","pubKeyHashes","coercedVersion","coerceAddress","resp","name_price","namePrice","satoshis","namespacePrice","dustMin","getNamePriceV2","getNamePriceV1","getNamespacePriceV2","getNamespacePriceV1","_fullyQualifiedName","networkAddress","getBlockHeight","blockHeight","namespaceInfo","reveal_block","nameInfo","recipient_address","accountStatus","debit_value","credit_value","historyList","histEntry","tokenList","tokenBalance","balance","endpoint","Accept","transactionToWatch","confirmations","broadcastTransaction","requestBody","broadcastServiceFetchHelper","zonefile","respObj","servers","preorderTransaction","registerTransaction","rates","fastestFee","getNetworkedUTXOs","networkedUTXOs","returnSet","excludeSet","inSet","utxoToCheck","txHex","fromHex","utxoUsed","reverseHash","txHash","utxoCreated","txOutputN","isNullData","fromOutputScript","includeSet","consensus_hash","getTransactionInfo","LocalRegtest","BitcoindAPI","bitcoindUrl","bitcoindCredentials","importedBefore","jsonRPC","jsonrpc","authString","txInfo","blockhash","jsonRPCBlock","block_height","height","jsonRPCImport","jsonRPCUnspent","vout","BlockchainInfoApi","blockchainInfoUrl","utxoProviderUrl","blockObj","unspent_outputs","utxoJSON","utxoList","tx_hash_big_endian","form","append","respText","LOCAL_REGTEST","InsightClient","insightUrl","jsonData","rawtx","blocks","transactionInfo","blockHash","blockInfo","elliptic","rand","curves","eddsa","lookupProfile","lookupPromise","getNameInfo","formatAccount","serviceName","proof","getPersonFromLegacyFormat","profileData","formatted","bio","images","avatar","cover","accounts","role","twitter","facebook","github","auth","publicKeychain","pgp","fingerprint","PubkeyHashSigner","ecPair","keyHex","inputIndex","getProofUrl","shouldValidateIdentityInBody","getProofIdentity","proofText","getProofStatement","_cheerio","profileServices","normalizeUrl","prefixScheme","tokens","postId","statement","$","attr","_proof","baseUrls","getBaseUrls","requiredPrefix","raw","instagram","normalizedProofUrl","hackerNews","tables","children","find","each","tableIndex","table","rows","idx","row","last","linkedIn","profileLink","postContent","validateProofs","proofsToValidate","validateProof","strictUriEncode","decodeComponent","splitOnFirst","encodeURIComponent","removeHash","hashStart","extract","queryStart","parseValue","parseNumbers","parseBooleans","formatter","arrayFormat","accumulator","exec","newValue","parserForArrayFormat","keysSorter","skipNull","encoderForArrayFormat","objectCopy","ReflectOwnKeys","Reflect","ReflectApply","receiver","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","EventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","_addListener","listener","prepend","events","existing","warning","newListener","unshift","warned","emitter","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","handler","position","originalListener","spliceOne","rawListeners","eventNames","Stream","Transform","PassThrough","CorkedRequest","_this","entry","finish","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","setImmediate","WritableState","internalUtil","deprecate","OurUint8Array","realHasInstance","destroyImpl","nop","stream","isDuplex","objectMode","writableObjectMode","hwm","writableHwm","writableHighWaterMark","defaultHwm","finalCalled","needDrain","ending","finished","noDecode","decodeStrings","defaultEncoding","writing","corked","sync","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","errorEmitted","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","_write","writev","_writev","destroy","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","prefinish","hasInstance","pipe","_uint8ArrayToBuffer","writeAfterEnd","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","_undestroy","undestroy","StringDecoder","nb","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","utf8CheckIncomplete","HashBase","ARRAY16","zl","zr","sl","sr","hl","hr","_a","_b","_c","_d","_e","rotl","fn1","fn2","fn3","fn4","fn5","ar","br","cr","dr","tl","tr","_blockOffset","_length","CipherBase","hashMode","_finalOrDigest","__final","_decoder","_encoding","inputEnc","outputEnc","outData","_toString","setAutoPadding","getAuthTag","setAuthTag","setAAD","_transform","_flush","fin","pre","PresetCurve","short","edwards","defineCurve","lambda","basis","common","ripemd","hmac","bs58check","fromBech32","fromWords","prefix","toBech32","toWords","decodeBase58","decodeBech32","ALPHABET","ALPHABET_MAP","charAt","polymodStep","prefixChk","chk","convert","inBits","outBits","pad","maxV","LIMIT","lowered","uppered","wordChars","NETWORKS","isOptions","__D","__Q","lowR","toWIF","extraData","counter","fromWIF","wifString","decoded","typeFields_1","globalXpub","unsignedTx","finalScriptSig","finalScriptWitness","nonWitnessUtxo","partialSig","porCommitment","sighashType","witnessUtxo","bip32Derivation","checkPubkey","redeemScript","witnessScript","globals","makeChecker","makeConverter","BIP32_DERIVATION","REDEEM_SCRIPT","WITNESS_SCRIPT","PARTIAL_SIG","keyValToBuffer","keyVal","keyLen","valLen","keyVarIntLen","valVarIntLen","range","keyValsToBuffer","keyVals","buffers","default","NodeCryptoPbkdf2","nodePbkdf2","iterations","keyLength","WebCryptoPbkdf2","passwordBytes","deriveBits","WebCryptoPartialPbkdf2","algoOpts","DK","saltLength","block1","destPos","hLen","T","U","createPbkdf2","fnF","fnG","fnH","fnI","M","_finalized","throwIfNotStringOrBuffer","EE","source","ondata","pause","ondrain","resume","_isStdio","onclose","didOnEnd","cleanup","ReadableState","EElistenerCount","debugUtil","debuglog","BufferList","kProxyEvents","readableObjectMode","readableHwm","readableHighWaterMark","pipes","pipesCount","flowing","endEmitted","reading","needReadable","emittedReadable","readableListening","resumeScheduled","awaitDrain","readingMore","decoder","_read","readableAddChunk","addToFront","skipChunkCheck","emitReadable","onEofChunk","chunkInvalid","addChunk","maybeReadMore","needMoreData","isPaused","setEncoding","MAX_HWM","howMuchToRead","head","computeNewHighWaterMark","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","clear","hasStrings","tail","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","nOrig","doRead","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onfinish","cleanedUp","pipeOnDrain","increasedAwaitDrain","dests","splice","ev","wrap","paused","_fromList","emitErrorNT","readableDestroyed","writableDestroyed","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","flush","_this2","err2","K","W","Sha256","_w","maj","sigma0","sigma1","gamma0","_f","_g","_h","T1","T2","H","Sha512","Ch","xl","Gamma0","Gamma0l","Gamma1","Gamma1l","getCarry","_ah","_bh","_ch","_dh","_eh","_fh","_gh","_hh","_al","_bl","_cl","_dl","_el","_fl","_gl","_hl","fh","gh","hh","fl","gl","xh","gamma0l","gamma1","gamma1l","Wi7h","Wi7l","Wi16h","Wi16l","Wil","Wih","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","Kih","Kil","chh","chl","t1l","t1h","t2l","t2h","writeInt64BE","Legacy","md5","ZEROS","Hmac","blocksize","_alg","_key","ipad","_ipad","opad","_opad","Rand","generate","_rand","getBytes","getByte","ch32","maj32","p32","ft_1","s0_256","s1_256","g0_256","g1_256","shaCommon","sha256_K","SHA256","sha512_K","SHA512","ch64_hi","yh","yl","zh","ch64_lo","maj64_hi","maj64_lo","s0_512_hi","s0_512_lo","s1_512_hi","s1_512_lo","g0_512_hi","g0_512_lo","g1_512_hi","g1_512_lo","_prepareBlock","c0_hi","c0_lo","c1_hi","c1_lo","c2_hi","c2_lo","c3_hi","c3_lo","c4_hi","c4_lo","T1_hi","T1_lo","T2_hi","T2_lo","native","getTypeName","captureStackTrace","tfErrorString","valueTypeName","valueJson","getValue","__type","__value","__valueTypeName","label","tfPropertyErrorString","__label","__property","tfCustomError","decodeRaw","encodeRaw","lenR","lenS","__export","converter","checkForInput","throwForUpdateMaker","updateMaker","updateData","mainData","canAdd","canAddToArray","dupeCheckSet","Set","checkForOutput","outputIndex","checkHasKey","checkKeyVal","enumLength","kv","getEnumLength","myenum","inputCheckUncleanFinalized","needScriptSig","needWitnessScript","scriptSigOK","witnessScriptOK","hasOneFinal","updateGlobal","updateInput","updateOutput","addInputAttributes","addOutputAttributes","defaultVersionSetter","txBuf","defaultLocktimeSetter","support","iterable","blob","formData","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","iterator","Headers","consumed","bodyUsed","fileReaderReady","readBlobAsArrayBuffer","promise","bufferClone","view","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","readAsText","chars","readArrayBufferAsText","oldValue","has","methods","Request","upcased","credentials","signal","Response","bodyInit","redirectStatuses","redirect","DOMException","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","onreadystatechange","readyState","send","polyfill","jsonZoneFile","template","_zoneFileTemplate","getZoneFileTemplate","processOrigin","processTTL","ttl","processSOA","record","host","processNS","ip","processA","processAAAA","alias","processCNAME","preference","processMX","processPTR","txtData","txt","datum","processTXT","processSRV","processSPF","processURI","time","processValues","parseSOA","rr","soa","rrTokens","minimum","expire","retry","refresh","serial","rname","mname","parseNS","parseA","recordsSoFar","urrTokens","parseAAAA","parseCNAME","parseMX","parseTXT","tokenTxt","indexTXT","stripText","parsePTR","currentOrigin","fullname","parseSRV","parseSPF","parseURI","rrs","uRR","aaaa","cname","mx","ptr","srv","spf","parseRRs","captured","replacement","arrText","flatten","g1","removeComments","dummyConsensusHash","dummyZonefileHash","addOwnerInput","addChangeOut","ownerUTXO","ownerInput","fundTransaction","paymentAddress","inAmounts","changeIndex","txFee","outAmounts","returnTransactionHex","build","getTransactionSigner","fromHexString","transactions","makeRenewal","destinationAddress","ownerKeyIn","paymentKeyIn","paymentKey","ownerKey","txPromise","getNamePrice","getNamespaceBurnAddress","getUTXOs","getFeeRate","payerUtxos","ownerUtxos","ownerOutput","ownerOutputAddr","signingTxB","makeUpdate","getConsensusHash","updateTX","makePreorder","preorderPromise","preorderSkeleton","makeRegister","registerSkeleton","makeTransfer","transferTX","makeRevoke","revokeTX","makeNamespacePreorder","getNamespacePrice","makeNamespaceReveal","namespaceRevealTX","makeNamespaceReady","revealKeyIn","namespaceReadyTX","revealKey","makeBitcoinSpend","destinationIndex","feesToPay","feeForChange","outputAmount","makeNameImport","importerKeyIn","nameImportTX","importerKey","importerAddress","makeAnnounce","senderKeyIn","announceTX","senderKey","senderAddress","makeTokenTransfer","btcFunderKeyIn","separateFunder","btcKey","btcAddress","btcUTXOsPromise","senderUTXOs","btcUTXOs","tokenTransferTX","payerInput","estimatePreorder","paymentUtxos","preorderTX","outputsValue","estimateRegister","includingZonefile","estimateTransfer","estimateUpdate","estimateRenewal","renewalPromise","renewalTX","estimateRevoke","estimateNamespacePreorder","estimateNamespaceReveal","revealTX","estimateNamespaceReady","revealUtxos","readyTX","estimateNameImport","importUtxos","importTX","estimateAnnounce","senderUtxos","estimateTokenTransfer","APPS_NODE_INDEX","IDENTITY_KEYCHAIN","BLOCKSTACK_ON_BITCOIN","BITCOIN_BIP_44_PURPOSE","BITCOIN_COIN_TYPE","BITCOIN_ACCOUNT_INDEX","EXTERNAL_ADDRESS","CHANGE_ADDRESS","getNodePrivateKey","node","getNodePublicKey","BlockstackWallet","rootNode","toBase58","seed","fromSeed","keychain","fromBase58","deriveHardened","addressIndex","chainType","getNodeFromBitcoinKeychain","getBitcoinPrivateKeychain","identityIndex","getIdentityPrivateKeychain","identityNode","identityPrivateKeychain","publicKeyHex","getAddressFromBIP32Node","getBitcoinNode","neutered","keychainBase58","chain","appsNodeKey","appsNode","appIndex","hashCode","getLegacyAppNode","appIndexHexes","appNode","alwaysUncompressed","getIdentityAddressNode","identityKey","keyID","getAppsNode","getIdentitySalt","MAX_ALLOC","checkBuffer","keylen","checkParameters","sizes","rmd160","saltLen","getDigest","ipad1","ipad2","chinese_simplified","chinese_traditional","korean","french","italian","spanish","japanese","JA","english","EN","createArray","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","bip32_1","UINT256_TYPE","NETWORK_TYPE","BITCOIN","HIGHEST_BIT","BIP32","chainCode","__DEPTH","__INDEX","__PARENT_FINGERPRINT","isNeutered","fromPublicKeyLocal","depth","parentFingerprint","isHardened","hd","hmacSHA512","IL","IR","Ki","ki","fromPrivateKeyLocal","derivePath","splitPath","prevHd","indexStr","inString","sha256Hash","Constructor","_classCallCheck","custom","scope","Timeout","id","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","html","channel","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","documentElement","removeChild","attachEvent","task","trace","Sha","rotl30","ft","Sha1","rotl5","Sha224","Sha384","base58","checksumFn","checksum","newChecksum","decodeUnsafe","basex","_Buffer","BASE_MAP","xc","BASE","LEADER","FACTOR","iFACTOR","psz","zeroes","b256","it3","it4","vch","pbegin","pend","b58","it1","it2","repeat","webpackPolyfill","paths","ShortCurve","tinv","zeroA","threeA","endo","_getEndomorphism","_endoWnafT1","_endoWnafT2","Point","isRed","inf","JPoint","zOne","betas","_getEndoRoots","lambdas","vec","_getEndoBasis","ntinv","prevR","aprxSqrt","y1","y2","len1","_endoSplit","c1","c2","p1","p2","q1","q2","ax","rhs","_endoWnafMulAdd","npoints","ncoeffs","endoMul","obj2point","nx","ny","ys1","dyinv","jmulAdd","_precompute","negate","zinv","zinv2","ay","pz2","z2","s1","s2","h2","h3","nz","jx","jy","jz","jz4","jyd","jx2","jyd2","jyd4","t1","t2","dny","_zeroDbl","_threeDbl","_dbl","xx","yy","yyyy","yyyy8","c8","gamma","alpha","beta4","beta8","ggamma8","jy2","jxd4","jyd8","trpl","zz","mm","ee","yyu4","kbase","z3","pz3","eqXToP","zs","MontCurve","i4","a24","aa","bb","diffAdd","da","jumlAdd","other","EdwardsCurve","twisted","mOneA","oneC","_mulA","_mulC","lhs","pointFromY","_extDbl","nt","_projDbl","_extAdd","_projAdd","zi","sha1_K","SHA1","SHA224","SHA384","Kh","E","Ah","Bh","Dh","Eh","rh","sh","inner","outer","HmacDRBG","KeyPair","Signature","nh","priv","fromPrivate","pub","fromPublic","drbg","pers","persEnc","entropyEnc","nonce","ns2","_truncateToN","truncOnly","bkey","getPrivate","ns1","iter","kp","kpX","recoveryParam","canonical","sinv","recoverPubKey","isYOdd","isSecondKey","rInv","getKeyRecoveryParam","Qprime","predResist","minEntropy","_reseed","reseedInterval","V","nonceEnc","_hmac","kmac","reseed","addEnc","temp","_importPrivate","privEnc","_importPublic","pubEnc","_importDER","Position","place","getLength","initial","octetLen","rmPadding","constructLength","octets","slen","backHalf","EDDSA","pointClass","secret","keyFromSecret","hashInt","Rencoded","encodePoint","s_","pubBytes","S","makeSignature","SG","fromSecret","lastIx","normed","xIsOdd","encodeInt","decodeInt","_secret","_pub","_pubBytes","privBytes","getSecret","_R","_S","_Rencoded","_Sencoded","Sencoded","toBytes","ONE1","ZERO1","checkSig","extraEntropy","_LengthN","Length","_ArrayN","_BufferN","_HexN","_StringN","INT53_MAX","ArrayN","Finite","HexN","Int8","Int16","Int32","Int53","Range","_range","StringN","UInt16","networks_1","lazy","typef","OP_RETURN","stacksEqual","minimal","scriptNumSize","fromDER","bstart","hashTypeBuffer","OP_PUSHDATA1","OP_PUSHDATA2","pubkeys","signatures","isAcceptableSignature","allowIncomplete","OP_CHECKMULTISIG","_chunks","OP_CHECKSIG","_address","OP_DUP","OP_HASH160","OP_EQUALVERIFY","hash2","pkh","redeem","_redeem","OP_EQUAL","nameParts","checkRedeem","hasInput","hasWitness","richunks","EMPTY_BUFFER","_rchunks","fastMerkleRoot","errorMerkleNoTxes","errorWitnessNotSegwit","prevHash","merkleRoot","timestamp","witnessCommit","readTransaction","nTransactions","getWitnessCommit","mantissa","txesHaveWitnessCommit","hashes","rootHash","witnessCommits","hasWitnessCommit","headersOnly","getUTCDate","setUTCSeconds","txSize","checkTxRoots","__checkMerkleRoot","__checkWitnessCommit","checkProofOfWork","calculateTarget","actualMerkleRoot","calculateMerkleRoot","actualWitnessCommit","digestFn","results","bip174_1","utils_1","address_1","crypto_1","ecpair_1","DEFAULT_OPTS","maximumFeeRate","PsbtTransaction","__CACHE","__NON_WITNESS_UTXO_TX_CACHE","__NON_WITNESS_UTXO_BUF_CACHE","__TX_IN_CACHE","globalMap","dpew","cache","psbtBase","transactionFromBuffer","psbt","checkTxInputCache","combine","those","setMaximumFeeRate","satoshiPerByte","check32Bit","checkInputsForPartialSig","__EXTRACTED_TX","setLocktime","setInputSequence","addInputs","inputDatas","inputData","addNonWitnessTxCache","__FEE","__FEE_RATE","addOutputs","outputDatas","outputData","extractTransaction","disableFeeCheck","isFinalized","vsize","toFixed","checkFees","inputFinalizeGetAmts","getTxCacheValue","getFee","finalizeAllInputs","finalizeInput","isP2SH","isP2WSH","isSegwit","nonWitnessUtxoTx","nonWitnessUtxoTxFromCache","prevoutIndex","isP2WPKH","getScriptFromInput","scriptType","isP2PKH","isP2MS","isP2PK","classifyScript","hasSigs","canFinalize","pSig","checkPartialSigSighashes","payment","sigs","pk","ps","getSortedSigs","getPayment","witnessStackToScriptWitness","getFinalScripts","clearFinalizedInput","validateSignaturesOfAllInputs","validateSignaturesOfInput","mySigs","hashCache","scriptCache","sighashCache","getHashForSig","checkScriptForPubkey","keypair","signAllInputsHD","hdKeyPair","sighashTypes","signInputHD","signAllInputsHDAsync","promises","signInputHDAsync","getSignersFromHD","signInput","signInputAsync","signAllInputs","signAllInputsAsync","getHashAndSighashType","toBase64","addUnknownKeyValToGlobal","addUnknownKeyValToInput","addUnknownKeyValToOutput","checkTxEmpty","getInputOutputCounts","inputCount","outputCount","neededSigs","isPaymentFactory","isP2WSHScript","action","throws","pSigs","scriptItems","witnessItems","getPsigsFromInputFinalScripts","whitelist","pubkeyHash","decompiled","element","scriptCheckerFactory","paymentScriptName","redeemScriptOutput","checkRedeemScript","checkWitnessScript","mustFinalize","sighashTypeToString","prevoutHash","utxoHash","prevout","signingScript","_script","myDerivations","bipDv","masterFingerprint","scriptWitnessToWitnessStack","varintLen","selfIndex","txCache","inputAmount","nwTx","fee","combiner_1","parser_1","txFromBuffer","psbtFromBuffer","psbtToBuffer","unknownKeyVals","addKeyVals","keyPusher","selfSet","selfKeyVals","otherKeyVals","newKv","getTx","getKeySet","psbts","psbtToKeyVals","others","selfTx","selfGlobalSet","globalKeyVals","selfInputSets","inputKeyVals","selfOutputSets","outputKeyVals","otherTx","inputSet","outputSet","psbtFromKeyVals","globalMapKeyVals","tools_1","checkKeyBuffer","keyBuf","keyNum","txCount","UNSIGNED_TX","GLOBAL_XPUB","NON_WITNESS_UTXO","WITNESS_UTXO","SIGHASH_TYPE","FINAL_SCRIPTSIG","FINAL_SCRIPTWITNESS","POR_COMMITMENT","txGetter","varSlice","getKeyValue","checkEndOfKeyValPairs","isEnd","globalKeyIndex","hexKey","unsignedTxMaps","inputKeyIndex","outputKeyIndex","extendedPubkey","isHard","epk","mfp","dupeSet","dupeString","currentData","newData","rLen","sLen","isDerSigWithSighash","_offset","scriptLen","TYPE_BYTE","pubkeyTypes","globalBuffer","keyValsOrEmptyToBuffer","inputBuffers","outputBuffers","sortKeyVals","keyValsFromMap","keyValMap","converterFactory","keyHexSet","encodedKeyVals","baddress","classify","SCRIPT_TYPES","PREVOUT_TYPES","tfMessage","__PREV_TX_SET","__INPUTS","__USE_LOW_R","setLockTime","__addInputUnsafe","vin","redeemScriptType","P2MS","unmatched","pubKey","fixMultisigOrder","setLowR","setting","__canModifyInputs","txIsTransaction","__canModifyOutputs","__build","signParams","witnessValue","ourPubKey","signatureHash","useLowR","signed","trySign","needsOutputs","prevOutScriptType","prevOutType","posType","checkSignArgs","canSign","prepared","p2wshAlt","p2shAlt","expanded","expandOutput","signScript","P2WPKH","P2WSH","witnessScriptType","P2SH","signType","maxSignatures","P2PKH","prepareInput","getSigningData","__needsOutputs","prevTxOut","expandInput","witnessStack","ssType","wsType","NONSTANDARD","P2PK","outputType","__overMaximumFees","signatureHashType","signingHashType","nInputs","nOutputs","pkh1","pkh2","wpkh1","wpkh2","multisig","nullData","witnessCommitment","witnessPubKeyHash","witnessScriptHash","NULLDATA","WITNESS_COMMITMENT","partialSignature","p2wpkho","p2wsho","lastChunk","scriptSigChunks","redeemScriptChunks","HEADER","commitment","witnessScriptChunks","witnessRawScriptSig","pad_string_1","fromBase64","base64url","stringLength","paddedStringLength","getParamBytesForAlg","MAX_OCTET","ENCODED_TAG_SEQ","TAG_SEQ","ENCODED_TAG_INT","TAG_INT","signatureAsBuffer","countPadding","stop","derToJose","paramBytes","maxEncodedParamLength","inputLength","seqLength","rLength","rOffset","sLength","sOffset","rPadding","sPadding","joseToDer","signatureBytes","rsBytes","shortLength","getParamSize","keySize","paramBytesForAlg","ES256","ES384","ES512","async","_extend","_merge","Customisable","extend","reset","remove","fields","_typeIs","field","Inspection","schema","_stack","_schema","_custom","_getDepth","_dumpStack","_deeperObject","_deeperArray","_back","_simpleType","candidate","getIndexes","indexes","_formats","_validationAttribut","report","_realType","uniqueness","reported","pattern","regexs","regex","validDate","exactLength","ne","someKeys","candidat","_keys","intruder","asyncExec","asyncProperties","_validate","asyncItems","_asyncValidationAttribut","eachSeries","series","_asyncValidate","timesSeries","Validation","_error","_basicFields","_customFields","newErr","userCode","userError","userAlias","format","_forceType","post","def","parseFloat","integer","joinWith","boolean","substring","splitWith","_applyRules","upper","lower","capitalize","ucfirst","_sanitizationAttribut","rules","modified","rule","postTest","gap","_sanitize","_asyncSanitizationAttribut","execs","globing","_asyncSanitize","Sanitization","_reporting","newNot","reporting","sanitize","waterfall","inter","INT_MIN","INT_MAX","int","float","bool","char","_formatSample","toLocaleTimeString","hour12","numeric","_getLimits","_typeGenerator","rk","randomKey","any","CandidateGenerator","_instance","SchemaInspector","newSanitization","newValidation","callArgs","initialParams","hasSetImmediate","hasNextTick","fallback","defer","setImmediate$1","asyncify","func","isAsync","handlePromise","invokeCallback","wrapAsync","asyncFn","awaitify","arity","cbArgs","applyEach","eachfn","fns","_asyncMap","iteratee","_iteratee","iterCb","isArrayLike","breakLoop","wrapper","callFn","createIterator","coll","createArrayIterator","okeys","getIterator","createES2015Iterator","onlyOnce","asyncEachOfLimit","canceled","awaiting","running","replenish","iterDone","iterateeCallback","handleError","eachOfLimit","isAsyncGenerator","asyncIterator","isAsyncIterable","nextElem","looping","elem","eachOfLimit$2","eachOfArrayLike","completed","iteratorCallback","eachOfGeneric","eachOf$1","map$1","applyEach$1","eachOfSeries$1","mapSeries$1","applyEachSeries","PROMISE_SYMBOL","promiseCallback","rej","auto","tasks","concurrency","numTasks","runningTasks","hasError","readyTasks","readyToCheck","uncheckedDependencies","enqueueTask","taskCallback","safeResults","rkey","taskName","processQueue","taskComplete","taskFn","runTask","getDependents","dependencies","remainingDependencies","dependencyName","taskListeners","currentTask","dependent","checkForDeadlocks","FN_ARGS","ARROW_FN_ARGS","FN_ARG_SPLIT","FN_ARG","STRIP_COMMENTS","autoInject","newTasks","fnIsAsync","hasNoDeps","newTask","parseParams","taskCb","newArgs","DLL","newNode","insertBefore","setInitial","insertAfter","removeLink","testFn","curr","dll","worker","_worker","numRunning","workersList","drain","saturated","unsaturated","empty","trigger","processingScheduled","_insert","insertAtFront","rejectOnError","started","_tasks","_createCB","idle","_maybeDrain","eventMethod","handleAndRemove","isProcessing","defineProperties","cargo","cargo$1","reduce$1","memo","seq","functions","_functions","newargs","nextargs","compose","mapLimit$1","concatLimit$1","mapResults","concat$1","concatSeries$1","constant","ignoredArgs","_createTester","getResult","testResult","testPassed","detect$1","detectLimit$1","detectSeries$1","consoleFunc","resultArgs","doWhilst$1","_fn","_test","truth","doUntil","_withoutIndex","eachLimit$2","eachSeries$1","ensureAsync","innerArgs","every$1","everyLimit$1","everySeries$1","filterArray","truthValues","filterGeneric","_filter","filter$1","filterLimit$1","filterSeries$1","forever$1","errback","groupByLimit$1","groupBy","groupBySeries","mapValuesLimit$1","newObj","mapValues","mapValuesSeries","memoize","hasher","queues","memoized","unmemoized","_parallel","parallel","parallelLimit","queue$1","Heap","heap","pushCount","MIN_SAFE_INTEGER","smaller","parent","percUp","top","percDown","priorityQueue","race$1","reduceRight","reversed","reflect","reflectCallback","retVal","reflectAll","reject$2","rejectLimit$1","rejectSeries$1","constant$1","DEFAULT_TIMES","DEFAULT_INTERVAL","times","intervalFunc","interval","errorFilter","parseTimes","_task","attempt","retryAttempt","retryable","some$1","someLimit$1","someSeries$1","sortBy$1","criteria","comparator","milliseconds","timer","timedOut","timesLimit","tryEach$1","unmemoize","whilst$1","rest","until","waterfall$1","taskIndex","nextTask","cargoQueue","concatLimit","concatSeries","detect","detectLimit","detectSeries","doWhilst","eachLimit","eachOf","eachOfSeries","everyLimit","everySeries","filterLimit","filterSeries","forever","groupByLimit","mapLimit","mapSeries","mapValuesLimit","race","rejectLimit","rejectSeries","someLimit","someSeries","sortBy","tryEach","whilst","allLimit","allSeries","anyLimit","anySeries","findLimit","findSeries","flatMap","flatMapLimit","flatMapSeries","forEachSeries","forEachLimit","forEachOf","forEachOfSeries","forEachOfLimit","inject","foldl","foldr","select","selectLimit","selectSeries","wrapSync","during","doDuring","singleMatcher","multiMatcher","decodeComponents","components","encodedURI","replaceMap","customDecodeURIComponent","separatorIndex","ZERO_BUF","toBrowser","checks","browserPbkdf2","resolvePromise","prom","checkNative","resolveZoneFileToPerson","isNameValid","NAME_PART_RULE","namePart","safety","addressCanReceiveName","getNamesOwned","validNames","nameValid","isInGracePeriod","getGracePeriod","gracePeriod","expire_block","ownsName","isNameAvailable","isNamespaceValid","isNamespaceAvailable","getNamespaceInfo","revealedNamespace","namespaceIsReady","ready","namespaceIsRevealed","isAccountSpendable","getAccountStatus","transfer_send_block_id"],"mappings":"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ACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,kEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,sEAIN3rB,IAAK,CACH3U,IAAK,EACLsgC,OAAQ,CACN,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,iEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,m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","file":"blockstack.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"blockstack\"] = factory();\n\telse\n\t\troot[\"blockstack\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 251);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\n\nimport { TransactionBuilder, Transaction, TxOutput } from 'bitcoinjs-lib'\nimport * as BN from 'bn.js'\nimport { NotEnoughFundsError } from '../errors'\nimport { TransactionSigner } from './signers'\nimport { UTXO } from '../network'\nimport { hashSha256Sync } from '../encryption/sha2Hash'\nimport { hashRipemd160 } from '../encryption/hashRipemd160'\n\n\n/**\n * \n * @ignore\n */\nexport const DUST_MINIMUM = 5500\n\n/**\n * Creates a RIPEMD160(SHA256(input)) hash.\n * @ignore\n */\nexport function hash160(buff: Buffer) {\n  const sha256 = hashSha256Sync(buff)\n  return hashRipemd160(sha256)\n}\n\n/**\n * Creates a SHA256 hash, truncated to 128 bits. \n * @ignore\n */\nexport function hash128(buff: Buffer) {\n  const sha256 = hashSha256Sync(buff)\n  return sha256.slice(0, 16)\n}\n\n\n// COPIED FROM coinselect, because 1 byte matters sometimes.\n// baseline estimates, used to improve performance\nconst TX_EMPTY_SIZE = 4 + 1 + 1 + 4\nconst TX_INPUT_BASE = 32 + 4 + 1 + 4\nconst TX_INPUT_PUBKEYHASH = 107\nconst TX_OUTPUT_BASE = 8 + 1\nconst TX_OUTPUT_PUBKEYHASH = 25\n\ntype txPoint = {\n  script: { length: number }\n}\n\nfunction inputBytes(input: txPoint | null) {\n  if (input && input.script && input.script.length > 0) {\n    return TX_INPUT_BASE + input.script.length\n  } else {\n    return TX_INPUT_BASE + TX_INPUT_PUBKEYHASH\n  }\n}\n\nfunction outputBytes(output: txPoint | null) {\n  if (output && output.script && output.script.length > 0) {\n    return TX_OUTPUT_BASE + output.script.length\n  } else {\n    return TX_OUTPUT_BASE + TX_OUTPUT_PUBKEYHASH\n  }\n}\n\nfunction transactionBytes(inputs: Array<txPoint | null>, outputs: Array<txPoint | null>) {\n  return TX_EMPTY_SIZE\n    + inputs.reduce((a: number, x: txPoint | null) => (a + inputBytes(x)), 0)\n    + outputs.reduce((a: number, x: txPoint | null) => (a + outputBytes(x)), 0)\n}\n\n/**\n * \n * @ignore\n */\nexport function getTransactionInsideBuilder(txBuilder: TransactionBuilder) {\n  return ((txBuilder as any).__TX as Transaction)\n}\n\nfunction getTransaction(txIn: Transaction | TransactionBuilder) {\n  if (txIn instanceof Transaction) {\n    return txIn\n  }\n  return getTransactionInsideBuilder(txIn)\n}\n\n//\n\n/**\n * \n * @ignore\n */\nexport function estimateTXBytes(txIn: Transaction | TransactionBuilder,\n                                additionalInputs: number,\n                                additionalOutputs: number) {\n  const innerTx = getTransaction(txIn)\n  const dummyInputs: Array<null> = new Array(additionalInputs)\n  dummyInputs.fill(null)\n  const dummyOutputs: Array<null> = new Array(additionalOutputs)\n  dummyOutputs.fill(null)\n\n  const inputs: Array<null | txPoint> = [].concat(innerTx.ins, dummyInputs)\n  const outputs: Array<null | txPoint> = [].concat(innerTx.outs, dummyOutputs)\n\n  return transactionBytes(inputs, outputs)\n}\n\n/**\n * \n * @ignore\n */\nexport function sumOutputValues(txIn: Transaction | TransactionBuilder) {\n  const innerTx = getTransaction(txIn)\n  return innerTx.outs.reduce((agg, x) => agg + (x as TxOutput).value, 0)\n}\n\n/**\n * \n * @ignore\n */\nexport function decodeB40(input: string): string {\n  // treat input as a base40 integer, and output a hex encoding\n  // of that integer.\n  //\n  //   for each digit of the string, find its location in `characters`\n  //    to get the value of the digit, then multiply by 40^(-index in input)\n  // e.g.,\n  // the 'right-most' character has value: (digit-value) * 40^0\n  //  the next character has value: (digit-value) * 40^1\n  //\n  // hence, we reverse the characters first, and use the index\n  //  to compute the value of each digit, then sum\n  const characters = '0123456789abcdefghijklmnopqrstuvwxyz-_.+'\n  const base = new BN(40)\n  const inputDigits = input.split('').reverse()\n  const digitValues = inputDigits.map(\n    ((character: string, exponent: number) => new BN(characters.indexOf(character))\n      .mul(base.pow(new BN(exponent))))\n  )\n  const sum = digitValues.reduce(\n    (agg: BN, cur: BN) => agg.add(cur),\n    new BN(0)\n  )\n  return sum.toString(16, 2)\n}\n\n/**\n * Adds UTXOs to fund a transaction\n * @param {TransactionBuilder} txBuilderIn - a transaction builder object to add the inputs to. this\n *    object is _always_ mutated. If not enough UTXOs exist to fund, the tx builder object\n *    will still contain as many inputs as could be found.\n * @param {Array<{value: number, tx_hash: string, tx_output_n}>} utxos - the utxo set for the\n *    payer's address.\n * @param {number} amountToFund - the amount of satoshis to fund in the transaction. the payer's\n *    utxos will be included to fund up to this amount of *output* and the corresponding *fees*\n *    for those additional inputs\n * @param {number} feeRate - the satoshis/byte fee rate to use for fee calculation\n * @param {boolean} fundNewFees - if true, this function will fund `amountToFund` and any new fees\n *    associated with including the new inputs.\n *    if false, this function will fund _at most_ `amountToFund`\n * @returns {number} - the amount of leftover change (in satoshis)\n * @private\n * @ignore\n */\nexport function addUTXOsToFund(txBuilderIn: TransactionBuilder,\n                               utxos: Array<UTXO>,\n                               amountToFund: number, feeRate: number,\n                               fundNewFees: boolean = true): number {\n  if (utxos.length === 0) {\n    throw new NotEnoughFundsError(amountToFund)\n  }\n\n  // how much are we increasing fees by adding an input ?\n  const newFees = feeRate * (estimateTXBytes(txBuilderIn, 1, 0)\n                             - estimateTXBytes(txBuilderIn, 0, 0))\n  let utxoThreshhold = amountToFund\n  if (fundNewFees) {\n    utxoThreshhold += newFees\n  }\n\n  const goodUtxos = utxos.filter(utxo => utxo.value >= utxoThreshhold)\n  if (goodUtxos.length > 0) {\n    goodUtxos.sort((a, b) => a.value - b.value)\n    const selected = goodUtxos[0]\n    let change = selected.value - amountToFund\n    if (fundNewFees) {\n      change -= newFees\n    }\n\n    txBuilderIn.addInput(selected.tx_hash, selected.tx_output_n)\n    return change\n  } else {\n    utxos.sort((a, b) => b.value - a.value)\n    const largest = utxos[0]\n\n    if (newFees >= largest.value) {\n      throw new NotEnoughFundsError(amountToFund)\n    }\n\n    txBuilderIn.addInput(largest.tx_hash, largest.tx_output_n)\n\n    let remainToFund = amountToFund - largest.value\n    if (fundNewFees) {\n      remainToFund += newFees\n    }\n\n    return addUTXOsToFund(txBuilderIn, utxos.slice(1),\n                          remainToFund, feeRate, fundNewFees)\n  }\n}\n\n\nexport function signInputs(txB: TransactionBuilder,\n                           defaultSigner: TransactionSigner,\n                           otherSigners?: Array<{index: number, signer: TransactionSigner}>) {\n  const txInner = getTransactionInsideBuilder(txB)\n  const signerArray = txInner.ins.map(() => defaultSigner)\n  if (otherSigners) {\n    otherSigners.forEach((signerPair) => {\n      signerArray[signerPair.index] = signerPair.signer\n    })\n  }\n  let signingPromise = Promise.resolve()\n  for (let i = 0; i < txInner.ins.length; i++) {\n    signingPromise = signingPromise.then(\n      () => signerArray[i].signTransaction(txB, i)\n    )\n  }\n  return signingPromise.then(() => txB)\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bip32 = require('bip32');\nexports.bip32 = bip32;\nconst address = require('./address');\nexports.address = address;\nconst crypto = require('./crypto');\nexports.crypto = crypto;\nconst ECPair = require('./ecpair');\nexports.ECPair = ECPair;\nconst networks = require('./networks');\nexports.networks = networks;\nconst payments = require('./payments');\nexports.payments = payments;\nconst script = require('./script');\nexports.script = script;\nvar block_1 = require('./block');\nexports.Block = block_1.Block;\nvar psbt_1 = require('./psbt');\nexports.Psbt = psbt_1.Psbt;\nvar script_1 = require('./script');\nexports.opcodes = script_1.OPS;\nvar transaction_1 = require('./transaction');\nexports.Transaction = transaction_1.Transaction;\nvar transaction_builder_1 = require('./transaction_builder');\nexports.TransactionBuilder = transaction_builder_1.TransactionBuilder;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","\n/**\n* @ignore\n*/\nexport const ERROR_CODES = {\n  MISSING_PARAMETER: 'missing_parameter',\n  REMOTE_SERVICE_ERROR: 'remote_service_error',\n  INVALID_STATE: 'invalid_state',\n  NO_SESSION_DATA: 'no_session_data',\n  DOES_NOT_EXIST: 'does_not_exist',\n  FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n  INVALID_DID_ERROR: 'invalid_did_error',\n  NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n  INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n  LOGIN_FAILED_ERROR: 'login_failed',\n  SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n  CONFLICT_ERROR: 'conflict_error',\n  NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n  BAD_PATH_ERROR: 'bad_path_error',\n  VALIDATION_ERROR: 'validation_error',\n  PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n  PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n  UNKNOWN: 'unknown'\n}\n\nObject.freeze(ERROR_CODES)\n\n/**\n* @ignore\n*/\ntype ErrorData = {\n  code: string,\n  parameter?: string,\n  message: string\n}\n\n/**\n* @ignore\n*/\nexport class BlockstackError extends Error {\n  message: string\n\n  code: string\n\n  parameter?: string\n\n  constructor(error: ErrorData) {\n    super()\n    let message = error.message\n    let bugDetails = `Error Code: ${error.code}`\n    let stack = this.stack\n    if (!stack) { \n      try {\n        throw new Error()\n      } catch (e) {\n        stack = e.stack\n      }\n    } else {\n      bugDetails += `Stack Trace:\\n${stack}`\n    }\n    message += `\\nIf you believe this exception is caused by a bug in blockstack.js,\n      please file a bug report: https://github.com/blockstack/blockstack.js/issues\\n\\n${bugDetails}`\n    this.message = message\n    this.code = error.code\n    this.parameter = error.parameter ? error.parameter : null\n  }\n  \n  toString() {\n    return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`\n  }\n}\n\n/**\n* @ignore\n*/\nexport class InvalidParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter: '' })\n    this.name = 'MissingParametersError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class MissingParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter })\n    this.name = 'MissingParametersError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class RemoteServiceError extends BlockstackError {\n  response: Response\n\n  constructor(response: Response, message: string = '') {\n    super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message })\n    this.response = response\n  }\n}\n\n/**\n* @ignore\n*/\nexport class InvalidDIDError extends BlockstackError {\n  constructor(message: string = '') {\n    super({ code: ERROR_CODES.INVALID_DID_ERROR, message })\n    this.name = 'InvalidDIDError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class NotEnoughFundsError extends BlockstackError {\n  leftToFund: number\n\n  constructor(leftToFund: number) {\n    const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`\n    super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message })\n    this.leftToFund = leftToFund\n    this.name = 'NotEnoughFundsError'\n    this.message = message\n  }\n}\n\n/**\n* @ignore\n*/\nexport class InvalidAmountError extends BlockstackError {\n  fees: number\n\n  specifiedAmount: number\n\n  constructor(fees: number, specifiedAmount: number) {\n    const message = `Not enough coin to fund fees transaction fees. Fees would be ${fees},`\n          + ` specified spend is  ${specifiedAmount}`\n    super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message })\n    this.specifiedAmount = specifiedAmount\n    this.fees = fees\n    this.name = 'InvalidAmountError'\n    this.message = message\n  }\n}\n\n/**\n* @ignore\n*/\nexport class LoginFailedError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to login: ${reason}`\n    super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message })\n    this.message = message\n    this.name = 'LoginFailedError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class SignatureVerificationError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to verify signature: ${reason}`\n    super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message })\n    this.message = message\n    this.name = 'SignatureVerificationError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class FailedDecryptionError extends BlockstackError {\n  constructor(message: string = 'Unable to decrypt cipher object.') {\n    super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message })\n    this.message = message\n    this.name = 'FailedDecryptionError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class InvalidStateError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message })\n    this.message = message\n    this.name = 'InvalidStateError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class NoSessionDataError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message })\n    this.message = message\n    this.name = 'NoSessionDataError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport interface GaiaHubErrorResponse {\n  status: number, \n  statusText: string,\n  body?: string | any\n}\n\nexport interface HubErrorDetails {\n  message?: string\n  statusCode: number\n  statusText: string\n  [prop: string]: any\n}\n\n/**\n* @ignore\n*/\nexport class GaiaHubError extends BlockstackError {\n  hubError: HubErrorDetails\n\n  constructor(error: ErrorData, response: GaiaHubErrorResponse) {\n    super(error)\n    if (response) {\n      this.hubError = {\n        statusCode: response.status,\n        statusText: response.statusText\n      }\n      if (typeof response.body === 'string') {\n        this.hubError.message = response.body\n      } else if (typeof response.body === 'object') {\n        Object.assign(this.hubError, response.body)\n      }\n    }\n  }\n}\n\n/**\n* @ignore\n*/\nexport class DoesNotExist extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response)\n    this.name = 'DoesNotExist'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class ConflictError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response)\n    this.name = 'ConflictError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class NotEnoughProofError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response)\n    this.name = 'NotEnoughProofError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class BadPathError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response)\n    this.name = 'BadPathError'\n  }\n}\n\n/**\n* @ignore\n*/\nexport class ValidationError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response)\n    this.name = 'ValidationError'\n  }\n}\n\n/**\n * @ignore\n */\nexport class PayloadTooLargeError extends GaiaHubError {\n  /** Can be `null` when an oversized payload is detected client-side. */\n  hubError: HubErrorDetails\n\n  maxUploadByteSize: number;\n\n  constructor(message: string, response: GaiaHubErrorResponse, maxUploadByteSize: number) {\n    super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response)\n    this.name = 'PayloadTooLargeError'\n    this.maxUploadByteSize = maxUploadByteSize\n  }\n}\n\n/**\n * @ignore\n */\nexport class PreconditionFailedError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response)\n    this.name = 'PreconditionFailedError'\n  }\n}\n","import { network } from './network'\n\n/**\n* @ignore\n*/\nconst config = {\n  network: network.defaults.MAINNET_DEFAULT,\n  logLevel: 'debug'\n}\n\nexport { config }\n","// eslint-disable-next-line import/no-unassigned-import\nimport 'cross-fetch/polyfill'\n\n/** @ignore */\nexport async function fetchPrivate(input: RequestInfo, init?: RequestInit): Promise<Response> {\n  const defaultFetchOpts: RequestInit = {\n    referrer: 'no-referrer',\n    referrerPolicy: 'no-referrer'\n  }\n  const fetchOpts = Object.assign(defaultFetchOpts, init)\n  // eslint-disable-next-line no-restricted-globals\n  const fetchResult = await fetch(input, fetchOpts)\n  return fetchResult\n}\n","import { Logger } from './logger'\nimport { \n  BadPathError, \n  ConflictError, \n  DoesNotExist,\n  GaiaHubErrorResponse,\n  NotEnoughProofError, \n  PayloadTooLargeError, \n  ValidationError,\n  PreconditionFailedError\n} from './errors'\n\n\n/**\n *  @ignore\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack'\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextYear() {\n  return new Date(\n    new Date().setFullYear(\n      new Date().getFullYear() + 1\n    )\n  )\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextMonth() {\n  return new Date(\n    new Date().setMonth(\n      new Date().getMonth() + 1\n    )\n  )\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextHour() {\n  return new Date(\n    new Date().setHours(\n      new Date().getHours() + 1\n    )\n  )\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0\n  }\n  return Math.floor(megabytes * 1024 * 1024)\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size. \n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16\n  return cipherTextLength\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length. \n * This is equivalent to the byte length when the string is ASCII or UTF8-8 \n * encoded.  \n * @param number \n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = (Math.ceil(inputByteLength / 3) * 4)\n  return encodedLength\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n */\n\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i')\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?'\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`)\n  } else {\n    return `${uri}${separator}${key}=${value}`\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n */\n\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined) {\n    v1 = '0.0.0'\n  }\n\n  if (v2 === undefined) {\n    v2 = '0.0.0'\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10))\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10))\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0)\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false\n    }\n  }\n  return true\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n */\nexport function makeUUID4() {\n  let d = new Date().getTime()\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now() // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16)\n  })\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    // The globally scoped WHATWG `URL` class is available in modern browsers and\n    // NodeJS v10 or higher. In older NodeJS versions it must be required from the\n    // `url` module.\n    let parseUrl: (url: string) => URL\n    if (typeof URL !== 'undefined') {\n      parseUrl = url => new URL(url)\n    } else {\n      try {\n        // eslint-disable-next-line import/no-nodejs-modules, global-require\n        const nodeUrl = (require('url') as typeof import('url')).URL\n        parseUrl = url => new nodeUrl(url)\n      } catch (error) {\n        console.log(error)\n        console.error('Global URL class is not available')\n      }\n    }\n\n    const parsedUri1 = parseUrl(uri1)\n    const parsedUri2 = parseUrl(uri2)\n\n    const port1 = parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80)\n    const port2 = parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80)\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute: (uri1.includes('http://') || uri1.includes('https://'))\n      && (uri2.includes('http://') || uri2.includes('https://'))\n    }\n\n    return match.scheme && match.hostname && match.port && match.absolute\n  } catch (error) {\n    console.log(error)\n    console.log('Parsing error in same URL origin check')\n    // Parse error\n    return false\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the \n * currently executing environment. \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n * \n * This could be switched to `globalThis` once it is standardized and widely available. \n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self\n  }\n  if (typeof window !== 'undefined') {\n    return window\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js \n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the \n  // `window` global object as well. \n  if (typeof global !== 'undefined') {\n    return (global as unknown) as Window\n  }\n  throw new Error('Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available')\n}\n\n\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown, \n  apiName: string, \n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found. \n   * @default false\n   */\n  throwIfUnavailable?: boolean; \n  /**\n   * Additional information to include in an error if thrown. \n   */\n  usageDesc?: string; \n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey. \n   * @default false\n   */\n  returnEmptyObject?: boolean; \n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it \n * is available within the currently executing environment. \n * When executing within the Node.js runtime these APIs are unavailable and will be \n * `undefined` unless the API is provided via polyfill. \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K, \n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = { }\n): Window[K] {\n  let globalScope: Window\n  try {\n    globalScope = getGlobalScope()\n    if (globalScope) {\n      const obj = globalScope[name]\n      if (obj) {\n        return obj\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`)\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc)\n    Logger.error(errMsg)\n    throw new Error(errMsg)\n  }\n  if (returnEmptyObject) { \n    return {} as any\n  }\n  return undefined\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`) \n * if they are available within the currently executing environment. \n * When executing within the Node.js runtime these APIs are unavailable will be `undefined` \n * unless the API is provided via polyfill. \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[], \n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window\n  try {\n    globalScope = getGlobalScope()\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`)\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc)\n      Logger.error(errMsg)\n      throw errMsg\n    } else if (returnEmptyObject) {\n      globalScope = {} as any\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i]\n    try {\n      if (globalScope) {\n        const obj = globalScope[name]\n        if (obj) {\n          result[name] = obj\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc)\n          Logger.error(errMsg)\n          throw new Error(errMsg)\n        } else if (returnEmptyObject) {\n          result[name] = {} as any\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc)\n        Logger.error(errMsg)\n        throw new Error(errMsg)\n      }\n    }\n  }\n  return result\n}\n\nasync function getGaiaErrorResponse(response: Response): Promise<GaiaHubErrorResponse> {\n  let responseMsg = ''\n  let responseJson: any | undefined\n  try {\n    responseMsg = await response.text()\n    try {\n      responseJson = JSON.parse(responseMsg)\n    } catch (error) {\n      // Use text instead\n    }\n  } catch (error) {\n    Logger.debug(`Error getting bad http response text: ${error}`)\n  }\n  const status = response.status\n  const statusText = response.statusText\n  const body = responseJson || responseMsg\n  return { status, statusText, body }\n}\n\n/**\n * Returns a BlockstackError correlating to the given HTTP response,\n * with the provided errorMsg. Throws if the HTTP response is 'ok'.\n */\nexport async function getBlockstackErrorFromResponse(\n  response: Response,\n  errorMsg: string,\n  hubConfig: import('./storage/hub').GaiaHubConfig | null\n): Promise<Error> {\n  if (response.ok) {\n    throw new Error('Cannot get a BlockstackError from a valid response.')\n  }\n  const gaiaResponse = await getGaiaErrorResponse(response)  \n  if (gaiaResponse.status === 401) {\n    return new ValidationError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 402) {\n    return new NotEnoughProofError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 403) {\n    return new BadPathError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 404) {\n    throw new DoesNotExist(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 409) {\n    return new ConflictError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 412) {\n    return new PreconditionFailedError(errorMsg, gaiaResponse)\n  } else if (gaiaResponse.status === 413) {\n    const maxBytes = megabytesToBytes(hubConfig?.max_file_upload_size_megabytes)\n    return new PayloadTooLargeError(errorMsg, gaiaResponse, maxBytes)\n  } else {\n    return new Error(errorMsg)\n  }\n}\n","import { config } from './config';\n\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\n\nconst levelToInt: { [level: string]: number } = {};\nconst intToLevel: { [int: number]: string } = {};\n\nfor (let index = 0; index < levels.length; index++) {\n  const level = levels[index];\n  levelToInt[level] = index;\n  intToLevel[index] = level;\n}\n\n/**\n * @ignore\n */\nexport class Logger {\n  static error(message: string) {\n    if (!this.shouldLog('error')) return;\n    console.error(this.logMessage('error', message));\n  }\n\n  static warn(message: string) {\n    if (!this.shouldLog('warn')) return;\n    console.warn(this.logMessage('warn', message));\n  }\n\n  static info(message: string) {\n    if (!this.shouldLog('info')) return;\n    console.log(this.logMessage('info', message));\n  }\n\n  static debug(message: string) {\n    if (!this.shouldLog('debug')) return;\n    console.log(this.logMessage('debug', message));\n  }\n\n  static logMessage(level: string, message: string) {\n    return `[${level.toUpperCase()}] ${message}`;\n  }\n\n  static shouldLog(level: string) {\n    const currentLevel = levelToInt[config.logLevel];\n    return currentLevel <= levelToInt[level];\n  }\n}\n","\nimport { ECPair, address, networks } from 'bitcoinjs-lib'\nimport { randomBytes } from './encryption/cryptoRandom'\nimport { hashSha256Sync } from './encryption/sha2Hash'\nimport { hashRipemd160 } from './encryption/hashRipemd160'\nimport { config } from './config'\n\n/**\n * \n * @param numberOfBytes \n * \n * @ignore\n */\nexport function getEntropy(arg: number): Buffer {\n  if (!arg) {\n    arg = 32\n  }\n  return randomBytes(arg)\n}\n\n/**\n* @ignore\n*/\nexport function makeECPrivateKey() {\n  const keyPair = ECPair.makeRandom({ rng: getEntropy })\n  return keyPair.privateKey.toString('hex')\n}\n\n/**\n* @ignore\n*/\nexport function publicKeyToAddress(publicKey: string | Buffer) {\n  const publicKeyBuffer = Buffer.isBuffer(publicKey) ? publicKey : Buffer.from(publicKey, 'hex')\n  const publicKeyHash160 = hashRipemd160(hashSha256Sync(publicKeyBuffer))\n  const result = address.toBase58Check(publicKeyHash160, networks.bitcoin.pubKeyHash)\n  return result\n}\n\n/**\n* @ignore\n*/\nexport function getPublicKeyFromPrivate(privateKey: string | Buffer) {\n  const privateKeyBuffer = Buffer.isBuffer(privateKey) ? privateKey : Buffer.from(privateKey, 'hex')\n  const keyPair = ECPair.fromPrivateKey(privateKeyBuffer)\n  return keyPair.publicKey.toString('hex')\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function hexStringToECPair(skHex: string): ECPair.ECPairInterface {\n  const ecPairOptions = {\n    network: config.network.layer1,\n    compressed: true\n  }\n\n  if (skHex.length === 66) {\n    if (skHex.slice(64) !== '01') {\n      throw new Error('Improperly formatted private-key hex string. 66-length hex usually '\n                      + 'indicates compressed key, but last byte must be == 1')\n    }\n    return ECPair.fromPrivateKey(Buffer.from(skHex.slice(0, 64), 'hex'), ecPairOptions)\n  } else if (skHex.length === 64) {\n    ecPairOptions.compressed = false\n    return ECPair.fromPrivateKey(Buffer.from(skHex, 'hex'), ecPairOptions)\n  } else {\n    throw new Error('Improperly formatted private-key hex string: length should be 64 or 66.')\n  }\n}\n\n/**\n * \n * @ignore\n */\nexport function ecPairToHexString(secretKey: ECPair.ECPairInterface) {\n  const ecPointHex = secretKey.privateKey.toString('hex')\n  if (secretKey.compressed) {\n    return `${ecPointHex}01`\n  } else {\n    return ecPointHex\n  }\n}\n\n/**\n * Creates a bitcoin address string from an ECPair\n * @private\n * @ignore\n */\nexport function ecPairToAddress(keyPair: ECPair.ECPairInterface) {\n  const sha256 = hashSha256Sync(keyPair.publicKey)\n  const hash160 = hashRipemd160(sha256)\n  return address.toBase58Check(hash160, keyPair.network.pubKeyHash)\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst scriptNumber = require('./script_number');\nconst scriptSignature = require('./script_signature');\nconst types = require('./types');\nconst bip66 = require('bip66');\nconst ecc = require('tiny-secp256k1');\nconst pushdata = require('pushdata-bitcoin');\nconst typeforce = require('typeforce');\nexports.OPS = require('bitcoin-ops');\nconst REVERSE_OPS = require('bitcoin-ops/map');\nconst OP_INT_BASE = exports.OPS.OP_RESERVED; // OP_1 - 1\nfunction isOPInt(value) {\n  return (\n    types.Number(value) &&\n    (value === exports.OPS.OP_0 ||\n      (value >= exports.OPS.OP_1 && value <= exports.OPS.OP_16) ||\n      value === exports.OPS.OP_1NEGATE)\n  );\n}\nfunction isPushOnlyChunk(value) {\n  return types.Buffer(value) || isOPInt(value);\n}\nfunction isPushOnly(value) {\n  return types.Array(value) && value.every(isPushOnlyChunk);\n}\nexports.isPushOnly = isPushOnly;\nfunction asMinimalOP(buffer) {\n  if (buffer.length === 0) return exports.OPS.OP_0;\n  if (buffer.length !== 1) return;\n  if (buffer[0] >= 1 && buffer[0] <= 16) return OP_INT_BASE + buffer[0];\n  if (buffer[0] === 0x81) return exports.OPS.OP_1NEGATE;\n}\nfunction chunksIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction chunksIsArray(buf) {\n  return types.Array(buf);\n}\nfunction singleChunkIsBuffer(buf) {\n  return Buffer.isBuffer(buf);\n}\nfunction compile(chunks) {\n  // TODO: remove me\n  if (chunksIsBuffer(chunks)) return chunks;\n  typeforce(types.Array, chunks);\n  const bufferSize = chunks.reduce((accum, chunk) => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      if (chunk.length === 1 && asMinimalOP(chunk) !== undefined) {\n        return accum + 1;\n      }\n      return accum + pushdata.encodingLength(chunk.length) + chunk.length;\n    }\n    // opcode\n    return accum + 1;\n  }, 0.0);\n  const buffer = Buffer.allocUnsafe(bufferSize);\n  let offset = 0;\n  chunks.forEach(chunk => {\n    // data chunk\n    if (singleChunkIsBuffer(chunk)) {\n      // adhere to BIP62.3, minimal push policy\n      const opcode = asMinimalOP(chunk);\n      if (opcode !== undefined) {\n        buffer.writeUInt8(opcode, offset);\n        offset += 1;\n        return;\n      }\n      offset += pushdata.encode(buffer, chunk.length, offset);\n      chunk.copy(buffer, offset);\n      offset += chunk.length;\n      // opcode\n    } else {\n      buffer.writeUInt8(chunk, offset);\n      offset += 1;\n    }\n  });\n  if (offset !== buffer.length) throw new Error('Could not decode chunks');\n  return buffer;\n}\nexports.compile = compile;\nfunction decompile(buffer) {\n  // TODO: remove me\n  if (chunksIsArray(buffer)) return buffer;\n  typeforce(types.Buffer, buffer);\n  const chunks = [];\n  let i = 0;\n  while (i < buffer.length) {\n    const opcode = buffer[i];\n    // data chunk\n    if (opcode > exports.OPS.OP_0 && opcode <= exports.OPS.OP_PUSHDATA4) {\n      const d = pushdata.decode(buffer, i);\n      // did reading a pushDataInt fail?\n      if (d === null) return null;\n      i += d.size;\n      // attempt to read too much data?\n      if (i + d.number > buffer.length) return null;\n      const data = buffer.slice(i, i + d.number);\n      i += d.number;\n      // decompile minimally\n      const op = asMinimalOP(data);\n      if (op !== undefined) {\n        chunks.push(op);\n      } else {\n        chunks.push(data);\n      }\n      // opcode\n    } else {\n      chunks.push(opcode);\n      i += 1;\n    }\n  }\n  return chunks;\n}\nexports.decompile = decompile;\nfunction toASM(chunks) {\n  if (chunksIsBuffer(chunks)) {\n    chunks = decompile(chunks);\n  }\n  return chunks\n    .map(chunk => {\n      // data?\n      if (singleChunkIsBuffer(chunk)) {\n        const op = asMinimalOP(chunk);\n        if (op === undefined) return chunk.toString('hex');\n        chunk = op;\n      }\n      // opcode!\n      return REVERSE_OPS[chunk];\n    })\n    .join(' ');\n}\nexports.toASM = toASM;\nfunction fromASM(asm) {\n  typeforce(types.String, asm);\n  return compile(\n    asm.split(' ').map(chunkStr => {\n      // opcode?\n      if (exports.OPS[chunkStr] !== undefined) return exports.OPS[chunkStr];\n      typeforce(types.Hex, chunkStr);\n      // data!\n      return Buffer.from(chunkStr, 'hex');\n    }),\n  );\n}\nexports.fromASM = fromASM;\nfunction toStack(chunks) {\n  chunks = decompile(chunks);\n  typeforce(isPushOnly, chunks);\n  return chunks.map(op => {\n    if (singleChunkIsBuffer(op)) return op;\n    if (op === exports.OPS.OP_0) return Buffer.allocUnsafe(0);\n    return scriptNumber.encode(op - OP_INT_BASE);\n  });\n}\nexports.toStack = toStack;\nfunction isCanonicalPubKey(buffer) {\n  return ecc.isPoint(buffer);\n}\nexports.isCanonicalPubKey = isCanonicalPubKey;\nfunction isDefinedHashType(hashType) {\n  const hashTypeMod = hashType & ~0x80;\n  // return hashTypeMod > SIGHASH_ALL && hashTypeMod < SIGHASH_SINGLE\n  return hashTypeMod > 0x00 && hashTypeMod < 0x04;\n}\nexports.isDefinedHashType = isDefinedHashType;\nfunction isCanonicalScriptSignature(buffer) {\n  if (!Buffer.isBuffer(buffer)) return false;\n  if (!isDefinedHashType(buffer[buffer.length - 1])) return false;\n  return bip66.check(buffer.slice(0, -1));\n}\nexports.isCanonicalScriptSignature = isCanonicalScriptSignature;\n// tslint:disable-next-line variable-name\nexports.number = scriptNumber;\nexports.signature = scriptSignature;\n","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    Buffer = require('buffer').Buffer;\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n    }\n\n    if (base === 16) {\n      this._parseHex(number, start);\n    } else {\n      this._parseBase(number, base, start);\n    }\n\n    if (number[0] === '-') {\n      this.negative = 1;\n    }\n\n    this.strip();\n\n    if (endian !== 'le') return;\n\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [ number & 0x3ffffff ];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [ 0 ];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this.strip();\n  };\n\n  function parseHex (str, start, end) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r <<= 4;\n\n      // 'a' - 'f'\n      if (c >= 49 && c <= 54) {\n        r |= c - 49 + 0xa;\n\n      // 'A' - 'F'\n      } else if (c >= 17 && c <= 22) {\n        r |= c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r |= c & 0xf;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    // Scan 24-bit chunks and add them to the number\n    var off = 0;\n    for (i = number.length - 6, j = 0; i >= start; i -= 6) {\n      w = parseHex(number, i, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      // NOTE: `0x3fffff` is intentional here, 26bits max shift + 24bit hex limb\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n      off += 24;\n      if (off >= 26) {\n        off -= 26;\n        j++;\n      }\n    }\n    if (i + 6 !== start) {\n      w = parseHex(number, start, i + 6);\n      this.words[j] |= (w << off) & 0x3ffffff;\n      this.words[j + 1] |= w >>> (26 - off) & 0x3fffff;\n    }\n    this.strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        r += c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        r += c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r += c;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [ 0 ];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype.strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  BN.prototype.inspect = function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  };\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16);\n  };\n\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\n    assert(typeof Buffer !== 'undefined');\n    return this.toArrayLike(Buffer, endian, length);\n  };\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    this.strip();\n    var littleEndian = endian === 'le';\n    var res = new ArrayType(reqLength);\n\n    var b, i;\n    var q = this.clone();\n    if (!littleEndian) {\n      // Assume big-endian\n      for (i = 0; i < reqLength - byteLength; i++) {\n        res[i] = 0;\n      }\n\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[reqLength - i - 1] = b;\n      }\n    } else {\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[i] = b;\n      }\n\n      for (; i < reqLength; i++) {\n        res[i] = 0;\n      }\n    }\n\n    return res;\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this.strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this.strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this.strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    var fftm = new FFTM();\n    return fftm.mulp(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out.strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this.strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) < num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this.strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this.strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q.strip();\n    }\n    a.strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modn = function modn (num) {\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return acc;\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this.strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      r.strip();\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n    return a.umod(this.m)._forceRed(this);\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1).toRed(this);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./signer\"));\n__export(require(\"./verifier\"));\n__export(require(\"./decode\"));\n__export(require(\"./errors\"));\n__export(require(\"./cryptoClients\"));\n//# sourceMappingURL=index.js.map","\n\nimport { TransactionBuilder, payments, address as bjsAddress, Transaction } from 'bitcoinjs-lib'\nimport * as BN from 'bn.js'\nimport {\n  decodeB40, hash160, hash128, DUST_MINIMUM\n} from './utils'\nimport { config } from '../config'\n\n// support v1 and v2 price API endpoint return values\ntype AmountTypeV1 = number\ntype AmountTypeV2 = { units: string, amount: BN }\ntype AmountType = AmountTypeV1 | AmountTypeV2\n\n// todo : add name length / character verification\n\n/**\n* @ignore\n*/\nexport class BlockstackNamespace {\n  namespaceID: string\n\n  version: number\n\n  lifetime: number\n\n  coeff: number\n\n  base: number\n\n  buckets: Array<number>\n\n  nonalphaDiscount: number\n\n  noVowelDiscount: number\n\n  constructor(namespaceID: string) {\n    if (namespaceID.length > 19) {\n      throw new Error('Namespace ID too long (19 chars max)')\n    }\n    if (!namespaceID.match('[0123456789abcdefghijklmnopqrstuvwxyz_-]+')) {\n      throw new Error('Namespace ID can only use characters 0123456789abcdefghijklmnopqrstuvwxyz-_')\n    }\n\n    this.namespaceID = namespaceID\n    this.version = -1\n    this.lifetime = -1\n    this.coeff = -1\n    this.base = -1\n    this.buckets = [-1]\n    this.nonalphaDiscount = -1\n    this.noVowelDiscount = -1\n  }\n\n  check() {\n    try {\n      this.setVersion(this.version)\n      this.setLifetime(this.lifetime)\n      this.setCoeff(this.coeff)\n      this.setBase(this.base)\n      this.setBuckets(this.buckets)\n      this.setNonalphaDiscount(this.nonalphaDiscount)\n      this.setNoVowelDiscount(this.noVowelDiscount)\n      return true\n    } catch (e) {\n      return false\n    }\n  }\n\n  setVersion(version: number) {\n    if (version < 0 || version > 2 ** 16 - 1) {\n      throw new Error('Invalid version: must be a 16-bit number')\n    }\n    this.version = version\n  }\n\n  setLifetime(lifetime: number) {\n    if (lifetime < 0 || lifetime > 2 ** 32 - 1) {\n      throw new Error('Invalid lifetime: must be a 32-bit number')\n    }\n    this.lifetime = lifetime\n  }\n\n  setCoeff(coeff: number) {\n    if (coeff < 0 || coeff > 255) {\n      throw new Error('Invalid coeff: must be an 8-bit number')\n    }\n    this.coeff = coeff\n  }\n\n  setBase(base: number) {\n    if (base < 0 || base > 255) {\n      throw new Error('Invalid base: must be an 8-bit number')\n    }\n    this.base = base\n  }\n\n  setBuckets(buckets: Array<number>) {\n    if (buckets.length !== 16) {\n      throw new Error('Invalid buckets: must have 16 entries')\n    }\n\n    for (let i = 0; i < buckets.length; i++) {\n      if (buckets[i] < 0 || buckets[i] > 15) {\n        throw new Error('Invalid buckets: must be 4-bit numbers')\n      }\n    }\n\n    this.buckets = buckets.slice(0)\n  }\n\n  setNonalphaDiscount(nonalphaDiscount: number) {\n    if (nonalphaDiscount <= 0 || nonalphaDiscount > 15) {\n      throw new Error('Invalid nonalphaDiscount: must be a positive 4-bit number')\n    }\n    this.nonalphaDiscount = nonalphaDiscount\n  }\n\n  setNoVowelDiscount(noVowelDiscount: number) {\n    if (noVowelDiscount <= 0 || noVowelDiscount > 15) {\n      throw new Error('Invalid noVowelDiscount: must be a positive 4-bit number')\n    }\n    this.noVowelDiscount = noVowelDiscount\n  }\n\n  toHexPayload() {\n    const lifeHex = `00000000${this.lifetime.toString(16)}`.slice(-8)\n    const coeffHex = `00${this.coeff.toString(16)}`.slice(-2)\n    const baseHex = `00${this.base.toString(16)}`.slice(-2)\n    const bucketHex = this.buckets.map(b => b.toString(16)).reduce((b1, b2) => b1 + b2, '')\n    const discountHex = this.nonalphaDiscount.toString(16) + this.noVowelDiscount.toString(16)\n    const versionHex = `0000${this.version.toString(16)}`.slice(-4)\n    const namespaceIDHex = Buffer.from(this.namespaceID).toString('hex')\n\n    return lifeHex + coeffHex + baseHex + bucketHex + discountHex + versionHex + namespaceIDHex\n  }\n}\n\n\n/**\n* @ignore\n*/\nfunction asAmountV2(amount: AmountType): AmountTypeV2 {\n  // convert an AmountType v1 or v2 to an AmountTypeV2.\n  // the \"units\" of a v1 amount type are always 'BTC'\n  if (typeof amount === 'number') {\n    return { units: 'BTC', amount: new BN(String(amount)) }\n  } else {\n    return { units: amount.units, amount: amount.amount }\n  }\n}\n\n/**\n* @ignore\n*/\nfunction makeTXbuilder() {\n  const txb = new TransactionBuilder(config.network.layer1)\n  txb.setVersion(1)\n  return txb\n}\n\n/**\n* @ignore\n*/\nfunction opEncode(opcode: string): string {\n  // NOTE: must *always* a 3-character string\n  const res = `${config.network.MAGIC_BYTES}${opcode}`\n  if (res.length !== 3) {\n    throw new Error('Runtime error: invalid MAGIC_BYTES')\n  }\n  return res\n}\n\n/**\n* @ignore\n*/\nexport function makePreorderSkeleton(\n  fullyQualifiedName: string, consensusHash: string, preorderAddress: string,\n  burnAddress: string, burn: AmountType,\n  registerAddress: string = null\n): Transaction {\n  // Returns a preorder tx skeleton.\n  //   with 3 outputs : 1. the Blockstack Preorder OP_RETURN data\n  //                    2. the Preorder's change address (5500 satoshi minimum)\n  //                    3. the BURN\n  //\n  // 0     2  3                                     23             39          47            66\n  // |-----|--|--------------------------------------|--------------|-----------|-------------|\n  // magic op  hash160(fqn,scriptPubkey,registerAddr) consensus hash token burn  token type\n  //                                                                 (optional)   (optional)\n  //\n  // output 0: name preorder code\n  // output 1: preorder address\n  // output 2: burn address\n  //\n  // Returns an unsigned serialized transaction.\n  const burnAmount = asAmountV2(burn)\n  const network = config.network\n  const nameBuff = Buffer.from(decodeB40(fullyQualifiedName), 'hex') // base40\n  const scriptPublicKey = bjsAddress.toOutputScript(preorderAddress, network.layer1)\n\n  const dataBuffers = [nameBuff, scriptPublicKey]\n\n  if (!!registerAddress) {\n    const registerBuff = Buffer.from(registerAddress, 'ascii')\n    dataBuffers.push(registerBuff)\n  }\n\n  const dataBuff = Buffer.concat(dataBuffers)\n\n  const hashed = hash160(dataBuff)\n\n  const opReturnBufferLen = burnAmount.units === 'BTC' ? 39 : 66\n  const opReturnBuffer = Buffer.alloc(opReturnBufferLen)\n  opReturnBuffer.write(opEncode('?'), 0, 3, 'ascii')\n  hashed.copy(opReturnBuffer, 3)\n  opReturnBuffer.write(consensusHash, 23, 16, 'hex')\n\n  if (burnAmount.units !== 'BTC') {\n    const burnHex = burnAmount.amount.toString(16, 2)\n    if (burnHex.length > 16) {\n      // exceeds 2**64; can't fit\n      throw new Error(`Cannot preorder '${fullyQualifiedName}': cannot fit price into 8 bytes`)\n    }\n    const paddedBurnHex = `0000000000000000${burnHex}`.slice(-16)\n\n    opReturnBuffer.write(paddedBurnHex, 39, 8, 'hex')\n    opReturnBuffer.write(burnAmount.units, 47, burnAmount.units.length, 'ascii')\n  }\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(preorderAddress, DUST_MINIMUM)\n\n  if (burnAmount.units === 'BTC') {\n    const btcBurnAmount = burnAmount.amount.toNumber()\n    tx.addOutput(burnAddress, btcBurnAmount)\n  } else {\n    tx.addOutput(burnAddress, DUST_MINIMUM)\n  }\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeRegisterSkeleton(\n  fullyQualifiedName: string, ownerAddress: string,\n  valueHash: string = null, burnTokenAmountHex: string = null\n) {\n  // Returns a register tx skeleton.\n  //   with 2 outputs : 1. The register OP_RETURN\n  //                    2. The owner address (can be different from REGISTER address on renewals)\n\n  // You MUST make the first input a UTXO from the current OWNER *or* the\n  //   funder of the PREORDER\n\n  // in the case of a renewal, this would need to be modified to include a change address\n  //  as output (3) before the burn output (4)\n\n  /*\n    Formats\n\n    No zonefile hash, and pay with BTC:\n\n    0    2  3                                  39\n    |----|--|----------------------------------|\n    magic op   name.ns_id (up to 37 bytes)\n\n\n    With zonefile hash, and pay with BTC:\n\n    0    2  3                                  39                  59\n    |----|--|----------------------------------|-------------------|\n    magic op   name.ns_id (37 bytes, 0-padded)     zone file hash\n\n    output 0: name registration code\n    output 1: owner address\n  */\n\n  let payload\n\n  if (!!burnTokenAmountHex && !valueHash) {\n    // empty value hash\n    valueHash = '0000000000000000000000000000000000000000'\n  }\n\n  if (!!valueHash) {\n    if (valueHash.length !== 40) {\n      throw new Error('Value hash length incorrect. Expecting 20-bytes, hex-encoded')\n    }\n    if (!!burnTokenAmountHex) {\n      if (burnTokenAmountHex.length !== 16) {\n        throw new Error('Burn field length incorrect.  Expecting 8-bytes, hex-encoded')\n      }\n    }\n\n    const payloadLen = burnTokenAmountHex ? 65 : 57\n    payload = Buffer.alloc(payloadLen, 0)\n    payload.write(fullyQualifiedName, 0, 37, 'ascii')\n    payload.write(valueHash, 37, 20, 'hex')\n    if (!!burnTokenAmountHex) {\n      payload.write(burnTokenAmountHex, 57, 8, 'hex')\n    }\n  } else {\n    payload = Buffer.from(fullyQualifiedName, 'ascii')\n  }\n\n  const opReturnBuffer = Buffer.concat([Buffer.from(opEncode(':'), 'ascii'), payload])\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(ownerAddress, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeRenewalSkeleton(\n  fullyQualifiedName: string, nextOwnerAddress: string, lastOwnerAddress: string,\n  burnAddress: string, burn: AmountType, valueHash: string = null\n) {\n  /*\n    Formats\n\n    No zonefile hash, and pay with BTC:\n\n    0    2  3                                  39\n    |----|--|----------------------------------|\n    magic op   name.ns_id (up to 37 bytes)\n\n\n    With zonefile hash, and pay with BTC:\n\n    0    2  3                                  39                  59\n    |----|--|----------------------------------|-------------------|\n    magic op   name.ns_id (37 bytes, 0-padded)     zone file hash\n\n\n   With renewal payment in a token:\n   (for register, tokens burned is not included)\n   (for renew, tokens burned is the number of tokens to burn)\n\n   0    2  3                                  39                  59                            67\n   |----|--|----------------------------------|-------------------|------------------------------|\n   magic op   name.ns_id (37 bytes, 0-padded)     zone file hash    tokens burned (big-endian)\n\n   output 0: renewal code\n   output 1: new owner address\n   output 2: current owner address\n   output 3: burn address\n  */\n  const burnAmount = asAmountV2(burn)\n  const network = config.network\n  const burnTokenAmount = burnAmount.units === 'BTC' ? null : burnAmount.amount\n  const burnBTCAmount = burnAmount.units === 'BTC' \n    ? burnAmount.amount.toNumber() : DUST_MINIMUM\n  \n  let burnTokenHex = null\n  if (!!burnTokenAmount) {\n    const burnHex = burnTokenAmount.toString(16, 2)\n    if (burnHex.length > 16) {\n      // exceeds 2**64; can't fit \n      throw new Error(`Cannot renew '${fullyQualifiedName}': cannot fit price into 8 bytes`)\n    }\n    burnTokenHex = `0000000000000000${burnHex}`.slice(-16)\n  }\n\n  const registerTX = makeRegisterSkeleton(\n    fullyQualifiedName, nextOwnerAddress, valueHash, burnTokenHex\n  )\n  const txB = TransactionBuilder.fromTransaction(\n    registerTX, network.layer1\n  )\n  txB.addOutput(lastOwnerAddress, DUST_MINIMUM)\n  txB.addOutput(burnAddress, burnBTCAmount)\n  return txB.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeTransferSkeleton(\n  fullyQualifiedName: string, consensusHash: string, newOwner: string,\n  keepZonefile: boolean = false\n): Transaction {\n  // Returns a transfer tx skeleton.\n  //   with 2 outputs : 1. the Blockstack Transfer OP_RETURN data\n  //                    2. the new owner with a DUST_MINIMUM value (5500 satoshi)\n  //\n  // You MUST make the first input a UTXO from the current OWNER\n  //\n  // Returns an unsigned serialized transaction.\n  /*\n    Format\n\n    0     2  3    4                   20              36\n    |-----|--|----|-------------------|---------------|\n    magic op keep  hash128(name.ns_id) consensus hash\n             data?\n\n    output 0: transfer code\n    output 1: new owner\n  */\n  const opRet = Buffer.alloc(36)\n  let keepChar = '~'\n  if (keepZonefile) {\n    keepChar = '>'\n  }\n\n  opRet.write(opEncode('>'), 0, 3, 'ascii')\n  opRet.write(keepChar, 3, 1, 'ascii')\n\n  const hashed = hash128(Buffer.from(fullyQualifiedName, 'ascii'))\n  hashed.copy(opRet, 4)\n  opRet.write(consensusHash, 20, 16, 'hex')\n\n  const opRetPayload = payments.embed({ data: [opRet] }).output\n\n  const tx = makeTXbuilder()\n\n  tx.addOutput(opRetPayload, 0)\n  tx.addOutput(newOwner, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeUpdateSkeleton(\n  fullyQualifiedName: string, consensusHash: string, valueHash: string\n): Transaction {\n  // Returns an update tx skeleton.\n  //   with 1 output : 1. the Blockstack update OP_RETURN\n  //\n  // You MUST make the first input a UTXO from the current OWNER\n  //\n  // Returns an unsigned serialized transaction.\n  //\n  // output 0: the revoke code\n  /*\n    Format:\n\n    0     2  3                                   19                      39\n    |-----|--|-----------------------------------|-----------------------|\n    magic op  hash128(name.ns_id,consensus hash) hash160(data)\n\n    output 0: update code\n  */\n\n  const opRet = Buffer.alloc(39)\n\n  const nameBuff = Buffer.from(fullyQualifiedName, 'ascii')\n  const consensusBuff = Buffer.from(consensusHash, 'ascii')\n\n  const hashedName = hash128(Buffer.concat(\n    [nameBuff, consensusBuff]\n  ))\n\n  opRet.write(opEncode('+'), 0, 3, 'ascii')\n  hashedName.copy(opRet, 3)\n  opRet.write(valueHash, 19, 20, 'hex')\n\n  const opRetPayload = payments.embed({ data: [opRet] }).output\n\n  const tx = makeTXbuilder()\n\n  tx.addOutput(opRetPayload, 0)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeRevokeSkeleton(fullyQualifiedName: string) {\n  // Returns a revoke tx skeleton\n  //    with 1 output: 1. the Blockstack revoke OP_RETURN\n  //\n  // You MUST make the first input a UTXO from the current OWNER\n  //\n  // Returns an unsigned serialized transaction\n  /*\n   Format:\n\n   0    2  3                             39\n   |----|--|-----------------------------|\n   magic op   name.ns_id (37 bytes)\n\n   output 0: the revoke code\n  */\n\n  const opRet = Buffer.alloc(3)\n\n  const nameBuff = Buffer.from(fullyQualifiedName, 'ascii')\n\n  opRet.write(opEncode('~'), 0, 3, 'ascii')\n\n  const opReturnBuffer = Buffer.concat([opRet, nameBuff])\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeNamespacePreorderSkeleton(\n  namespaceID: string, consensusHash: string, preorderAddress: string,\n  registerAddress: string, burn: AmountType\n): Transaction {\n  // Returns a namespace preorder tx skeleton.\n  // Returns an unsigned serialized transaction.\n  /*\n   Formats:\n\n   Without STACKS:\n\n   0     2   3                                      23               39\n   |-----|---|--------------------------------------|----------------|\n   magic op  hash(ns_id,script_pubkey,reveal_addr)   consensus hash\n\n\n   with STACKs:\n\n   0     2   3                                      23               39                         47\n   |-----|---|--------------------------------------|----------------|--------------------------|\n   magic op  hash(ns_id,script_pubkey,reveal_addr)   consensus hash    token fee (big-endian)\n\n   output 0: namespace preorder code\n   output 1: change address\n   otuput 2: burn address\n  */\n\n  const burnAmount = asAmountV2(burn)\n  if (burnAmount.units !== 'BTC' && burnAmount.units !== 'STACKS') {\n    throw new Error(`Invalid burnUnits ${burnAmount.units}`)\n  }\n\n  const network = config.network\n  const burnAddress = network.getDefaultBurnAddress()\n  const namespaceIDBuff = Buffer.from(decodeB40(namespaceID), 'hex') // base40\n  const scriptPublicKey = bjsAddress.toOutputScript(preorderAddress, network.layer1)\n  const registerBuff = Buffer.from(registerAddress, 'ascii')\n\n  const dataBuffers = [namespaceIDBuff, scriptPublicKey, registerBuff]\n  const dataBuff = Buffer.concat(dataBuffers)\n\n  const hashed = hash160(dataBuff)\n  \n  let btcBurnAmount = DUST_MINIMUM\n  let opReturnBufferLen = 39\n  if (burnAmount.units === 'STACKS') {\n    opReturnBufferLen = 47\n  } else {\n    btcBurnAmount = burnAmount.amount.toNumber()\n  }\n\n  const opReturnBuffer = Buffer.alloc(opReturnBufferLen)\n  opReturnBuffer.write(opEncode('*'), 0, 3, 'ascii')\n  hashed.copy(opReturnBuffer, 3)\n  opReturnBuffer.write(consensusHash, 23, 16, 'hex')\n\n  if (burnAmount.units === 'STACKS') {\n    const burnHex = burnAmount.amount.toString(16, 2)\n    const paddedBurnHex = `0000000000000000${burnHex}`.slice(-16)\n    opReturnBuffer.write(paddedBurnHex, 39, 8, 'hex')\n  }\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(preorderAddress, DUST_MINIMUM)\n  tx.addOutput(burnAddress, btcBurnAmount)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeNamespaceRevealSkeleton(\n  namespace: BlockstackNamespace, revealAddress: string\n) {\n  /*\n   Format:\n\n   0     2   3    7     8     9    10   11   12   13   14    15    16    17       18      20     39\n   |-----|---|----|-----|-----|----|----|----|----|----|-----|-----|-----|--------|-------|-------|\n   magic  op  life coeff. base 1-2  3-4  5-6  7-8  9-10 11-12 13-14 15-16 nonalpha version  ns ID\n                                                  bucket exponents        no-vowel\n                                                                          discounts\n   \n   output 0: namespace reveal code\n   output 1: reveal address\n  */\n  const hexPayload = namespace.toHexPayload()\n\n  const opReturnBuffer = Buffer.alloc(3 + hexPayload.length / 2)\n  opReturnBuffer.write(opEncode('&'), 0, 3, 'ascii')\n  opReturnBuffer.write(hexPayload, 3, hexPayload.length / 2, 'hex')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(revealAddress, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeNamespaceReadySkeleton(namespaceID: string) {\n  /*\n   Format:\n\n   0     2  3  4           23\n   |-----|--|--|------------|\n   magic op  .  ns_id\n\n   output 0: namespace ready code\n   */\n  const opReturnBuffer = Buffer.alloc(3 + namespaceID.length + 1)\n  opReturnBuffer.write(opEncode('!'), 0, 3, 'ascii')\n  opReturnBuffer.write(`.${namespaceID}`, 3, namespaceID.length + 1, 'ascii')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n\n  return tx.buildIncomplete()\n}\n\n\n// type bitcoin.payments.p2data bitcoin.payments.embed\n\n/**\n* @ignore\n*/\nexport function makeNameImportSkeleton(name: string, recipientAddr: string, zonefileHash: string) {\n  /*\n   Format:\n\n    0    2  3                             39\n    |----|--|-----------------------------|\n    magic op   name.ns_id (37 bytes)\n\n   Output 0: the OP_RETURN\n   Output 1: the recipient\n   Output 2: the zonefile hash\n */\n  if (zonefileHash.length !== 40) {\n    throw new Error('Invalid zonefile hash: must be 20 bytes hex-encoded')\n  }\n\n  const network = config.network\n  const opReturnBuffer = Buffer.alloc(3 + name.length)\n  opReturnBuffer.write(opEncode(';'), 0, 3, 'ascii')\n  opReturnBuffer.write(name, 3, name.length, 'ascii')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n\n  const tx = makeTXbuilder()\n  const zonefileHashB58 = bjsAddress.toBase58Check(\n    Buffer.from(zonefileHash, 'hex'), network.layer1.pubKeyHash\n  )\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(recipientAddr, DUST_MINIMUM)\n  tx.addOutput(zonefileHashB58, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeAnnounceSkeleton(messageHash: string) {\n  /*\n    Format:\n\n    0    2  3                             23\n    |----|--|-----------------------------|\n    magic op   message hash (160-bit)\n\n    output 0: the OP_RETURN\n  */\n  if (messageHash.length !== 40) {\n    throw new Error('Invalid message hash: must be 20 bytes hex-encoded')\n  }\n\n  const opReturnBuffer = Buffer.alloc(3 + messageHash.length / 2)\n  opReturnBuffer.write(opEncode('#'), 0, 3, 'ascii')\n  opReturnBuffer.write(messageHash, 3, messageHash.length / 2, 'hex')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  return tx.buildIncomplete()\n}\n\n/**\n* @ignore\n*/\nexport function makeTokenTransferSkeleton(recipientAddress: string, consensusHash: string,\n                                          tokenType: string, tokenAmount: BN,\n                                          scratchArea: string\n) {\n  /*\n   Format:\n\n    0     2  3              19         38          46                        80\n    |-----|--|--------------|----------|-----------|-------------------------|\n    magic op  consensus_hash token_type amount (BE) scratch area\n                             (ns_id)\n\n    output 0: token transfer code\n    output 1: recipient address\n  */\n  if (scratchArea.length > 34) {\n    throw new Error('Invalid scratch area: must be no more than 34 bytes')\n  }\n\n  const opReturnBuffer = Buffer.alloc(46 + scratchArea.length)\n\n  const tokenTypeHex = Buffer.from(tokenType).toString('hex')\n  const tokenTypeHexPadded = `00000000000000000000000000000000000000${tokenTypeHex}`.slice(-38)\n\n  const tokenValueHex = tokenAmount.toString(16, 2)\n\n  if (tokenValueHex.length > 16) {\n    // exceeds 2**64; can't fit\n    throw new Error(`Cannot send tokens: cannot fit ${tokenAmount.toString()} into 8 bytes`)\n  }\n\n  const tokenValueHexPadded = `0000000000000000${tokenValueHex}`.slice(-16)\n\n  opReturnBuffer.write(opEncode('$'), 0, 3, 'ascii')\n  opReturnBuffer.write(consensusHash, 3, consensusHash.length / 2, 'hex')\n  opReturnBuffer.write(tokenTypeHexPadded, 19, tokenTypeHexPadded.length / 2, 'hex')\n  opReturnBuffer.write(tokenValueHexPadded, 38, tokenValueHexPadded.length / 2, 'hex')\n  opReturnBuffer.write(scratchArea, 46, scratchArea.length, 'ascii')\n\n  const nullOutput = payments.embed({ data: [opReturnBuffer] }).output\n  const tx = makeTXbuilder()\n\n  tx.addOutput(nullOutput, 0)\n  tx.addOutput(recipientAddress, DUST_MINIMUM)\n\n  return tx.buildIncomplete()\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","import { ECPair } from 'bitcoinjs-lib'\nimport { decodeToken, SECP256K1Client, TokenSigner, TokenVerifier } from 'jsontokens'\nimport { TokenInterface } from 'jsontokens/lib/decode'\nimport { nextYear, makeUUID4 } from '../utils'\nimport { ecPairToAddress } from '../keys'\n\n/**\n  * Signs a profile token\n  * @param {Object} profile - the JSON of the profile to be signed\n  * @param {String} privateKey - the signing private key\n  * @param {Object} subject - the entity that the information is about\n  * @param {Object} issuer - the entity that is issuing the token\n  * @param {String} signingAlgorithm - the signing algorithm to use\n  * @param {Date} issuedAt - the time of issuance of the token\n  * @param {Date} expiresAt - the time of expiration of the token\n  * @returns {Object} - the signed profile token\n  * \n  */\nexport function signProfileToken(profile: any,\n                                 privateKey: string,\n                                 subject?: any,\n                                 issuer?: any,\n                                 signingAlgorithm = 'ES256K',\n                                 issuedAt = new Date(),\n                                 expiresAt = nextYear()): string {\n  if (signingAlgorithm !== 'ES256K') {\n    throw new Error('Signing algorithm not supported')\n  }\n\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey)\n\n  if (!subject) {\n    subject = { publicKey }\n  }\n\n  if (!issuer) {\n    issuer = { publicKey }\n  }\n\n  const tokenSigner = new TokenSigner(signingAlgorithm, privateKey)\n\n  const payload = {\n    jti: makeUUID4(),\n    iat: issuedAt.toISOString(),\n    exp: expiresAt.toISOString(),\n    subject,\n    issuer,\n    claim: profile\n  }\n\n  return tokenSigner.sign(payload)\n}\n\n/**\n  * Wraps a token for a profile token file\n  * @param {String} token - the token to be wrapped\n  * @returns {Object} - including `token` and `decodedToken`\n  */\nexport function wrapProfileToken(token: string) {\n  return {\n    token,\n    decodedToken: decodeToken(token)\n  }\n}\n\n/**\n  * Verifies a profile token\n  * @param {String} token - the token to be verified\n  * @param {String} publicKeyOrAddress - the public key or address of the\n  *   keypair that is thought to have signed the token\n  * @returns {Object} - the verified, decoded profile token\n  * @throws {Error} - throws an error if token verification fails\n  */\nexport function verifyProfileToken(token: string, publicKeyOrAddress: string): \n  TokenInterface {\n  const decodedToken = decodeToken(token)\n  const payload = decodedToken.payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  \n  // Inspect and verify the subject\n  if (payload.hasOwnProperty('subject')) {\n    if (!payload.subject.hasOwnProperty('publicKey')) {\n      throw new Error('Token doesn\\'t have a subject public key')\n    }\n  } else {\n    throw new Error('Token doesn\\'t have a subject')\n  }\n\n  // Inspect and verify the issuer\n  if (payload.hasOwnProperty('issuer')) {\n    if (!payload.issuer.hasOwnProperty('publicKey')) {\n      throw new Error('Token doesn\\'t have an issuer public key')\n    }\n  } else {\n    throw new Error('Token doesn\\'t have an issuer')\n  }\n\n  // Inspect and verify the claim\n  if (!payload.hasOwnProperty('claim')) {\n    throw new Error('Token doesn\\'t have a claim')\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  const issuerPublicKey = (payload.issuer as Record<string, string>).publicKey as string\n  const publicKeyBuffer = Buffer.from(issuerPublicKey, 'hex')\n\n  const compressedKeyPair =  ECPair.fromPublicKey(publicKeyBuffer, { compressed: true })\n  const compressedAddress = ecPairToAddress(compressedKeyPair)\n  const uncompressedKeyPair = ECPair.fromPublicKey(publicKeyBuffer, { compressed: false })\n  const uncompressedAddress = ecPairToAddress(uncompressedKeyPair)\n\n  if (publicKeyOrAddress === issuerPublicKey) {\n    // pass\n  } else if (publicKeyOrAddress === compressedAddress) {\n    // pass\n  } else if (publicKeyOrAddress === uncompressedAddress) {\n    // pass\n  } else {\n    throw new Error('Token issuer public key does not match the verifying value')\n  }\n\n  const tokenVerifier = new TokenVerifier(decodedToken.header.alg, issuerPublicKey)\n  if (!tokenVerifier) {\n    throw new Error('Invalid token verifier')\n  }\n\n  const tokenVerified = tokenVerifier.verify(token)\n  if (!tokenVerified) {\n    throw new Error('Token verification failed')\n  }\n\n  return decodedToken\n}\n\n/**\n  * Extracts a profile from an encoded token and optionally verifies it,\n  * if `publicKeyOrAddress` is provided.\n  * @param {String} token - the token to be extracted\n  * @param {String} publicKeyOrAddress - the public key or address of the\n  *   keypair that is thought to have signed the token\n  * @returns {Object} - the profile extracted from the encoded token\n  * @throws {Error} - if the token isn't signed by the provided `publicKeyOrAddress`\n  */\nexport function extractProfile(token: string, publicKeyOrAddress: string | null = null): \n  Record<string, any> {\n  let decodedToken\n  if (publicKeyOrAddress) {\n    decodedToken = verifyProfileToken(token, publicKeyOrAddress)\n  } else {\n    decodedToken = decodeToken(token)\n  }\n\n  let profile = {}\n  if (decodedToken.hasOwnProperty('payload')) {\n    const payload = decodedToken.payload\n    if (typeof payload === 'string') {\n      throw new Error('Unexpected token payload type of string')\n    }\n    if (payload.hasOwnProperty('claim')) {\n      profile = payload.claim\n    }\n  }\n\n  return profile\n}\n","import { sha256, sha512 } from 'sha.js'\nimport { getCryptoLib } from './cryptoUtils'\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash\n\nexport interface Sha2Hash {\n  digest(data: Buffer, algorithm?: 'sha256' | 'sha512'): Promise<Buffer>;\n}\n\nexport class NodeCryptoSha2Hash {\n  createHash: NodeCryptoCreateHash\n\n  constructor(createHash: NodeCryptoCreateHash) {\n    this.createHash = createHash\n  }\n\n  async digest(data: Buffer, algorithm = 'sha256'): Promise<Buffer> {\n    try {\n      const result = this.createHash(algorithm)\n        .update(data)\n        .digest()\n      return Promise.resolve(result)\n    } catch (error) {\n      console.log(error)\n      console.log(`Error performing ${algorithm} digest with Node.js 'crypto.createHash', falling back to JS implementation.`)\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data))\n    }\n  }\n}\n\nexport class WebCryptoSha2Hash implements Sha2Hash {\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async digest(data: Buffer, algorithm = 'sha256'): Promise<Buffer> {\n    let algo: string\n    if (algorithm === 'sha256') {\n      algo = 'SHA-256'\n    } else if (algorithm === 'sha512') {\n      algo = 'SHA-512'\n    } else {\n      throw new Error(`Unsupported hash algorithm ${algorithm}`)\n    }\n    try {\n      const hash = await this.subtleCrypto.digest(algo, data)\n      return Buffer.from(hash)\n    } catch (error) {\n      console.log(error)\n      console.log(`Error performing ${algorithm} digest with WebCrypto, falling back to JS implementation.`)\n      return Promise.resolve(algorithm === 'sha256' ? hashSha256Sync(data) : hashSha512Sync(data))\n    }\n  }\n}\n\nexport async function createSha2Hash(): Promise<Sha2Hash> {\n  const cryptoLib = await getCryptoLib()\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoSha2Hash(cryptoLib.lib)\n  } else {\n    return new NodeCryptoSha2Hash(cryptoLib.lib.createHash)\n  }\n}\n\nexport function hashSha256Sync(data: Buffer) {\n  const hash = new sha256()\n  hash.update(data)\n  return hash.digest()\n}\n\nexport function hashSha512Sync(data: Buffer) {\n  const hash = new sha512()\n  hash.update(data)\n  return hash.digest()\n}\n","var ERRORS = require('./errors')\nvar NATIVE = require('./native')\n\n// short-hand\nvar tfJSON = ERRORS.tfJSON\nvar TfTypeError = ERRORS.TfTypeError\nvar TfPropertyTypeError = ERRORS.TfPropertyTypeError\nvar tfSubError = ERRORS.tfSubError\nvar getValueTypeName = ERRORS.getValueTypeName\n\nvar TYPES = {\n  arrayOf: function arrayOf (type, options) {\n    type = compile(type)\n    options = options || {}\n\n    function _arrayOf (array, strict) {\n      if (!NATIVE.Array(array)) return false\n      if (NATIVE.Nil(array)) return false\n      if (options.minLength !== undefined && array.length < options.minLength) return false\n      if (options.maxLength !== undefined && array.length > options.maxLength) return false\n      if (options.length !== undefined && array.length !== options.length) return false\n\n      return array.every(function (value, i) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _arrayOf.toJSON = function () {\n      var str = '[' + tfJSON(type) + ']'\n      if (options.length !== undefined) {\n        str += '{' + options.length + '}'\n      } else if (options.minLength !== undefined || options.maxLength !== undefined) {\n        str += '{' +\n          (options.minLength === undefined ? 0 : options.minLength) + ',' +\n          (options.maxLength === undefined ? Infinity : options.maxLength) + '}'\n      }\n      return str\n    }\n\n    return _arrayOf\n  },\n\n  maybe: function maybe (type) {\n    type = compile(type)\n\n    function _maybe (value, strict) {\n      return NATIVE.Nil(value) || type(value, strict, maybe)\n    }\n    _maybe.toJSON = function () { return '?' + tfJSON(type) }\n\n    return _maybe\n  },\n\n  map: function map (propertyType, propertyKeyType) {\n    propertyType = compile(propertyType)\n    if (propertyKeyType) propertyKeyType = compile(propertyKeyType)\n\n    function _map (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      for (var propertyName in value) {\n        try {\n          if (propertyKeyType) {\n            typeforce(propertyKeyType, propertyName, strict)\n          }\n        } catch (e) {\n          throw tfSubError(e, propertyName, 'key')\n        }\n\n        try {\n          var propertyValue = value[propertyName]\n          typeforce(propertyType, propertyValue, strict)\n        } catch (e) {\n          throw tfSubError(e, propertyName)\n        }\n      }\n\n      return true\n    }\n\n    if (propertyKeyType) {\n      _map.toJSON = function () {\n        return '{' + tfJSON(propertyKeyType) + ': ' + tfJSON(propertyType) + '}'\n      }\n    } else {\n      _map.toJSON = function () { return '{' + tfJSON(propertyType) + '}' }\n    }\n\n    return _map\n  },\n\n  object: function object (uncompiled) {\n    var type = {}\n\n    for (var typePropertyName in uncompiled) {\n      type[typePropertyName] = compile(uncompiled[typePropertyName])\n    }\n\n    function _object (value, strict) {\n      if (!NATIVE.Object(value)) return false\n      if (NATIVE.Nil(value)) return false\n\n      var propertyName\n\n      try {\n        for (propertyName in type) {\n          var propertyType = type[propertyName]\n          var propertyValue = value[propertyName]\n\n          typeforce(propertyType, propertyValue, strict)\n        }\n      } catch (e) {\n        throw tfSubError(e, propertyName)\n      }\n\n      if (strict) {\n        for (propertyName in value) {\n          if (type[propertyName]) continue\n\n          throw new TfPropertyTypeError(undefined, propertyName)\n        }\n      }\n\n      return true\n    }\n    _object.toJSON = function () { return tfJSON(type) }\n\n    return _object\n  },\n\n  anyOf: function anyOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _anyOf (value, strict) {\n      return types.some(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _anyOf.toJSON = function () { return types.map(tfJSON).join('|') }\n\n    return _anyOf\n  },\n\n  allOf: function allOf () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _allOf (value, strict) {\n      return types.every(function (type) {\n        try {\n          return typeforce(type, value, strict)\n        } catch (e) {\n          return false\n        }\n      })\n    }\n    _allOf.toJSON = function () { return types.map(tfJSON).join(' & ') }\n\n    return _allOf\n  },\n\n  quacksLike: function quacksLike (type) {\n    function _quacksLike (value) {\n      return type === getValueTypeName(value)\n    }\n    _quacksLike.toJSON = function () { return type }\n\n    return _quacksLike\n  },\n\n  tuple: function tuple () {\n    var types = [].slice.call(arguments).map(compile)\n\n    function _tuple (values, strict) {\n      if (NATIVE.Nil(values)) return false\n      if (NATIVE.Nil(values.length)) return false\n      if (strict && (values.length !== types.length)) return false\n\n      return types.every(function (type, i) {\n        try {\n          return typeforce(type, values[i], strict)\n        } catch (e) {\n          throw tfSubError(e, i)\n        }\n      })\n    }\n    _tuple.toJSON = function () { return '(' + types.map(tfJSON).join(', ') + ')' }\n\n    return _tuple\n  },\n\n  value: function value (expected) {\n    function _value (actual) {\n      return actual === expected\n    }\n    _value.toJSON = function () { return expected }\n\n    return _value\n  }\n}\n\n// TODO: deprecate\nTYPES.oneOf = TYPES.anyOf\n\nfunction compile (type) {\n  if (NATIVE.String(type)) {\n    if (type[0] === '?') return TYPES.maybe(type.slice(1))\n\n    return NATIVE[type] || TYPES.quacksLike(type)\n  } else if (type && NATIVE.Object(type)) {\n    if (NATIVE.Array(type)) {\n      if (type.length !== 1) throw new TypeError('Expected compile() parameter of type Array of length 1')\n      return TYPES.arrayOf(type[0])\n    }\n\n    return TYPES.object(type)\n  } else if (NATIVE.Function(type)) {\n    return type\n  }\n\n  return TYPES.value(type)\n}\n\nfunction typeforce (type, value, strict, surrogate) {\n  if (NATIVE.Function(type)) {\n    if (type(value, strict)) return true\n\n    throw new TfTypeError(surrogate || type, value)\n  }\n\n  // JIT\n  return typeforce(compile(type), value, strict)\n}\n\n// assign types to typeforce function\nfor (var typeName in NATIVE) {\n  typeforce[typeName] = NATIVE[typeName]\n}\n\nfor (typeName in TYPES) {\n  typeforce[typeName] = TYPES[typeName]\n}\n\nvar EXTRA = require('./extra')\nfor (typeName in EXTRA) {\n  typeforce[typeName] = EXTRA[typeName]\n}\n\ntypeforce.compile = compile\ntypeforce.TfTypeError = TfTypeError\ntypeforce.TfPropertyTypeError = TfPropertyTypeError\n\nmodule.exports = typeforce\n","\nimport { Transaction, script, ECPair } from 'bitcoinjs-lib'\nimport { TokenSigner } from 'jsontokens'\nimport { getBlockstackErrorFromResponse } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\nimport { getPublicKeyFromPrivate, ecPairToAddress, hexStringToECPair, } from '../keys'\nimport { Logger } from '../logger'\nimport { randomBytes } from '../encryption/cryptoRandom'\nimport { hashSha256Sync } from '../encryption/sha2Hash'\n\n/**\n * @ignore\n */\nexport const BLOCKSTACK_GAIA_HUB_LABEL = 'blockstack-gaia-hub-config'\n\n/**\n * The configuration for the user's Gaia storage provider.\n */\nexport interface GaiaHubConfig {\n  address: string,\n  url_prefix: string,\n  token: string,\n  max_file_upload_size_megabytes: number | undefined,\n  server: string\n}\n\ninterface UploadResponse {\n  publicURL: string,\n  etag?: string\n}\n\n/**\n *\n * @param filename\n * @param contents\n * @param hubConfig\n * @param contentType\n *\n * @ignore\n */\nexport async function uploadToGaiaHub(\n  filename: string,\n  contents: Blob | Buffer | ArrayBufferView | string,\n  hubConfig: GaiaHubConfig,\n  contentType: string = 'application/octet-stream',\n  newFile: boolean = true,\n  etag?: string,\n  dangerouslyIgnoreEtag?: boolean\n): Promise<UploadResponse> {\n  Logger.debug(`uploadToGaiaHub: uploading ${filename} to ${hubConfig.server}`)\n\n  const headers: { [key: string]: string; } = {\n    'Content-Type': contentType,\n    Authorization: `bearer ${hubConfig.token}`\n  }\n\n  if (!dangerouslyIgnoreEtag) {\n    if (newFile) {\n      headers['If-None-Match'] = '*'\n    } else if (etag) {\n      headers['If-Match'] = etag\n    }\n  }\n\n  const response = await fetchPrivate(\n    `${hubConfig.server}/store/${hubConfig.address}/${filename}`, {\n      method: 'POST',\n      headers,\n      body: contents\n    }\n  )\n  if (!response.ok) {\n    throw await getBlockstackErrorFromResponse(response, 'Error when uploading to Gaia hub.', hubConfig)\n  }\n  const responseText = await response.text()\n  const responseJSON = JSON.parse(responseText)\n\n  return responseJSON\n}\n\nexport async function deleteFromGaiaHub(\n  filename: string,\n  hubConfig: GaiaHubConfig\n): Promise<void> {\n  Logger.debug(`deleteFromGaiaHub: deleting ${filename} from ${hubConfig.server}`)\n  const response = await fetchPrivate(\n    `${hubConfig.server}/delete/${hubConfig.address}/${filename}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: `bearer ${hubConfig.token}`\n      }\n    }\n  )\n  if (!response.ok) {\n    throw await getBlockstackErrorFromResponse(response, 'Error deleting file from Gaia hub.', hubConfig)\n  }\n}\n\n/**\n *\n * @param filename\n * @param hubConfig\n *\n * @ignore\n */\nexport function getFullReadUrl(filename: string,\n                               hubConfig: GaiaHubConfig): Promise<string> {\n  return Promise.resolve(`${hubConfig.url_prefix}${hubConfig.address}/${filename}`)\n}\n\n/**\n *\n * @param challengeText\n * @param signerKeyHex\n *\n * @ignore\n */\nfunction makeLegacyAuthToken(challengeText: string, signerKeyHex: string): string {\n  // only sign specific legacy auth challenges.\n  let parsedChallenge\n  try {\n    parsedChallenge = JSON.parse(challengeText)\n  } catch (err) {\n    throw new Error('Failed in parsing legacy challenge text from the gaia hub.')\n  }\n  if (parsedChallenge[0] === 'gaiahub'\n      && parsedChallenge[3] === 'blockstack_storage_please_sign') {\n    const signer = hexStringToECPair(signerKeyHex\n                                     + (signerKeyHex.length === 64 ? '01' : ''))\n    const digest = hashSha256Sync(Buffer.from(challengeText))\n\n    const signatureBuffer = signer.sign(digest)\n    const signatureWithHash = script.signature.encode(\n      signatureBuffer, Transaction.SIGHASH_NONE)\n\n    // We only want the DER encoding so remove the sighash version byte at the end.\n    // See: https://github.com/bitcoinjs/bitcoinjs-lib/issues/1241#issuecomment-428062912\n    const signature = signatureWithHash.toString('hex').slice(0, -2)\n\n    const publickey = getPublicKeyFromPrivate(signerKeyHex)\n    const token = Buffer.from(JSON.stringify(\n      { publickey, signature }\n    )).toString('base64')\n    return token\n  } else {\n    throw new Error('Failed to connect to legacy gaia hub. If you operate this hub, please update.')\n  }\n}\n\n/**\n *\n * @param hubInfo\n * @param signerKeyHex\n * @param hubUrl\n * @param associationToken\n *\n * @ignore\n */\nfunction makeV1GaiaAuthToken(hubInfo: any,\n                             signerKeyHex: string,\n                             hubUrl: string,\n                             associationToken?: string): string {\n  const challengeText = hubInfo.challenge_text\n  const handlesV1Auth = (hubInfo.latest_auth_version\n                         && parseInt(hubInfo.latest_auth_version.slice(1), 10) >= 1)\n  const iss = getPublicKeyFromPrivate(signerKeyHex)\n\n  if (!handlesV1Auth) {\n    return makeLegacyAuthToken(challengeText, signerKeyHex)\n  }\n\n  const salt = randomBytes(16).toString('hex')\n  const payload = {\n    gaiaChallenge: challengeText,\n    hubUrl,\n    iss,\n    salt,\n    associationToken\n  }\n  const token = new TokenSigner('ES256K', signerKeyHex).sign(payload)\n  return `v1:${token}`\n}\n\n/**\n *\n * @ignore\n */\nexport async function connectToGaiaHub(\n  gaiaHubUrl: string,\n  challengeSignerHex: string,\n  associationToken?: string\n): Promise<GaiaHubConfig> {\n  Logger.debug(`connectToGaiaHub: ${gaiaHubUrl}/hub_info`)\n\n  const response = await fetchPrivate(`${gaiaHubUrl}/hub_info`)\n  const hubInfo = await response.json()\n  const readURL = hubInfo.read_url_prefix\n  const token = makeV1GaiaAuthToken(hubInfo, challengeSignerHex, gaiaHubUrl, associationToken)\n  const address = ecPairToAddress(hexStringToECPair(challengeSignerHex\n                                    + (challengeSignerHex.length === 64 ? '01' : '')))\n  return {\n    url_prefix: readURL,\n    max_file_upload_size_megabytes: hubInfo.max_file_upload_size_megabytes,\n    address,\n    token,\n    server: gaiaHubUrl\n  }\n}\n\n/**\n *\n * @param gaiaHubUrl\n * @param appPrivateKey\n *\n * @ignore\n */\nexport async function getBucketUrl(gaiaHubUrl: string, appPrivateKey: string): Promise<string> {\n  const challengeSigner = ECPair.fromPrivateKey(Buffer.from(appPrivateKey, 'hex'))\n  const response = await fetchPrivate(`${gaiaHubUrl}/hub_info`)\n  const responseText = await response.text()\n  const responseJSON = JSON.parse(responseText)\n  const readURL = responseJSON.read_url_prefix\n  const address = ecPairToAddress(challengeSigner)\n  const bucketUrl = `${readURL}${address}/`\n  return bucketUrl\n}\n","import { ec as EllipticCurve } from 'elliptic'\nimport * as BN from 'bn.js'\nimport { randomBytes } from './cryptoRandom'\nimport { FailedDecryptionError } from '../errors'\nimport { getPublicKeyFromPrivate } from '../keys'\nimport { hashSha256Sync, hashSha512Sync } from './sha2Hash'\nimport { createHmacSha256 } from './hmacSha256'\nimport { createCipher } from './aesCipher'\nimport { getAesCbcOutputLength, getBase64OutputLength } from '../utils'\n\nconst ecurve = new EllipticCurve('secp256k1')\n\n/**\n * Controls how the encrypted data buffer will be encoded as a string in the JSON payload. \n * Options: \n *    `hex` -- the legacy default, file size increase 100% (2x). \n *    `base64` -- file size increased ~33%. \n * @ignore\n */\nexport type CipherTextEncoding = 'hex' | 'base64'\n\n/**\n * @ignore\n */\nexport type CipherObject = {\n  iv: string,\n  ephemeralPK: string,\n  cipherText: string,\n  /** If undefined then hex encoding is used for the `cipherText` string. */\n  cipherTextEncoding?: CipherTextEncoding,\n  mac: string,\n  wasString: boolean\n}\n\n/**\n * @ignore\n */\nexport type SignedCipherObject = {\n  /** Hex encoded DER signature (up to 144 chars) */\n  signature: string,\n  /** Hex encoded public key (66 char length) */\n  publicKey: string,\n  /** The stringified json of a `CipherObject` */\n  cipherText: string\n}\n\n/**\n* @ignore\n*/\nexport async function aes256CbcEncrypt(iv: Buffer, \n                                       key: Buffer, \n                                       plaintext: Buffer\n): Promise<Buffer> {\n  const cipher = await createCipher()\n  const result = await cipher.encrypt('aes-256-cbc', key, iv, plaintext)\n  return result\n}\n\n/**\n* @ignore\n*/\nasync function aes256CbcDecrypt(iv: Buffer, key: Buffer, ciphertext: Buffer): Promise<Buffer> {\n  const cipher = await createCipher()\n  const result = await cipher.decrypt('aes-256-cbc', key, iv, ciphertext)\n  return result\n}\n\n/**\n* @ignore\n*/\nasync function hmacSha256(key: Buffer, content: Buffer) {\n  const hmacSha256 = await createHmacSha256()\n  return hmacSha256.digest(key, content)\n}\n\n/**\n* @ignore\n*/\nfunction equalConstTime(b1: Buffer, b2: Buffer) {\n  if (b1.length !== b2.length) {\n    return false\n  }\n  let res = 0\n  for (let i = 0; i < b1.length; i++) {\n    res |= b1[i] ^ b2[i]  // jshint ignore:line\n  }\n  return res === 0\n}\n\n/**\n* @ignore\n*/\nfunction sharedSecretToKeys(sharedSecret: Buffer): { encryptionKey: Buffer; hmacKey: Buffer; } {\n  // generate mac and encryption key from shared secret\n  const hashedSecret = hashSha512Sync(sharedSecret)\n  return {\n    encryptionKey: hashedSecret.slice(0, 32),\n    hmacKey: hashedSecret.slice(32)\n  }\n}\n\n/**\n * Hex encodes a 32-byte BN.js instance. \n * The result string is zero padded and always 64 characters in length. \n * @ignore\n */\nexport function getHexFromBN(bnInput: BN): string {\n  const hexOut = bnInput.toString('hex', 64)\n  if (hexOut.length === 64) {\n    return hexOut\n  } else if (hexOut.length < 64) {\n    // pad with leading zeros\n    // the padStart function would require node 9\n    const padding = '0'.repeat(64 - hexOut.length)\n    return `${padding}${hexOut}`\n  } else {\n    throw new Error('Generated a > 32-byte BN for encryption. Failing.')\n  }\n}\n\n/**\n * Returns a big-endian encoded 32-byte BN.js instance. \n * The result Buffer is zero padded and always 32 bytes in length. \n * @ignore \n */\nexport function getBufferFromBN(bnInput: BN): Buffer {\n  const result = bnInput.toArrayLike(Buffer, 'be', 32)\n  if (result.byteLength !== 32) {\n    throw new Error('Generated a 32-byte BN for encryption. Failing.')\n  }\n  return result\n}\n\n/**\n * Get details about the JSON envelope size overhead for ciphertext payloads. \n * @ignore\n */\nexport function getCipherObjectWrapper(opts: { \n  wasString: boolean, \n  cipherTextEncoding: CipherTextEncoding,\n}): {\n  /** The stringified JSON string of an empty `CipherObject`. */\n  payloadShell: string,\n  /** Total string length of all the `CipherObject` values that always have constant lengths. */\n  payloadValuesLength: number,\n } {\n  // Placeholder structure of the ciphertext payload, used to determine the \n  // stringified JSON overhead length. \n  const shell: CipherObject = {\n    iv: '', \n    ephemeralPK: '',\n    mac: '',\n    cipherText: '',\n    wasString: !!opts.wasString,\n  }\n  if (opts.cipherTextEncoding === 'base64') {\n    shell.cipherTextEncoding = 'base64'\n  }\n  // Hex encoded 16 byte buffer.\n  const ivLength = 32\n  // Hex encoded, compressed EC pubkey of 33 bytes.\n  const ephemeralPKLength = 66\n  // Hex encoded 32 byte hmac-sha256.\n  const macLength = 64\n  return  {\n    payloadValuesLength: ivLength + ephemeralPKLength + macLength,\n    payloadShell: JSON.stringify(shell)\n  }\n}\n\n/**\n * Get details about the JSON envelope size overhead for signed ciphertext payloads. \n * @param payloadShell - The JSON stringified empty `CipherObject`\n * @ignore\n */\nexport function getSignedCipherObjectWrapper(payloadShell: string): {\n  /** The stringified JSON string of an empty `SignedCipherObject`. */\n  signedPayloadValuesLength: number;\n  /** Total string length of all the `SignedCipherObject` values \n   * that always have constant lengths */\n  signedPayloadShell: string;\n} {\n  // Placeholder structure of the signed ciphertext payload, used to determine the \n  // stringified JSON overhead length. \n  const shell: SignedCipherObject = {\n    signature: '',\n    publicKey: '',\n    cipherText: payloadShell\n  }\n  // Hex encoded DER signature, up to 72 byte length. \n  const signatureLength = 144\n  // Hex encoded 33 byte public key.\n  const publicKeyLength = 66\n  return {\n    signedPayloadValuesLength: signatureLength + publicKeyLength,\n    signedPayloadShell: JSON.stringify(shell)\n  }\n}\n\n/**\n * Fast function that determines the final ASCII string byte length of the \n * JSON stringified ECIES encrypted payload. \n * @ignore\n */\nexport function eciesGetJsonStringLength(opts: { \n  contentLength: number, \n  wasString: boolean, \n  sign: boolean, \n  cipherTextEncoding: CipherTextEncoding\n}): number {\n  const { payloadShell, payloadValuesLength } = getCipherObjectWrapper(opts)\n\n  // Calculate the AES output length given the input length. \n  const cipherTextLength = getAesCbcOutputLength(opts.contentLength)\n\n  // Get the encoded string length of the cipherText. \n  let encodedCipherTextLength: number\n  if (!opts.cipherTextEncoding || opts.cipherTextEncoding === 'hex') {\n    encodedCipherTextLength = (cipherTextLength * 2)\n  } else if (opts.cipherTextEncoding === 'base64') {\n    encodedCipherTextLength = getBase64OutputLength(cipherTextLength)\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${opts.cipherTextEncoding}\"`)\n  }\n  \n  if (!opts.sign) {\n    // Add the length of the JSON envelope, ciphertext length, and length of const values.\n    return payloadShell.length \n      + payloadValuesLength \n      + encodedCipherTextLength\n  } else {\n    // Get the signed version of the JSON envelope\n    const { \n      signedPayloadShell, \n      signedPayloadValuesLength \n    } = getSignedCipherObjectWrapper(payloadShell)\n    // Add length of the JSON envelope, ciphertext length, and length of the const values. \n    return signedPayloadShell.length \n      + signedPayloadValuesLength \n      + payloadValuesLength \n      + encodedCipherTextLength\n  }\n}\n\n/**\n * Encrypt content to elliptic curve publicKey using ECIES\n * @param publicKey - secp256k1 public key hex string\n * @param content - content to encrypt\n * @return Object containing:\n *  iv (initialization vector, hex encoding), \n *  cipherText (cipher text either hex or base64 encoded), \n *  mac (message authentication code, hex encoded), \n *  ephemeral public key (hex encoded), \n *  wasString (boolean indicating with or not to return a buffer or string on decrypt)\n * @private\n * @ignore\n */\nexport async function encryptECIES(publicKey: string, \n                                   content: Buffer, \n                                   wasString: boolean, \n                                   cipherTextEncoding?: CipherTextEncoding): \n  Promise<CipherObject> {\n  const ecPK = ecurve.keyFromPublic(publicKey, 'hex').getPublic()\n  const ephemeralSK = ecurve.genKeyPair()\n  const ephemeralPK = Buffer.from(ephemeralSK.getPublic().encodeCompressed())\n  const sharedSecret = ephemeralSK.derive(ecPK) as BN\n  const sharedSecretBuffer = getBufferFromBN(sharedSecret)\n  const sharedKeys = sharedSecretToKeys(sharedSecretBuffer)\n\n  const initializationVector = randomBytes(16)\n\n  const cipherText = await aes256CbcEncrypt(\n    initializationVector, sharedKeys.encryptionKey, content\n  )\n\n  const macData = Buffer.concat([initializationVector,\n                                 ephemeralPK,\n                                 cipherText])\n  const mac = await hmacSha256(sharedKeys.hmacKey, macData)\n\n  let cipherTextString: string\n  if (!cipherTextEncoding || cipherTextEncoding === 'hex') {\n    cipherTextString = cipherText.toString('hex') \n  } else if (cipherTextEncoding === 'base64') {\n    cipherTextString = cipherText.toString('base64')\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherTextEncoding}\"`)\n  }\n  \n  const result: CipherObject = {\n    iv: initializationVector.toString('hex'),\n    ephemeralPK: ephemeralPK.toString('hex'),\n    cipherText: cipherTextString,\n    mac: mac.toString('hex'),\n    wasString: !!wasString\n  }\n  if (cipherTextEncoding && cipherTextEncoding !== 'hex') {\n    result.cipherTextEncoding = cipherTextEncoding\n  }\n  return result\n}\n\n/**\n * Decrypt content encrypted using ECIES\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} cipherObject - object to decrypt, should contain:\n *  iv (initialization vector), cipherText (cipher text),\n *  mac (message authentication code), ephemeralPublicKey\n *  wasString (boolean indicating with or not to return a buffer or string on decrypt)\n * @return {Buffer} plaintext\n * @throws {FailedDecryptionError} if unable to decrypt\n * @private\n * @ignore\n */\nexport async function decryptECIES(privateKey: string, cipherObject: CipherObject): \n  Promise<Buffer | string> {\n  const ecSK = ecurve.keyFromPrivate(privateKey, 'hex')\n  let ephemeralPK = null\n  try {\n    ephemeralPK = ecurve.keyFromPublic(cipherObject.ephemeralPK, 'hex').getPublic()\n  } catch (error) {\n    throw new FailedDecryptionError('Unable to get public key from cipher object. '\n      + 'You might be trying to decrypt an unencrypted object.')\n  }\n\n  const sharedSecret = ecSK.derive(ephemeralPK) as BN\n  const sharedSecretBuffer = getBufferFromBN(sharedSecret)\n\n  const sharedKeys = sharedSecretToKeys(sharedSecretBuffer)\n\n  const ivBuffer = Buffer.from(cipherObject.iv, 'hex')\n  let cipherTextBuffer: Buffer\n\n  if (!cipherObject.cipherTextEncoding || cipherObject.cipherTextEncoding === 'hex') {\n    cipherTextBuffer = Buffer.from(cipherObject.cipherText, 'hex')\n  } else if (cipherObject.cipherTextEncoding === 'base64') {\n    cipherTextBuffer = Buffer.from(cipherObject.cipherText, 'base64')\n  } else {\n    throw new Error(`Unexpected cipherTextEncoding \"${cipherObject.cipherText}\"`)\n  }\n\n  const macData = Buffer.concat([ivBuffer,\n                                 Buffer.from(ephemeralPK.encodeCompressed()),\n                                 cipherTextBuffer])\n  const actualMac = await hmacSha256(sharedKeys.hmacKey, macData)\n  const expectedMac = Buffer.from(cipherObject.mac, 'hex')\n  if (!equalConstTime(expectedMac, actualMac)) {\n    throw new FailedDecryptionError('Decryption failed: failure in MAC check')\n  }\n  const plainText = await aes256CbcDecrypt(\n    ivBuffer, sharedKeys.encryptionKey, cipherTextBuffer\n  )\n\n  if (cipherObject.wasString) {\n    return plainText.toString()\n  } else {\n    return plainText\n  }\n}\n\n/**\n * Sign content using ECDSA\n *\n * @param {String} privateKey - secp256k1 private key hex string\n * @param {Object} content - content to sign\n * @return {Object} contains:\n * signature - Hex encoded DER signature\n * public key - Hex encoded private string taken from privateKey\n * @private\n * @ignore\n */\nexport function signECDSA(privateKey: string, content: string | Buffer): { \n  publicKey: string, signature: string \n} {\n  const contentBuffer = content instanceof Buffer ? content : Buffer.from(content)\n  const ecPrivate = ecurve.keyFromPrivate(privateKey, 'hex')\n  const publicKey = getPublicKeyFromPrivate(privateKey)\n  const contentHash = hashSha256Sync(contentBuffer)\n  const signature = ecPrivate.sign(contentHash)\n  const signatureString: string = signature.toDER('hex')\n  return {\n    signature: signatureString,\n    publicKey\n  }\n}\n\n/**\n* @ignore\n*/\nfunction getBuffer(content: string | ArrayBuffer | Buffer) {\n  if (content instanceof Buffer) return content\n  else if (content instanceof ArrayBuffer) return Buffer.from(content)\n  else return Buffer.from(content)\n}\n\n/**\n * Verify content using ECDSA\n * @param {String | Buffer} content - Content to verify was signed\n * @param {String} publicKey - secp256k1 private key hex string\n * @param {String} signature - Hex encoded DER signature\n * @return {Boolean} returns true when signature matches publickey + content, false if not\n * @private\n * @ignore\n */\nexport function verifyECDSA(\n  content: string | ArrayBuffer | Buffer,\n  publicKey: string,\n  signature: string): boolean {\n  const contentBuffer = getBuffer(content)\n  const ecPublic = ecurve.keyFromPublic(publicKey, 'hex')\n  const contentHash = hashSha256Sync(contentBuffer)\n\n  return ecPublic.verify(contentHash, <any>signature)\n}\n","\n/**\n* @ignore\n*/\nexport const BLOCKSTACK_HANDLER = 'blockstack'\n/**\n* @ignore\n*/\nexport const BLOCKSTACK_STORAGE_LABEL = 'blockstack'\n/**\n* This constant is used in the [[redirectToSignInWithAuthRequest]]\n*/\nexport const DEFAULT_BLOCKSTACK_HOST = 'https://browser.blockstack.org/auth'\n\n/**\n * Non-exhaustive list of common permission scopes. \n */\nexport const enum AuthScope {\n  /**\n   * Read and write data to the user's Gaia hub in an app-specific storage bucket.\n   * This is the default scope.\n   */\n  store_write = 'store_write',\n  /**\n   * Publish data so that other users of the app can discover and interact with the user.\n   * The user's files stored on Gaia hub are made visible to others via the `apps` property in the \n   * users `profile.json` file. \n   */\n  publish_data = 'publish_data',\n  /**\n   * Request the user's email if available.\n   */\n  email = 'email'\n}\n\n\n/**\n* @ignore\n*/\nexport const DEFAULT_SCOPE = [AuthScope.store_write]\n\n/**\n* @ignore\n*/\nexport const BLOCKSTACK_APP_PRIVATE_KEY_LABEL = 'blockstack-transit-private-key'\n/**\n* @ignore\n*/\nexport const BLOCKSTACK_DEFAULT_GAIA_HUB_URL = 'https://hub.blockstack.org'\n/**\n* @ignore\n*/\nexport const DEFAULT_CORE_NODE = 'https://core.blockstack.org'\n/**\n* @ignore\n*/\nexport const NAME_LOOKUP_PATH = '/v1/names'\n/**\n* @ignore\n*/\nexport const LOCALSTORAGE_SESSION_KEY = 'blockstack-session'\n","import { decodeToken, TokenVerifier } from 'jsontokens'\nimport { getAddressFromDID } from '../dids'\nimport { publicKeyToAddress } from '../keys'\nimport { isSameOriginAbsoluteUrl } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\nimport { fetchAppManifest } from './authProvider'\n\n/**\n * Checks if the ES256k signature on passed `token` match the claimed public key\n * in the payload key `public_keys`.\n *\n * @param  {String} token encoded and signed authentication token\n * @return {Boolean} Returns `true` if the signature matches the claimed public key\n * @throws {Error} if `token` contains multiple public keys\n * @private\n * @ignore \n */\nexport function doSignaturesMatchPublicKeys(token: string): boolean {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  const publicKeys = payload.public_keys as string[]\n  if (publicKeys.length === 1) {\n    const publicKey = publicKeys[0]\n    try {\n      const tokenVerifier = new TokenVerifier('ES256k', publicKey)\n      const signatureVerified = tokenVerifier.verify(token)\n      if (signatureVerified) {\n        return true\n      } else {\n        return false\n      }\n    } catch (e) {\n      return false\n    }\n  } else {\n    throw new Error('Multiple public keys are not supported')\n  }\n}\n\n/**\n * Makes sure that the identity address portion of\n * the decentralized identifier passed in the issuer `iss`\n * key of the token matches the public key\n *\n * @param  {String} token encoded and signed authentication token\n * @return {Boolean} if the identity address and public keys match\n * @throws {Error} if ` token` has multiple public keys\n * @private\n * @ignore \n */\nexport function doPublicKeysMatchIssuer(token: string): boolean {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  const publicKeys = payload.public_keys as string[]\n  const addressFromIssuer = getAddressFromDID(payload.iss)\n\n  if (publicKeys.length === 1) {\n    const addressFromPublicKeys = publicKeyToAddress(publicKeys[0])\n    if (addressFromPublicKeys === addressFromIssuer) {\n      return true\n    }\n  } else {\n    throw new Error('Multiple public keys are not supported')\n  }\n\n  return false\n}\n\n/**\n * Looks up the identity address that owns the claimed username\n * in `token` using the lookup endpoint provided in `nameLookupURL`\n * to determine if the username is owned by the identity address\n * that matches the claimed public key\n *\n * @param  {String} token  encoded and signed authentication token\n * @param  {String} nameLookupURL a URL to the name lookup endpoint of the Blockstack Core API\n * @return {Promise<Boolean>} returns a `Promise` that resolves to\n * `true` if the username is owned by the public key, otherwise the\n * `Promise` resolves to `false`\n * @private\n * @ignore \n */\nexport async function doPublicKeysMatchUsername(token: string,\n                                                nameLookupURL: string): Promise<boolean> {\n  try {\n    const payload = decodeToken(token).payload\n    if (typeof payload === 'string') {\n      throw new Error('Unexpected token payload type of string')\n    }\n    if (!payload.username) {\n      return true\n    }\n\n    if (payload.username === null) {\n      return true\n    }\n\n    if (nameLookupURL === null) {\n      return false\n    }\n\n    const username = payload.username\n    const url = `${nameLookupURL.replace(/\\/$/, '')}/${username}`\n    const response = await fetchPrivate(url)\n    const responseText = await response.text()\n    const responseJSON = JSON.parse(responseText)\n    if (responseJSON.hasOwnProperty('address')) {\n      const nameOwningAddress = responseJSON.address\n      const addressFromIssuer = getAddressFromDID(payload.iss)\n      if (nameOwningAddress === addressFromIssuer) {\n        return true\n      } else {\n        return false\n      }\n    } else {\n      return false\n    }\n  } catch (error) {\n    console.log(error)\n    console.log('Error checking `doPublicKeysMatchUsername`')\n    return false\n  }\n}\n\n/**\n * Checks if the if the token issuance time and date is after the\n * current time and date.\n *\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if the token was issued after the current time,\n * otherwise returns `false`\n * @private\n * @ignore \n */\nexport function isIssuanceDateValid(token: string) {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  if (payload.iat) {\n    if (typeof payload.iat !== 'number') {\n      return false\n    }\n    const issuedAt = new Date(payload.iat * 1000) // JWT times are in seconds\n    if (new Date().getTime() < issuedAt.getTime()) {\n      return false\n    } else {\n      return true\n    }\n  } else {\n    return true\n  }\n}\n\n/**\n * Checks if the expiration date of the `token` is before the current time\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if the `token` has not yet expired, `false`\n * if the `token` has expired\n *\n * @private\n * @ignore \n */\nexport function isExpirationDateValid(token: string) {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  if (payload.exp) {\n    if (typeof payload.exp !== 'number') {\n      return false\n    }\n    const expiresAt = new Date(payload.exp * 1000) // JWT times are in seconds\n    if (new Date().getTime() > expiresAt.getTime()) {\n      return false\n    } else {\n      return true\n    }\n  } else {\n    return true\n  }\n}\n\n/**\n * Makes sure the `manifest_uri` is a same origin absolute URL.\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if valid, otherwise `false`\n * @private\n * @ignore \n */\nexport function isManifestUriValid(token: string) {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  return isSameOriginAbsoluteUrl(payload.domain_name as string, payload.manifest_uri as string)\n}\n\n/**\n * Makes sure the `redirect_uri` is a same origin absolute URL.\n * @param  {String}  token encoded and signed authentication token\n * @return {Boolean} `true` if valid, otherwise `false`\n * @private\n * @ignore \n */\nexport function isRedirectUriValid(token: string) {\n  const payload = decodeToken(token).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  return isSameOriginAbsoluteUrl(payload.domain_name as string, payload.redirect_uri as string)\n}\n\n/**\n * Verify authentication request is valid. This function performs a number\n * of checks on the authentication request token:\n * * Checks that `token` has a valid issuance date & is not expired\n * * Checks that `token` has a valid signature that matches the public key it claims\n * * Checks that both the manifest and redirect URLs are absolute and conform to\n * the same origin policy\n *\n * @param  {String} token encoded and signed authentication request token\n * @return {Promise} that resolves to true if the auth request\n *  is valid and false if it does not. It rejects with a String if the\n *  token is not signed\n * @private\n * @ignore \n */\nexport async function verifyAuthRequest(token: string): Promise<boolean> {\n  if (decodeToken(token).header.alg === 'none') {\n    throw new Error('Token must be signed in order to be verified')\n  }\n  const values = await Promise.all([\n    isExpirationDateValid(token),\n    isIssuanceDateValid(token),\n    doSignaturesMatchPublicKeys(token),\n    doPublicKeysMatchIssuer(token),\n    isManifestUriValid(token),\n    isRedirectUriValid(token)\n  ])\n  return values.every(val => val)\n}\n\n/**\n * Verify the authentication request is valid and\n * fetch the app manifest file if valid. Otherwise, reject the promise.\n * @param  {String} token encoded and signed authentication request token\n * @return {Promise} that resolves to the app manifest file in JSON format\n * or rejects if the auth request or app manifest file is invalid\n * @private\n * @ignore \n */\nexport async function verifyAuthRequestAndLoadManifest(token: string): Promise<any> {\n  const valid = await verifyAuthRequest(token)\n  if (!valid) {\n    throw new Error('Token is an invalid auth request')\n  }\n  return fetchAppManifest(token)\n}\n\n/**\n * Verify the authentication response is valid\n * @param {String} token the authentication response token\n * @param {String} nameLookupURL the url use to verify owner of a username\n * @return {Promise} that resolves to true if auth response\n * is valid and false if it does not\n * @private\n * @ignore \n */\nexport async function verifyAuthResponse(token: string, nameLookupURL: string): Promise<boolean> {\n  const values = await Promise.all([\n    isExpirationDateValid(token),\n    isIssuanceDateValid(token),\n    doSignaturesMatchPublicKeys(token),\n    doPublicKeysMatchIssuer(token),\n    doPublicKeysMatchUsername(token, nameLookupURL)\n  ])\n  return values.every(val => val)\n}\n","import { InvalidDIDError } from './errors'\n\n/**\n* @ignore\n*/\nexport function makeDIDFromAddress(address: string) {\n  return `did:btc-addr:${address}`\n}\n\n/**\n* @ignore\n*/\nexport function makeDIDFromPublicKey(publicKey: string) {\n  return `did:ecdsa-pub:${publicKey}`\n}\n\n/**\n* @ignore\n*/\nexport function getDIDType(decentralizedID: string) {\n  const didParts = decentralizedID.split(':')\n  \n  if (didParts.length !== 3) {\n    throw new InvalidDIDError('Decentralized IDs must have 3 parts')\n  }\n\n  if (didParts[0].toLowerCase() !== 'did') {\n    throw new InvalidDIDError('Decentralized IDs must start with \"did\"')\n  }\n\n  return didParts[1].toLowerCase()\n}\n\n/**\n* @ignore\n*/\nexport function getAddressFromDID(decentralizedID: string) {\n  const didType = getDIDType(decentralizedID)\n  \n  if (didType === 'btc-addr') {\n    return decentralizedID.split(':')[2]\n  } else {\n    return null\n  }\n}\n\n/*\nexport function getPublicKeyOrAddressFromDID(decentralizedID) {\n  const didParts = decentralizedID.split(':')\n\n  if (didParts.length !== 3) {\n    throw new InvalidDIDError('Decentralized IDs must have 3 parts')\n  }\n\n  if (didParts[0].toLowerCase() !== 'did') {\n    throw new InvalidDIDError('Decentralized IDs must start with \"did\"')\n  }\n\n  if (didParts[1].toLowerCase() === 'ecdsa-pub') {\n    return didParts[2]\n  } else if (didParts[1].toLowerCase() === 'btc-addr') {\n    return didParts[2]\n  } else {\n    throw new InvalidDIDError('Decentralized ID format not supported')\n  }\n}\n*/\n","'use strict';\n\nvar utils = exports;\nvar BN = require('bn.js');\nvar minAssert = require('minimalistic-assert');\nvar minUtils = require('minimalistic-crypto-utils');\n\nutils.assert = minAssert;\nutils.toArray = minUtils.toArray;\nutils.zero2 = minUtils.zero2;\nutils.toHex = minUtils.toHex;\nutils.encode = minUtils.encode;\n\n// Represent num in a w-NAF form\nfunction getNAF(num, w, bits) {\n  var naf = new Array(Math.max(num.bitLength(), bits) + 1);\n  naf.fill(0);\n\n  var ws = 1 << (w + 1);\n  var k = num.clone();\n\n  for (var i = 0; i < naf.length; i++) {\n    var z;\n    var mod = k.andln(ws - 1);\n    if (k.isOdd()) {\n      if (mod > (ws >> 1) - 1)\n        z = (ws >> 1) - mod;\n      else\n        z = mod;\n      k.isubn(z);\n    } else {\n      z = 0;\n    }\n\n    naf[i] = z;\n    k.iushrn(1);\n  }\n\n  return naf;\n}\nutils.getNAF = getNAF;\n\n// Represent k1, k2 in a Joint Sparse Form\nfunction getJSF(k1, k2) {\n  var jsf = [\n    [],\n    []\n  ];\n\n  k1 = k1.clone();\n  k2 = k2.clone();\n  var d1 = 0;\n  var d2 = 0;\n  while (k1.cmpn(-d1) > 0 || k2.cmpn(-d2) > 0) {\n\n    // First phase\n    var m14 = (k1.andln(3) + d1) & 3;\n    var m24 = (k2.andln(3) + d2) & 3;\n    if (m14 === 3)\n      m14 = -1;\n    if (m24 === 3)\n      m24 = -1;\n    var u1;\n    if ((m14 & 1) === 0) {\n      u1 = 0;\n    } else {\n      var m8 = (k1.andln(7) + d1) & 7;\n      if ((m8 === 3 || m8 === 5) && m24 === 2)\n        u1 = -m14;\n      else\n        u1 = m14;\n    }\n    jsf[0].push(u1);\n\n    var u2;\n    if ((m24 & 1) === 0) {\n      u2 = 0;\n    } else {\n      var m8 = (k2.andln(7) + d2) & 7;\n      if ((m8 === 3 || m8 === 5) && m14 === 2)\n        u2 = -m24;\n      else\n        u2 = m24;\n    }\n    jsf[1].push(u2);\n\n    // Second phase\n    if (2 * d1 === u1 + 1)\n      d1 = 1 - d1;\n    if (2 * d2 === u2 + 1)\n      d2 = 1 - d2;\n    k1.iushrn(1);\n    k2.iushrn(1);\n  }\n\n  return jsf;\n}\nutils.getJSF = getJSF;\n\nfunction cachedProperty(obj, name, computer) {\n  var key = '_' + name;\n  obj.prototype[name] = function cachedProperty() {\n    return this[key] !== undefined ? this[key] :\n           this[key] = computer.call(this);\n  };\n}\nutils.cachedProperty = cachedProperty;\n\nfunction parseBytes(bytes) {\n  return typeof bytes === 'string' ? utils.toArray(bytes, 'hex') :\n                                     bytes;\n}\nutils.parseBytes = parseBytes;\n\nfunction intFromLE(bytes) {\n  return new BN(bytes, 'hex', 'le');\n}\nutils.intFromLE = intFromLE;\n\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.bitcoin = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bc',\n  bip32: {\n    public: 0x0488b21e,\n    private: 0x0488ade4,\n  },\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  wif: 0x80,\n};\nexports.regtest = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'bcrt',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\nexports.testnet = {\n  messagePrefix: '\\x18Bitcoin Signed Message:\\n',\n  bech32: 'tb',\n  bip32: {\n    public: 0x043587cf,\n    private: 0x04358394,\n  },\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  wif: 0xef,\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar GlobalTypes;\n(function(GlobalTypes) {\n  GlobalTypes[(GlobalTypes['UNSIGNED_TX'] = 0)] = 'UNSIGNED_TX';\n  GlobalTypes[(GlobalTypes['GLOBAL_XPUB'] = 1)] = 'GLOBAL_XPUB';\n})((GlobalTypes = exports.GlobalTypes || (exports.GlobalTypes = {})));\nexports.GLOBAL_TYPE_NAMES = ['unsignedTx', 'globalXpub'];\nvar InputTypes;\n(function(InputTypes) {\n  InputTypes[(InputTypes['NON_WITNESS_UTXO'] = 0)] = 'NON_WITNESS_UTXO';\n  InputTypes[(InputTypes['WITNESS_UTXO'] = 1)] = 'WITNESS_UTXO';\n  InputTypes[(InputTypes['PARTIAL_SIG'] = 2)] = 'PARTIAL_SIG';\n  InputTypes[(InputTypes['SIGHASH_TYPE'] = 3)] = 'SIGHASH_TYPE';\n  InputTypes[(InputTypes['REDEEM_SCRIPT'] = 4)] = 'REDEEM_SCRIPT';\n  InputTypes[(InputTypes['WITNESS_SCRIPT'] = 5)] = 'WITNESS_SCRIPT';\n  InputTypes[(InputTypes['BIP32_DERIVATION'] = 6)] = 'BIP32_DERIVATION';\n  InputTypes[(InputTypes['FINAL_SCRIPTSIG'] = 7)] = 'FINAL_SCRIPTSIG';\n  InputTypes[(InputTypes['FINAL_SCRIPTWITNESS'] = 8)] = 'FINAL_SCRIPTWITNESS';\n  InputTypes[(InputTypes['POR_COMMITMENT'] = 9)] = 'POR_COMMITMENT';\n})((InputTypes = exports.InputTypes || (exports.InputTypes = {})));\nexports.INPUT_TYPE_NAMES = [\n  'nonWitnessUtxo',\n  'witnessUtxo',\n  'partialSig',\n  'sighashType',\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n  'finalScriptSig',\n  'finalScriptWitness',\n  'porCommitment',\n];\nvar OutputTypes;\n(function(OutputTypes) {\n  OutputTypes[(OutputTypes['REDEEM_SCRIPT'] = 0)] = 'REDEEM_SCRIPT';\n  OutputTypes[(OutputTypes['WITNESS_SCRIPT'] = 1)] = 'WITNESS_SCRIPT';\n  OutputTypes[(OutputTypes['BIP32_DERIVATION'] = 2)] = 'BIP32_DERIVATION';\n})((OutputTypes = exports.OutputTypes || (exports.OutputTypes = {})));\nexports.OUTPUT_TYPE_NAMES = [\n  'redeemScript',\n  'witnessScript',\n  'bip32Derivation',\n];\n","\nimport * as queryString from 'query-string'\nimport { decodeToken } from 'jsontokens'\nimport { verifyAuthResponse } from './authVerification'\nimport { isLaterVersion, getGlobalObject, getGlobalObjects } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\nimport { getAddressFromDID } from '../dids'\nimport { LoginFailedError } from '../errors'\nimport { decryptPrivateKey, makeAuthRequest } from './authMessages'\nimport {\n  BLOCKSTACK_DEFAULT_GAIA_HUB_URL,\n  DEFAULT_BLOCKSTACK_HOST,\n  NAME_LOOKUP_PATH\n} from './authConstants'\nimport { extractProfile } from '../profiles/profileTokens'\nimport { UserSession } from './userSession'\nimport { config } from '../config'\nimport { Logger } from '../logger'\nimport { GaiaHubConfig } from '../storage/hub'\nimport { protocolEchoReplyDetection } from './protocolEchoDetection'\nimport { launchCustomProtocol } from './protocolLaunch'\nimport { hexStringToECPair } from '../keys'\n\n\nconst DEFAULT_PROFILE = {\n  '@type': 'Person',\n  '@context': 'http://schema.org'\n}\n\n/**\n *  Returned from the [[UserSession.loadUserData]] function.\n */\nexport interface UserData {\n  // public: the blockstack ID (for example: stackerson.id or alice.blockstack.id)\n  username: string;\n  // public: the email address for the user. only available if the `email` \n  // scope is requested, and if the user has entered a valid email into \n  // their profile. \n  //\n  // **Note**: Blockstack does not require email validation \n  // for users for privacy reasons and blah blah (something like this, idk)\n  email?: string;\n  // probably public: (a quick description of what this is, and a link to the\n  // DID foundation and/or the blockstack docs related to DID, idk)\n  decentralizedID: string;\n  // probably private: looks like it happens to be the btc address but idk\n  // the value of establishing this as a supported field\n  identityAddress: string;\n  // probably public: this is an advanced feature, I think many app devs \n  // using our more advanced encryption functions (as opposed to putFile/getFile), \n  // are probably using this. seems useful to explain. \n  appPrivateKey: string;\n  // maybe public: possibly useful for advanced devs / webapps. I see an opportunity\n  // to make a small plug about \"user owned data\" here, idk. \n  hubUrl: string;\n  coreNode: string;\n  // maybe private: this would be an advanced field for app devs to use. \n  authResponseToken: string;\n  // private: does not get sent to webapp at all.\n  coreSessionToken?: string;\n  // private: does not get sent to webapp at all.\n  gaiaAssociationToken?: string;\n  // public: this is the proper `Person` schema json for the user. \n  // This is the data that gets used when the `new blockstack.Person(profile)` class is used.\n  profile: any;\n  // private: does not get sent to webapp at all.\n  gaiaHubConfig?: GaiaHubConfig;\n}\n\n/**\n * Check if there is a authentication request that hasn't been handled. \n *\n * Also checks for a protocol echo reply (which if detected then the page\n * will be automatically redirected after this call). \n * \n * @return {Boolean} `true` if there is a pending sign in, otherwise `false`\n */\nexport function isSignInPending() {\n  try {\n    const isProtocolEcho = protocolEchoReplyDetection()\n    if (isProtocolEcho) {\n      Logger.info('protocolEchoReply detected from isSignInPending call, the page is about to redirect.')\n      return true\n    }\n  } catch (error) {\n    Logger.error(`Error checking for protocol echo reply isSignInPending: ${error}`)\n  }\n  \n  return !!getAuthResponseToken()\n}\n\n/**\n * Retrieve the authentication token from the URL query\n * @return {String} the authentication token if it exists otherwise `null`\n */\nexport function getAuthResponseToken(): string {\n  const search = getGlobalObject(\n    'location', \n    { throwIfUnavailable: true, usageDesc: 'getAuthResponseToken' }\n  ).search\n  const queryDict = queryString.parse(search)\n  return queryDict.authResponse ? <string>queryDict.authResponse : ''\n}\n\n/** \n * Sign the user out and optionally redirect to given location.\n * @param  redirectURL\n * Location to redirect user to after sign out. \n * Only used in environments with `window` available\n */\nexport function signUserOut(redirectURL?: string, caller?: UserSession) {\n  const userSession = caller || new UserSession()\n  userSession.store.deleteSessionData()\n  if (redirectURL) {\n    getGlobalObject(\n      'location', \n      { throwIfUnavailable: true, usageDesc: 'signUserOut' }\n    ).href = redirectURL\n  } \n}\n\n/** \n * Redirects the user to the Blockstack browser to approve the sign in request\n * given.\n *\n * The user is redirected to the `blockstackIDHost` if the `blockstack:`\n * protocol handler is not detected. Please note that the protocol handler detection\n * does not work on all browsers.\n * @param  {String} authRequest - the authentication request generated by `makeAuthRequest`\n * @param  {String} blockstackIDHost - the URL to redirect the user to if the blockstack\n *                                     protocol handler is not detected\n * @return {void}\n */\nexport function redirectToSignInWithAuthRequest(\n  authRequest?: string,\n  blockstackIDHost: string = DEFAULT_BLOCKSTACK_HOST,\n): void {\n  authRequest = authRequest || makeAuthRequest()\n  const httpsURI = `${blockstackIDHost}?authRequest=${authRequest}`\n\n  const { navigator, location } = getGlobalObjects(\n    ['navigator', 'location'],\n    { throwIfUnavailable: true, usageDesc: 'redirectToSignInWithAuthRequest' }\n  )\n\n  // If they're on a mobile OS, always redirect them to HTTPS site\n  if (/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.test(navigator.userAgent)) {\n    Logger.info('detected mobile OS, sending to https')\n    location.href = httpsURI\n    return\n  }\n\n  function successCallback() {\n    Logger.info('protocol handler detected')\n    // The detection function should open the link for us\n  }\n\n  function failCallback() {\n    Logger.warn('protocol handler not detected')\n    location.href = httpsURI\n  }\n\n  launchCustomProtocol(authRequest, successCallback, failCallback)\n}\n\n/** \n * Try to process any pending sign in request by returning a `Promise` that resolves\n * to the user data object if the sign in succeeds.\n *\n * @param {String} nameLookupURL - the endpoint against which to verify public\n * keys match claimed username\n * @param {String} authResponseToken - the signed authentication response token\n * @param {String} transitKey - the transit private key that corresponds to the transit public key\n * that was provided in the authentication request\n * @return {Promise} that resolves to the user data object if successful and rejects\n * if handling the sign in request fails or there was no pending sign in request.\n */\nexport async function handlePendingSignIn(\n  nameLookupURL: string = '', \n  authResponseToken: string = getAuthResponseToken(), \n  transitKey?: string,\n  caller?: UserSession\n): Promise<UserData> {\n  try {\n    const isProtocolEcho = protocolEchoReplyDetection()\n    if (isProtocolEcho) {\n      const msg = 'handlePendingSignIn called while protocolEchoReply was detected, and ' \n        + 'the page is about to redirect. This function will resolve with an error after '\n        + 'several seconds, if the page was not redirected for some reason.'\n      Logger.info(msg)\n      return new Promise<UserData>((_resolve, reject) => {\n        setTimeout(() => {\n          Logger.error('Page should have redirected by now. handlePendingSignIn will now throw.')\n          reject(msg)\n        }, 3000)\n      })\n    }\n  } catch (error) {\n    Logger.error(`Error checking for protocol echo reply handlePendingSignIn: ${error}`)\n  }\n\n  if (!caller) {\n    caller = new UserSession()\n  }\n\n  const sessionData = caller.store.getSessionData()\n\n  if (sessionData.userData) {\n    throw new LoginFailedError('Existing user session found.')\n  }\n\n  if (!transitKey) {\n    transitKey = caller.store.getSessionData().transitKey\n  }\n  if (!nameLookupURL) {\n    let coreNode = caller.appConfig && caller.appConfig.coreNode\n    if (!coreNode) {\n      coreNode = config.network.blockstackAPIUrl\n    }\n\n    const tokenPayload = decodeToken(authResponseToken).payload\n    if (typeof tokenPayload === 'string') {\n      throw new Error('Unexpected token payload type of string')\n    }\n    if (isLaterVersion(tokenPayload.version as string, '1.3.0')\n       && tokenPayload.blockstackAPIUrl !== null && tokenPayload.blockstackAPIUrl !== undefined) {\n      // override globally\n      Logger.info(`Overriding ${config.network.blockstackAPIUrl} `\n        + `with ${tokenPayload.blockstackAPIUrl}`)\n      // TODO: this config is never saved so the user node preference \n      // is not respected in later sessions..\n      config.network.blockstackAPIUrl = tokenPayload.blockstackAPIUrl as string\n      coreNode = tokenPayload.blockstackAPIUrl as string\n    }\n    \n    nameLookupURL = `${coreNode}${NAME_LOOKUP_PATH}`\n  }\n  \n  const isValid = await verifyAuthResponse(authResponseToken, nameLookupURL)\n  if (!isValid) {\n    throw new LoginFailedError('Invalid authentication response.')\n  }\n  const tokenPayload = decodeToken(authResponseToken).payload\n  if (typeof tokenPayload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n\n  // TODO: real version handling\n  let appPrivateKey = tokenPayload.private_key as string\n  let coreSessionToken = tokenPayload.core_token as string\n  if (isLaterVersion(tokenPayload.version as string, '1.1.0')) {\n    if (transitKey !== undefined && transitKey != null) {\n      if (tokenPayload.private_key !== undefined && tokenPayload.private_key !== null) {\n        try {\n          appPrivateKey = await decryptPrivateKey(transitKey, tokenPayload.private_key as string)\n        } catch (e) {\n          Logger.warn('Failed decryption of appPrivateKey, will try to use as given')\n          try {\n            hexStringToECPair(tokenPayload.private_key as string)\n          } catch (ecPairError) {\n            throw new LoginFailedError('Failed decrypting appPrivateKey. Usually means'\n                                      + ' that the transit key has changed during login.')\n          }\n        }\n      }\n      if (coreSessionToken !== undefined && coreSessionToken !== null) {\n        try {\n          coreSessionToken = await decryptPrivateKey(transitKey, coreSessionToken)\n        } catch (e) {\n          Logger.info('Failed decryption of coreSessionToken, will try to use as given')\n        }\n      }\n    } else {\n      throw new LoginFailedError('Authenticating with protocol > 1.1.0 requires transit'\n                                + ' key, and none found.')\n    }\n  }\n  let hubUrl = BLOCKSTACK_DEFAULT_GAIA_HUB_URL\n  let gaiaAssociationToken: string\n  if (isLaterVersion(tokenPayload.version as string, '1.2.0')\n    && tokenPayload.hubUrl !== null && tokenPayload.hubUrl !== undefined) {\n    hubUrl = tokenPayload.hubUrl as string\n  }\n  if (isLaterVersion(tokenPayload.version as string, '1.3.0')\n    && tokenPayload.associationToken !== null && tokenPayload.associationToken !== undefined) {\n    gaiaAssociationToken = tokenPayload.associationToken as string\n  }\n\n  const userData: UserData = {\n    username: tokenPayload.username as string,\n    profile: tokenPayload.profile,\n    email: tokenPayload.email as string,\n    decentralizedID: tokenPayload.iss,\n    identityAddress: getAddressFromDID(tokenPayload.iss),\n    appPrivateKey,\n    coreSessionToken,\n    authResponseToken,\n    hubUrl,\n    coreNode: tokenPayload.blockstackAPIUrl as string,\n    gaiaAssociationToken\n  }\n  const profileURL = tokenPayload.profile_url as string\n  if (!userData.profile && profileURL) {\n    const response = await fetchPrivate(profileURL)\n    if (!response.ok) { // return blank profile if we fail to fetch\n      userData.profile = Object.assign({}, DEFAULT_PROFILE)\n    } else {\n      const responseText = await response.text()\n      const wrappedProfile = JSON.parse(responseText)\n      const profile = extractProfile(wrappedProfile[0].token)\n      userData.profile = profile\n    }\n  } else {\n    userData.profile = tokenPayload.profile\n  }\n  \n  sessionData.userData = userData\n  caller.store.setSessionData(sessionData)\n  \n  return userData\n}\n","import { getGlobalObjects, BLOCKSTACK_HANDLER } from '../utils'\nimport { Logger } from '../logger'\n\n/**\n * Detects if the native auth-browser is installed and is successfully \n * launched via a custom protocol URI. \n * @param {String} authRequest\n * The encoded authRequest to be used as a query param in the custom URI. \n * @param {String} successCallback\n * The callback that is invoked when the protocol handler was detected. \n * @param {String} failCallback\n * The callback that is invoked when the protocol handler was not detected. \n * @return {void}\n */\nexport function launchCustomProtocol(\n  authRequest: string, \n  successCallback: () => void, \n  failCallback: () => void) {\n  // Create a unique ID used for this protocol detection attempt.\n  const echoReplyID = Math.random().toString(36).substr(2, 9)\n  const echoReplyKeyPrefix = 'echo-reply-'\n  const echoReplyKey = `${echoReplyKeyPrefix}${echoReplyID}`\n\n  const { \n    localStorage, document, \n    setTimeout, clearTimeout, \n    addEventListener, removeEventListener \n  } = getGlobalObjects(\n    ['localStorage', 'document', 'setTimeout', 'clearTimeout', 'addEventListener', 'removeEventListener'],\n    { throwIfUnavailable: true, usageDesc: 'detectProtocolLaunch' }\n  )\n\n  // Use localStorage as a reliable cross-window communication method.\n  // Create the storage entry to signal a protocol detection attempt for the\n  // next browser window to check.\n  localStorage.setItem(echoReplyKey, Date.now().toString())\n  const cleanUpLocalStorage = () => {\n    try {\n      localStorage.removeItem(echoReplyKey)\n      // Also clear out any stale echo-reply keys older than 1 hour.\n      for (let i = 0; i < localStorage.length; i++) {\n        const storageKey = localStorage.key(i)\n        if (storageKey && storageKey.startsWith(echoReplyKeyPrefix)) {\n          const storageValue = localStorage.getItem(storageKey)\n          if (storageValue === 'success' || (Date.now() - parseInt(storageValue, 10)) > 3600000) {\n            localStorage.removeItem(storageKey)\n          }\n        }\n      }\n    } catch (err) {\n      Logger.error('Exception cleaning up echo-reply entries in localStorage')\n      Logger.error(err)\n    }\n  }\n\n  const detectionTimeout = 1000\n  let redirectToWebAuthTimer = 0\n  const cancelWebAuthRedirectTimer = () => {\n    if (redirectToWebAuthTimer) {\n      clearTimeout(redirectToWebAuthTimer)\n      redirectToWebAuthTimer = 0\n    }\n  }\n  const startWebAuthRedirectTimer = (timeout = detectionTimeout) => {\n    cancelWebAuthRedirectTimer()\n    redirectToWebAuthTimer = setTimeout(() => {\n      if (redirectToWebAuthTimer) {\n        cancelWebAuthRedirectTimer()\n        let nextFunc: () => void\n        if (localStorage.getItem(echoReplyKey) === 'success') {\n          Logger.info('Protocol echo reply detected.')\n          nextFunc = successCallback\n        } else {\n          Logger.info('Protocol handler not detected.')\n          nextFunc = failCallback\n        }\n        failCallback = () => {}\n        successCallback = () => {}\n        cleanUpLocalStorage()\n        // Briefly wait since localStorage changes can \n        // sometimes be ignored when immediately redirected.\n        setTimeout(() => nextFunc(), 100)\n      }\n    }, timeout)\n  }\n\n  startWebAuthRedirectTimer()\n  \n  const inputPromptTracker = document.createElement('input')\n  inputPromptTracker.type = 'text'\n\n  // Setting display:none on an element prevents them from being focused/blurred.\n  // So we hide using 0 width/height/opacity, and set position:fixed so that the\n  // page does not scroll when the element is focused. \n  const hiddenCssStyle = 'all: initial; position: fixed; top: 0; height: 0; width: 0; opacity: 0;'\n  inputPromptTracker.style.cssText = hiddenCssStyle\n\n  // If the the focus of a page element is immediately changed then this likely indicates \n  // the protocol handler is installed, and the browser is prompting the user if they want \n  // to open the application. \n  const inputBlurredFunc = () => {\n    // Use a timeout of 100ms to ignore instant toggles between blur and focus.\n    // Browsers often perform an instant blur & focus when the protocol handler is working\n    // but not showing any browser prompts, so we want to ignore those instances.\n    let isRefocused = false\n    inputPromptTracker.addEventListener('focus', () => { isRefocused = true }, { once: true, capture: true })\n    setTimeout(() => {\n      if (redirectToWebAuthTimer && !isRefocused) {\n        Logger.info('Detected possible browser prompt for opening the protocol handler app.')\n        clearTimeout(redirectToWebAuthTimer)\n        inputPromptTracker.addEventListener('focus', () => {\n          if (redirectToWebAuthTimer) {\n            Logger.info('Possible browser prompt closed, restarting auth redirect timeout.')\n            startWebAuthRedirectTimer()\n          }\n        }, { once: true, capture: true })\n      }\n    }, 100)\n  }\n  inputPromptTracker.addEventListener('blur', inputBlurredFunc, { once: true, capture: true })\n  setTimeout(() => inputPromptTracker.removeEventListener('blur', inputBlurredFunc), 200)\n  document.body.appendChild(inputPromptTracker)\n  inputPromptTracker.focus()\n  \n  // Detect if document.visibility is immediately changed which is a strong \n  // indication that the protocol handler is working. We don't know for sure and \n  // can't predict future browser changes, so only increase the redirect timeout.\n  // This reduces the probability of a false-negative (where local auth works, but \n  // the original page was redirect to web auth because something took too long),\n  const pageVisibilityChanged = () => {\n    if (document.hidden && redirectToWebAuthTimer) {\n      Logger.info('Detected immediate page visibility change (protocol handler probably working).')\n      startWebAuthRedirectTimer(3000)\n    }\n  }\n  document.addEventListener('visibilitychange', pageVisibilityChanged, { once: true, capture: true })\n  setTimeout(() => document.removeEventListener('visibilitychange', pageVisibilityChanged), 500)\n\n\n  // Listen for the custom protocol echo reply via localStorage update event.\n  addEventListener('storage', function replyEventListener(event) {\n    if (event.key === echoReplyKey && localStorage.getItem(echoReplyKey) === 'success') {\n      // Custom protocol worked, cancel the web auth redirect timer.\n      cancelWebAuthRedirectTimer()\n      inputPromptTracker.removeEventListener('blur', inputBlurredFunc)\n      Logger.info('Protocol echo reply detected from localStorage event.')\n      // Clean up event listener and localStorage.\n      removeEventListener('storage', replyEventListener)\n      const nextFunc = successCallback\n      successCallback = () => {}\n      failCallback = () => {}\n      cleanUpLocalStorage()\n      // Briefly wait since localStorage changes can sometimes \n      // be ignored when immediately redirected.\n      setTimeout(() => nextFunc(), 100)\n    }\n  }, false)\n\n  // Use iframe technique for launching the protocol URI rather than setting `window.location`.\n  // This method prevents browsers like Safari, Opera, Firefox from showing error prompts\n  // about unknown protocol handler when app is not installed, and avoids an empty\n  // browser tab when the app is installed. \n  Logger.info('Attempting protocol launch via iframe injection.')\n  const locationSrc = `${BLOCKSTACK_HANDLER}:${authRequest}&echo=${echoReplyID}`\n  const iframe = document.createElement('iframe')\n\n  const iframeStyle = 'all: initial; display: none; position: fixed; top: 0; height: 0; width: 0; opacity: 0;'\n  iframe.style.cssText = iframeStyle\n  iframe.src = locationSrc\n  document.body.appendChild(iframe)\n}\n","// eslint-disable-next-line import/no-unassigned-import\nimport 'cross-fetch/polyfill'\n\nimport { TokenSigner, SECP256K1Client } from 'jsontokens'\nimport { makeECPrivateKey, publicKeyToAddress } from '../keys'\nimport { makeUUID4, nextMonth, getGlobalObject } from '../utils'\nimport { makeDIDFromAddress } from '../dids'\nimport { encryptECIES, decryptECIES } from '../encryption/ec'\nimport { Logger } from '../logger'\nimport { DEFAULT_SCOPE, AuthScope } from './authConstants'\nimport { UserSession } from './userSession'\n\n\nconst VERSION = '1.3.1'\n\ntype AuthMetadata = {\n  email?: string,\n  profileUrl?: string\n}\n\n/**\n * Generates a ECDSA keypair to\n * use as the ephemeral app transit private key\n * @param {SessionData} session - session object in which key will be stored\n * @return {String} the hex encoded private key\n * @private\n * @ignore\n */\nexport function generateTransitKey() {\n  const transitKey = makeECPrivateKey()\n  return transitKey\n}\n\n\n/**\n * Generates an authentication request that can be sent to the Blockstack\n * browser for the user to approve sign in. This authentication request can\n * then be used for sign in by passing it to the `redirectToSignInWithAuthRequest`\n * method.\n *\n * *Note: This method should only be used if you want to roll your own authentication\n * flow. Typically you'd use `redirectToSignIn` which takes care of this\n * under the hood.*\n *\n * @param  {String} transitPrivateKey - hex encoded transit private key\n * @param {String} redirectURI - location to redirect user to after sign in approval\n * @param {String} manifestURI - location of this app's manifest file\n * @param {Array<String>} scopes - the permissions this app is requesting\n * @param {String} appDomain - the origin of this app\n * @param {Number} expiresAt - the time at which this request is no longer valid\n * @param {Object} extraParams - Any extra parameters you'd like to pass to the authenticator.\n * Use this to pass options that aren't part of the Blockstack auth spec, but might be supported\n * by special authenticators.\n * @return {String} the authentication request\n */\nexport function makeAuthRequest(\n  transitPrivateKey?: string,\n  redirectURI?: string, \n  manifestURI?: string, \n  scopes: Array<AuthScope | string> = DEFAULT_SCOPE.slice(),\n  appDomain?: string,\n  expiresAt: number = nextMonth().getTime(),\n  extraParams: any = {}\n): string {\n  if (!transitPrivateKey) {\n    transitPrivateKey = new UserSession().generateAndStoreTransitKey()\n  }\n\n  const getWindowOrigin = (paramName: string) => {\n    const location = getGlobalObject('location', { \n      throwIfUnavailable: true, \n      usageDesc: `makeAuthRequest([${paramName}=undefined])` \n    })\n    return location.origin\n  }\n  \n  if (!redirectURI) {\n    redirectURI = `${getWindowOrigin('redirectURI')}/`\n  }\n  if (!manifestURI) {\n    manifestURI = `${getWindowOrigin('manifestURI')}/manifest.json`\n  }\n  if (!appDomain) {\n    appDomain = getWindowOrigin('appDomain')\n  }\n\n  /* Create the payload */\n  const payload = Object.assign({}, extraParams, {\n    jti: makeUUID4(),\n    iat: Math.floor(new Date().getTime() / 1000), // JWT times are in seconds\n    exp: Math.floor(expiresAt / 1000), // JWT times are in seconds\n    iss: null,\n    public_keys: [],\n    domain_name: appDomain,\n    manifest_uri: manifestURI,\n    redirect_uri: redirectURI,\n    version: VERSION,\n    do_not_include_profile: true,\n    supports_hub_url: true,\n    scopes\n  })\n\n  Logger.info(`blockstack.js: generating v${VERSION} auth request`)\n\n  /* Convert the private key to a public key to an issuer */\n  const publicKey = SECP256K1Client.derivePublicKey(transitPrivateKey)\n  payload.public_keys = [publicKey]\n  const address = publicKeyToAddress(publicKey)\n  payload.iss = makeDIDFromAddress(address)\n\n  /* Sign and return the token */\n  const tokenSigner = new TokenSigner('ES256k', transitPrivateKey)\n  const token = tokenSigner.sign(payload)\n\n  return token\n}\n\n/**\n * Encrypts the private key for decryption by the given\n * public key.\n * @param  {String} publicKey  [description]\n * @param  {String} privateKey [description]\n * @return {String} hex encoded ciphertext\n * @private\n * @ignore\n */\nexport async function encryptPrivateKey(publicKey: string,\n                                        privateKey: string\n): Promise<string> {\n  const encryptedObj = await encryptECIES(publicKey, Buffer.from(privateKey), true)\n  const encryptedJSON = JSON.stringify(encryptedObj)\n  return Buffer.from(encryptedJSON).toString('hex')\n}\n\n/**\n * Decrypts the hex encrypted private key\n * @param  {String} privateKey  the private key corresponding to the public\n * key for which the ciphertext was encrypted\n * @param  {String} hexedEncrypted the ciphertext\n * @return {String}  the decrypted private key\n * @throws {Error} if unable to decrypt\n *\n * @private\n * @ignore\n */\nexport async function decryptPrivateKey(privateKey: string,\n                                        hexedEncrypted: string\n): Promise<string | null> {\n  const unhexedString = Buffer.from(hexedEncrypted, 'hex').toString()\n  const encryptedObj = JSON.parse(unhexedString)\n  const decrypted = await decryptECIES(privateKey, encryptedObj)\n  if (typeof decrypted !== 'string') {\n    throw new Error('Unable to correctly decrypt private key')\n  } else {\n    return decrypted\n  }\n}\n\n/**\n * Generates a signed authentication response token for an app. This\n * token is sent back to apps which use contents to access the\n * resources and data requested by the app.\n *\n * @param  {String} privateKey the identity key of the Blockstack ID generating\n * the authentication response\n * @param  {Object} profile the profile object for the Blockstack ID\n * @param  {String} username the username of the Blockstack ID if any, otherwise `null`\n * @param  {AuthMetadata} metadata an object containing metadata sent as part of the authentication\n * response including `email` if requested and available and a URL to the profile\n * @param  {String} coreToken core session token when responding to a legacy auth request\n * or `null` for current direct to gaia authentication requests\n * @param  {String} appPrivateKey the application private key. This private key is\n * unique and specific for every Blockstack ID and application combination.\n * @param  {Number} expiresAt an integer in the same format as\n * `new Date().getTime()`, milliseconds since the Unix epoch\n * @param {String} transitPublicKey the public key provide by the app\n * in its authentication request with which secrets will be encrypted\n * @param {String} hubUrl URL to the write path of the user's Gaia hub\n * @param {String} blockstackAPIUrl URL to the API endpoint to use\n * @param {String} associationToken JWT that binds the app key to the identity key\n * @return {String} signed and encoded authentication response token\n * @private\n * @ignore\n */\nexport async function makeAuthResponse(privateKey: string,\n                                       profile: {} = {},\n                                       username: string = null,\n                                       metadata: AuthMetadata,\n                                       coreToken: string = null,\n                                       appPrivateKey: string = null,\n                                       expiresAt: number = nextMonth().getTime(),\n                                       transitPublicKey: string = null,\n                                       hubUrl: string = null,\n                                       blockstackAPIUrl: string = null,\n                                       associationToken: string = null\n): Promise<string> {\n  /* Convert the private key to a public key to an issuer */\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey)\n  const address = publicKeyToAddress(publicKey)\n\n  /* See if we should encrypt with the transit key */\n  let privateKeyPayload = appPrivateKey\n  let coreTokenPayload = coreToken\n  let additionalProperties = {}\n  if (appPrivateKey !== undefined && appPrivateKey !== null) {\n    Logger.info(`blockstack.js: generating v${VERSION} auth response`)\n    if (transitPublicKey !== undefined && transitPublicKey !== null) {\n      privateKeyPayload = await encryptPrivateKey(transitPublicKey, appPrivateKey)\n      if (coreToken !== undefined && coreToken !== null) {\n        coreTokenPayload = await encryptPrivateKey(transitPublicKey, coreToken)\n      }\n    }\n    additionalProperties = {\n      email: metadata.email ? metadata.email : null,\n      profile_url: metadata.profileUrl ? metadata.profileUrl : null,\n      hubUrl,\n      blockstackAPIUrl,\n      associationToken,\n      version: VERSION\n    }\n  } else {\n    Logger.info('blockstack.js: generating legacy auth response')\n  }\n\n  /* Create the payload */\n  const payload = Object.assign({}, {\n    jti: makeUUID4(),\n    iat: Math.floor(new Date().getTime() / 1000), // JWT times are in seconds\n    exp: Math.floor(expiresAt / 1000), // JWT times are in seconds\n    iss: makeDIDFromAddress(address),\n    private_key: privateKeyPayload,\n    public_keys: [publicKey],\n    profile,\n    username,\n    core_token: coreTokenPayload\n  }, additionalProperties)\n\n  /* Sign and return the token */\n  const tokenSigner = new TokenSigner('ES256k', privateKey)\n  return tokenSigner.sign(payload)\n}\n","\n\nimport {\n  getFullReadUrl,\n  connectToGaiaHub, uploadToGaiaHub, getBucketUrl, BLOCKSTACK_GAIA_HUB_LABEL,\n  GaiaHubConfig,\n  deleteFromGaiaHub\n} from './hub'\n\nimport {\n  encryptECIES, decryptECIES, signECDSA, verifyECDSA, eciesGetJsonStringLength,\n  SignedCipherObject, CipherTextEncoding\n} from '../encryption/ec'\nimport { getPublicKeyFromPrivate, publicKeyToAddress } from '../keys'\nimport { lookupProfile } from '../profiles/profileLookup'\nimport {\n  InvalidStateError,\n  SignatureVerificationError,\n  DoesNotExist,\n  PayloadTooLargeError,\n  GaiaHubError\n} from '../errors'\n\nimport { UserSession } from '../auth/userSession'\nimport { NAME_LOOKUP_PATH } from '../auth/authConstants'\nimport { getGlobalObject, getBlockstackErrorFromResponse, megabytesToBytes } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\n\nexport interface EncryptionOptions {\n  /**\n   * If set to `true` the data is signed using ECDSA on SHA256 hashes with the user's\n   * app private key. If a string is specified, it is used as the private key instead\n   * of the user's app private key.\n   * @default false\n   */\n  sign?: boolean | string;\n  /**\n   * String encoding format for the cipherText buffer.\n   * Currently defaults to 'hex' for legacy backwards-compatibility.\n   * Only used if the `encrypt` option is also used.\n   * Note: in the future this should default to 'base64' for the significant\n   * file size reduction.\n   */\n  cipherTextEncoding?: CipherTextEncoding;\n  /**\n   * Specifies if the original unencrypted content is a ASCII or UTF-8 string.\n   * For example stringified JSON.\n   * If true, then when the ciphertext is decrypted, it will be returned as\n   * a `string` type variable, otherwise will be returned as a Buffer.\n   */\n  wasString?: boolean;\n}\n\n/**\n * Specify encryption options, and whether to sign the ciphertext.\n */\nexport interface EncryptContentOptions extends EncryptionOptions {\n  /**\n   * Encrypt the data with this key.\n   * If not provided then the current user's app public key is used.\n   */\n  publicKey?: string;\n}\n\n/**\n * Specify a valid MIME type, encryption options, and whether to sign the [[UserSession.putFile]].\n */\nexport interface PutFileOptions extends EncryptionOptions {\n  /**\n   * Specifies the Content-Type header for unencrypted data.\n   * If the `encrypt` is enabled, this option is ignored, and the\n   * Content-Type header is set to `application/json` for the ciphertext\n   * JSON envelope.\n   */\n  contentType?: string;\n  /**\n   * Encrypt the data with the app public key.\n   * If a string is specified, it is used as the public key.\n   * If the boolean `true` is specified then the current user's app public key is used.\n   * @default true\n   */\n  encrypt?: boolean | string;\n  /**\n   * Ignore etag for concurrency control and force file to be written.\n   */\n  dangerouslyIgnoreEtag?: boolean;\n}\n\nconst SIGNATURE_FILE_SUFFIX = '.sig'\n\n/**\n * Fetch the public read URL of a user file for the specified app.\n * @param {String} path - the path to the file to read\n * @param {String} username - The Blockstack ID of the user to look up\n * @param {String} appOrigin - The app origin\n * @param {String} [zoneFileLookupURL=null] - The URL\n * to use for zonefile lookup. If falsey, this will use the\n * blockstack.js's [[getNameInfo]] function instead.\n * @return {Promise<string>} that resolves to the public read URL of the file\n * or rejects with an error\n */\nexport async function getUserAppFileUrl(\n  path: string, username: string, appOrigin: string,\n  zoneFileLookupURL?: string\n): Promise<string|null> {\n  const profile = await lookupProfile(username, zoneFileLookupURL)\n  let bucketUrl: string = null\n  if (profile.hasOwnProperty('apps')) {\n    if (profile.apps.hasOwnProperty(appOrigin)) {\n      const url = profile.apps[appOrigin]\n      const bucket = url.replace(/\\/?(\\?|#|$)/, '/$1')\n      bucketUrl = `${bucket}${path}`\n    }\n  }\n  return bucketUrl\n}\n\n/**\n * Encrypts the data provided with the app public key.\n * @param {String|Buffer} content - data to encrypt\n * @param {Object} [options=null] - options object\n * @param {String} options.publicKey - the hex string of the ECDSA public\n * key to use for encryption. If not provided, will use user's appPublicKey.\n * @return {String} Stringified ciphertext object\n */\nexport async function encryptContent(\n  caller: UserSession,\n  content: string | Buffer,\n  options?: EncryptContentOptions\n): Promise<string> {\n  const opts = Object.assign({}, options)\n  let privateKey: string\n  if (!opts.publicKey) {\n    privateKey = caller.loadUserData().appPrivateKey\n    opts.publicKey = getPublicKeyFromPrivate(privateKey)\n  }\n  let wasString: boolean\n  if (typeof opts.wasString === 'boolean') {\n    wasString = opts.wasString\n  } else {\n    wasString = typeof content === 'string'\n  }\n  const contentBuffer = typeof content === 'string' ? Buffer.from(content) : content\n  const cipherObject = await encryptECIES(opts.publicKey,\n                                          contentBuffer,\n                                          wasString,\n                                          opts.cipherTextEncoding)\n  let cipherPayload = JSON.stringify(cipherObject)\n  if (opts.sign) {\n    if (typeof opts.sign === 'string') {\n      privateKey = opts.sign\n    } else if (!privateKey) {\n      privateKey = caller.loadUserData().appPrivateKey\n    }\n    const signatureObject = signECDSA(privateKey, cipherPayload)\n    const signedCipherObject: SignedCipherObject = {\n      signature: signatureObject.signature,\n      publicKey: signatureObject.publicKey,\n      cipherText: cipherPayload\n    }\n    cipherPayload = JSON.stringify(signedCipherObject)\n  }\n  return cipherPayload\n}\n\n/**\n * Decrypts data encrypted with `encryptContent` with the\n * transit private key.\n * @param {String|Buffer} content - encrypted content.\n * @param {Object} [options=null] - options object\n * @param {String} options.privateKey - the hex string of the ECDSA private\n * key to use for decryption. If not provided, will use user's appPrivateKey.\n * @return {String|Buffer} decrypted content.\n */\nexport function decryptContent(\n  caller: UserSession,\n  content: string,\n  options?: {\n    privateKey?: string\n  },\n): Promise<string | Buffer> {\n  const opts = Object.assign({}, options)\n  if (!opts.privateKey) {\n    opts.privateKey = caller.loadUserData().appPrivateKey\n  }\n\n  try {\n    const cipherObject = JSON.parse(content)\n    return decryptECIES(opts.privateKey, cipherObject)\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      throw new Error('Failed to parse encrypted content JSON. The content may not '\n                      + 'be encrypted. If using getFile, try passing { decrypt: false }.')\n    } else {\n      throw err\n    }\n  }\n}\n\n/* Get the gaia address used for servicing multiplayer reads for the given\n * (username, app) pair.\n * @private\n * @ignore\n */\nasync function getGaiaAddress(\n  caller: UserSession, app: string,\n  username?: string, zoneFileLookupURL?: string,\n): Promise<string> {\n  const opts = normalizeOptions(caller, { app, username, zoneFileLookupURL })\n  let fileUrl: string\n  if (username) {\n    fileUrl = await getUserAppFileUrl('/', opts.username, opts.app, opts.zoneFileLookupURL)\n  } else {\n    const gaiaHubConfig = await caller.getOrSetLocalGaiaHubConnection()\n    fileUrl = await getFullReadUrl('/', gaiaHubConfig)\n  }\n  const matches = fileUrl.match(/([13][a-km-zA-HJ-NP-Z0-9]{26,35})/)\n  if (!matches) {\n    throw new Error('Failed to parse gaia address')\n  }\n  return matches[matches.length - 1]\n}\n/**\n * @param {Object} [options=null] - options object\n * @param {String} options.username - the Blockstack ID to lookup for multi-player storage\n * @param {String} options.app - the app to lookup for multi-player storage -\n * defaults to current origin\n *\n * @ignore\n */\nfunction normalizeOptions<T>(\n  caller: UserSession,\n  options?: {\n    app?: string,\n    username?: string,\n    zoneFileLookupURL?: string\n  } & T,\n) {\n  const opts = Object.assign({}, options)\n  if (opts.username) {\n    if (!opts.app) {\n      if (!caller.appConfig) {\n        throw new InvalidStateError('Missing AppConfig')\n      }\n      opts.app = caller.appConfig.appDomain\n    }\n    if (!opts.zoneFileLookupURL) {\n      if (!caller.appConfig) {\n        throw new InvalidStateError('Missing AppConfig')\n      }\n      if (!caller.store) {\n        throw new InvalidStateError('Missing store UserSession')\n      }\n      const sessionData = caller.store.getSessionData()\n      // Use the user specified coreNode if available, otherwise use the app specified coreNode.\n      const configuredCoreNode = sessionData.userData.coreNode || caller.appConfig.coreNode\n      if (configuredCoreNode) {\n        opts.zoneFileLookupURL = `${configuredCoreNode}${NAME_LOOKUP_PATH}`\n      }\n    }\n  }\n  return opts\n}\n\n/**\n *\n * @param {String} path - the path to the file to read\n * @returns {Promise<string>} that resolves to the URL or rejects with an error\n */\nexport async function getFileUrl(\n  caller: UserSession,\n  path: string,\n  options?: GetFileUrlOptions\n): Promise<string> {\n  const opts = normalizeOptions(caller, options)\n\n  let readUrl: string\n  if (opts.username) {\n    readUrl = await getUserAppFileUrl(path, opts.username, opts.app, opts.zoneFileLookupURL)\n  } else {\n    const gaiaHubConfig = await caller.getOrSetLocalGaiaHubConnection()\n    readUrl = await getFullReadUrl(path, gaiaHubConfig)\n  }\n\n  if (!readUrl) {\n    throw new Error('Missing readURL')\n  } else {\n    return readUrl\n  }\n}\n\n/* Handle fetching the contents from a given path. Handles both\n *  multi-player reads and reads from own storage.\n * @private\n * @ignore\n */\nasync function getFileContents(caller: UserSession, path: string, app: string,\n                               username: string | undefined,\n                               zoneFileLookupURL: string | undefined,\n                               forceText: boolean): Promise<string | ArrayBuffer | null> {\n  const opts = { app, username, zoneFileLookupURL }\n  const readUrl = await getFileUrl(caller, path, opts)\n  const response = await fetchPrivate(readUrl)\n  if (!response.ok) {\n    throw await getBlockstackErrorFromResponse(response, `getFile ${path} failed.`, null)\n  }\n  let contentType = response.headers.get('Content-Type')\n  if (typeof contentType === 'string') {\n    contentType = contentType.toLowerCase()\n  }\n\n  const etag = response.headers.get('ETag')\n  if (etag) {\n    const sessionData = caller.store.getSessionData()\n    sessionData.etags[path] = etag\n    caller.store.setSessionData(sessionData)\n  }\n  if (forceText || contentType === null\n    || contentType.startsWith('text')\n    || contentType.startsWith('application/json')) {\n    return response.text()\n  } else {\n    return response.arrayBuffer()\n  }\n}\n\n/* Handle fetching an unencrypted file, its associated signature\n *  and then validate it. Handles both multi-player reads and reads\n *  from own storage.\n * @private\n * @ignore\n */\nasync function getFileSignedUnencrypted(caller: UserSession, path: string, opt: GetFileOptions) {\n  // future optimization note:\n  //    in the case of _multi-player_ reads, this does a lot of excess\n  //    profile lookups to figure out where to read files\n  //    do browsers cache all these requests if Content-Cache is set?\n  const sigPath = `${path}${SIGNATURE_FILE_SUFFIX}`\n  try {\n    const [fileContents, signatureContents, gaiaAddress] = await Promise.all([\n      getFileContents(caller, path, opt.app, opt.username, opt.zoneFileLookupURL, false),\n      getFileContents(caller, sigPath, opt.app, opt.username,\n                      opt.zoneFileLookupURL, true),\n      getGaiaAddress(caller, opt.app, opt.username, opt.zoneFileLookupURL)\n    ])\n\n    if (!fileContents) {\n      return fileContents\n    }\n    if (!gaiaAddress) {\n      throw new SignatureVerificationError('Failed to get gaia address for verification of: '\n                                            + `${path}`)\n    }\n    if (!signatureContents || typeof signatureContents !== 'string') {\n      throw new SignatureVerificationError('Failed to obtain signature for file: '\n                                            + `${path} -- looked in ${path}${SIGNATURE_FILE_SUFFIX}`)\n    }\n    let signature\n    let publicKey\n    try {\n      const sigObject = JSON.parse(signatureContents)\n      signature = sigObject.signature\n      publicKey = sigObject.publicKey\n    } catch (err) {\n      if (err instanceof SyntaxError) {\n        throw new Error('Failed to parse signature content JSON '\n                        + `(path: ${path}${SIGNATURE_FILE_SUFFIX})`\n                        + ' The content may be corrupted.')\n      } else {\n        throw err\n      }\n    }\n    const signerAddress = publicKeyToAddress(publicKey)\n    if (gaiaAddress !== signerAddress) {\n      throw new SignatureVerificationError(`Signer pubkey address (${signerAddress}) doesn't`\n                                            + ` match gaia address (${gaiaAddress})`)\n    } else if (!verifyECDSA(fileContents, publicKey, signature)) {\n      throw new SignatureVerificationError(\n        'Contents do not match ECDSA signature: '\n          + `path: ${path}, signature: ${path}${SIGNATURE_FILE_SUFFIX}`\n      )\n    } else {\n      return fileContents\n    }\n  } catch (err) {\n    // For missing .sig files, throw `SignatureVerificationError` instead of `DoesNotExist` error.\n    if (err instanceof DoesNotExist && err.message.indexOf(sigPath) >= 0) {\n      throw new SignatureVerificationError('Failed to obtain signature for file: '\n                                            + `${path} -- looked in ${path}${SIGNATURE_FILE_SUFFIX}`)\n    } else {\n      throw err\n    }\n  }\n}\n\n/* Handle signature verification and decryption for contents which are\n *  expected to be signed and encrypted. This works for single and\n *  multiplayer reads. In the case of multiplayer reads, it uses the\n *  gaia address for verification of the claimed public key.\n * @private\n * @ignore\n */\nasync function handleSignedEncryptedContents(caller: UserSession, path: string,\n                                             storedContents: string, app: string,\n                                             privateKey?: string, username?: string,\n                                             zoneFileLookupURL?: string\n): Promise<string | Buffer> {\n  const appPrivateKey = privateKey || caller.loadUserData().appPrivateKey\n\n  const appPublicKey = getPublicKeyFromPrivate(appPrivateKey)\n\n  let address: string\n  if (username) {\n    address = await getGaiaAddress(caller, app, username, zoneFileLookupURL)\n  } else {\n    address = publicKeyToAddress(appPublicKey)\n  }\n  if (!address) {\n    throw new SignatureVerificationError('Failed to get gaia address for verification of: '\n                                          + `${path}`)\n  }\n  let sigObject\n  try {\n    sigObject = JSON.parse(storedContents)\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      throw new Error('Failed to parse encrypted, signed content JSON. The content may not '\n                      + 'be encrypted. If using getFile, try passing'\n                      + ' { verify: false, decrypt: false }.')\n    } else {\n      throw err\n    }\n  }\n  const signature = sigObject.signature\n  const signerPublicKey = sigObject.publicKey\n  const cipherText = sigObject.cipherText\n  const signerAddress = publicKeyToAddress(signerPublicKey)\n\n  if (!signerPublicKey || !cipherText || !signature) {\n    throw new SignatureVerificationError(\n      'Failed to get signature verification data from file:'\n        + ` ${path}`\n    )\n  } else if (signerAddress !== address) {\n    throw new SignatureVerificationError(`Signer pubkey address (${signerAddress}) doesn't`\n                                          + ` match gaia address (${address})`)\n  } else if (!verifyECDSA(cipherText, signerPublicKey, signature)) {\n    throw new SignatureVerificationError('Contents do not match ECDSA signature in file:'\n                                          + ` ${path}`)\n  } else if (typeof (privateKey) === 'string') {\n    const decryptOpt = { privateKey }\n    return caller.decryptContent(cipherText, decryptOpt)\n  } else {\n    return caller.decryptContent(cipherText)\n  }\n}\n\nexport interface GetFileUrlOptions {\n  /**\n   * The Blockstack ID to lookup for multi-player storage.\n   * If not specified, the currently signed in username is used.\n   */\n  username?: string;\n  /**\n   * The app to lookup for multi-player storage - defaults to current origin.\n   * @default `window.location.origin`\n   * Only if available in the executing environment, otherwise `undefined`.\n   */\n  app?: string;\n  /**\n   * The URL to use for zonefile lookup. If falsey, this will use\n   * the blockstack.js's [[getNameInfo]] function instead.\n   */\n  zoneFileLookupURL?: string;\n}\n\n/**\n * Used to pass options to [[UserSession.getFile]]\n */\nexport interface GetFileOptions extends GetFileUrlOptions {\n  /**\n  * Try to decrypt the data with the app private key.\n  * If a string is specified, it is used as the private key.\n   * @default true\n   */\n  decrypt?: boolean | string;\n  /**\n   * Whether the content should be verified, only to be used\n   * when [[UserSession.putFile]] was set to `sign = true`.\n   * @default false\n   */\n  verify?: boolean;\n}\n\n/**\n * Retrieves the specified file from the app's data store.\n * @param {String} path - the path to the file to read\n * @returns {Promise} that resolves to the raw data in the file\n * or rejects with an error\n */\nexport async function getFile(\n  caller: UserSession,\n  path: string,\n  options?: GetFileOptions,\n) {\n  const defaults: GetFileOptions = {\n    decrypt: true,\n    verify: false,\n    username: null,\n    app: getGlobalObject('location', { returnEmptyObject: true }).origin,\n    zoneFileLookupURL: null\n  }\n  const opt = Object.assign({}, defaults, options)\n\n  // in the case of signature verification, but no\n  //  encryption expected, need to fetch _two_ files.\n  if (opt.verify && !opt.decrypt) {\n    return getFileSignedUnencrypted(caller, path, opt)\n  }\n\n  const storedContents = await getFileContents(caller, path, opt.app, opt.username,\n                                               opt.zoneFileLookupURL, !!opt.decrypt)\n  if (storedContents === null) {\n    return storedContents\n  } else if (opt.decrypt && !opt.verify) {\n    if (typeof storedContents !== 'string') {\n      throw new Error('Expected to get back a string for the cipherText')\n    }\n    if (typeof (opt.decrypt) === 'string') {\n      const decryptOpt = { privateKey: opt.decrypt }\n      return caller.decryptContent(storedContents, decryptOpt)\n    } else {\n      return caller.decryptContent(storedContents)\n    }\n  } else if (opt.decrypt && opt.verify) {\n    if (typeof storedContents !== 'string') {\n      throw new Error('Expected to get back a string for the cipherText')\n    }\n    let decryptionKey\n    if (typeof (opt.decrypt) === 'string') {\n      decryptionKey = opt.decrypt\n    }\n    return handleSignedEncryptedContents(caller, path, storedContents,\n                                         opt.app, decryptionKey, opt.username,\n                                         opt.zoneFileLookupURL)\n  } else if (!opt.verify && !opt.decrypt) {\n    return storedContents\n  } else {\n    throw new Error('Should be unreachable.')\n  }\n}\n\n/** @ignore */\ntype PutFileContent = string | Buffer | ArrayBufferView | ArrayBufferLike | Blob\n\n/** @ignore */\nclass FileContentLoader {\n  readonly content: Buffer | Blob\n\n  readonly wasString: boolean\n\n  readonly contentType: string\n\n  readonly contentByteLength: number\n\n  private loadedData?: Promise<Buffer>\n\n  static readonly supportedTypesMsg = 'Supported types are: `string` (to be UTF8 encoded), '\n    + '`Buffer`, `Blob`, `File`, `ArrayBuffer`, `UInt8Array` or any other typed array buffer. '\n\n  constructor(content: PutFileContent, contentType: string) {\n    this.wasString = typeof content === 'string'\n    this.content = FileContentLoader.normalizeContentDataType(content, contentType)\n    this.contentType = contentType || this.detectContentType()\n    this.contentByteLength = this.detectContentLength()\n  }\n\n  private static normalizeContentDataType(content: PutFileContent,\n                                          contentType: string): Buffer | Blob {\n    try {\n      if (typeof content === 'string') {\n        // If a charset is specified it must be either utf8 or ascii, otherwise the encoded content\n        // length cannot be reliably detected. If no charset specified it will be treated as utf8.\n        const charset = (contentType || '').toLowerCase().replace('-', '')\n        if (charset.includes('charset') && !charset.includes('charset=utf8') && !charset.includes('charset=ascii')) {\n          throw new Error(`Unable to determine byte length with charset: ${contentType}`)\n        }\n        if (typeof TextEncoder !== 'undefined') {\n          const encodedString = new TextEncoder().encode(content)\n          return Buffer.from(encodedString.buffer)\n        }\n        return Buffer.from(content)\n      } else if (Buffer.isBuffer(content)) {\n        return content\n      } else if (ArrayBuffer.isView(content)) {\n        return Buffer.from(content.buffer, content.byteOffset, content.byteLength)\n      } else if (typeof Blob !== 'undefined' && content instanceof Blob) {\n        return content\n      } else if (typeof ArrayBuffer !== 'undefined' && content instanceof ArrayBuffer) {\n        return Buffer.from(content)\n      } else if (Array.isArray(content)) {\n        // Provided with a regular number `Array` -- this is either an (old) method\n        // of representing an octet array, or a dev error. Perform basic check for octet array.\n        if (content.length > 0\n          && (!Number.isInteger(content[0]) || content[0] < 0 || content[0] > 255)) {\n          throw new Error(`Unexpected array values provided as file data: value \"${content[0]}\" at index 0 is not an octet number. ${this.supportedTypesMsg}`)\n        }\n        return Buffer.from(content)\n      } else {\n        const typeName = Object.prototype.toString.call(content)\n        throw new Error(`Unexpected type provided as file data: ${typeName}. ${this.supportedTypesMsg}`)\n      }\n    } catch (error) {\n      console.error(error)\n      throw new Error(`Error processing data: ${error}`)\n    }\n  }\n\n  private detectContentType(): string {\n    if (this.wasString) {\n      return 'text/plain; charset=utf-8'\n    } else if (typeof Blob !== 'undefined' && this.content instanceof Blob && this.content.type) {\n      return this.content.type\n    } else {\n      return 'application/octet-stream'\n    }\n  }\n\n  private detectContentLength(): number {\n    if (ArrayBuffer.isView(this.content) || Buffer.isBuffer(this.content)) {\n      return this.content.byteLength\n    } else if (typeof Blob !== 'undefined' && this.content instanceof Blob) {\n      return this.content.size\n    }\n    const typeName = Object.prototype.toString.call(this.content)\n    const error = new Error(`Unexpected type \"${typeName}\" while detecting content length`)\n    console.error(error)\n    throw error\n  }\n\n  private async loadContent(): Promise<Buffer> {\n    try {\n      if (Buffer.isBuffer(this.content)) {\n        return this.content\n      } else if (ArrayBuffer.isView(this.content)) {\n        return Buffer.from(this.content.buffer, this.content.byteOffset, this.content.byteLength)\n      } else if (typeof Blob !== 'undefined' && this.content instanceof Blob) {\n        const reader = new FileReader()\n        const readPromise = new Promise<Buffer>((resolve, reject) => {\n          reader.onerror = (err) => {\n            reject(err)\n          }\n          reader.onload = () => {\n            const arrayBuffer = reader.result as ArrayBuffer\n            resolve(Buffer.from(arrayBuffer))\n          }\n          reader.readAsArrayBuffer(this.content as Blob)\n        })\n        const result = await readPromise\n        return result\n      } else {\n        const typeName = Object.prototype.toString.call(this.content)\n        throw new Error(`Unexpected type ${typeName}`)\n      }\n    } catch (error) {\n      console.error(error)\n      const loadContentError = new Error(`Error loading content: ${error}`)\n      console.error(loadContentError)\n      throw loadContentError\n    }\n  }\n\n  load(): Promise<Buffer | string> {\n    if (this.loadedData === undefined) {\n      this.loadedData = this.loadContent()\n    }\n    return this.loadedData\n  }\n}\n\n/**\n * Determines if a gaia error response is possible to recover from\n * by refreshing the gaiaHubConfig, and retrying the request.\n */\nfunction isRecoverableGaiaError(error: GaiaHubError): boolean {\n  if (!error || !error.hubError || !error.hubError.statusCode) {\n    return false\n  }\n  const statusCode = error.hubError.statusCode\n  // 401 Unauthorized: possible expired, but renewable auth token.\n  if (statusCode === 401) {\n    return true\n  }\n  // 409 Conflict: possible concurrent writes to a file.\n  if (statusCode === 409) {\n    return true\n  }\n  // 500s: possible server-side transient error\n  if (statusCode >= 500 && statusCode <= 599) {\n    return true\n  }\n  return false\n}\n\n/**\n * Stores the data provided in the app's data store to to the file specified.\n * @param {UserSession} caller - internal use only: the usersession\n * @param {String} path - the path to store the data in\n * @param {String|Buffer|ArrayBufferView|Blob} content - the data to store in the file\n * @param {PutFileOptions} options - the putfile options\n * @return {Promise} that resolves if the operation succeed and rejects\n * if it failed\n */\nexport async function putFile(\n  caller: UserSession,\n  path: string,\n  content: string | Buffer | ArrayBufferView | Blob,\n  options?: PutFileOptions,\n): Promise<string> {\n  const defaults: PutFileOptions = {\n    encrypt: true,\n    sign: false,\n    cipherTextEncoding: 'hex',\n    dangerouslyIgnoreEtag: false\n  }\n  const opt = Object.assign({}, defaults, options)\n\n  const gaiaHubConfig = await caller.getOrSetLocalGaiaHubConnection()\n  const maxUploadBytes = megabytesToBytes(gaiaHubConfig.max_file_upload_size_megabytes)\n  const hasMaxUpload = maxUploadBytes > 0\n\n  const contentLoader = new FileContentLoader(content, opt.contentType)\n  let contentType = contentLoader.contentType\n\n  // When not encrypting the content length can be checked immediately.\n  if (!opt.encrypt && hasMaxUpload && contentLoader.contentByteLength > maxUploadBytes) {\n    const sizeErrMsg = `The max file upload size for this hub is ${maxUploadBytes} bytes, the given content is ${contentLoader.contentByteLength} bytes`\n    const sizeErr = new PayloadTooLargeError(sizeErrMsg, null, maxUploadBytes)\n    console.error(sizeErr)\n    throw sizeErr\n  }\n\n  // When encrypting, the content length must be calculated. Certain types like `Blob`s must\n  // be loaded into memory.\n  if (opt.encrypt && hasMaxUpload) {\n    const encryptedSize = eciesGetJsonStringLength({\n      contentLength: contentLoader.contentByteLength,\n      wasString: contentLoader.wasString,\n      sign: !!opt.sign,\n      cipherTextEncoding: opt.cipherTextEncoding\n    })\n    if (encryptedSize > maxUploadBytes) {\n      const sizeErrMsg = `The max file upload size for this hub is ${maxUploadBytes} bytes, the given content is ${encryptedSize} bytes after encryption`\n      const sizeErr = new PayloadTooLargeError(sizeErrMsg, null, maxUploadBytes)\n      console.error(sizeErr)\n      throw sizeErr\n    }\n  }\n\n  let etag: string\n  let newFile = true\n  const sessionData = caller.store.getSessionData();\n\n  if (!opt.dangerouslyIgnoreEtag) {\n    if (sessionData.etags[path]) {\n      newFile = false\n      etag = sessionData.etags[path]\n    } \n  }\n\n  let uploadFn: (hubConfig: GaiaHubConfig) => Promise<string>\n\n  // In the case of signing, but *not* encrypting, we perform two uploads.\n  if (!opt.encrypt && opt.sign) {\n    const contentData = await contentLoader.load()\n    let privateKey: string\n    if (typeof opt.sign === 'string') {\n      privateKey = opt.sign\n    } else {\n      privateKey = caller.loadUserData().appPrivateKey\n    }\n    const signatureObject = signECDSA(privateKey, contentData)\n    const signatureContent = JSON.stringify(signatureObject)\n\n    uploadFn = async (hubConfig: GaiaHubConfig) => {\n      const writeResponse = (await Promise.all([\n        uploadToGaiaHub(path, contentData, hubConfig, contentType, newFile, etag,\n                        opt.dangerouslyIgnoreEtag),\n        uploadToGaiaHub(`${path}${SIGNATURE_FILE_SUFFIX}`,\n                        signatureContent, hubConfig, 'application/json')\n      ]))[0]\n      if (writeResponse.etag) {\n        sessionData.etags[path] = writeResponse.etag;\n        caller.store.setSessionData(sessionData);\n      }\n      return writeResponse.publicURL\n    }\n  } else {\n    // In all other cases, we only need one upload.\n    let contentForUpload: string | Buffer | Blob\n    if (!opt.encrypt && !opt.sign) {\n      // If content does not need encrypted or signed, it can be passed directly\n      // to the fetch request without loading into memory.\n      contentForUpload = contentLoader.content\n    } else {\n      // Use the `encrypt` key, otherwise the `sign` key, if neither are specified\n      // then use the current user's app public key.\n      let publicKey: string\n      if (typeof opt.encrypt === 'string') {\n        publicKey = opt.encrypt\n      } else if (typeof opt.sign === 'string') {\n        publicKey = getPublicKeyFromPrivate(opt.sign)\n      } else {\n        publicKey = getPublicKeyFromPrivate(caller.loadUserData().appPrivateKey)\n      }\n      const contentData = await contentLoader.load()\n      contentForUpload = await encryptContent(caller, contentData, {\n        publicKey,\n        wasString: contentLoader.wasString,\n        cipherTextEncoding: opt.cipherTextEncoding,\n        sign: opt.sign\n      })\n      contentType = 'application/json'\n    }\n\n    uploadFn = async (hubConfig: GaiaHubConfig) => {\n      const writeResponse = await uploadToGaiaHub(\n        path, contentForUpload, hubConfig, contentType, newFile, etag, opt.dangerouslyIgnoreEtag\n      )\n      if (writeResponse.etag) {\n        sessionData.etags[path] = writeResponse.etag;\n        caller.store.setSessionData(sessionData);\n      }\n      return writeResponse.publicURL\n    }\n  }\n\n  try {\n    return await uploadFn(gaiaHubConfig)\n  } catch (error) {\n    // If the upload fails on first attempt, it could be due to a recoverable\n    // error which may succeed by refreshing the config and retrying.\n    if (isRecoverableGaiaError(error)) {\n      console.error(error)\n      console.error('Possible recoverable error during Gaia upload, retrying...')\n      const freshHubConfig = await caller.setLocalGaiaHubConnection()\n      return await uploadFn(freshHubConfig)\n    } else {\n      throw error\n    }\n  }\n}\n\n/**\n * Deletes the specified file from the app's data store.\n * @param path - The path to the file to delete.\n * @param options - Optional options object.\n * @param options.wasSigned - Set to true if the file was originally signed\n * in order for the corresponding signature file to also be deleted.\n * @returns Resolves when the file has been removed or rejects with an error.\n */\nexport async function deleteFile(\n  caller: UserSession,\n  path: string,\n  options?: {\n    wasSigned?: boolean;\n  }\n) {\n  const gaiaHubConfig = await caller.getOrSetLocalGaiaHubConnection()\n  const opts = Object.assign({}, options)\n  const sessionData = caller.store.getSessionData();\n  if (opts.wasSigned) {\n    // If signed, delete both the content file and the .sig file\n    try {\n      await deleteFromGaiaHub(path, gaiaHubConfig)\n      await deleteFromGaiaHub(`${path}${SIGNATURE_FILE_SUFFIX}`, gaiaHubConfig)\n      delete sessionData.etags[path];\n      caller.store.setSessionData(sessionData);\n    } catch (error) {\n      const freshHubConfig = await caller.setLocalGaiaHubConnection()\n      await deleteFromGaiaHub(path, freshHubConfig)\n      await deleteFromGaiaHub(`${path}${SIGNATURE_FILE_SUFFIX}`, gaiaHubConfig)\n      delete sessionData.etags[path];\n      caller.store.setSessionData(sessionData);\n    }\n  } else {\n    try {\n      await deleteFromGaiaHub(path, gaiaHubConfig)\n      delete sessionData.etags[path];\n      caller.store.setSessionData(sessionData);\n    } catch (error) {\n      const freshHubConfig = await caller.setLocalGaiaHubConnection()\n      await deleteFromGaiaHub(path, freshHubConfig)\n      delete sessionData.etags[path];\n      caller.store.setSessionData(sessionData);\n    }\n  }\n}\n\n/**\n * Get the app storage bucket URL\n * @param {String} gaiaHubUrl - the gaia hub URL\n * @param {String} appPrivateKey - the app private key used to generate the app address\n * @returns {Promise} That resolves to the URL of the app index file\n * or rejects if it fails\n */\nexport function getAppBucketUrl(gaiaHubUrl: string, appPrivateKey: string) {\n  return getBucketUrl(gaiaHubUrl, appPrivateKey)\n}\n\n/**\n * Loop over the list of files in a Gaia hub, and run a callback on each entry.\n * Not meant to be called by external clients.\n * @param {GaiaHubConfig} hubConfig - the Gaia hub config\n * @param {String | null} page - the page ID\n * @param {number} callCount - the loop count\n * @param {number} fileCount - the number of files listed so far\n * @param {function} callback - the callback to invoke on each file.  If it returns a falsey\n *  value, then the loop stops.  If it returns a truthy value, the loop continues.\n * @returns {Promise} that resolves to the number of files listed.\n * @private\n * @ignore\n */\nasync function listFilesLoop(\n  caller: UserSession,\n  hubConfig: GaiaHubConfig | null,\n  page: string | null,\n  callCount: number,\n  fileCount: number,\n  callback: (name: string) => boolean\n): Promise<number> {\n  if (callCount > 65536) {\n    // this is ridiculously huge, and probably indicates\n    // a faulty Gaia hub anyway (e.g. on that serves endless data)\n    throw new Error('Too many entries to list')\n  }\n\n  hubConfig = hubConfig || await caller.getOrSetLocalGaiaHubConnection()\n  let response: Response\n  try {\n    const pageRequest = JSON.stringify({ page })\n    const fetchOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Content-Length': `${pageRequest.length}`,\n        Authorization: `bearer ${hubConfig.token}`\n      },\n      body: pageRequest\n    }\n    response = await fetchPrivate(`${hubConfig.server}/list-files/${hubConfig.address}`, fetchOptions)\n    if (!response.ok) {\n      throw await getBlockstackErrorFromResponse(response, 'ListFiles failed.', hubConfig)\n    }\n  } catch (error) {\n    // If error occurs on the first call, perform a gaia re-connection and retry.\n    // Same logic as other gaia requests (putFile, getFile, etc).\n    if (callCount === 0) {\n      const freshHubConfig = await caller.setLocalGaiaHubConnection()\n      return listFilesLoop(caller, freshHubConfig, page, callCount + 1, 0, callback)\n    }\n    throw error\n  }\n\n  const responseText = await response.text()\n  const responseJSON = JSON.parse(responseText)\n  const entries = responseJSON.entries\n  const nextPage = responseJSON.page\n  if (entries === null || entries === undefined) {\n    // indicates a misbehaving Gaia hub or a misbehaving driver\n    // (i.e. the data is malformed)\n    throw new Error('Bad listFiles response: no entries')\n  }\n  let entriesLength = 0\n  for (let i = 0; i < entries.length; i++) {\n    // An entry array can have null entries, signifying a filtered entry and that there may be\n    // additional pages\n    if (entries[i] !== null) {\n      entriesLength++\n      const rc = callback(entries[i])\n      if (!rc) {\n        // callback indicates that we're done\n        return fileCount + i\n      }\n    }\n  }\n  if (nextPage && entries.length > 0) {\n    // keep going -- have more entries\n    return listFilesLoop(\n      caller, hubConfig, nextPage, callCount + 1, fileCount + entriesLength, callback\n    )\n  } else {\n    // no more entries -- end of data\n    return fileCount + entriesLength\n  }\n}\n\n/**\n * List the set of files in this application's Gaia storage bucket.\n * @param {function} callback - a callback to invoke on each named file that\n * returns `true` to continue the listing operation or `false` to end it\n * @return {Promise} that resolves to the total number of listed files.\n * If the call is ended early by the callback, the last file is excluded.\n * If an error occurs the entire call is rejected.\n */\nexport function listFiles(\n  caller: UserSession,\n  callback: (name: string) => boolean\n): Promise<number> {\n  return listFilesLoop(caller, null, null, 0, 0, callback)\n}\n\nexport { connectToGaiaHub, uploadToGaiaHub, BLOCKSTACK_GAIA_HUB_LABEL }\n","'use strict';\n\nvar assert = require('minimalistic-assert');\nvar inherits = require('inherits');\n\nexports.inherits = inherits;\n\nfunction isSurrogatePair(msg, i) {\n  if ((msg.charCodeAt(i) & 0xFC00) !== 0xD800) {\n    return false;\n  }\n  if (i < 0 || i + 1 >= msg.length) {\n    return false;\n  }\n  return (msg.charCodeAt(i + 1) & 0xFC00) === 0xDC00;\n}\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg === 'string') {\n    if (!enc) {\n      // Inspired by stringToUtf8ByteArray() in closure-library by Google\n      // https://github.com/google/closure-library/blob/8598d87242af59aac233270742c8984e2b2bdbe0/closure/goog/crypt/crypt.js#L117-L143\n      // Apache License 2.0\n      // https://github.com/google/closure-library/blob/master/LICENSE\n      var p = 0;\n      for (var i = 0; i < msg.length; i++) {\n        var c = msg.charCodeAt(i);\n        if (c < 128) {\n          res[p++] = c;\n        } else if (c < 2048) {\n          res[p++] = (c >> 6) | 192;\n          res[p++] = (c & 63) | 128;\n        } else if (isSurrogatePair(msg, i)) {\n          c = 0x10000 + ((c & 0x03FF) << 10) + (msg.charCodeAt(++i) & 0x03FF);\n          res[p++] = (c >> 18) | 240;\n          res[p++] = ((c >> 12) & 63) | 128;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        } else {\n          res[p++] = (c >> 12) | 224;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        }\n      }\n    } else if (enc === 'hex') {\n      msg = msg.replace(/[^a-z0-9]+/ig, '');\n      if (msg.length % 2 !== 0)\n        msg = '0' + msg;\n      for (i = 0; i < msg.length; i += 2)\n        res.push(parseInt(msg[i] + msg[i + 1], 16));\n    }\n  } else {\n    for (i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n  }\n  return res;\n}\nexports.toArray = toArray;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nexports.toHex = toHex;\n\nfunction htonl(w) {\n  var res = (w >>> 24) |\n            ((w >>> 8) & 0xff00) |\n            ((w << 8) & 0xff0000) |\n            ((w & 0xff) << 24);\n  return res >>> 0;\n}\nexports.htonl = htonl;\n\nfunction toHex32(msg, endian) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++) {\n    var w = msg[i];\n    if (endian === 'little')\n      w = htonl(w);\n    res += zero8(w.toString(16));\n  }\n  return res;\n}\nexports.toHex32 = toHex32;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nexports.zero2 = zero2;\n\nfunction zero8(word) {\n  if (word.length === 7)\n    return '0' + word;\n  else if (word.length === 6)\n    return '00' + word;\n  else if (word.length === 5)\n    return '000' + word;\n  else if (word.length === 4)\n    return '0000' + word;\n  else if (word.length === 3)\n    return '00000' + word;\n  else if (word.length === 2)\n    return '000000' + word;\n  else if (word.length === 1)\n    return '0000000' + word;\n  else\n    return word;\n}\nexports.zero8 = zero8;\n\nfunction join32(msg, start, end, endian) {\n  var len = end - start;\n  assert(len % 4 === 0);\n  var res = new Array(len / 4);\n  for (var i = 0, k = start; i < res.length; i++, k += 4) {\n    var w;\n    if (endian === 'big')\n      w = (msg[k] << 24) | (msg[k + 1] << 16) | (msg[k + 2] << 8) | msg[k + 3];\n    else\n      w = (msg[k + 3] << 24) | (msg[k + 2] << 16) | (msg[k + 1] << 8) | msg[k];\n    res[i] = w >>> 0;\n  }\n  return res;\n}\nexports.join32 = join32;\n\nfunction split32(msg, endian) {\n  var res = new Array(msg.length * 4);\n  for (var i = 0, k = 0; i < msg.length; i++, k += 4) {\n    var m = msg[i];\n    if (endian === 'big') {\n      res[k] = m >>> 24;\n      res[k + 1] = (m >>> 16) & 0xff;\n      res[k + 2] = (m >>> 8) & 0xff;\n      res[k + 3] = m & 0xff;\n    } else {\n      res[k + 3] = m >>> 24;\n      res[k + 2] = (m >>> 16) & 0xff;\n      res[k + 1] = (m >>> 8) & 0xff;\n      res[k] = m & 0xff;\n    }\n  }\n  return res;\n}\nexports.split32 = split32;\n\nfunction rotr32(w, b) {\n  return (w >>> b) | (w << (32 - b));\n}\nexports.rotr32 = rotr32;\n\nfunction rotl32(w, b) {\n  return (w << b) | (w >>> (32 - b));\n}\nexports.rotl32 = rotl32;\n\nfunction sum32(a, b) {\n  return (a + b) >>> 0;\n}\nexports.sum32 = sum32;\n\nfunction sum32_3(a, b, c) {\n  return (a + b + c) >>> 0;\n}\nexports.sum32_3 = sum32_3;\n\nfunction sum32_4(a, b, c, d) {\n  return (a + b + c + d) >>> 0;\n}\nexports.sum32_4 = sum32_4;\n\nfunction sum32_5(a, b, c, d, e) {\n  return (a + b + c + d + e) >>> 0;\n}\nexports.sum32_5 = sum32_5;\n\nfunction sum64(buf, pos, ah, al) {\n  var bh = buf[pos];\n  var bl = buf[pos + 1];\n\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  buf[pos] = hi >>> 0;\n  buf[pos + 1] = lo;\n}\nexports.sum64 = sum64;\n\nfunction sum64_hi(ah, al, bh, bl) {\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  return hi >>> 0;\n}\nexports.sum64_hi = sum64_hi;\n\nfunction sum64_lo(ah, al, bh, bl) {\n  var lo = al + bl;\n  return lo >>> 0;\n}\nexports.sum64_lo = sum64_lo;\n\nfunction sum64_4_hi(ah, al, bh, bl, ch, cl, dh, dl) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + carry;\n  return hi >>> 0;\n}\nexports.sum64_4_hi = sum64_4_hi;\n\nfunction sum64_4_lo(ah, al, bh, bl, ch, cl, dh, dl) {\n  var lo = al + bl + cl + dl;\n  return lo >>> 0;\n}\nexports.sum64_4_lo = sum64_4_lo;\n\nfunction sum64_5_hi(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n  lo = (lo + el) >>> 0;\n  carry += lo < el ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + eh + carry;\n  return hi >>> 0;\n}\nexports.sum64_5_hi = sum64_5_hi;\n\nfunction sum64_5_lo(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var lo = al + bl + cl + dl + el;\n\n  return lo >>> 0;\n}\nexports.sum64_5_lo = sum64_5_lo;\n\nfunction rotr64_hi(ah, al, num) {\n  var r = (al << (32 - num)) | (ah >>> num);\n  return r >>> 0;\n}\nexports.rotr64_hi = rotr64_hi;\n\nfunction rotr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.rotr64_lo = rotr64_lo;\n\nfunction shr64_hi(ah, al, num) {\n  return ah >>> num;\n}\nexports.shr64_hi = shr64_hi;\n\nfunction shr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.shr64_lo = shr64_lo;\n","// @ts-ignore: Could not find a declaration file for module\nimport { makeZoneFile, parseZoneFile } from 'zone-file'\nimport { extractProfile } from './profileTokens'\nimport { Person } from './profileSchemas/person'\nimport { Logger } from '../logger'\nimport { fetchPrivate } from '../fetchUtil'\n\n/**\n * \n * @param origin \n * @param tokenFileUrl \n * \n * @ignore\n */\nexport function makeProfileZoneFile(origin: string, tokenFileUrl: string): string {\n  if (tokenFileUrl.indexOf('://') < 0) {\n    throw new Error('Invalid token file url')\n  }\n\n  const urlScheme = tokenFileUrl.split('://')[0]\n  const urlParts = tokenFileUrl.split('://')[1].split('/')\n  const domain = urlParts[0]\n  const pathname = `/${urlParts.slice(1).join('/')}`\n\n  const zoneFile = {\n    $origin: origin,\n    $ttl: 3600,\n    uri: [\n      {\n        name: '_http._tcp',\n        priority: 10,\n        weight: 1,\n        target: `${urlScheme}://${domain}${pathname}`\n      }\n    ]\n  }\n\n  const zoneFileTemplate = '{$origin}\\n{$ttl}\\n{uri}\\n'\n\n\n  return makeZoneFile(zoneFile, zoneFileTemplate)\n}\n\n/**\n * \n * @param zoneFileJson \n * \n * @ignore\n */\nexport function getTokenFileUrl(zoneFileJson: any): string | null {\n  if (!zoneFileJson.hasOwnProperty('uri')) {\n    return null\n  }\n  if (!Array.isArray(zoneFileJson.uri)) {\n    return null\n  }\n  if (zoneFileJson.uri.length < 1) {\n    return null\n  }\n  const firstUriRecord = zoneFileJson.uri[0]\n\n  if (!firstUriRecord.hasOwnProperty('target')) {\n    return null\n  }\n  let tokenFileUrl = firstUriRecord.target\n\n  if (tokenFileUrl.startsWith('https')) {\n    // pass\n  } else if (tokenFileUrl.startsWith('http')) {\n    // pass\n  } else {\n    tokenFileUrl = `https://${tokenFileUrl}`\n  }\n\n  return tokenFileUrl\n}\n\n/**\n * \n * @param zoneFile \n * @param publicKeyOrAddress \n * \n * @ignore\n */\nexport function resolveZoneFileToProfile(zoneFile: any, publicKeyOrAddress: string) {\n  return new Promise((resolve, reject) => {\n    let zoneFileJson = null\n    try {\n      zoneFileJson = parseZoneFile(zoneFile)\n      if (!zoneFileJson.hasOwnProperty('$origin')) {\n        zoneFileJson = null\n      }\n    } catch (e) {\n      reject(e)\n    }\n\n    let tokenFileUrl: string | null = null\n    if (zoneFileJson && Object.keys(zoneFileJson).length > 0) {\n      tokenFileUrl = getTokenFileUrl(zoneFileJson)\n    } else {\n      let profile = null\n      try {\n        profile = JSON.parse(zoneFile)\n        profile = Person.fromLegacyFormat(profile).profile()\n      } catch (error) {\n        reject(error)\n      }\n      resolve(profile)\n      return\n    }\n\n    if (tokenFileUrl) {\n      fetchPrivate(tokenFileUrl)\n        .then(response => response.text())\n        .then(responseText => JSON.parse(responseText))\n        .then((responseJson) => {\n          const tokenRecords = responseJson\n          const profile = extractProfile(tokenRecords[0].token, publicKeyOrAddress)\n          resolve(profile)\n        })\n        .catch((error) => {\n          Logger.error(`resolveZoneFileToProfile: error fetching token file ${tokenFileUrl}: ${error}`)\n          reject(error)\n        })\n    } else {\n      Logger.debug('Token file url not found. Resolving to blank profile.')\n      resolve({})\n    }\n  })\n}\n","\nexport function isSubtleCryptoAvailable(): boolean {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined'\n}\n\nexport function isNodeCryptoAvailable<T>(\n  withFeature: (nodeCrypto: typeof import('crypto')) => boolean | T\n): false | T\nexport function isNodeCryptoAvailable<T>(\n  withFeature?: (nodeCrypto: typeof import('crypto')) => boolean | T\n): boolean | T {\n  try {\n    const resolvedResult = require.resolve('crypto')\n    if (!resolvedResult) {\n      return false\n    }\n    // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require\n    const cryptoModule = require('crypto') as typeof import('crypto')\n    if (!cryptoModule) {\n      return false\n    }\n    if (withFeature) {\n      const features = withFeature(cryptoModule)\n      return features\n    }\n    return true\n  } catch (error) {\n    return false\n  }\n}\n\nexport const NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.'\n\nexport type TriplesecDecryptSignature =  (\n  arg: { data: Buffer; key: Buffer }, cb: (err: Error | null, buff: Buffer | null) => void\n) => void\n\nexport interface WebCryptoLib {\n  lib: SubtleCrypto;\n  name: 'subtleCrypto'\n}\n\nexport interface NodeCryptoLib {\n  lib: typeof import('crypto');\n  name: 'nodeCrypto'\n}\n\n// Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function getCryptoLib(): Promise<WebCryptoLib | NodeCryptoLib> {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto'\n    }\n  } else {\n    try {\n      // eslint-disable-next-line max-len\n      // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require,@typescript-eslint/no-var-requires\n      const nodeCrypto = require('crypto') as typeof import('crypto')\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto'\n      }\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB)\n    }\n  }\n}\n","import * as randombytes from 'randombytes'\n\nexport { randombytes as randomBytes }\n\n/** Optional function to generate cryptographically secure random bytes */\nexport type GetRandomBytes = (count: number) => Buffer\n\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeforce = require('typeforce');\nconst UINT31_MAX = Math.pow(2, 31) - 1;\nfunction UInt31(value) {\n  return typeforce.UInt32(value) && value <= UINT31_MAX;\n}\nexports.UInt31 = UInt31;\nfunction BIP32Path(value) {\n  return typeforce.String(value) && !!value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/);\n}\nexports.BIP32Path = BIP32Path;\nBIP32Path.toJSON = () => {\n  return 'BIP32 derivation path';\n};\nfunction Signer(obj) {\n  return (\n    (typeforce.Buffer(obj.publicKey) ||\n      typeof obj.getPublicKey === 'function') &&\n    typeof obj.sign === 'function'\n  );\n}\nexports.Signer = Signer;\nconst SATOSHI_MAX = 21 * 1e14;\nfunction Satoshi(value) {\n  return typeforce.UInt53(value) && value <= SATOSHI_MAX;\n}\nexports.Satoshi = Satoshi;\n// external dependent types\nexports.ECPoint = typeforce.quacksLike('Point');\n// exposed, external API\nexports.Network = typeforce.compile({\n  messagePrefix: typeforce.oneOf(typeforce.Buffer, typeforce.String),\n  bip32: {\n    public: typeforce.UInt32,\n    private: typeforce.UInt32,\n  },\n  pubKeyHash: typeforce.UInt8,\n  scriptHash: typeforce.UInt8,\n  wif: typeforce.UInt8,\n});\nexports.Buffer256bit = typeforce.BufferN(32);\nexports.Hash160bit = typeforce.BufferN(20);\nexports.Hash256bit = typeforce.BufferN(32);\nexports.Number = typeforce.Number; // tslint:disable-line variable-name\nexports.Array = typeforce.Array;\nexports.Boolean = typeforce.Boolean; // tslint:disable-line variable-name\nexports.String = typeforce.String; // tslint:disable-line variable-name\nexports.Buffer = typeforce.Buffer;\nexports.Hex = typeforce.Hex;\nexports.maybe = typeforce.maybe;\nexports.tuple = typeforce.tuple;\nexports.UInt8 = typeforce.UInt8;\nexports.UInt32 = typeforce.UInt32;\nexports.Function = typeforce.Function;\nexports.BufferN = typeforce.BufferN;\nexports.Null = typeforce.Null;\nexports.oneOf = typeforce.oneOf;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst createHash = require('create-hash');\nfunction ripemd160(buffer) {\n  try {\n    return createHash('rmd160')\n      .update(buffer)\n      .digest();\n  } catch (err) {\n    return createHash('ripemd160')\n      .update(buffer)\n      .digest();\n  }\n}\nexports.ripemd160 = ripemd160;\nfunction sha1(buffer) {\n  return createHash('sha1')\n    .update(buffer)\n    .digest();\n}\nexports.sha1 = sha1;\nfunction sha256(buffer) {\n  return createHash('sha256')\n    .update(buffer)\n    .digest();\n}\nexports.sha256 = sha256;\nfunction hash160(buffer) {\n  return ripemd160(sha256(buffer));\n}\nexports.hash160 = hash160;\nfunction hash256(buffer) {\n  return sha256(sha256(buffer));\n}\nexports.hash256 = hash256;\n","// @ts-ignore: Could not find a declaration file for module\nimport * as inspector from 'schema-inspector'\n\nimport { signProfileToken, extractProfile } from './profileTokens'\nimport { validateProofs } from './profileProofs'\nimport { makeProfileZoneFile } from './profileZoneFiles'\nimport { CheerioModuleType } from './services/service'\n\nconst schemaDefinition: {[key: string]: any} = {\n  type: 'object',\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' }\n  }\n}\n \n/**\n * Represents a user profile\n * \n */\nexport class Profile {\n  _profile: {[key: string]: any}\n\n  constructor(profile = {}) {\n    this._profile = Object.assign({}, {\n      '@context': 'http://schema.org/'\n    }, profile)\n  }\n\n  toJSON() {\n    return Object.assign({}, this._profile)\n  }\n\n  toToken(privateKey: string): string {\n    return signProfileToken(this.toJSON(), privateKey)\n  }\n\n  static validateSchema(profile: any, strict = false): any {\n    schemaDefinition.strict = strict\n    return inspector.validate(schemaDefinition, profile)\n  }\n\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): Profile {\n    const profile = extractProfile(token, publicKeyOrAddress)\n    return new Profile(profile)\n  }\n\n  static makeZoneFile(domainName: string, tokenFileURL: string): string {\n    return makeProfileZoneFile(domainName, tokenFileURL)\n  }\n\n  static async validateProofs(domainName: string, cheerio: CheerioModuleType): Promise<any[]> {\n    return validateProofs(new Profile().toJSON(), domainName, cheerio)\n  }\n}\n","module.exports = require('./lib/schema-inspector');\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","const BN = require('bn.js')\nconst EC = require('elliptic').ec\nconst secp256k1 = new EC('secp256k1')\nconst deterministicGenerateK = require('./rfc6979')\n\nconst ZERO32 = Buffer.alloc(32, 0)\nconst EC_GROUP_ORDER = Buffer.from('fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141', 'hex')\nconst EC_P = Buffer.from('fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f', 'hex')\n\nconst n = secp256k1.curve.n\nconst nDiv2 = n.shrn(1)\nconst G = secp256k1.curve.g\n\nconst THROW_BAD_PRIVATE = 'Expected Private'\nconst THROW_BAD_POINT = 'Expected Point'\nconst THROW_BAD_TWEAK = 'Expected Tweak'\nconst THROW_BAD_HASH = 'Expected Hash'\nconst THROW_BAD_SIGNATURE = 'Expected Signature'\nconst THROW_BAD_EXTRA_DATA = 'Expected Extra Data (32 bytes)'\n\nfunction isScalar (x) {\n  return Buffer.isBuffer(x) && x.length === 32\n}\n\nfunction isOrderScalar (x) {\n  if (!isScalar(x)) return false\n  return x.compare(EC_GROUP_ORDER) < 0 // < G\n}\n\nfunction isPoint (p) {\n  if (!Buffer.isBuffer(p)) return false\n  if (p.length < 33) return false\n\n  const t = p[0]\n  const x = p.slice(1, 33)\n  if (x.compare(ZERO32) === 0) return false\n  if (x.compare(EC_P) >= 0) return false\n  if ((t === 0x02 || t === 0x03) && p.length === 33) {\n    try { decodeFrom(p) } catch (e) { return false } // TODO: temporary\n    return true\n  }\n\n  const y = p.slice(33)\n  if (y.compare(ZERO32) === 0) return false\n  if (y.compare(EC_P) >= 0) return false\n  if (t === 0x04 && p.length === 65) return true\n  return false\n}\n\nfunction __isPointCompressed (p) {\n  return p[0] !== 0x04\n}\n\nfunction isPointCompressed (p) {\n  if (!isPoint(p)) return false\n  return __isPointCompressed(p)\n}\n\nfunction isPrivate (x) {\n  if (!isScalar(x)) return false\n  return x.compare(ZERO32) > 0 && // > 0\n    x.compare(EC_GROUP_ORDER) < 0 // < G\n}\n\nfunction isSignature (value) {\n  const r = value.slice(0, 32)\n  const s = value.slice(32, 64)\n  return Buffer.isBuffer(value) && value.length === 64 &&\n    r.compare(EC_GROUP_ORDER) < 0 &&\n    s.compare(EC_GROUP_ORDER) < 0\n}\n\nfunction assumeCompression (value, pubkey) {\n  if (value === undefined && pubkey !== undefined) return __isPointCompressed(pubkey)\n  if (value === undefined) return true\n  return value\n}\n\nfunction fromBuffer (d) { return new BN(d) }\nfunction toBuffer (d) { return d.toArrayLike(Buffer, 'be', 32) }\nfunction decodeFrom (P) { return secp256k1.curve.decodePoint(P) }\nfunction getEncoded (P, compressed) { return Buffer.from(P._encode(compressed)) }\n\nfunction pointAdd (pA, pB, __compressed) {\n  if (!isPoint(pA)) throw new TypeError(THROW_BAD_POINT)\n  if (!isPoint(pB)) throw new TypeError(THROW_BAD_POINT)\n\n  const a = decodeFrom(pA)\n  const b = decodeFrom(pB)\n  const pp = a.add(b)\n  if (pp.isInfinity()) return null\n\n  const compressed = assumeCompression(__compressed, pA)\n  return getEncoded(pp, compressed)\n}\n\nfunction pointAddScalar (p, tweak, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const compressed = assumeCompression(__compressed, p)\n  const pp = decodeFrom(p)\n  if (tweak.compare(ZERO32) === 0) return getEncoded(pp, compressed)\n\n  const tt = fromBuffer(tweak)\n  const qq = G.mul(tt)\n  const uu = pp.add(qq)\n  if (uu.isInfinity()) return null\n\n  return getEncoded(uu, compressed)\n}\n\nfunction pointCompress (p, compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n\n  const pp = decodeFrom(p)\n  if (pp.isInfinity()) throw new TypeError(THROW_BAD_POINT)\n\n  return getEncoded(pp, compressed)\n}\n\nfunction pointFromScalar (d, __compressed) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n\n  const dd = fromBuffer(d)\n  const pp = G.mul(dd)\n  if (pp.isInfinity()) return null\n\n  const compressed = assumeCompression(__compressed)\n  return getEncoded(pp, compressed)\n}\n\nfunction pointMultiply (p, tweak, __compressed) {\n  if (!isPoint(p)) throw new TypeError(THROW_BAD_POINT)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const compressed = assumeCompression(__compressed, p)\n  const pp = decodeFrom(p)\n  const tt = fromBuffer(tweak)\n  const qq = pp.mul(tt)\n  if (qq.isInfinity()) return null\n\n  return getEncoded(qq, compressed)\n}\n\nfunction privateAdd (d, tweak) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const dd = fromBuffer(d)\n  const tt = fromBuffer(tweak)\n  const dt = toBuffer(dd.add(tt).umod(n))\n  if (!isPrivate(dt)) return null\n\n  return dt\n}\n\nfunction privateSub (d, tweak) {\n  if (!isPrivate(d)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (!isOrderScalar(tweak)) throw new TypeError(THROW_BAD_TWEAK)\n\n  const dd = fromBuffer(d)\n  const tt = fromBuffer(tweak)\n  const dt = toBuffer(dd.sub(tt).umod(n))\n  if (!isPrivate(dt)) return null\n\n  return dt\n}\n\nfunction sign (hash, x) {\n  return __sign(hash, x)\n}\n\nfunction signWithEntropy (hash, x, addData) {\n  return __sign(hash, x, addData)\n}\n\nfunction __sign (hash, x, addData) {\n  if (!isScalar(hash)) throw new TypeError(THROW_BAD_HASH)\n  if (!isPrivate(x)) throw new TypeError(THROW_BAD_PRIVATE)\n  if (addData !== undefined && !isScalar(addData)) throw new TypeError(THROW_BAD_EXTRA_DATA)\n\n  const d = fromBuffer(x)\n  const e = fromBuffer(hash)\n\n  let r, s\n  const checkSig = function (k) {\n    const kI = fromBuffer(k)\n    const Q = G.mul(kI)\n\n    if (Q.isInfinity()) return false\n\n    r = Q.x.umod(n)\n    if (r.isZero() === 0) return false\n\n    s = kI\n      .invm(n)\n      .mul(e.add(d.mul(r)))\n      .umod(n)\n    if (s.isZero() === 0) return false\n\n    return true\n  }\n\n  deterministicGenerateK(hash, x, checkSig, isPrivate, addData)\n\n  // enforce low S values, see bip62: 'low s values in signatures'\n  if (s.cmp(nDiv2) > 0) {\n    s = n.sub(s)\n  }\n\n  const buffer = Buffer.allocUnsafe(64)\n  toBuffer(r).copy(buffer, 0)\n  toBuffer(s).copy(buffer, 32)\n  return buffer\n}\n\nfunction verify (hash, q, signature) {\n  if (!isScalar(hash)) throw new TypeError(THROW_BAD_HASH)\n  if (!isPoint(q)) throw new TypeError(THROW_BAD_POINT)\n\n  // 1.4.1 Enforce r and s are both integers in the interval [1, n  1] (1, isSignature enforces '< n - 1')\n  if (!isSignature(signature)) throw new TypeError(THROW_BAD_SIGNATURE)\n\n  const Q = decodeFrom(q)\n  const r = fromBuffer(signature.slice(0, 32))\n  const s = fromBuffer(signature.slice(32, 64))\n\n  // 1.4.1 Enforce r and s are both integers in the interval [1, n  1] (2, enforces '> 0')\n  if (r.gtn(0) <= 0 /* || r.compareTo(n) >= 0 */) return false\n  if (s.gtn(0) <= 0 /* || s.compareTo(n) >= 0 */) return false\n\n  // 1.4.2 H = Hash(M), already done by the user\n  // 1.4.3 e = H\n  const e = fromBuffer(hash)\n\n  // Compute s^-1\n  const sInv = s.invm(n)\n\n  // 1.4.4 Compute u1 = es^1 mod n\n  //               u2 = rs^1 mod n\n  const u1 = e.mul(sInv).umod(n)\n  const u2 = r.mul(sInv).umod(n)\n\n  // 1.4.5 Compute R = (xR, yR)\n  //               R = u1G + u2Q\n  const R = G.mulAdd(u1, Q, u2)\n\n  // 1.4.5 (cont.) Enforce R is not at infinity\n  if (R.isInfinity()) return false\n\n  // 1.4.6 Convert the field element R.x to an integer\n  const xR = R.x\n\n  // 1.4.7 Set v = xR mod n\n  const v = xR.umod(n)\n\n  // 1.4.8 If v = r, output \"valid\", and if v != r, output \"invalid\"\n  return v.eq(r)\n}\n\nmodule.exports = {\n  isPoint,\n  isPointCompressed,\n  isPrivate,\n  pointAdd,\n  pointAddScalar,\n  pointCompress,\n  pointFromScalar,\n  pointMultiply,\n  privateAdd,\n  privateSub,\n  sign,\n  signWithEntropy,\n  verify\n}\n","module.exports = assert;\n\nfunction assert(val, msg) {\n  if (!val)\n    throw new Error(msg || 'Assertion failed');\n}\n\nassert.equal = function assertEqual(l, r, msg) {\n  if (l != r)\n    throw new Error(msg || ('Assertion failed: ' + l + ' != ' + r));\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction prop(object, name, f) {\n  Object.defineProperty(object, name, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      const _value = f.call(this);\n      this[name] = _value;\n      return _value;\n    },\n    set(_value) {\n      Object.defineProperty(this, name, {\n        configurable: true,\n        enumerable: true,\n        value: _value,\n        writable: true,\n      });\n    },\n  });\n}\nexports.prop = prop;\nfunction value(f) {\n  let _value;\n  return () => {\n    if (_value !== undefined) return _value;\n    _value = f();\n    return _value;\n  };\n}\nexports.value = value;\n","var exports = module.exports = function SHA (algorithm) {\n  algorithm = algorithm.toLowerCase()\n\n  var Algorithm = exports[algorithm]\n  if (!Algorithm) throw new Error(algorithm + ' is not supported (we accept pull requests)')\n\n  return new Algorithm()\n}\n\nexports.sha = require('./sha')\nexports.sha1 = require('./sha1')\nexports.sha224 = require('./sha224')\nexports.sha256 = require('./sha256')\nexports.sha384 = require('./sha384')\nexports.sha512 = require('./sha512')\n","\nimport { GaiaHubConfig } from '../storage/hub'\nimport { InvalidStateError } from '../errors'\nimport { UserData } from './authApp'\n\nconst SESSION_VERSION = '1.0.0'\n\ntype EtagMap = { [key: string]: string; };\n\nexport interface SessionOptions {\n  coreNode?: string,\n  userData?: UserData,\n  transitKey?: string,\n  etags?: EtagMap,\n  localStorageKey?: string,\n  storeOptions?: {\n    localStorageKey?: string\n  }\n}\n\n/**\n * @ignore\n */\nexport class SessionData {\n  version: string\n\n  transitKey?: string\n\n  // using this in place of\n  // window.localStorage.setItem(BLOCKSTACK_STORAGE_LABEL, JSON.stringify(userData))\n  userData?: UserData\n\n  etags?: EtagMap\n\n  constructor(options: SessionOptions) {\n    this.version = SESSION_VERSION\n    this.userData = options.userData\n    this.transitKey = options.transitKey\n    this.etags = options.etags ? options.etags : {}\n  }\n\n  getGaiaHubConfig(): GaiaHubConfig {\n    return this.userData && this.userData.gaiaHubConfig\n  }\n\n  setGaiaHubConfig(config: GaiaHubConfig): void {\n    this.userData.gaiaHubConfig = config\n  }\n\n  static fromJSON(json: any): SessionData {\n    if (json.version !== SESSION_VERSION) {\n      throw new InvalidStateError(`JSON data version ${json.version} not supported by SessionData`)\n    }\n    const options: SessionOptions = {\n      coreNode: json.coreNode,\n      userData: json.userData,\n      transitKey: json.transitKey,\n      etags: json.etags\n    }\n    return new SessionData(options)\n  }\n\n  toString(): string {\n    return JSON.stringify(this)\n  }\n}\n","\nimport { SessionData, SessionOptions } from './sessionData'\n// import { BLOCKSTACK_GAIA_HUB_LABEL } from '../storage/hub'\nimport {\n  LOCALSTORAGE_SESSION_KEY\n} from './authConstants'\nimport { NoSessionDataError } from '../errors'\n// import { Logger } from '../logger'\n\n/**\n * An abstract class representing the SessionDataStore interface.\n\n */\nexport class SessionDataStore {\n  constructor(sessionOptions?: SessionOptions) {\n    if (sessionOptions) {\n      const newSessionData = new SessionData(sessionOptions)\n      this.setSessionData(newSessionData)\n    }\n  }\n\n  getSessionData(): SessionData {\n    throw new Error('Abstract class')\n  }\n\n  /* eslint-disable */\n  setSessionData(session: SessionData): boolean {\n    throw new Error('Abstract class')\n  }\n\n  deleteSessionData(): boolean {\n    throw new Error('Abstract class')\n  }\n  /* eslint-enable */\n}\n\n/**\n * Stores session data in the instance of this class.\n * @ignore\n */\nexport class InstanceDataStore extends SessionDataStore {\n  sessionData?: SessionData\n\n  constructor(sessionOptions?: SessionOptions) {\n    super(sessionOptions)\n    if (!this.sessionData) {\n      this.setSessionData(new SessionData({}))\n    }\n  }\n\n\n  getSessionData(): SessionData {\n    if (!this.sessionData) {\n      throw new NoSessionDataError('No session data was found.')\n    }\n    return this.sessionData\n  }\n\n  setSessionData(session: SessionData): boolean {\n    this.sessionData = session\n    return true\n  }\n\n  deleteSessionData(): boolean {\n    this.setSessionData(new SessionData({}))\n    return true\n  }\n}\n\n/**\n * Stores session data in browser a localStorage entry.\n * @ignore\n */\nexport class LocalStorageStore extends SessionDataStore {\n  key: string\n\n  constructor(sessionOptions?: SessionOptions) {\n    super(sessionOptions)\n    if (sessionOptions\n      && sessionOptions.storeOptions\n      && sessionOptions.storeOptions.localStorageKey\n      && (typeof sessionOptions.storeOptions.localStorageKey === 'string')) {\n      this.key = sessionOptions.storeOptions.localStorageKey\n    } else {\n      this.key = LOCALSTORAGE_SESSION_KEY\n    }\n\n    const data = localStorage.getItem(this.key)\n    if (!data) {\n      const sessionData = new SessionData({})\n      this.setSessionData(sessionData)\n    }\n  }\n\n  getSessionData(): SessionData {\n    const data = localStorage.getItem(this.key)\n    if (!data) {\n      throw new NoSessionDataError('No session data was found in localStorage')\n    }\n    const dataJSON = JSON.parse(data)\n    return SessionData.fromJSON(dataJSON)\n  }\n\n  setSessionData(session: SessionData): boolean {\n    localStorage.setItem(this.key, session.toString())\n    return true\n  }\n\n  deleteSessionData(): boolean {\n    localStorage.removeItem(this.key)\n    this.setSessionData(new SessionData({}))\n    return true\n  }\n\n  // checkForLegacyDataAndMigrate(): Promise<SessionData> {\n  //   const legacyTransitKey = localStorage.getItem(BLOCKSTACK_APP_PRIVATE_KEY_LABEL)\n  //   const legacyGaiaConfig = localStorage.getItem(BLOCKSTACK_GAIA_HUB_LABEL)\n  //   const legacyUserData = localStorage.getItem(BLOCKSTACK_STORAGE_LABEL)\n  //\n  //\n  //   if (legacyTransitKey) {\n  //     localStorage.removeItem(BLOCKSTACK_APP_PRIVATE_KEY_LABEL)\n  //   }\n  //\n  //\n  //\n  // }\n}\n","import { AppConfig } from './appConfig'\nimport { SessionOptions } from './sessionData'\nimport {\n  LocalStorageStore,\n  SessionDataStore,\n  InstanceDataStore\n} from './sessionStore'\n\nimport * as authMessages from './authMessages'\nimport * as storage from '../storage'\n\nimport {\n  nextHour\n} from '../utils'\nimport {\n  MissingParameterError,\n  InvalidStateError\n} from '../errors'\nimport { Logger } from '../logger'\nimport { GaiaHubConfig, connectToGaiaHub } from '../storage/hub'\nimport { BLOCKSTACK_DEFAULT_GAIA_HUB_URL, AuthScope } from './authConstants'\nimport {\n  redirectToSignInWithAuthRequest, isSignInPending, handlePendingSignIn,\n  signUserOut, getAuthResponseToken\n} from './authApp'\n\n\n/**\n * \n * Represents an instance of a signed in user for a particular app.\n *\n * A signed in user has access to two major pieces of information\n * about the user, the user's private key for that app and the location\n * of the user's gaia storage bucket for the app.\n *\n * A user can be signed in either directly through the interactive\n * sign in process or by directly providing the app private key.\n * \n\n * \n */\nexport class UserSession {\n  appConfig: AppConfig\n\n  store: SessionDataStore\n\n  /**\n   * Creates a UserSession object\n   * \n   * @param options \n   */\n  constructor(options?: {\n    appConfig?: AppConfig,\n    sessionStore?: SessionDataStore,\n    sessionOptions?: SessionOptions }) {\n    let runningInBrowser = true\n\n    if (typeof window === 'undefined' && typeof self === 'undefined') {\n      Logger.debug('UserSession: not running in browser')\n      runningInBrowser = false\n    }\n\n    if (options && options.appConfig) {\n      this.appConfig = options.appConfig\n    } else if (runningInBrowser) {\n      this.appConfig = new AppConfig()\n    } else {\n      throw new MissingParameterError('You need to specify options.appConfig')\n    }\n\n    if (options && options.sessionStore) {\n      this.store = options.sessionStore\n    } else if (runningInBrowser) {\n      if (options) {\n        this.store = new LocalStorageStore(options.sessionOptions)\n      } else {\n        this.store = new LocalStorageStore()\n      }\n    } else if (options) {\n      this.store = new InstanceDataStore(options.sessionOptions)\n    } else {\n      this.store = new InstanceDataStore()\n    }\n  }\n\n  \n  /**\n   * Generates an authentication request and redirects the user to the Blockstack\n   * browser to approve the sign in request.\n   *\n   * Please note that this requires that the web browser properly handles the\n   * `blockstack:` URL protocol handler.\n   *\n   * Most applications should use this\n   * method for sign in unless they require more fine grained control over how the\n   * authentication request is generated. If your app falls into this category,\n   * use [[generateAndStoreTransitKey]], [[makeAuthRequest]],\n   * and [[redirectToSignInWithAuthRequest]] to build your own sign in process.\n   * \n   * @param redirectURI Location of your application.\n   * @param manifestURI Location of the manifest.json file\n   * @param scopes Permissions requested by the application. Possible values are\n   *  `store_write` (default) or `publish_data`.\n   * \n   * @returns {void}\n   */\n  redirectToSignIn(\n    redirectURI?: string,\n    manifestURI?: string,\n    scopes?: Array<AuthScope | string>\n  ): void {\n    const transitKey = this.generateAndStoreTransitKey()\n    const authRequest = this.makeAuthRequest(transitKey, redirectURI, manifestURI, scopes)\n    const authenticatorURL = this.appConfig && this.appConfig.authenticatorURL\n    return redirectToSignInWithAuthRequest(authRequest, authenticatorURL)\n  }\n\n  /**\n   * Redirects the user to the Blockstack browser to approve the sign in request. \n   * To construct a request see the [[makeAuthRequest]] function.\n   *\n   * The user is redirected to the authenticator URL specified in the `AppConfig`\n   * if the `blockstack:` protocol handler is not detected.\n   * Please note that the protocol handler detection does not work on all browsers.\n   * \n   * @param authRequest A request string built by the [[makeAuthRequest]] function\n   * @param blockstackIDHost The ID of the Blockstack Browser application.\n   * \n   */\n  redirectToSignInWithAuthRequest(\n    authRequest?: string,\n    blockstackIDHost?: string\n  ): void {\n    authRequest = authRequest || this.makeAuthRequest()\n    const authenticatorURL = blockstackIDHost \n      || (this.appConfig && this.appConfig.authenticatorURL)\n    return redirectToSignInWithAuthRequest(authRequest, authenticatorURL)\n  }\n\n  /**\n   * Generates an authentication request that can be sent to the Blockstack\n   * browser for the user to approve sign in. This authentication request can\n   * then be used for sign in by passing it to the [[redirectToSignInWithAuthRequest]]\n   * method.\n   *\n   * *Note*: This method should only be used if you want to use a customized authentication\n   * flow. Typically, you'd use [[redirectToSignIn]] which is the default sign in method.\n   * \n   * @param transitKey A HEX encoded transit private key.\n   * @param redirectURI Location to redirect the user to after sign in approval.\n   * @param manifestURI Location of this app's manifest file.\n   * @param scopes The permissions this app is requesting. The default is `store_write`.\n   * @param appDomain The origin of the app.\n   * @param expiresAt The time at which this request is no longer valid.\n   * @param extraParams Any extra parameters to pass to the authenticator. Use this to \n   * pass options that aren't part of the Blockstack authentication specification, \n   * but might be supported by special authenticators.\n   * \n   * @returns {String} the authentication request\n   */\n  makeAuthRequest(\n    transitKey?: string,\n    redirectURI?: string,\n    manifestURI?: string,\n    scopes?: Array<AuthScope | string>,\n    appDomain?: string,\n    expiresAt: number = nextHour().getTime(),\n    extraParams: any = {}\n  ): string {\n    const appConfig = this.appConfig\n    if (!appConfig) {\n      throw new InvalidStateError('Missing AppConfig')\n    }\n    transitKey = transitKey || this.generateAndStoreTransitKey()\n    redirectURI = redirectURI || appConfig.redirectURI()\n    manifestURI = manifestURI || appConfig.manifestURI()\n    scopes = scopes || appConfig.scopes\n    appDomain = appDomain || appConfig.appDomain\n    return authMessages.makeAuthRequest(\n      transitKey, redirectURI, manifestURI,\n      scopes, appDomain, expiresAt, extraParams)\n  }\n\n  /**\n   * Generates a ECDSA keypair to\n   * use as the ephemeral app transit private key\n   * and store in the session.\n   * \n   * @returns {String} the hex encoded private key\n   *\n   */\n  generateAndStoreTransitKey(): string {\n    const sessionData = this.store.getSessionData()\n    const transitKey = authMessages.generateTransitKey()\n    sessionData.transitKey = transitKey\n    this.store.setSessionData(sessionData)\n    return transitKey\n  }\n\n  /**\n   * Retrieve the authentication token from the URL query.\n   * \n   * @returns {String} the authentication token if it exists otherwise `null`\n   */\n  getAuthResponseToken(): string {\n    return getAuthResponseToken()\n  }\n\n  /**\n   * Check if there is a authentication request that hasn't been handled.\n   * \n   * @returns{Boolean} `true` if there is a pending sign in, otherwise `false`\n   */\n  isSignInPending() {\n    return isSignInPending()\n  }\n\n  /**\n   * Check if a user is currently signed in.\n   * \n   * @returns {Boolean} `true` if the user is signed in, `false` if not.\n   */\n  isUserSignedIn() {\n    return !!this.store.getSessionData().userData\n  }\n\n  /**\n   * Try to process any pending sign in request by returning a `Promise` that resolves\n   * to the user data object if the sign in succeeds.\n   *\n   * @param {String} authResponseToken - the signed authentication response token\n   * @returns {Promise} that resolves to the user data object if successful and rejects\n   * if handling the sign in request fails or there was no pending sign in request.\n   */\n  handlePendingSignIn(authResponseToken: string = this.getAuthResponseToken()) {\n    const transitKey = this.store.getSessionData().transitKey\n    return handlePendingSignIn(undefined, authResponseToken, transitKey, this)\n  }\n\n  /**\n   * Retrieves the user data object. The user's profile is stored in the key [[Profile]].\n   * \n   * @returns {Object} User data object.\n   */\n  loadUserData() {\n    const userData = this.store.getSessionData().userData\n    if (!userData) {\n      throw new InvalidStateError('No user data found. Did the user sign in?')\n    }\n    return userData\n  }\n\n\n  /**\n   * Sign the user out and optionally redirect to given location.\n   * @param  redirectURL Location to redirect user to after sign out. \n   * Only used in environments with `window` available\n   */\n  signUserOut(redirectURL?: string) {\n    signUserOut(redirectURL, this)\n  }\n\n  /**\n   * Encrypts the data provided with the app public key.\n   * @param {String|Buffer} content  the data to encrypt\n   * @param {String} options.publicKey the hex string of the ECDSA public\n   * key to use for encryption. If not provided, will use user's appPrivateKey.\n   * \n   * @returns {String} Stringified ciphertext object \n   */\n  encryptContent(\n    content: string | Buffer,\n    options?: import('../storage').EncryptContentOptions\n  ): Promise<string> {\n    return storage.encryptContent(this, content, options)\n  }\n\n  /**\n   * Decrypts data encrypted with `encryptContent` with the\n   * transit private key.\n   * @param {String|Buffer} content - encrypted content.\n   * @param {String} options.privateKey - The hex string of the ECDSA private\n   * key to use for decryption. If not provided, will use user's appPrivateKey.\n   * @returns {String|Buffer} decrypted content.\n   */\n  decryptContent(content: string, options?: {privateKey?: string}): Promise<Buffer | string> {\n    return storage.decryptContent(this, content, options)\n  }\n\n  /**\n   * Stores the data provided in the app's data store to to the file specified.\n   * @param {String} path - the path to store the data in\n   * @param {String|Buffer} content - the data to store in the file\n   * @param options a [[PutFileOptions]] object\n   * \n   * @returns {Promise} that resolves if the operation succeed and rejects\n   * if it failed\n   */\n  putFile(\n    path: string,\n    content: string | Buffer | ArrayBufferView | Blob, \n    options?: import('../storage').PutFileOptions\n  ) {\n    return storage.putFile(this, path, content, options)\n  }\n\n  /**\n   * Retrieves the specified file from the app's data store.\n   * \n   * @param {String} path - the path to the file to read\n   * @param {Object} options a [[GetFileOptions]] object\n   * \n   * @returns {Promise} that resolves to the raw data in the file\n   * or rejects with an error\n   */\n  getFile(path: string, options?: import('../storage').GetFileOptions) {\n    return storage.getFile(this, path, options)\n  }\n\n  /**\n   * Get the URL for reading a file from an app's data store.\n   * \n   * @param {String} path - the path to the file to read\n   * \n   * @returns {Promise<string>} that resolves to the URL or rejects with an error\n   */\n  getFileUrl(path: string, options?: import('../storage').GetFileUrlOptions): Promise<string> {\n    return storage.getFileUrl(this, path, options)\n  }\n\n  /**\n   * List the set of files in this application's Gaia storage bucket.\n   * \n   * @param {function} callback - a callback to invoke on each named file that\n   * returns `true` to continue the listing operation or `false` to end it\n   * \n   * @returns {Promise} that resolves to the number of files listed\n   */\n  listFiles(callback: (name: string) => boolean): Promise<number> {\n    return storage.listFiles(this, callback)\n  }\n\n  /**\n   * Deletes the specified file from the app's data store. \n   * @param path - The path to the file to delete.\n   * @param options - Optional options object.\n   * @param options.wasSigned - Set to true if the file was originally signed\n   * in order for the corresponding signature file to also be deleted.\n   * @returns Resolves when the file has been removed or rejects with an error.\n   */\n  public deleteFile(path: string, options?: { wasSigned?: boolean }) {\n    return storage.deleteFile(this, path, options)\n  }\n\n\n  /**\n   *  @ignore\n   */\n  getOrSetLocalGaiaHubConnection(): Promise<GaiaHubConfig> {\n    const sessionData = this.store.getSessionData()\n    const userData = sessionData.userData\n    if (!userData) {\n      throw new InvalidStateError('Missing userData')\n    }\n    const hubConfig = userData.gaiaHubConfig\n    if (hubConfig) {\n      return Promise.resolve(hubConfig)\n    }\n    return this.setLocalGaiaHubConnection()\n  }\n\n  /**\n   * These two functions are app-specific connections to gaia hub,\n   *   they read the user data object for information on setting up\n   *   a hub connection, and store the hub config to localstorage\n   * @private\n   * @returns {Promise} that resolves to the new gaia hub connection\n   */\n  async setLocalGaiaHubConnection(): Promise<GaiaHubConfig> {\n    const userData = this.loadUserData()\n  \n    if (!userData) {\n      throw new InvalidStateError('Missing userData')\n    }\n  \n    if (!userData.hubUrl) {\n      userData.hubUrl = BLOCKSTACK_DEFAULT_GAIA_HUB_URL\n    }\n  \n    const gaiaConfig = await connectToGaiaHub(\n      userData.hubUrl,\n      userData.appPrivateKey,\n      userData.gaiaAssociationToken)\n\n    userData.gaiaHubConfig = gaiaConfig\n\n    const sessionData = this.store.getSessionData()\n    sessionData.userData.gaiaHubConfig = gaiaConfig\n    this.store.setSessionData(sessionData)\n\n    return gaiaConfig\n  }\n}\n","import Ripemd160Polyfill from 'ripemd160-min'\nimport { isNodeCryptoAvailable } from './cryptoUtils'\n\ntype NodeCryptoCreateHash = typeof import('crypto').createHash\n\nexport interface Ripemd160Digest {\n  digest(data: Buffer): Buffer\n}\n\nexport class Ripemd160PolyfillDigest implements Ripemd160Digest {\n  digest(data: Buffer): Buffer {\n    const instance = new Ripemd160Polyfill()\n    instance.update(data)\n    const hash = instance.digest()\n    if (Array.isArray(hash)) {\n      return Buffer.from(hash)\n    } else {\n      return Buffer.from(hash.buffer)\n    }\n  }\n}\n\nexport class NodeCryptoRipemd160Digest implements Ripemd160Digest {\n  nodeCryptoCreateHash: NodeCryptoCreateHash\n\n  constructor(nodeCryptoCreateHash: NodeCryptoCreateHash) {\n    this.nodeCryptoCreateHash = nodeCryptoCreateHash\n  }\n\n  digest(data: Buffer): Buffer {\n    try {\n      return this.nodeCryptoCreateHash('rmd160').update(data).digest()\n    } catch (error) {\n      try {\n        return this.nodeCryptoCreateHash('ripemd160').update(data).digest()\n      } catch (_err) {\n        console.log(error)\n        console.log('Node.js `crypto.createHash` exists but failing to digest for ripemd160, falling back to js implementation')\n        const polyfill = new Ripemd160PolyfillDigest()\n        return polyfill.digest(data)\n      }\n    }\n  }\n}\n\nexport function createHashRipemd160() {\n  const nodeCryptoCreateHash = isNodeCryptoAvailable(nodeCrypto => {\n    if (typeof nodeCrypto.createHash === 'function') {\n      return nodeCrypto.createHash\n    }\n    return false\n  })\n  if (nodeCryptoCreateHash) {\n    return new NodeCryptoRipemd160Digest(nodeCryptoCreateHash)\n  } else {\n    return new Ripemd160PolyfillDigest()\n  }\n}\n\nexport function hashRipemd160(data: Buffer) {\n  const hash = createHashRipemd160()\n  return hash.digest(data)\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst createHash = require(\"create-hash\");\nconst pbkdf2_1 = require(\"pbkdf2\");\nconst randomBytes = require(\"randombytes\");\nconst _wordlists_1 = require(\"./_wordlists\");\nlet DEFAULT_WORDLIST = _wordlists_1._default;\nconst INVALID_MNEMONIC = 'Invalid mnemonic';\nconst INVALID_ENTROPY = 'Invalid entropy';\nconst INVALID_CHECKSUM = 'Invalid mnemonic checksum';\nconst WORDLIST_REQUIRED = 'A wordlist is required but a default could not be found.\\n' +\n    'Please explicitly pass a 2048 word array explicitly.';\nfunction lpad(str, padString, length) {\n    while (str.length < length)\n        str = padString + str;\n    return str;\n}\nfunction binaryToByte(bin) {\n    return parseInt(bin, 2);\n}\nfunction bytesToBinary(bytes) {\n    return bytes.map(x => lpad(x.toString(2), '0', 8)).join('');\n}\nfunction deriveChecksumBits(entropyBuffer) {\n    const ENT = entropyBuffer.length * 8;\n    const CS = ENT / 32;\n    const hash = createHash('sha256')\n        .update(entropyBuffer)\n        .digest();\n    return bytesToBinary([...hash]).slice(0, CS);\n}\nfunction salt(password) {\n    return 'mnemonic' + (password || '');\n}\nfunction mnemonicToSeedSync(mnemonic, password) {\n    const mnemonicBuffer = Buffer.from((mnemonic || '').normalize('NFKD'), 'utf8');\n    const saltBuffer = Buffer.from(salt((password || '').normalize('NFKD')), 'utf8');\n    return pbkdf2_1.pbkdf2Sync(mnemonicBuffer, saltBuffer, 2048, 64, 'sha512');\n}\nexports.mnemonicToSeedSync = mnemonicToSeedSync;\nfunction mnemonicToSeed(mnemonic, password) {\n    return new Promise((resolve, reject) => {\n        try {\n            const mnemonicBuffer = Buffer.from((mnemonic || '').normalize('NFKD'), 'utf8');\n            const saltBuffer = Buffer.from(salt((password || '').normalize('NFKD')), 'utf8');\n            pbkdf2_1.pbkdf2(mnemonicBuffer, saltBuffer, 2048, 64, 'sha512', (err, data) => {\n                if (err)\n                    return reject(err);\n                else\n                    return resolve(data);\n            });\n        }\n        catch (error) {\n            return reject(error);\n        }\n    });\n}\nexports.mnemonicToSeed = mnemonicToSeed;\nfunction mnemonicToEntropy(mnemonic, wordlist) {\n    wordlist = wordlist || DEFAULT_WORDLIST;\n    if (!wordlist) {\n        throw new Error(WORDLIST_REQUIRED);\n    }\n    const words = (mnemonic || '').normalize('NFKD').split(' ');\n    if (words.length % 3 !== 0)\n        throw new Error(INVALID_MNEMONIC);\n    // convert word indices to 11 bit binary strings\n    const bits = words\n        .map(word => {\n        const index = wordlist.indexOf(word);\n        if (index === -1)\n            throw new Error(INVALID_MNEMONIC);\n        return lpad(index.toString(2), '0', 11);\n    })\n        .join('');\n    // split the binary string into ENT/CS\n    const dividerIndex = Math.floor(bits.length / 33) * 32;\n    const entropyBits = bits.slice(0, dividerIndex);\n    const checksumBits = bits.slice(dividerIndex);\n    // calculate the checksum and compare\n    const entropyBytes = entropyBits.match(/(.{1,8})/g).map(binaryToByte);\n    if (entropyBytes.length < 16)\n        throw new Error(INVALID_ENTROPY);\n    if (entropyBytes.length > 32)\n        throw new Error(INVALID_ENTROPY);\n    if (entropyBytes.length % 4 !== 0)\n        throw new Error(INVALID_ENTROPY);\n    const entropy = Buffer.from(entropyBytes);\n    const newChecksum = deriveChecksumBits(entropy);\n    if (newChecksum !== checksumBits)\n        throw new Error(INVALID_CHECKSUM);\n    return entropy.toString('hex');\n}\nexports.mnemonicToEntropy = mnemonicToEntropy;\nfunction entropyToMnemonic(entropy, wordlist) {\n    if (!Buffer.isBuffer(entropy))\n        entropy = Buffer.from(entropy, 'hex');\n    wordlist = wordlist || DEFAULT_WORDLIST;\n    if (!wordlist) {\n        throw new Error(WORDLIST_REQUIRED);\n    }\n    // 128 <= ENT <= 256\n    if (entropy.length < 16)\n        throw new TypeError(INVALID_ENTROPY);\n    if (entropy.length > 32)\n        throw new TypeError(INVALID_ENTROPY);\n    if (entropy.length % 4 !== 0)\n        throw new TypeError(INVALID_ENTROPY);\n    const entropyBits = bytesToBinary([...entropy]);\n    const checksumBits = deriveChecksumBits(entropy);\n    const bits = entropyBits + checksumBits;\n    const chunks = bits.match(/(.{1,11})/g);\n    const words = chunks.map(binary => {\n        const index = binaryToByte(binary);\n        return wordlist[index];\n    });\n    return wordlist[0] === '\\u3042\\u3044\\u3053\\u304f\\u3057\\u3093' // Japanese wordlist\n        ? words.join('\\u3000')\n        : words.join(' ');\n}\nexports.entropyToMnemonic = entropyToMnemonic;\nfunction generateMnemonic(strength, rng, wordlist) {\n    strength = strength || 128;\n    if (strength % 32 !== 0)\n        throw new TypeError(INVALID_ENTROPY);\n    rng = rng || randomBytes;\n    return entropyToMnemonic(rng(strength / 8), wordlist);\n}\nexports.generateMnemonic = generateMnemonic;\nfunction validateMnemonic(mnemonic, wordlist) {\n    try {\n        mnemonicToEntropy(mnemonic, wordlist);\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}\nexports.validateMnemonic = validateMnemonic;\nfunction setDefaultWordlist(language) {\n    const result = _wordlists_1.wordlists[language];\n    if (result)\n        DEFAULT_WORDLIST = result;\n    else\n        throw new Error('Could not find wordlist for language \"' + language + '\"');\n}\nexports.setDefaultWordlist = setDefaultWordlist;\nfunction getDefaultWordlist() {\n    if (!DEFAULT_WORDLIST)\n        throw new Error('No Default Wordlist set');\n    return Object.keys(_wordlists_1.wordlists).filter(lang => {\n        if (lang === 'JA' || lang === 'EN')\n            return false;\n        return _wordlists_1.wordlists[lang].every((word, index) => word === DEFAULT_WORDLIST[index]);\n    })[0];\n}\nexports.getDefaultWordlist = getDefaultWordlist;\nvar _wordlists_2 = require(\"./_wordlists\");\nexports.wordlists = _wordlists_2.wordlists;\n","var Buffer = require('safe-buffer').Buffer\n\n// prototype class for hash functions\nfunction Hash (blockSize, finalSize) {\n  this._block = Buffer.alloc(blockSize)\n  this._finalSize = finalSize\n  this._blockSize = blockSize\n  this._len = 0\n}\n\nHash.prototype.update = function (data, enc) {\n  if (typeof data === 'string') {\n    enc = enc || 'utf8'\n    data = Buffer.from(data, enc)\n  }\n\n  var block = this._block\n  var blockSize = this._blockSize\n  var length = data.length\n  var accum = this._len\n\n  for (var offset = 0; offset < length;) {\n    var assigned = accum % blockSize\n    var remainder = Math.min(length - offset, blockSize - assigned)\n\n    for (var i = 0; i < remainder; i++) {\n      block[assigned + i] = data[offset + i]\n    }\n\n    accum += remainder\n    offset += remainder\n\n    if ((accum % blockSize) === 0) {\n      this._update(block)\n    }\n  }\n\n  this._len += length\n  return this\n}\n\nHash.prototype.digest = function (enc) {\n  var rem = this._len % this._blockSize\n\n  this._block[rem] = 0x80\n\n  // zero (rem + 1) trailing bits, where (rem + 1) is the smallest\n  // non-negative solution to the equation (length + 1 + (rem + 1)) === finalSize mod blockSize\n  this._block.fill(0, rem + 1)\n\n  if (rem >= this._finalSize) {\n    this._update(this._block)\n    this._block.fill(0)\n  }\n\n  var bits = this._len * 8\n\n  // uint32\n  if (bits <= 0xffffffff) {\n    this._block.writeUInt32BE(bits, this._blockSize - 4)\n\n  // uint64\n  } else {\n    var lowBits = (bits & 0xffffffff) >>> 0\n    var highBits = (bits - lowBits) / 0x100000000\n\n    this._block.writeUInt32BE(highBits, this._blockSize - 8)\n    this._block.writeUInt32BE(lowBits, this._blockSize - 4)\n  }\n\n  this._update(this._block)\n  var hash = this._hash()\n\n  return enc ? hash.toString(enc) : hash\n}\n\nHash.prototype._update = function () {\n  throw new Error('_update must be implemented by subclass')\n}\n\nmodule.exports = Hash\n","import * as queryString from 'query-string'\nimport { decodeToken } from 'jsontokens'\nimport { BLOCKSTACK_HANDLER, getGlobalObject, updateQueryStringParameter } from '../utils'\nimport { fetchPrivate } from '../fetchUtil'\n\n\nimport { Logger } from '../logger'\n\n/**\n * Retrieves the authentication request from the query string\n * @return {String|null} the authentication request or `null` if\n * the query string parameter `authRequest` is not found\n * @private\n * @ignore \n */\nexport function getAuthRequestFromURL() {\n  const location = getGlobalObject('location', { throwIfUnavailable: true, usageDesc: 'getAuthRequestFromURL' })\n  const queryDict = queryString.parse(location.search)\n  if (queryDict.authRequest) {\n    return (<string>queryDict.authRequest).split(`${BLOCKSTACK_HANDLER}:`).join('')\n  } else {\n    return null\n  }\n}\n\n/**\n * Fetches the contents of the manifest file specified in the authentication request\n *\n * @param  {String} authRequest encoded and signed authentication request\n * @return {Promise<Object|String>} Returns a `Promise` that resolves to the JSON\n * object manifest file unless there's an error in which case rejects with an error\n * message.\n * @private\n * @ignore \n */\nexport async function fetchAppManifest(authRequest: string): Promise<any> {\n  if (!authRequest) {\n    throw new Error('Invalid auth request')\n  }\n  const payload = decodeToken(authRequest).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  const manifestURI = payload.manifest_uri as string\n  try {\n    Logger.debug(`Fetching manifest from ${manifestURI}`)\n    const response = await fetchPrivate(manifestURI)\n    const responseText = await response.text()\n    const responseJSON = JSON.parse(responseText)\n    return { ...responseJSON, manifestURI }\n  } catch (error) {\n    console.log(error)\n    throw new Error('Could not fetch manifest.json')\n  }\n}\n\n/**\n * Redirect the user's browser to the app using the `redirect_uri`\n * specified in the authentication request, passing the authentication\n * response token as a query parameter.\n *\n * @param {String} authRequest  encoded and signed authentication request token\n * @param {String} authResponse encoded and signed authentication response token\n * @return {void}\n * @throws {Error} if there is no redirect uri\n * @private\n * @ignore \n */\nexport function redirectUserToApp(authRequest: string, authResponse: string) {\n  const payload = decodeToken(authRequest).payload\n  if (typeof payload === 'string') {\n    throw new Error('Unexpected token payload type of string')\n  }\n  let redirectURI = payload.redirect_uri as string\n  Logger.debug(redirectURI)\n  if (redirectURI) {\n    redirectURI = updateQueryStringParameter(redirectURI, 'authResponse', authResponse)\n  } else {\n    throw new Error('Invalid redirect URI')\n  }\n  const location = getGlobalObject('location', { throwIfUnavailable: true, usageDesc: 'redirectUserToApp' })\n  location.href = redirectURI\n}\n","/**\n * \n * @ignore\n */\nexport function containsValidProofStatement(searchText: string, name: string | null = null) {\n  if (!name) {\n    return false\n  }\n\n  searchText = searchText.toLowerCase()\n\n  if (name.split('.').length < 2) {\n    throw new Error('Please provide the fully qualified Blockstack name.')\n  }\n\n  let username = null\n\n  // support legacy Blockstack ID proofs\n  if (name.endsWith('.id')) {\n    username = name.split('.id')[0]\n  }\n\n  const verificationStyles = username != null ? [\n    `verifying myself: my bitcoin username is +${username}`,\n    `verifying myself: my bitcoin username is ${username}`,\n    `verifying myself: my openname is ${username}`,\n    `verifying that +${username} is my bitcoin username`,\n    `verifying that ${username} is my bitcoin username`,\n    `verifying that ${username} is my openname`,\n    `verifying that +${username} is my openname`,\n    `verifying i am +${username} on my passcard`,\n    `verifying that +${username} is my blockchain id`,\n    `verifying that \"${name}\" is my blockstack id`, // id\n    `verifying that ${name} is my blockstack id`,\n    `verifying that &quot;${name}&quot; is my blockstack id`\n  ] : [ // only these formats are valid for non-.id tlds\n    `verifying that \"${name}\" is my blockstack id`, // id\n    `verifying that ${name} is my blockstack id`,\n    `verifying that &quot;${name}&quot; is my blockstack id`\n  ]\n\n  for (let i = 0; i < verificationStyles.length; i++) {\n    const verificationStyle = verificationStyles[i]\n    if (searchText.includes(verificationStyle)) {\n      return true\n    }\n  }\n\n  if (username != null\n      && searchText.includes('verifymyonename')\n      && searchText.includes(`+${username}`)) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * \n * @ignore\n */\nexport function containsValidAddressProofStatement(proofStatement: string, address: string) {\n  proofStatement = proofStatement.split(address)[0].toLowerCase() + address\n\n  const verificationStyles = [\n    `verifying my blockstack id is secured with the address ${address}`\n  ]\n\n  for (let i = 0; i < verificationStyles.length; i++) {\n    const verificationStyle = verificationStyles[i]\n    if (proofStatement.includes(verificationStyle)) {\n      return true\n    }\n  }\n\n  return false\n}\n","import { validateMnemonic, mnemonicToEntropy, entropyToMnemonic } from 'bip39';\nimport { randomBytes, GetRandomBytes } from './cryptoRandom';\nimport { createSha2Hash } from './sha2Hash';\nimport { createHmacSha256 } from './hmacSha256';\nimport { createCipher } from './aesCipher';\nimport { createPbkdf2 } from './pbkdf2';\nimport { TriplesecDecryptSignature } from './cryptoUtils';\n\n/**\n * Encrypt a raw mnemonic phrase to be password protected\n * @param {string} phrase - Raw mnemonic phrase\n * @param {string} password - Password to encrypt mnemonic with\n * @return {Promise<Buffer>} The encrypted phrase\n * @private\n * @ignore\n * */\nexport async function encryptMnemonic(\n  phrase: string,\n  password: string,\n  opts?: {\n    getRandomBytes?: GetRandomBytes;\n  }\n): Promise<Buffer> {\n  // hex encoded mnemonic string\n  let mnemonicEntropy: string;\n  try {\n    // must be bip39 mnemonic\n    mnemonicEntropy = mnemonicToEntropy(phrase);\n  } catch (error) {\n    console.error('Invalid mnemonic phrase provided');\n    console.error(error);\n    throw new Error('Not a valid bip39 mnemonic');\n  }\n\n  // normalize plaintext to fixed length byte string\n  const plaintextNormalized = Buffer.from(mnemonicEntropy, 'hex');\n\n  // AES-128-CBC with SHA256 HMAC\n  const pbkdf2 = await createPbkdf2();\n  let salt: Buffer;\n  if (opts && opts.getRandomBytes) {\n    salt = opts.getRandomBytes(16);\n  } else {\n    salt = randomBytes(16);\n  }\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512');\n  const encKey = keysAndIV.slice(0, 16);\n  const macKey = keysAndIV.slice(16, 32);\n  const iv = keysAndIV.slice(32, 48);\n\n  const cipher = await createCipher();\n  const cipherText = await cipher.encrypt(\n    'aes-128-cbc',\n    encKey,\n    iv,\n    plaintextNormalized\n  );\n\n  const hmacPayload = Buffer.concat([salt, cipherText]);\n  const hmacSha256 = await createHmacSha256();\n  const hmacDigest = await hmacSha256.digest(macKey, hmacPayload);\n\n  const payload = Buffer.concat([salt, hmacDigest, cipherText]);\n  return payload;\n}\n\n// Used to distinguish bad password during decrypt vs invalid format\nclass PasswordError extends Error {}\n\n/**\n * @ignore\n */\nasync function decryptMnemonicBuffer(\n  dataBuffer: Buffer,\n  password: string\n): Promise<string> {\n  const salt = dataBuffer.slice(0, 16);\n  const hmacSig = dataBuffer.slice(16, 48); // 32 bytes\n  const cipherText = dataBuffer.slice(48);\n  const hmacPayload = Buffer.concat([salt, cipherText]);\n\n  const pbkdf2 = await createPbkdf2();\n  const keysAndIV = await pbkdf2.derive(password, salt, 100000, 48, 'sha512');\n  const encKey = keysAndIV.slice(0, 16);\n  const macKey = keysAndIV.slice(16, 32);\n  const iv = keysAndIV.slice(32, 48);\n\n  const decipher = await createCipher();\n  const decryptedResult = await decipher.decrypt(\n    'aes-128-cbc',\n    encKey,\n    iv,\n    cipherText\n  );\n\n  const hmacSha256 = await createHmacSha256();\n  const hmacDigest = await hmacSha256.digest(macKey, hmacPayload);\n\n  // hash both hmacSig and hmacDigest so string comparison time\n  // is uncorrelated to the ciphertext\n  const sha2Hash = await createSha2Hash();\n  const hmacSigHash = await sha2Hash.digest(hmacSig);\n  const hmacDigestHash = await sha2Hash.digest(hmacDigest);\n\n  if (!hmacSigHash.equals(hmacDigestHash)) {\n    // not authentic\n    throw new PasswordError('Wrong password (HMAC mismatch)');\n  }\n\n  let mnemonic: string;\n  try {\n    mnemonic = entropyToMnemonic(decryptedResult);\n  } catch (error) {\n    console.error('Error thrown by `entropyToMnemonic`');\n    console.error(error);\n    throw new PasswordError('Wrong password (invalid plaintext)');\n  }\n  if (!validateMnemonic(mnemonic)) {\n    throw new PasswordError('Wrong password (invalid plaintext)');\n  }\n\n  return mnemonic;\n}\n\n/**\n * Decrypt legacy triplesec keys\n * @param {Buffer} dataBuffer - The encrypted key\n * @param {String} password - Password for data\n * @return {Promise<Buffer>} Decrypted seed\n * @private\n * @ignore\n */\nfunction decryptLegacy(\n  dataBuffer: Buffer,\n  password: string,\n  triplesecDecrypt: TriplesecDecryptSignature\n): Promise<Buffer> {\n  return new Promise<Buffer>((resolve, reject) => {\n    if (!triplesecDecrypt) {\n      reject(new Error('The `triplesec.decrypt` function must be provided'));\n    }\n    triplesecDecrypt(\n      {\n        key: Buffer.from(password),\n        data: dataBuffer\n      },\n      (err, plaintextBuffer) => {\n        if (!err) {\n          resolve(plaintextBuffer);\n        } else {\n          reject(err);\n        }\n      }\n    );\n  });\n}\n\n/**\n * Decrypt an encrypted mnemonic phrase with a password.\n * Legacy triplesec encrypted payloads are also supported.\n * @param data - Buffer or hex-encoded string of the encrypted mnemonic\n * @param password - Password for data\n * @return the raw mnemonic phrase\n * @private\n * @ignore\n */\nexport async function decryptMnemonic(\n  data: string | Buffer,\n  password: string,\n  triplesecDecrypt?: TriplesecDecryptSignature\n) {\n  const dataBuffer = Buffer.isBuffer(data) ? data : Buffer.from(data, 'hex');\n  try {\n    return await decryptMnemonicBuffer(dataBuffer, password);\n  } catch (err) {\n    if (err instanceof PasswordError) {\n      throw err;\n    }\n    const data = await decryptLegacy(dataBuffer, password, triplesecDecrypt);\n    return data.toString();\n  }\n}\n","// @ts-ignore: Could not find a declaration file for module\nimport * as inspector from 'schema-inspector'\n\nimport { Profile } from '../profile'\nimport { extractProfile } from '../profileTokens'\nimport { getPersonFromLegacyFormat } from './personLegacy'\nimport {\n  getName, getFamilyName, getGivenName, getAvatarUrl, getDescription,\n  getVerifiedAccounts, getAddress, getBirthDate,\n  getConnections, getOrganizations\n} from './personUtils'\n\nconst schemaDefinition = {\n  type: 'object',\n  strict: false,\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' },\n    '@id': { type: 'string', optional: true },\n    name: { type: 'string', optional: true },\n    givenName: { type: 'string', optional: true },\n    familyName: { type: 'string', optional: true },\n    description: { type: 'string', optional: true },\n    image: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          name: { type: 'string', optional: true },\n          contentUrl: { type: 'string', optional: true }\n        }\n      }\n    },\n    website: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          url: { type: 'string', optional: true }\n        }\n      }\n    },\n    account: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          service: { type: 'string', optional: true },\n          identifier: { type: 'string', optional: true },\n          proofType: { type: 'string', optional: true },\n          proofUrl: { type: 'string', optional: true },\n          proofMessage: { type: 'string', optional: true },\n          proofSignature: { type: 'string', optional: true }\n        }\n      }\n    },\n    worksFor: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          '@id': { type: 'string', optional: true }\n        }\n      }\n    },\n    knows: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': { type: 'string' },\n          '@id': { type: 'string', optional: true }\n        }\n      }\n    },\n    address: {\n      type: 'object',\n      optional: true,\n      properties: {\n        '@type': { type: 'string' },\n        streetAddress: { type: 'string', optional: true },\n        addressLocality: { type: 'string', optional: true },\n        postalCode: { type: 'string', optional: true },\n        addressCountry: { type: 'string', optional: true }\n      }\n    },\n    birthDate: { type: 'string', optional: true },\n    taxID: { type: 'string', optional: true }\n  }\n}\n\n/**\n * @ignore\n */\nexport class Person extends Profile {\n  constructor(profile = {}) {\n    super(profile)\n    this._profile = Object.assign({}, {\n      '@type': 'Person'\n    }, this._profile)\n  }\n\n  static validateSchema(profile: any, strict = false) {\n    schemaDefinition.strict = strict\n    return inspector.validate(schemaDefinition, profile)\n  }\n\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): Person {\n    const profile = extractProfile(token, publicKeyOrAddress)\n    return new Person(profile)\n  }\n\n  static fromLegacyFormat(legacyProfile: any) {\n    const profile = getPersonFromLegacyFormat(legacyProfile)\n    return new Person(profile)\n  }\n\n  toJSON() {\n    return {\n      profile: this.profile(),\n      name: this.name(),\n      givenName: this.givenName(),\n      familyName: this.familyName(),\n      description: this.description(),\n      avatarUrl: this.avatarUrl(),\n      verifiedAccounts: this.verifiedAccounts(),\n      address: this.address(),\n      birthDate: this.birthDate(),\n      connections: this.connections(),\n      organizations: this.organizations()\n    }\n  }\n\n  profile() {\n    return Object.assign({}, this._profile)\n  }\n\n  name() {\n    return getName(this.profile())\n  }\n\n  givenName() {\n    return getGivenName(this.profile())\n  }\n\n  familyName() {\n    return getFamilyName(this.profile())\n  }\n\n  description() {\n    return getDescription(this.profile())\n  }\n\n  avatarUrl() {\n    return getAvatarUrl(this.profile())\n  }\n\n  verifiedAccounts(verifications?: any[]) {\n    return getVerifiedAccounts(this.profile(), verifications)\n  }\n\n  address() {\n    return getAddress(this.profile())\n  }\n\n  birthDate() {\n    return getBirthDate(this.profile())\n  }\n\n  connections() {\n    return getConnections(this.profile())\n  }\n\n  organizations() {\n    return getOrganizations(this.profile())\n  }\n}\n","export function getName(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let name = null\n  if (profile.name) {\n    name = profile.name\n  } else if (profile.givenName || profile.familyName) {\n    name = ''\n    if (profile.givenName) {\n      name = profile.givenName\n    }\n    if (profile.familyName) {\n      name += ` ${profile.familyName}`\n    }\n  }\n  return name\n}\n\n/**\n * \n * @ignore\n */\nexport function getGivenName(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let givenName = null\n  if (profile.givenName) {\n    givenName = profile.givenName\n  } else if (profile.name) {\n    const nameParts = profile.name.split(' ')\n    givenName = nameParts.slice(0, -1).join(' ')\n  }\n  return givenName\n}\n\n/**\n * \n * @ignore\n */\nexport function getFamilyName(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let familyName = null\n  if (profile.familyName) {\n    familyName = profile.familyName\n  } else if (profile.name) {\n    const nameParts = profile.name.split(' ')\n    familyName = nameParts.pop()\n  }\n  return familyName\n}\n\n/**\n * \n * @ignore\n */\nexport function getDescription(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let description = null\n  if (profile.description) {\n    description = profile.description\n  }\n  return description\n}\n\n/**\n * \n * @ignore\n */\nexport function getAvatarUrl(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let avatarContentUrl: string | null = null\n  if (profile.image) {\n    profile.image.map((image: any) => {\n      if (image.name === 'avatar') {\n        avatarContentUrl = image.contentUrl\n        return avatarContentUrl\n      } else {\n        return null\n      }\n    })\n  }\n  return avatarContentUrl\n}\n\n/**\n * \n * @ignore\n */\nexport function getVerifiedAccounts(profile: any, verifications?: any[]) {\n  if (!profile) {\n    return null\n  }\n\n  const filteredAccounts: any[] = []\n  if (profile.hasOwnProperty('account') && verifications) {\n    profile.account.map((account: any) => {\n      let accountIsValid = false\n      let proofUrl = null\n\n      verifications.map((verification) => {\n        if (verification.hasOwnProperty('proof_url')) {\n          verification.proofUrl = verification.proof_url\n        }\n        if (verification.valid\n            && verification.service === account.service\n            && verification.identifier === account.identifier\n            && verification.proofUrl) {\n          accountIsValid = true\n          proofUrl = verification.proofUrl\n          return true\n        } else {\n          return false\n        }\n      })\n\n      if (accountIsValid) {\n        account.proofUrl = proofUrl\n        filteredAccounts.push(account)\n        return account\n      } else {\n        return null\n      }\n    })\n  }\n  return filteredAccounts\n}\n\n/**\n * \n * @ignore\n */\nexport function getOrganizations(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  const organizations: any[] = []\n\n  if (profile.hasOwnProperty('worksFor')) {\n    return profile.worksFor\n  }\n\n  return organizations\n}\n\n/**\n * \n * @ignore\n */\nexport function getConnections(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let connections = []\n\n  if (profile.hasOwnProperty('knows')) {\n    connections = profile.knows\n  }\n\n  return connections\n}\n\n/**\n * \n * @ignore\n */\nexport function getAddress(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  let addressString = null\n\n  if (profile.hasOwnProperty('address')) {\n    const addressParts = []\n\n    if (profile.address.hasOwnProperty('streetAddress')) {\n      addressParts.push(profile.address.streetAddress)\n    }\n    if (profile.address.hasOwnProperty('addressLocality')) {\n      addressParts.push(profile.address.addressLocality)\n    }\n    if (profile.address.hasOwnProperty('postalCode')) {\n      addressParts.push(profile.address.postalCode)\n    }\n    if (profile.address.hasOwnProperty('addressCountry')) {\n      addressParts.push(profile.address.addressCountry)\n    }\n\n    if (addressParts.length) {\n      addressString = addressParts.join(', ')\n    }\n  }\n\n  return addressString\n}\n\n/**\n * \n * @ignore\n */\nexport function getBirthDate(profile: any) {\n  if (!profile) {\n    return null\n  }\n\n  const monthNames = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ]\n\n  let birthDateString = null\n\n  if (profile.hasOwnProperty('birthDate')) {\n    const date = new Date(profile.birthDate)\n    birthDateString = `${monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`\n  }\n\n  return birthDateString\n}\n","import { getCryptoLib } from './cryptoUtils'\n\ntype NodeCryptoCreateCipher = typeof import('crypto').createCipheriv;\ntype NodeCryptoCreateDecipher = typeof import('crypto').createDecipheriv;\n\nexport type CipherAlgorithm = 'aes-256-cbc' | 'aes-128-cbc';\n\nexport interface AesCipher {\n  encrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): Promise<Buffer>;\n\n  decrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): Promise<Buffer>;\n}\n\nexport class NodeCryptoAesCipher implements AesCipher {\n  createCipher: NodeCryptoCreateCipher\n\n  createDecipher: NodeCryptoCreateDecipher\n\n  constructor(createCipher: NodeCryptoCreateCipher, createDecipher: NodeCryptoCreateDecipher) {\n    this.createCipher = createCipher\n    this.createDecipher = createDecipher\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): \n    Promise<Buffer> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`)\n    }\n    const cipher = this.createCipher(algorithm, key, iv)\n    const result = Buffer.concat([cipher.update(data), cipher.final()])\n    return Promise.resolve(result)\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): \n    Promise<Buffer> {\n    if (algorithm !== 'aes-128-cbc' && algorithm !== 'aes-256-cbc') {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`)\n    }\n    const cipher = this.createDecipher(algorithm, key, iv)\n    const result = Buffer.concat([cipher.update(data), cipher.final()])\n    return Promise.resolve(result)\n  }\n}\n\nexport class WebCryptoAesCipher implements AesCipher {\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async encrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): \n    Promise<Buffer> {\n    let algo: string\n    let length: number\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC'\n      length = 128\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC'\n      length = 256\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`)\n    }\n    const cryptoKey = await this.subtleCrypto.importKey(\n      'raw', key,\n      { name: algo, length },\n      false, ['encrypt']\n    )\n    const result = await this.subtleCrypto.encrypt({ name: algo, iv }, cryptoKey, data)\n    return Buffer.from(result)\n  }\n\n  async decrypt(\n    algorithm: CipherAlgorithm, \n    key: Buffer, \n    iv: Buffer, \n    data: Buffer): \n    Promise<Buffer> {\n    let algo: string\n    let length: number\n    if (algorithm === 'aes-128-cbc') {\n      algo = 'AES-CBC'\n      length = 128\n    } else if (algorithm === 'aes-256-cbc') {\n      algo = 'AES-CBC'\n      length = 256\n    } else {\n      throw new Error(`Unsupported cipher algorithm \"${algorithm}\"`)\n    }\n    const cryptoKey = await this.subtleCrypto.importKey(\n      'raw', key,\n      { name: algo, length },\n      false, ['decrypt']\n    )\n    const result = await this.subtleCrypto.decrypt({ name: algo, iv }, cryptoKey, data)\n    return Buffer.from(result)\n  }\n}\n\nexport async function createCipher(): Promise<AesCipher> {\n  const cryptoLib = await getCryptoLib()\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoAesCipher(cryptoLib.lib)\n  } else {\n    return new NodeCryptoAesCipher(cryptoLib.lib.createCipheriv, cryptoLib.lib.createDecipheriv)\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","'use strict'\n\nvar createHash = require('create-hash')\nvar bs58checkBase = require('./base')\n\n// SHA256(SHA256(buffer))\nfunction sha256x2 (buffer) {\n  var tmp = createHash('sha256').update(buffer).digest()\n  return createHash('sha256').update(tmp).digest()\n}\n\nmodule.exports = bs58checkBase(sha256x2)\n","'use strict';\n\nvar utils = require('./utils');\nvar assert = require('minimalistic-assert');\n\nfunction BlockHash() {\n  this.pending = null;\n  this.pendingTotal = 0;\n  this.blockSize = this.constructor.blockSize;\n  this.outSize = this.constructor.outSize;\n  this.hmacStrength = this.constructor.hmacStrength;\n  this.padLength = this.constructor.padLength / 8;\n  this.endian = 'big';\n\n  this._delta8 = this.blockSize / 8;\n  this._delta32 = this.blockSize / 32;\n}\nexports.BlockHash = BlockHash;\n\nBlockHash.prototype.update = function update(msg, enc) {\n  // Convert message to array, pad it, and join into 32bit blocks\n  msg = utils.toArray(msg, enc);\n  if (!this.pending)\n    this.pending = msg;\n  else\n    this.pending = this.pending.concat(msg);\n  this.pendingTotal += msg.length;\n\n  // Enough data, try updating\n  if (this.pending.length >= this._delta8) {\n    msg = this.pending;\n\n    // Process pending data in blocks\n    var r = msg.length % this._delta8;\n    this.pending = msg.slice(msg.length - r, msg.length);\n    if (this.pending.length === 0)\n      this.pending = null;\n\n    msg = utils.join32(msg, 0, msg.length - r, this.endian);\n    for (var i = 0; i < msg.length; i += this._delta32)\n      this._update(msg, i, i + this._delta32);\n  }\n\n  return this;\n};\n\nBlockHash.prototype.digest = function digest(enc) {\n  this.update(this._pad());\n  assert(this.pending === null);\n\n  return this._digest(enc);\n};\n\nBlockHash.prototype._pad = function pad() {\n  var len = this.pendingTotal;\n  var bytes = this._delta8;\n  var k = bytes - ((len + this.padLength) % bytes);\n  var res = new Array(k + this.padLength);\n  res[0] = 0x80;\n  for (var i = 1; i < k; i++)\n    res[i] = 0;\n\n  // Append length\n  len <<= 3;\n  if (this.endian === 'big') {\n    for (var t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = len & 0xff;\n  } else {\n    res[i++] = len & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n\n    for (t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n  }\n\n  return res;\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\n","/**\n * This logic is in a separate file with no dependencies so that it can be \n * loaded and executed as soon as possible to fulfill the purpose of the protocol \n * detection technique. The effectiveness of this is obviously subject to how web \n * apps bundle/consume the blockstack.js lib. \n */ \n\nconst GLOBAL_DETECTION_CACHE_KEY = '_blockstackDidCheckEchoReply'\nconst ECHO_REPLY_PARAM = 'echoReply'\nconst AUTH_CONTINUATION_PARAM = 'authContinuation'\n\n\nfunction getQueryStringParams(query: string): Record<string, string> {\n  if (!query) {\n    return {}\n  }\n  // Trim a starting `?` character if exists\n  const trimmed = /^[?#]/.test(query) ? query.slice(1) : query\n  return trimmed\n    .split('&')\n    .reduce((params, param) => {\n      const [key, value] = param.split('=')\n      params[key] = value ? decodeURIComponent(value.replace(/\\+/g, ' ')) : ''\n      return params\n    }, {} as Record<string, string>)\n}\n\n\n/**\n * Checks if the current window location URL contains an 'echoReply' parameter \n * which indicates that this page was only opened to signal back to the originating \n * tab that the protocol handler is installed. \n * If found, then localStorage events are used to notify the other tab,\n * and this page is redirected back to the Blockstack authenticator URL. \n * This function caches its result and will not trigger multiple redirects when\n * invoked multiple times. \n * @returns True if detected and the page will be automatically redirected. \n * @hidden\n */\nexport function protocolEchoReplyDetection(): boolean {\n  // Check that the `window` APIs exist\n  let globalScope: Window\n  if (typeof self !== 'undefined') {\n    globalScope = self\n  } else if (typeof window !== 'undefined') {\n    globalScope = window\n  } else {\n    // Exit detection function - we are not running in a browser environment.\n    return false\n  }\n  \n  if (!globalScope.location || !globalScope.localStorage) {\n    // Exit detection function - we are not running in a browser environment.\n    return false\n  }\n\n  // Avoid performing the check twice and triggered multiple redirect timers.\n  const existingDetection = (globalScope as any)[GLOBAL_DETECTION_CACHE_KEY]\n  if (typeof existingDetection === 'boolean') {\n    return existingDetection\n  }\n\n  const searchParams = getQueryStringParams(globalScope.location.search)\n  const echoReplyParam = searchParams[ECHO_REPLY_PARAM]\n  if (echoReplyParam) {\n    (globalScope as any)[GLOBAL_DETECTION_CACHE_KEY] = true\n\n    // Use localStorage to notify originated tab that protocol handler is available and working.\n    const echoReplyKey = `echo-reply-${echoReplyParam}`\n\n    // Set the echo-reply result in localStorage for the other window to see.\n    globalScope.localStorage.setItem(echoReplyKey, 'success')\n\n    // Redirect back to the localhost auth url, as opposed to another protocol launch.\n    // This will re-use the same tab rather than creating another useless one.\n    globalScope.setTimeout(() => {\n      const authContinuationParam = searchParams[AUTH_CONTINUATION_PARAM]\n      globalScope.location.href = authContinuationParam\n    }, 10)\n\n    return true\n  }\n\n  return false\n}\n","import { getCryptoLib } from './cryptoUtils'\n\nexport interface Hmac {\n  digest(key: Buffer, data: Buffer): Promise<Buffer>;\n}\n\ntype NodeCryptoCreateHmac = typeof import('crypto').createHmac\n\nexport class NodeCryptoHmacSha256 implements Hmac {\n  createHmac: NodeCryptoCreateHmac\n\n  constructor(createHmac: NodeCryptoCreateHmac) {\n    this.createHmac = createHmac\n  }\n\n  async digest(key: Buffer, data: Buffer): Promise<Buffer> {\n    const result = this.createHmac('sha256', key)\n      .update(data)\n      .digest()\n    return Promise.resolve(result)\n  }\n}\n\nexport class WebCryptoHmacSha256 implements Hmac {\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async digest(key: Buffer, data: Buffer): Promise<Buffer> {\n    const cryptoKey = await this.subtleCrypto.importKey(\n      'raw', key, { name: 'HMAC', hash: 'SHA-256' },\n      true, ['sign']\n    )\n    const sig = await this.subtleCrypto.sign(\n      // The `hash` is only specified for non-compliant browsers like Edge. \n      { name: 'HMAC', hash: 'SHA-256' }, \n      cryptoKey, data\n    )\n    return Buffer.from(sig)\n  }\n}\n\nexport async function createHmacSha256(): Promise<Hmac> {\n  const cryptoLib = await getCryptoLib()\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoHmacSha256(cryptoLib.lib)\n  } else {\n    return new NodeCryptoHmacSha256(cryptoLib.lib.createHmac)\n  }\n}\n\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"makeZoneFile\", {\n  enumerable: true,\n  get: function () {\n    return _makeZoneFile.makeZoneFile;\n  }\n});\nObject.defineProperty(exports, \"parseZoneFile\", {\n  enumerable: true,\n  get: function () {\n    return _parseZoneFile.parseZoneFile;\n  }\n});\nObject.defineProperty(exports, \"ZoneFile\", {\n  enumerable: true,\n  get: function () {\n    return _zoneFile.ZoneFile;\n  }\n});\n\nvar _makeZoneFile = require(\"./makeZoneFile\");\n\nvar _parseZoneFile = require(\"./parseZoneFile\");\n\nvar _zoneFile = require(\"./zoneFile\");","'use strict'\nvar inherits = require('inherits')\nvar MD5 = require('md5.js')\nvar RIPEMD160 = require('ripemd160')\nvar sha = require('sha.js')\nvar Base = require('cipher-base')\n\nfunction Hash (hash) {\n  Base.call(this, 'digest')\n\n  this._hash = hash\n}\n\ninherits(Hash, Base)\n\nHash.prototype._update = function (data) {\n  this._hash.update(data)\n}\n\nHash.prototype._final = function () {\n  return this._hash.digest()\n}\n\nmodule.exports = function createHash (alg) {\n  alg = alg.toLowerCase()\n  if (alg === 'md5') return new MD5()\n  if (alg === 'rmd160' || alg === 'ripemd160') return new RIPEMD160()\n\n  return new Hash(sha(alg))\n}\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar getNAF = utils.getNAF;\nvar getJSF = utils.getJSF;\nvar assert = utils.assert;\n\nfunction BaseCurve(type, conf) {\n  this.type = type;\n  this.p = new BN(conf.p, 16);\n\n  // Use Montgomery, when there is no fast reduction for the prime\n  this.red = conf.prime ? BN.red(conf.prime) : BN.mont(this.p);\n\n  // Useful for many curves\n  this.zero = new BN(0).toRed(this.red);\n  this.one = new BN(1).toRed(this.red);\n  this.two = new BN(2).toRed(this.red);\n\n  // Curve configuration, optional\n  this.n = conf.n && new BN(conf.n, 16);\n  this.g = conf.g && this.pointFromJSON(conf.g, conf.gRed);\n\n  // Temporary arrays\n  this._wnafT1 = new Array(4);\n  this._wnafT2 = new Array(4);\n  this._wnafT3 = new Array(4);\n  this._wnafT4 = new Array(4);\n\n  this._bitLength = this.n ? this.n.bitLength() : 0;\n\n  // Generalized Greg Maxwell's trick\n  var adjustCount = this.n && this.p.div(this.n);\n  if (!adjustCount || adjustCount.cmpn(100) > 0) {\n    this.redN = null;\n  } else {\n    this._maxwellTrick = true;\n    this.redN = this.n.toRed(this.red);\n  }\n}\nmodule.exports = BaseCurve;\n\nBaseCurve.prototype.point = function point() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype.validate = function validate() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype._fixedNafMul = function _fixedNafMul(p, k) {\n  assert(p.precomputed);\n  var doubles = p._getDoubles();\n\n  var naf = getNAF(k, 1, this._bitLength);\n  var I = (1 << (doubles.step + 1)) - (doubles.step % 2 === 0 ? 2 : 1);\n  I /= 3;\n\n  // Translate into more windowed form\n  var repr = [];\n  for (var j = 0; j < naf.length; j += doubles.step) {\n    var nafW = 0;\n    for (var k = j + doubles.step - 1; k >= j; k--)\n      nafW = (nafW << 1) + naf[k];\n    repr.push(nafW);\n  }\n\n  var a = this.jpoint(null, null, null);\n  var b = this.jpoint(null, null, null);\n  for (var i = I; i > 0; i--) {\n    for (var j = 0; j < repr.length; j++) {\n      var nafW = repr[j];\n      if (nafW === i)\n        b = b.mixedAdd(doubles.points[j]);\n      else if (nafW === -i)\n        b = b.mixedAdd(doubles.points[j].neg());\n    }\n    a = a.add(b);\n  }\n  return a.toP();\n};\n\nBaseCurve.prototype._wnafMul = function _wnafMul(p, k) {\n  var w = 4;\n\n  // Precompute window\n  var nafPoints = p._getNAFPoints(w);\n  w = nafPoints.wnd;\n  var wnd = nafPoints.points;\n\n  // Get NAF form\n  var naf = getNAF(k, w, this._bitLength);\n\n  // Add `this`*(N+1) for every w-NAF index\n  var acc = this.jpoint(null, null, null);\n  for (var i = naf.length - 1; i >= 0; i--) {\n    // Count zeroes\n    for (var k = 0; i >= 0 && naf[i] === 0; i--)\n      k++;\n    if (i >= 0)\n      k++;\n    acc = acc.dblp(k);\n\n    if (i < 0)\n      break;\n    var z = naf[i];\n    assert(z !== 0);\n    if (p.type === 'affine') {\n      // J +- P\n      if (z > 0)\n        acc = acc.mixedAdd(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.mixedAdd(wnd[(-z - 1) >> 1].neg());\n    } else {\n      // J +- J\n      if (z > 0)\n        acc = acc.add(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.add(wnd[(-z - 1) >> 1].neg());\n    }\n  }\n  return p.type === 'affine' ? acc.toP() : acc;\n};\n\nBaseCurve.prototype._wnafMulAdd = function _wnafMulAdd(defW,\n                                                       points,\n                                                       coeffs,\n                                                       len,\n                                                       jacobianResult) {\n  var wndWidth = this._wnafT1;\n  var wnd = this._wnafT2;\n  var naf = this._wnafT3;\n\n  // Fill all arrays\n  var max = 0;\n  for (var i = 0; i < len; i++) {\n    var p = points[i];\n    var nafPoints = p._getNAFPoints(defW);\n    wndWidth[i] = nafPoints.wnd;\n    wnd[i] = nafPoints.points;\n  }\n\n  // Comb small window NAFs\n  for (var i = len - 1; i >= 1; i -= 2) {\n    var a = i - 1;\n    var b = i;\n    if (wndWidth[a] !== 1 || wndWidth[b] !== 1) {\n      naf[a] = getNAF(coeffs[a], wndWidth[a], this._bitLength);\n      naf[b] = getNAF(coeffs[b], wndWidth[b], this._bitLength);\n      max = Math.max(naf[a].length, max);\n      max = Math.max(naf[b].length, max);\n      continue;\n    }\n\n    var comb = [\n      points[a], /* 1 */\n      null, /* 3 */\n      null, /* 5 */\n      points[b] /* 7 */\n    ];\n\n    // Try to avoid Projective points, if possible\n    if (points[a].y.cmp(points[b].y) === 0) {\n      comb[1] = points[a].add(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    } else if (points[a].y.cmp(points[b].y.redNeg()) === 0) {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].add(points[b].neg());\n    } else {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    }\n\n    var index = [\n      -3, /* -1 -1 */\n      -1, /* -1 0 */\n      -5, /* -1 1 */\n      -7, /* 0 -1 */\n      0, /* 0 0 */\n      7, /* 0 1 */\n      5, /* 1 -1 */\n      1, /* 1 0 */\n      3  /* 1 1 */\n    ];\n\n    var jsf = getJSF(coeffs[a], coeffs[b]);\n    max = Math.max(jsf[0].length, max);\n    naf[a] = new Array(max);\n    naf[b] = new Array(max);\n    for (var j = 0; j < max; j++) {\n      var ja = jsf[0][j] | 0;\n      var jb = jsf[1][j] | 0;\n\n      naf[a][j] = index[(ja + 1) * 3 + (jb + 1)];\n      naf[b][j] = 0;\n      wnd[a] = comb;\n    }\n  }\n\n  var acc = this.jpoint(null, null, null);\n  var tmp = this._wnafT4;\n  for (var i = max; i >= 0; i--) {\n    var k = 0;\n\n    while (i >= 0) {\n      var zero = true;\n      for (var j = 0; j < len; j++) {\n        tmp[j] = naf[j][i] | 0;\n        if (tmp[j] !== 0)\n          zero = false;\n      }\n      if (!zero)\n        break;\n      k++;\n      i--;\n    }\n    if (i >= 0)\n      k++;\n    acc = acc.dblp(k);\n    if (i < 0)\n      break;\n\n    for (var j = 0; j < len; j++) {\n      var z = tmp[j];\n      var p;\n      if (z === 0)\n        continue;\n      else if (z > 0)\n        p = wnd[j][(z - 1) >> 1];\n      else if (z < 0)\n        p = wnd[j][(-z - 1) >> 1].neg();\n\n      if (p.type === 'affine')\n        acc = acc.mixedAdd(p);\n      else\n        acc = acc.add(p);\n    }\n  }\n  // Zeroify references\n  for (var i = 0; i < len; i++)\n    wnd[i] = null;\n\n  if (jacobianResult)\n    return acc;\n  else\n    return acc.toP();\n};\n\nfunction BasePoint(curve, type) {\n  this.curve = curve;\n  this.type = type;\n  this.precomputed = null;\n}\nBaseCurve.BasePoint = BasePoint;\n\nBasePoint.prototype.eq = function eq(/*other*/) {\n  throw new Error('Not implemented');\n};\n\nBasePoint.prototype.validate = function validate() {\n  return this.curve.validate(this);\n};\n\nBaseCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  bytes = utils.toArray(bytes, enc);\n\n  var len = this.p.byteLength();\n\n  // uncompressed, hybrid-odd, hybrid-even\n  if ((bytes[0] === 0x04 || bytes[0] === 0x06 || bytes[0] === 0x07) &&\n      bytes.length - 1 === 2 * len) {\n    if (bytes[0] === 0x06)\n      assert(bytes[bytes.length - 1] % 2 === 0);\n    else if (bytes[0] === 0x07)\n      assert(bytes[bytes.length - 1] % 2 === 1);\n\n    var res =  this.point(bytes.slice(1, 1 + len),\n                          bytes.slice(1 + len, 1 + 2 * len));\n\n    return res;\n  } else if ((bytes[0] === 0x02 || bytes[0] === 0x03) &&\n              bytes.length - 1 === len) {\n    return this.pointFromX(bytes.slice(1, 1 + len), bytes[0] === 0x03);\n  }\n  throw new Error('Unknown point format');\n};\n\nBasePoint.prototype.encodeCompressed = function encodeCompressed(enc) {\n  return this.encode(enc, true);\n};\n\nBasePoint.prototype._encode = function _encode(compact) {\n  var len = this.curve.p.byteLength();\n  var x = this.getX().toArray('be', len);\n\n  if (compact)\n    return [ this.getY().isEven() ? 0x02 : 0x03 ].concat(x);\n\n  return [ 0x04 ].concat(x, this.getY().toArray('be', len)) ;\n};\n\nBasePoint.prototype.encode = function encode(enc, compact) {\n  return utils.encode(this._encode(compact), enc);\n};\n\nBasePoint.prototype.precompute = function precompute(power) {\n  if (this.precomputed)\n    return this;\n\n  var precomputed = {\n    doubles: null,\n    naf: null,\n    beta: null\n  };\n  precomputed.naf = this._getNAFPoints(8);\n  precomputed.doubles = this._getDoubles(4, power);\n  precomputed.beta = this._getBeta();\n  this.precomputed = precomputed;\n\n  return this;\n};\n\nBasePoint.prototype._hasDoubles = function _hasDoubles(k) {\n  if (!this.precomputed)\n    return false;\n\n  var doubles = this.precomputed.doubles;\n  if (!doubles)\n    return false;\n\n  return doubles.points.length >= Math.ceil((k.bitLength() + 1) / doubles.step);\n};\n\nBasePoint.prototype._getDoubles = function _getDoubles(step, power) {\n  if (this.precomputed && this.precomputed.doubles)\n    return this.precomputed.doubles;\n\n  var doubles = [ this ];\n  var acc = this;\n  for (var i = 0; i < power; i += step) {\n    for (var j = 0; j < step; j++)\n      acc = acc.dbl();\n    doubles.push(acc);\n  }\n  return {\n    step: step,\n    points: doubles\n  };\n};\n\nBasePoint.prototype._getNAFPoints = function _getNAFPoints(wnd) {\n  if (this.precomputed && this.precomputed.naf)\n    return this.precomputed.naf;\n\n  var res = [ this ];\n  var max = (1 << wnd) - 1;\n  var dbl = max === 1 ? null : this.dbl();\n  for (var i = 1; i < max; i++)\n    res[i] = res[i - 1].add(dbl);\n  return {\n    wnd: wnd,\n    points: res\n  };\n};\n\nBasePoint.prototype._getBeta = function _getBeta() {\n  return null;\n};\n\nBasePoint.prototype.dblp = function dblp(k) {\n  var r = this;\n  for (var i = 0; i < k; i++)\n    r = r.dbl();\n  return r;\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst embed_1 = require('./embed');\nexports.embed = embed_1.p2data;\nconst p2ms_1 = require('./p2ms');\nexports.p2ms = p2ms_1.p2ms;\nconst p2pk_1 = require('./p2pk');\nexports.p2pk = p2pk_1.p2pk;\nconst p2pkh_1 = require('./p2pkh');\nexports.p2pkh = p2pkh_1.p2pkh;\nconst p2sh_1 = require('./p2sh');\nexports.p2sh = p2sh_1.p2sh;\nconst p2wpkh_1 = require('./p2wpkh');\nexports.p2wpkh = p2wpkh_1.p2wpkh;\nconst p2wsh_1 = require('./p2wsh');\nexports.p2wsh = p2wsh_1.p2wsh;\n// TODO\n// witness commitment\n","'use strict'\n\n// limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\nvar MAX_BYTES = 65536\n\n// Node supports requesting up to this number of bytes\n// https://github.com/nodejs/node/blob/master/lib/internal/crypto/random.js#L48\nvar MAX_UINT32 = 4294967295\n\nfunction oldBrowser () {\n  throw new Error('Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11')\n}\n\nvar Buffer = require('safe-buffer').Buffer\nvar crypto = global.crypto || global.msCrypto\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes\n} else {\n  module.exports = oldBrowser\n}\n\nfunction randomBytes (size, cb) {\n  // phantomjs needs to throw\n  if (size > MAX_UINT32) throw new RangeError('requested too many random bytes')\n\n  var bytes = Buffer.allocUnsafe(size)\n\n  if (size > 0) {  // getRandomValues fails on IE if size == 0\n    if (size > MAX_BYTES) { // this is the max bytes crypto.getRandomValues\n      // can do at once see https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n      for (var generated = 0; generated < size; generated += MAX_BYTES) {\n        // buffer.slice automatically checks if the end is past the end of\n        // the buffer so we don't have to here\n        crypto.getRandomValues(bytes.slice(generated, generated + MAX_BYTES))\n      }\n    } else {\n      crypto.getRandomValues(bytes)\n    }\n  }\n\n  if (typeof cb === 'function') {\n    return process.nextTick(function () {\n      cb(null, bytes)\n    })\n  }\n\n  return bytes\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bufferutils = require('./bufferutils');\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\nfunction varSliceSize(someScript) {\n  const length = someScript.length;\n  return varuint.encodingLength(length) + length;\n}\nfunction vectorSize(someVector) {\n  const length = someVector.length;\n  return (\n    varuint.encodingLength(length) +\n    someVector.reduce((sum, witness) => {\n      return sum + varSliceSize(witness);\n    }, 0)\n  );\n}\nconst EMPTY_SCRIPT = Buffer.allocUnsafe(0);\nconst EMPTY_WITNESS = [];\nconst ZERO = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000000',\n  'hex',\n);\nconst ONE = Buffer.from(\n  '0000000000000000000000000000000000000000000000000000000000000001',\n  'hex',\n);\nconst VALUE_UINT64_MAX = Buffer.from('ffffffffffffffff', 'hex');\nconst BLANK_OUTPUT = {\n  script: EMPTY_SCRIPT,\n  valueBuffer: VALUE_UINT64_MAX,\n};\nfunction isOutput(out) {\n  return out.value !== undefined;\n}\nclass Transaction {\n  constructor() {\n    this.version = 1;\n    this.locktime = 0;\n    this.ins = [];\n    this.outs = [];\n  }\n  static fromBuffer(buffer, _NO_STRICT) {\n    let offset = 0;\n    function readSlice(n) {\n      offset += n;\n      return buffer.slice(offset - n, offset);\n    }\n    function readUInt32() {\n      const i = buffer.readUInt32LE(offset);\n      offset += 4;\n      return i;\n    }\n    function readInt32() {\n      const i = buffer.readInt32LE(offset);\n      offset += 4;\n      return i;\n    }\n    function readUInt64() {\n      const i = bufferutils.readUInt64LE(buffer, offset);\n      offset += 8;\n      return i;\n    }\n    function readVarInt() {\n      const vi = varuint.decode(buffer, offset);\n      offset += varuint.decode.bytes;\n      return vi;\n    }\n    function readVarSlice() {\n      return readSlice(readVarInt());\n    }\n    function readVector() {\n      const count = readVarInt();\n      const vector = [];\n      for (let i = 0; i < count; i++) vector.push(readVarSlice());\n      return vector;\n    }\n    const tx = new Transaction();\n    tx.version = readInt32();\n    const marker = buffer.readUInt8(offset);\n    const flag = buffer.readUInt8(offset + 1);\n    let hasWitnesses = false;\n    if (\n      marker === Transaction.ADVANCED_TRANSACTION_MARKER &&\n      flag === Transaction.ADVANCED_TRANSACTION_FLAG\n    ) {\n      offset += 2;\n      hasWitnesses = true;\n    }\n    const vinLen = readVarInt();\n    for (let i = 0; i < vinLen; ++i) {\n      tx.ins.push({\n        hash: readSlice(32),\n        index: readUInt32(),\n        script: readVarSlice(),\n        sequence: readUInt32(),\n        witness: EMPTY_WITNESS,\n      });\n    }\n    const voutLen = readVarInt();\n    for (let i = 0; i < voutLen; ++i) {\n      tx.outs.push({\n        value: readUInt64(),\n        script: readVarSlice(),\n      });\n    }\n    if (hasWitnesses) {\n      for (let i = 0; i < vinLen; ++i) {\n        tx.ins[i].witness = readVector();\n      }\n      // was this pointless?\n      if (!tx.hasWitnesses())\n        throw new Error('Transaction has superfluous witness data');\n    }\n    tx.locktime = readUInt32();\n    if (_NO_STRICT) return tx;\n    if (offset !== buffer.length)\n      throw new Error('Transaction has unexpected data');\n    return tx;\n  }\n  static fromHex(hex) {\n    return Transaction.fromBuffer(Buffer.from(hex, 'hex'), false);\n  }\n  static isCoinbaseHash(buffer) {\n    typeforce(types.Hash256bit, buffer);\n    for (let i = 0; i < 32; ++i) {\n      if (buffer[i] !== 0) return false;\n    }\n    return true;\n  }\n  isCoinbase() {\n    return (\n      this.ins.length === 1 && Transaction.isCoinbaseHash(this.ins[0].hash)\n    );\n  }\n  addInput(hash, index, sequence, scriptSig) {\n    typeforce(\n      types.tuple(\n        types.Hash256bit,\n        types.UInt32,\n        types.maybe(types.UInt32),\n        types.maybe(types.Buffer),\n      ),\n      arguments,\n    );\n    if (types.Null(sequence)) {\n      sequence = Transaction.DEFAULT_SEQUENCE;\n    }\n    // Add the input and return the input's index\n    return (\n      this.ins.push({\n        hash,\n        index,\n        script: scriptSig || EMPTY_SCRIPT,\n        sequence: sequence,\n        witness: EMPTY_WITNESS,\n      }) - 1\n    );\n  }\n  addOutput(scriptPubKey, value) {\n    typeforce(types.tuple(types.Buffer, types.Satoshi), arguments);\n    // Add the output and return the output's index\n    return (\n      this.outs.push({\n        script: scriptPubKey,\n        value,\n      }) - 1\n    );\n  }\n  hasWitnesses() {\n    return this.ins.some(x => {\n      return x.witness.length !== 0;\n    });\n  }\n  weight() {\n    const base = this.__byteLength(false);\n    const total = this.__byteLength(true);\n    return base * 3 + total;\n  }\n  virtualSize() {\n    return Math.ceil(this.weight() / 4);\n  }\n  byteLength() {\n    return this.__byteLength(true);\n  }\n  clone() {\n    const newTx = new Transaction();\n    newTx.version = this.version;\n    newTx.locktime = this.locktime;\n    newTx.ins = this.ins.map(txIn => {\n      return {\n        hash: txIn.hash,\n        index: txIn.index,\n        script: txIn.script,\n        sequence: txIn.sequence,\n        witness: txIn.witness,\n      };\n    });\n    newTx.outs = this.outs.map(txOut => {\n      return {\n        script: txOut.script,\n        value: txOut.value,\n      };\n    });\n    return newTx;\n  }\n  /**\n   * Hash transaction for signing a specific input.\n   *\n   * Bitcoin uses a different hash for each signed transaction input.\n   * This method copies the transaction, makes the necessary changes based on the\n   * hashType, and then hashes the result.\n   * This hash can then be used to sign the provided transaction input.\n   */\n  hashForSignature(inIndex, prevOutScript, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, /* types.UInt8 */ types.Number),\n      arguments,\n    );\n    // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L29\n    if (inIndex >= this.ins.length) return ONE;\n    // ignore OP_CODESEPARATOR\n    const ourScript = bscript.compile(\n      bscript.decompile(prevOutScript).filter(x => {\n        return x !== script_1.OPS.OP_CODESEPARATOR;\n      }),\n    );\n    const txTmp = this.clone();\n    // SIGHASH_NONE: ignore all outputs? (wildcard payee)\n    if ((hashType & 0x1f) === Transaction.SIGHASH_NONE) {\n      txTmp.outs = [];\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, i) => {\n        if (i === inIndex) return;\n        input.sequence = 0;\n      });\n      // SIGHASH_SINGLE: ignore all outputs, except at the same index?\n    } else if ((hashType & 0x1f) === Transaction.SIGHASH_SINGLE) {\n      // https://github.com/bitcoin/bitcoin/blob/master/src/test/sighash_tests.cpp#L60\n      if (inIndex >= this.outs.length) return ONE;\n      // truncate outputs after\n      txTmp.outs.length = inIndex + 1;\n      // \"blank\" outputs before\n      for (let i = 0; i < inIndex; i++) {\n        txTmp.outs[i] = BLANK_OUTPUT;\n      }\n      // ignore sequence numbers (except at inIndex)\n      txTmp.ins.forEach((input, y) => {\n        if (y === inIndex) return;\n        input.sequence = 0;\n      });\n    }\n    // SIGHASH_ANYONECANPAY: ignore inputs entirely?\n    if (hashType & Transaction.SIGHASH_ANYONECANPAY) {\n      txTmp.ins = [txTmp.ins[inIndex]];\n      txTmp.ins[0].script = ourScript;\n      // SIGHASH_ALL: only ignore input scripts\n    } else {\n      // \"blank\" others input scripts\n      txTmp.ins.forEach(input => {\n        input.script = EMPTY_SCRIPT;\n      });\n      txTmp.ins[inIndex].script = ourScript;\n    }\n    // serialize and hash\n    const buffer = Buffer.allocUnsafe(txTmp.__byteLength(false) + 4);\n    buffer.writeInt32LE(hashType, buffer.length - 4);\n    txTmp.__toBuffer(buffer, 0, false);\n    return bcrypto.hash256(buffer);\n  }\n  hashForWitnessV0(inIndex, prevOutScript, value, hashType) {\n    typeforce(\n      types.tuple(types.UInt32, types.Buffer, types.Satoshi, types.UInt32),\n      arguments,\n    );\n    let tbuffer = Buffer.from([]);\n    let toffset = 0;\n    function writeSlice(slice) {\n      toffset += slice.copy(tbuffer, toffset);\n    }\n    function writeUInt32(i) {\n      toffset = tbuffer.writeUInt32LE(i, toffset);\n    }\n    function writeUInt64(i) {\n      toffset = bufferutils.writeUInt64LE(tbuffer, i, toffset);\n    }\n    function writeVarInt(i) {\n      varuint.encode(i, tbuffer, toffset);\n      toffset += varuint.encode.bytes;\n    }\n    function writeVarSlice(slice) {\n      writeVarInt(slice.length);\n      writeSlice(slice);\n    }\n    let hashOutputs = ZERO;\n    let hashPrevouts = ZERO;\n    let hashSequence = ZERO;\n    if (!(hashType & Transaction.SIGHASH_ANYONECANPAY)) {\n      tbuffer = Buffer.allocUnsafe(36 * this.ins.length);\n      toffset = 0;\n      this.ins.forEach(txIn => {\n        writeSlice(txIn.hash);\n        writeUInt32(txIn.index);\n      });\n      hashPrevouts = bcrypto.hash256(tbuffer);\n    }\n    if (\n      !(hashType & Transaction.SIGHASH_ANYONECANPAY) &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      tbuffer = Buffer.allocUnsafe(4 * this.ins.length);\n      toffset = 0;\n      this.ins.forEach(txIn => {\n        writeUInt32(txIn.sequence);\n      });\n      hashSequence = bcrypto.hash256(tbuffer);\n    }\n    if (\n      (hashType & 0x1f) !== Transaction.SIGHASH_SINGLE &&\n      (hashType & 0x1f) !== Transaction.SIGHASH_NONE\n    ) {\n      const txOutsSize = this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0);\n      tbuffer = Buffer.allocUnsafe(txOutsSize);\n      toffset = 0;\n      this.outs.forEach(out => {\n        writeUInt64(out.value);\n        writeVarSlice(out.script);\n      });\n      hashOutputs = bcrypto.hash256(tbuffer);\n    } else if (\n      (hashType & 0x1f) === Transaction.SIGHASH_SINGLE &&\n      inIndex < this.outs.length\n    ) {\n      const output = this.outs[inIndex];\n      tbuffer = Buffer.allocUnsafe(8 + varSliceSize(output.script));\n      toffset = 0;\n      writeUInt64(output.value);\n      writeVarSlice(output.script);\n      hashOutputs = bcrypto.hash256(tbuffer);\n    }\n    tbuffer = Buffer.allocUnsafe(156 + varSliceSize(prevOutScript));\n    toffset = 0;\n    const input = this.ins[inIndex];\n    writeUInt32(this.version);\n    writeSlice(hashPrevouts);\n    writeSlice(hashSequence);\n    writeSlice(input.hash);\n    writeUInt32(input.index);\n    writeVarSlice(prevOutScript);\n    writeUInt64(value);\n    writeUInt32(input.sequence);\n    writeSlice(hashOutputs);\n    writeUInt32(this.locktime);\n    writeUInt32(hashType);\n    return bcrypto.hash256(tbuffer);\n  }\n  getHash(forWitness) {\n    // wtxid for coinbase is always 32 bytes of 0x00\n    if (forWitness && this.isCoinbase()) return Buffer.alloc(32, 0);\n    return bcrypto.hash256(this.__toBuffer(undefined, undefined, forWitness));\n  }\n  getId() {\n    // transaction hash's are displayed in reverse order\n    return bufferutils_1.reverseBuffer(this.getHash(false)).toString('hex');\n  }\n  toBuffer(buffer, initialOffset) {\n    return this.__toBuffer(buffer, initialOffset, true);\n  }\n  toHex() {\n    return this.toBuffer(undefined, undefined).toString('hex');\n  }\n  setInputScript(index, scriptSig) {\n    typeforce(types.tuple(types.Number, types.Buffer), arguments);\n    this.ins[index].script = scriptSig;\n  }\n  setWitness(index, witness) {\n    typeforce(types.tuple(types.Number, [types.Buffer]), arguments);\n    this.ins[index].witness = witness;\n  }\n  __byteLength(_ALLOW_WITNESS) {\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    return (\n      (hasWitnesses ? 10 : 8) +\n      varuint.encodingLength(this.ins.length) +\n      varuint.encodingLength(this.outs.length) +\n      this.ins.reduce((sum, input) => {\n        return sum + 40 + varSliceSize(input.script);\n      }, 0) +\n      this.outs.reduce((sum, output) => {\n        return sum + 8 + varSliceSize(output.script);\n      }, 0) +\n      (hasWitnesses\n        ? this.ins.reduce((sum, input) => {\n            return sum + vectorSize(input.witness);\n          }, 0)\n        : 0)\n    );\n  }\n  __toBuffer(buffer, initialOffset, _ALLOW_WITNESS) {\n    if (!buffer) buffer = Buffer.allocUnsafe(this.__byteLength(_ALLOW_WITNESS));\n    let offset = initialOffset || 0;\n    function writeSlice(slice) {\n      offset += slice.copy(buffer, offset);\n    }\n    function writeUInt8(i) {\n      offset = buffer.writeUInt8(i, offset);\n    }\n    function writeUInt32(i) {\n      offset = buffer.writeUInt32LE(i, offset);\n    }\n    function writeInt32(i) {\n      offset = buffer.writeInt32LE(i, offset);\n    }\n    function writeUInt64(i) {\n      offset = bufferutils.writeUInt64LE(buffer, i, offset);\n    }\n    function writeVarInt(i) {\n      varuint.encode(i, buffer, offset);\n      offset += varuint.encode.bytes;\n    }\n    function writeVarSlice(slice) {\n      writeVarInt(slice.length);\n      writeSlice(slice);\n    }\n    function writeVector(vector) {\n      writeVarInt(vector.length);\n      vector.forEach(writeVarSlice);\n    }\n    writeInt32(this.version);\n    const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();\n    if (hasWitnesses) {\n      writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER);\n      writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG);\n    }\n    writeVarInt(this.ins.length);\n    this.ins.forEach(txIn => {\n      writeSlice(txIn.hash);\n      writeUInt32(txIn.index);\n      writeVarSlice(txIn.script);\n      writeUInt32(txIn.sequence);\n    });\n    writeVarInt(this.outs.length);\n    this.outs.forEach(txOut => {\n      if (isOutput(txOut)) {\n        writeUInt64(txOut.value);\n      } else {\n        writeSlice(txOut.valueBuffer);\n      }\n      writeVarSlice(txOut.script);\n    });\n    if (hasWitnesses) {\n      this.ins.forEach(input => {\n        writeVector(input.witness);\n      });\n    }\n    writeUInt32(this.locktime);\n    // avoid slicing unless necessary\n    if (initialOffset !== undefined) return buffer.slice(initialOffset, offset);\n    return buffer;\n  }\n}\nTransaction.DEFAULT_SEQUENCE = 0xffffffff;\nTransaction.SIGHASH_ALL = 0x01;\nTransaction.SIGHASH_NONE = 0x02;\nTransaction.SIGHASH_SINGLE = 0x03;\nTransaction.SIGHASH_ANYONECANPAY = 0x80;\nTransaction.ADVANCED_TRANSACTION_MARKER = 0x00;\nTransaction.ADVANCED_TRANSACTION_FLAG = 0x01;\nexports.Transaction = Transaction;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// Number.MAX_SAFE_INTEGER\nconst MAX_SAFE_INTEGER = 9007199254740991;\nfunction checkUInt53(n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0)\n    throw new RangeError('value out of range');\n}\nfunction encode(_number, buffer, offset) {\n  checkUInt53(_number);\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(_number));\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  // 8 bit\n  if (_number < 0xfd) {\n    buffer.writeUInt8(_number, offset);\n    Object.assign(encode, { bytes: 1 });\n    // 16 bit\n  } else if (_number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset);\n    buffer.writeUInt16LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 3 });\n    // 32 bit\n  } else if (_number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset);\n    buffer.writeUInt32LE(_number, offset + 1);\n    Object.assign(encode, { bytes: 5 });\n    // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset);\n    buffer.writeUInt32LE(_number >>> 0, offset + 1);\n    buffer.writeUInt32LE((_number / 0x100000000) | 0, offset + 5);\n    Object.assign(encode, { bytes: 9 });\n  }\n  return buffer;\n}\nexports.encode = encode;\nfunction decode(buffer, offset) {\n  if (!Buffer.isBuffer(buffer))\n    throw new TypeError('buffer must be a Buffer instance');\n  if (!offset) offset = 0;\n  const first = buffer.readUInt8(offset);\n  // 8 bit\n  if (first < 0xfd) {\n    Object.assign(decode, { bytes: 1 });\n    return first;\n    // 16 bit\n  } else if (first === 0xfd) {\n    Object.assign(decode, { bytes: 3 });\n    return buffer.readUInt16LE(offset + 1);\n    // 32 bit\n  } else if (first === 0xfe) {\n    Object.assign(decode, { bytes: 5 });\n    return buffer.readUInt32LE(offset + 1);\n    // 64 bit\n  } else {\n    Object.assign(decode, { bytes: 9 });\n    const lo = buffer.readUInt32LE(offset + 1);\n    const hi = buffer.readUInt32LE(offset + 5);\n    const _number = hi * 0x0100000000 + lo;\n    checkUInt53(_number);\n    return _number;\n  }\n}\nexports.decode = decode;\nfunction encodingLength(_number) {\n  checkUInt53(_number);\n  return _number < 0xfd\n    ? 1\n    : _number <= 0xffff\n    ? 3\n    : _number <= 0xffffffff\n    ? 5\n    : 9;\n}\nexports.encodingLength = encodingLength;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MissingParametersError extends Error {\n    constructor(message) {\n        super();\n        this.name = 'MissingParametersError';\n        this.message = (message || '');\n    }\n}\nexports.MissingParametersError = MissingParametersError;\nclass InvalidTokenError extends Error {\n    constructor(message) {\n        super();\n        this.name = 'InvalidTokenError';\n        this.message = (message || '');\n    }\n}\nexports.InvalidTokenError = InvalidTokenError;\n//# sourceMappingURL=errors.js.map","\nimport { DEFAULT_SCOPE, DEFAULT_BLOCKSTACK_HOST, AuthScope } from './authConstants'\nimport { getGlobalObject } from '../utils'\n\n/**\n * Configuration data for the current app.\n *\n * On browser platforms, creating an instance of this\n * class without any arguments will use\n * `window.location.origin` as the app domain.\n * On non-browser platforms, you need to\n * specify an app domain as the second argument.\n * \n */\nexport class AppConfig {\n  /**\n   * Blockstack apps are uniquely identified by their app domain.\n   *\n   */\n  appDomain: string\n\n  /**\n   * An array of string representing permissions requested by the app.\n   *\n   */\n  scopes: Array<AuthScope | string>\n\n\n  /**\n   * Path on app domain to redirect users to after authentication. The\n   * authentication response token will be postpended in a query.\n   *\n   */\n  redirectPath: string\n\n  /**\n   * Path relative to app domain of app's manifest file.\n   *\n   * This file needs to have CORS headers set so that it can be fetched\n   * from any origin. Typically this means return the header `Access-Control-Allow-Origin: *`.\n   *\n   */\n  manifestPath: string\n\n  /**\n   * The URL of Blockstack core node to use for this app. If this is\n   * `null`, the core node specified by the user or default core node\n   * will be used.\n   *\n   */\n  coreNode: string\n\n  /**\n   * The URL of a web-based Blockstack Authenticator to use in the event\n   * the user doesn't have Blockstack installed on their machine. If this\n   * is not specified, the current default in this library will be used.\n   *\n   */\n  authenticatorURL?: string\n\n  /**\n   * @param {Array<string>} scopes - permissions this app is requesting\n   * @param {string} appDomain - the app domain\n   * @param {string} redirectPath - path on app domain to redirect users to after authentication\n   * @param {string} manifestPath - path relative to app domain of app's manifest file\n   * @param {string} coreNode - override the default or user selected core node\n   * @param {string} authenticatorURL - the web-based fall back authenticator \n   * ([[DEFAULT_BLOCKSTACK_HOST]])\n   */\n  constructor(scopes: Array<string> = DEFAULT_SCOPE.slice(),\n              appDomain: string = getGlobalObject('location', { returnEmptyObject: true }).origin,\n              redirectPath: string = '',\n              manifestPath: string = '/manifest.json',\n              coreNode: string | null = null,\n              authenticatorURL: string = DEFAULT_BLOCKSTACK_HOST) {\n    this.appDomain = appDomain\n    this.scopes = scopes\n    this.redirectPath = redirectPath\n    this.manifestPath = manifestPath\n    this.coreNode = coreNode\n    this.authenticatorURL = authenticatorURL\n  }\n\n  /**\n   * The location to which the authenticator should\n   * redirect the user.\n   * @returns {string} - URI\n   */\n  redirectURI(): string {\n    return `${this.appDomain}${this.redirectPath}`\n  }\n\n  /**\n   * The location of the app's manifest file.\n   * @returns {string} - URI\n   */\n  manifestURI(): string {\n    return `${this.appDomain}${this.manifestPath}`\n  }\n}\n","import { TxOutput, address as bjsAddress, networks, Transaction, payments, Network } from 'bitcoinjs-lib'\nimport * as FormData from 'form-data'\nimport * as BN from 'bn.js'\nimport { MissingParameterError, RemoteServiceError } from './errors'\nimport { Logger } from './logger'\nimport { config } from './config'\nimport { fetchPrivate } from './fetchUtil'\nimport { createSha2Hash } from './encryption/sha2Hash'\nimport { hashRipemd160 } from './encryption/hashRipemd160'\n\nexport interface UTXO {\n  value?: number;\n  confirmations?: number;\n  tx_hash: string;\n  tx_output_n: number;\n}\n\nexport interface PriceInfo {\n  units: string;\n  amount: BN;\n}\n\nexport interface AccountTokens {\n  tokens: string[];\n}\n\nexport interface TransactionInfo {\n  block_height: number;\n  [key: string]: any;\n}\n\nconst SATOSHIS_PER_BTC = 1e8\nconst TX_BROADCAST_SERVICE_ZONE_FILE_ENDPOINT = 'zone-file'\nconst TX_BROADCAST_SERVICE_REGISTRATION_ENDPOINT = 'registration'\nconst TX_BROADCAST_SERVICE_TX_ENDPOINT = 'transaction'\n\n/**\n * @private\n * @ignore\n */\nexport class BitcoinNetwork {\n  broadcastTransaction(transaction: string): Promise<any> {\n    return Promise.reject(new Error(`Not implemented, broadcastTransaction(${transaction})`))\n  }\n\n  getBlockHeight(): Promise<number> {\n    return Promise.reject(new Error('Not implemented, getBlockHeight()'))\n  }\n\n  getTransactionInfo(txid: string): Promise<TransactionInfo> {\n    return Promise.reject(new Error(`Not implemented, getTransactionInfo(${txid})`))\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    return Promise.reject(new Error(`Not implemented, getNetworkedUTXOs(${address})`))\n  }\n}\n/**\n * Use the methods in class to build third-party wallets or in DApps that register names. \n */\nexport class BlockstackNetwork {\n  blockstackAPIUrl: string\n\n  broadcastServiceUrl: string\n\n  /**\n   * @ignore\n   */\n  layer1: Network\n\n  DUST_MINIMUM: number\n\n  includeUtxoMap: {[address: string]: UTXO[]}\n\n  excludeUtxoSet: UTXO[]\n\n  btc: BitcoinNetwork\n\n  MAGIC_BYTES: string\n\n  constructor(apiUrl: string, broadcastServiceUrl: string,\n              bitcoinAPI: BitcoinNetwork,\n              network = networks.bitcoin) {\n    this.blockstackAPIUrl = apiUrl\n    this.broadcastServiceUrl = broadcastServiceUrl\n    this.layer1 = network\n    this.btc = bitcoinAPI\n\n    this.DUST_MINIMUM = 5500\n    this.includeUtxoMap = {}\n    this.excludeUtxoSet = []\n    this.MAGIC_BYTES = 'id'\n  }\n\n  /**\n   * @ignore\n   */\n  coerceAddress(address: string) {\n    const { hash, version } = bjsAddress.fromBase58Check(address)\n    const scriptHashes = [networks.bitcoin.scriptHash,\n                          networks.testnet.scriptHash]\n    const pubKeyHashes = [networks.bitcoin.pubKeyHash,\n                          networks.testnet.pubKeyHash]\n    let coercedVersion\n    if (scriptHashes.indexOf(version) >= 0) {\n      coercedVersion = this.layer1.scriptHash\n    } else if (pubKeyHashes.indexOf(version) >= 0) {\n      coercedVersion = this.layer1.pubKeyHash\n    } else {\n      throw new Error(`Unrecognized address version number ${version} in ${address}`)\n    }\n    return bjsAddress.toBase58Check(hash, coercedVersion)\n  }\n\n  /**\n   * This is intended for use in third-party wallets or in DApps that register names.\n   */\n  getDefaultBurnAddress() {\n    return this.coerceAddress('1111111111111111111114oLvT2')\n  }\n\n  /**\n   * Get the price of a name via the legacy /v1/prices API endpoint. This is \n   * intended for use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName the name to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }\n   * @private\n   */\n  getNamePriceV1(fullyQualifiedName: string): Promise<PriceInfo> {\n    // legacy code path\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/prices/names/${fullyQualifiedName}`)\n      .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(`Failed to query name price for ${fullyQualifiedName}`)\n        }\n        return resp\n      })\n      .then(resp => resp.json())\n      .then(resp => resp.name_price)\n      .then((namePrice) => {\n        if (!namePrice || !namePrice.satoshis) {\n          throw new Error(\n            `Failed to get price for ${fullyQualifiedName}. Does the namespace exist?`\n          )\n        }\n        if (namePrice.satoshis < this.DUST_MINIMUM) {\n          namePrice.satoshis = this.DUST_MINIMUM\n        }\n        const result = {\n          units: 'BTC',\n          amount: new BN(String(namePrice.satoshis))\n        }\n        return result\n      })\n  }\n\n  /**\n   * Get the price of a namespace via the legacy /v1/prices API endpoint. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param namespaceID the namespace to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }\n   * @private\n   */\n  getNamespacePriceV1(namespaceID: string): Promise<PriceInfo> {\n    // legacy code path\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/prices/namespaces/${namespaceID}`)\n      .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(`Failed to query name price for ${namespaceID}`)\n        }\n        return resp\n      })\n      .then(resp => resp.json())\n      .then((namespacePrice) => {\n        if (!namespacePrice || !namespacePrice.satoshis) {\n          throw new Error(`Failed to get price for ${namespaceID}`)\n        }\n        if (namespacePrice.satoshis < this.DUST_MINIMUM) {\n          namespacePrice.satoshis = this.DUST_MINIMUM\n        }\n        const result = {\n          units: 'BTC',\n          amount: new BN(String(namespacePrice.satoshis))\n        }\n        return result\n      })\n  }\n  \n  /**\n   * Get the price of a name via the /v2/prices API endpoint. This is intended \n   * for use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName the name to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }\n   * @private\n   */\n  getNamePriceV2(fullyQualifiedName: string): Promise<PriceInfo> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v2/prices/names/${fullyQualifiedName}`)\n      .then((resp) => {\n        if (resp.status !== 200) {\n          // old core node \n          throw new Error('The upstream node does not handle the /v2/ price namespace')\n        }\n        return resp\n      })\n      .then(resp => resp.json())\n      .then(resp => resp.name_price)\n      .then((namePrice) => {\n        if (!namePrice) {\n          throw new Error(\n            `Failed to get price for ${fullyQualifiedName}. Does the namespace exist?`\n          )\n        }\n        const result = {\n          units: namePrice.units,\n          amount: new BN(namePrice.amount)\n        }\n        if (namePrice.units === 'BTC') {\n          // must be at least dust-minimum\n          const dustMin = new BN(String(this.DUST_MINIMUM))\n          if (result.amount.ucmp(dustMin) < 0) {\n            result.amount = dustMin\n          }\n        }\n        return result\n      })\n  }\n\n  /**\n   * Get the price of a namespace via the /v2/prices API endpoint.\n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param namespaceID the namespace to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }\n   * @private\n   */\n  getNamespacePriceV2(namespaceID: string): Promise<PriceInfo> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v2/prices/namespaces/${namespaceID}`)\n      .then((resp) => {\n        if (resp.status !== 200) {\n          // old core node \n          throw new Error('The upstream node does not handle the /v2/ price namespace')\n        }\n        return resp\n      })\n      .then(resp => resp.json())\n      .then((namespacePrice) => {\n        if (!namespacePrice) {\n          throw new Error(`Failed to get price for ${namespaceID}`)\n        }\n        const result = {\n          units: namespacePrice.units,\n          amount: new BN(namespacePrice.amount)\n        }\n        if (namespacePrice.units === 'BTC') {\n          // must be at least dust-minimum\n          const dustMin = new BN(String(this.DUST_MINIMUM))\n          if (result.amount.ucmp(dustMin) < 0) {\n            result.amount = dustMin\n          }\n        }\n        return result\n      })\n  }\n\n  /**\n   * Get the price of a name. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName the name to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }, where\n   *   .units encodes the cryptocurrency units to pay (e.g. BTC, STACKS), and\n   *   .amount encodes the number of units, in the smallest denominiated amount\n   *   (e.g. if .units is BTC, .amount will be satoshis; if .units is STACKS, \n   *   .amount will be microStacks)\n   */\n  getNamePrice(fullyQualifiedName: string): Promise<PriceInfo> {\n    // handle v1 or v2 \n    return Promise.resolve().then(() => this.getNamePriceV2(fullyQualifiedName))\n      .catch(() => this.getNamePriceV1(fullyQualifiedName))\n  }\n\n  /**\n   * Get the price of a namespace. This is intended for use in third-party \n   * wallets or in DApps that register names.\n   * @param namespaceID the namespace to query\n   * @return a promise to an Object with { units: String, amount: BigInteger }, where\n   *   .units encodes the cryptocurrency units to pay (e.g. BTC, STACKS), and\n   *   .amount encodes the number of units, in the smallest denominiated amount\n   *   (e.g. if .units is BTC, .amount will be satoshis; if .units is STACKS, \n   *   .amount will be microStacks)\n   */\n  getNamespacePrice(namespaceID: string): Promise<PriceInfo> {\n    // handle v1 or v2 \n    return Promise.resolve().then(() => this.getNamespacePriceV2(namespaceID))\n      .catch(() => this.getNamespacePriceV1(namespaceID))\n  }\n\n  /**\n   * How many blocks can pass between a name expiring and the name being able to be\n   * re-registered by a different owner. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName unused\n   * @return a promise to the number of blocks\n   */\n  getGracePeriod(_fullyQualifiedName?: string) {\n    return Promise.resolve(5000)\n  }\n\n  /**\n   * Get the names -- both on-chain and off-chain -- owned by an address. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param address the blockchain address (the hash of the owner public key)\n   * @return a promise that resolves to a list of names (Strings)\n   */\n  getNamesOwned(address: string): Promise<string[]> {\n    const networkAddress = this.coerceAddress(address)\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/addresses/bitcoin/${networkAddress}`)\n      .then(resp => resp.json())\n      .then(obj => obj.names)\n  }\n\n  /**\n   * Get the blockchain address to which a name's registration fee must be sent\n   * (the address will depend on the namespace in which it is registered.) \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param namespace the namespace ID\n   * @return a promise that resolves to an address (String)\n   */\n  getNamespaceBurnAddress(namespace: string): Promise<string> {\n    return Promise.all([\n      fetchPrivate(`${this.blockstackAPIUrl}/v1/namespaces/${namespace}`),\n      this.getBlockHeight()\n    ])\n      .then(([resp, blockHeight]) => {\n        if (resp.status === 404) {\n          throw new Error(`No such namespace '${namespace}'`)\n        } else {\n          return Promise.all([resp.json(), blockHeight])\n        }\n      })\n      .then(([namespaceInfo, blockHeight]) => {\n        let address = this.getDefaultBurnAddress()\n        if (namespaceInfo.version === 2) {\n          // pay-to-namespace-creator if this namespace is less than 1 year old\n          if (namespaceInfo.reveal_block + 52595 >= blockHeight) {\n            address = namespaceInfo.address\n          }\n        }\n        return address\n      })\n      .then(address => this.coerceAddress(address))\n  }\n\n  /**\n   * Get WHOIS-like information for a name, including the address that owns it,\n   * the block at which it expires, and the zone file anchored to it (if available).\n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param fullyQualifiedName the name to query.  Can be on-chain of off-chain.\n   * @return a promise that resolves to the WHOIS-like information \n   */\n  getNameInfo(fullyQualifiedName: string) {\n    Logger.debug(this.blockstackAPIUrl)\n    const nameLookupURL = `${this.blockstackAPIUrl}/v1/names/${fullyQualifiedName}`\n    return fetchPrivate(nameLookupURL)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Name not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((nameInfo) => {\n        Logger.debug(`nameInfo: ${JSON.stringify(nameInfo)}`)\n        // the returned address _should_ be in the correct network ---\n        //  blockstackd gets into trouble because it tries to coerce back to mainnet\n        //  and the regtest transaction generation libraries want to use testnet addresses\n        if (nameInfo.address) {\n          return Object.assign({}, nameInfo, { address: this.coerceAddress(nameInfo.address) })\n        } else {\n          return nameInfo\n        }\n      })\n  }\n\n  /**\n   * Get the pricing parameters and creation history of a namespace. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param namespaceID the namespace to query\n   * @return a promise that resolves to the namespace information.\n   */\n  getNamespaceInfo(namespaceID: string) {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/namespaces/${namespaceID}`)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Namespace not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((namespaceInfo) => {\n        // the returned address _should_ be in the correct network ---\n        //  blockstackd gets into trouble because it tries to coerce back to mainnet\n        //  and the regtest transaction generation libraries want to use testnet addresses\n        if (namespaceInfo.address && namespaceInfo.recipient_address) {\n          return Object.assign({}, namespaceInfo, {\n            address: this.coerceAddress(namespaceInfo.address),\n            recipient_address: this.coerceAddress(namespaceInfo.recipient_address)\n          })\n        } else {\n          return namespaceInfo\n        }\n      })\n  }\n\n  /**\n   * Get a zone file, given its hash.  Throws an exception if the zone file\n   * obtained does not match the hash. \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * \n   * @param zonefileHash the ripemd160(sha256) hash of the zone file\n   * @return a promise that resolves to the zone file's text\n   */\n  getZonefile(zonefileHash: string): Promise<string> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/zonefiles/${zonefileHash}`)\n      .then((resp) => {\n        if (resp.status === 200) {\n          return resp.text()\n            .then(async (body) => {\n              const sha2Hash = await createSha2Hash()\n              const sha256 = await sha2Hash.digest(Buffer.from(body))\n              const h = hashRipemd160(sha256).toString('hex')\n              if (h !== zonefileHash) {\n                throw new Error(`Zone file contents hash to ${h}, not ${zonefileHash}`)\n              }\n              return body\n            })\n        } else {\n          throw new Error(`Bad response status: ${resp.status}`)\n        }\n      })\n  }\n\n  /**\n   * Get the status of an account for a particular token holding.  This includes its total number of\n   * expenditures and credits, lockup times, last `txid`, and so on. \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param address the account\n   * @param tokenType the token type to query\n   * @return a promise that resolves to an object representing the state of the account\n   *   for this token\n   */\n  getAccountStatus(address: string, tokenType: string) {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/accounts/${address}/${tokenType}/status`)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Account not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      }).then((accountStatus) => {\n        // coerce all addresses, and convert credit/debit to biginteger\n        const formattedStatus = Object.assign({}, accountStatus, {\n          address: this.coerceAddress(accountStatus.address),\n          debit_value: new BN(String(accountStatus.debit_value)),\n          credit_value: new BN(String(accountStatus.credit_value))\n        })\n        return formattedStatus\n      })\n  }\n  \n  \n  /**\n   * Get a page of an account's transaction history. This is intended for use in \n   * third-party wallets or in DApps that register names.\n   * @param address the account's address\n   * @param page the page number.  Page 0 is the most recent transactions\n   * @return a promise that resolves to an Array of Objects, where each Object encodes\n   *   states of the account at various block heights (e.g. prior balances, txids, etc)\n   */\n  getAccountHistoryPage(address: string,\n                        page: number): Promise<any[]> {\n    const url = `${this.blockstackAPIUrl}/v1/accounts/${address}/history?page=${page}`\n    return fetchPrivate(url)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Account not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((historyList) => {\n        if (historyList.error) {\n          throw new Error(`Unable to get account history page: ${historyList.error}`)\n        }\n        // coerse all addresses and convert to bigint\n        return historyList.map((histEntry: any) => {\n          histEntry.address = this.coerceAddress(histEntry.address)\n          histEntry.debit_value = new BN(String(histEntry.debit_value))\n          histEntry.credit_value = new BN(String(histEntry.credit_value))\n          return histEntry\n        })\n      })\n  }\n\n  /**\n   * Get the state(s) of an account at a particular block height.  This includes the state of the\n   * account beginning with this block's transactions, as well as all of the states the account\n   * passed through when this block was processed (if any).\n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param address the account's address\n   * @param blockHeight the block to query\n   * @return a promise that resolves to an Array of Objects, where each Object encodes\n   *   states of the account at this block.\n   */\n  getAccountAt(address: string, blockHeight: number): Promise<any[]> {\n    const url = `${this.blockstackAPIUrl}/v1/accounts/${address}/history/${blockHeight}`\n    return fetchPrivate(url)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Account not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((historyList) => {\n        if (historyList.error) {\n          throw new Error(`Unable to get historic account state: ${historyList.error}`)\n        }\n        // coerce all addresses \n        return historyList.map((histEntry: any) => {\n          histEntry.address = this.coerceAddress(histEntry.address)\n          histEntry.debit_value = new BN(String(histEntry.debit_value))\n          histEntry.credit_value = new BN(String(histEntry.credit_value))\n          return histEntry\n        })\n      })\n  }\n\n  /**\n   * Get the set of token types that this account owns. This is intended for use \n   * in third-party wallets or in DApps that register names.\n   * @param address the account's address\n   * @return a promise that resolves to an Array of Strings, where each item encodes the \n   *   type of token this account holds (excluding the underlying blockchain's tokens)\n   */\n  getAccountTokens(address: string): Promise<AccountTokens> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/accounts/${address}/tokens`)\n      .then((resp) => {\n        if (resp.status === 404) {\n          throw new Error('Account not found')\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((tokenList) => {\n        if (tokenList.error) {\n          throw new Error(`Unable to get token list: ${tokenList.error}`)\n        }\n        return tokenList\n      })\n  }\n\n  /**\n   * Get the number of tokens owned by an account.  If the account does not exist or has no\n   * tokens of this type, then 0 will be returned. \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param address the account's address\n   * @param tokenType the type of token to query.\n   * @return a promise that resolves to a BigInteger that encodes the number of tokens \n   *   held by this account.\n   */\n  getAccountBalance(address: string, tokenType: string): Promise<BN> {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/accounts/${address}/${tokenType}/balance`)\n      .then((resp) => {\n        if (resp.status === 404) {\n          // talking to an older blockstack core node without the accounts API\n          return Promise.resolve().then(() => new BN('0'))\n        } else if (resp.status !== 200) {\n          throw new Error(`Bad response status: ${resp.status}`)\n        } else {\n          return resp.json()\n        }\n      })\n      .then((tokenBalance) => {\n        if (tokenBalance.error) {\n          throw new Error(`Unable to get account balance: ${tokenBalance.error}`)\n        }\n        let balance = '0'\n        if (tokenBalance && tokenBalance.balance) {\n          balance = tokenBalance.balance\n        }\n        return new BN(balance)\n      })\n  }\n\n\n  /**\n   * Performs a POST request to the given URL. This is intended for \n   * use in third-party wallets or in DApps that register names.\n   * @param endpoint  the name of\n   * @param body [description]\n   * @return Returns a `Promise` that resolves to the object requested.\n   * In the event of an error, it rejects with:\n   * * a `RemoteServiceError` if there is a problem\n   * with the transaction broadcast service\n   * * `MissingParameterError` if you call the function without a required\n   * parameter\n   *\n   * @private\n   */\n  broadcastServiceFetchHelper(endpoint: string, body: any): Promise<any|Error> {\n    const requestHeaders = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    }\n\n    const options = {\n      method: 'POST',\n      headers: requestHeaders,\n      body: JSON.stringify(body)\n    }\n\n    const url = `${this.broadcastServiceUrl}/v1/broadcast/${endpoint}`\n    return fetchPrivate(url, options)\n      .then((response) => {\n        if (response.ok) {\n          return response.json()\n        } else {\n          throw new RemoteServiceError(response)\n        }\n      })\n  }\n\n  /**\n   * Broadcasts a signed bitcoin transaction to the network optionally waiting to broadcast the\n   * transaction until a second transaction has a certain number of confirmations.\n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   *\n   * @param transaction the hex-encoded transaction to broadcast\n   * @param transactionToWatch the hex transaction id of the transaction to watch for\n   * the specified number of confirmations before broadcasting the `transaction`\n   * @param confirmations the number of confirmations `transactionToWatch` must have\n   * before broadcasting `transaction`.\n   * @return Returns a Promise that resolves to an object with a\n   * `transaction_hash` key containing the transaction hash of the broadcasted transaction.\n   *\n   * In the event of an error, it rejects with:\n   * * a `RemoteServiceError` if there is a problem\n   *   with the transaction broadcast service\n   * * `MissingParameterError` if you call the function without a required\n   *   parameter\n   * @private\n   */\n  broadcastTransaction(\n    transaction: string,\n    transactionToWatch: string = null,\n    confirmations: number = 6\n  ) {\n    if (!transaction) {\n      const error = new MissingParameterError('transaction')\n      return Promise.reject(error)\n    }\n\n    if (!confirmations && confirmations !== 0) {\n      const error = new MissingParameterError('confirmations')\n      return Promise.reject(error)\n    }\n\n    if (transactionToWatch === null) {\n      return this.btc.broadcastTransaction(transaction)\n    } else {\n      /*\n       * POST /v1/broadcast/transaction\n       * Request body:\n       * JSON.stringify({\n       *  transaction,\n       *  transactionToWatch,\n       *  confirmations\n       * })\n       */\n      const endpoint = TX_BROADCAST_SERVICE_TX_ENDPOINT\n\n      const requestBody = {\n        transaction,\n        transactionToWatch,\n        confirmations\n      }\n\n      return this.broadcastServiceFetchHelper(endpoint, requestBody)\n    }\n  }\n\n  /**\n   * Broadcasts a zone file to the Atlas network via the transaction broadcast service.\n   * This is intended for use in third-party wallets or in DApps that register names.\n   *\n   * @param zoneFile the zone file to be broadcast to the Atlas network\n   * @param transactionToWatch the hex transaction id of the transaction\n   * to watch for confirmation before broadcasting the zone file to the Atlas network\n   * @return Returns a Promise that resolves to an object with a\n   * `transaction_hash` key containing the transaction hash of the broadcasted transaction.\n   *\n   * In the event of an error, it rejects with:\n   * * a `RemoteServiceError` if there is a problem\n   *   with the transaction broadcast service\n   * * `MissingParameterError` if you call the function without a required\n   *   parameter\n   * @private\n   */\n  broadcastZoneFile(\n    zoneFile?: string,\n    transactionToWatch: string = null\n  ) {\n    if (!zoneFile) {\n      return Promise.reject(new MissingParameterError('zoneFile'))\n    }\n\n    // TODO: validate zonefile\n\n    if (transactionToWatch) {\n      // broadcast via transaction broadcast service\n\n      /*\n       * POST /v1/broadcast/zone-file\n       * Request body:\n       * JSON.stringify({\n       *  zoneFile,\n       *  transactionToWatch\n       * })\n       */\n\n      const requestBody = {\n        zoneFile,\n        transactionToWatch\n      }\n\n      const endpoint = TX_BROADCAST_SERVICE_ZONE_FILE_ENDPOINT\n\n      return this.broadcastServiceFetchHelper(endpoint, requestBody)\n    } else {\n      // broadcast via core endpoint\n\n      // zone file is two words but core's api treats it as one word 'zonefile'\n      const requestBody = { zonefile: zoneFile }\n\n      return fetchPrivate(`${this.blockstackAPIUrl}/v1/zonefile/`,\n                          {\n                            method: 'POST',\n                            body: JSON.stringify(requestBody),\n                            headers: {\n                              'Content-Type': 'application/json'\n                            }\n                          })\n        .then((resp) => {\n          const json = resp.json()\n          return json\n            .then((respObj) => {\n              if (respObj.hasOwnProperty('error')) {\n                throw new RemoteServiceError(resp)\n              }\n              return respObj.servers\n            })\n        })\n    }\n  }\n\n  /**\n   * Sends the preorder and registration transactions and zone file\n   * for a Blockstack name registration along with the to the transaction\n   *  broadcast service.\n   *\n   * The transaction broadcast:\n   *\n   * * immediately broadcasts the preorder transaction\n   * * broadcasts the register transactions after the preorder transaction\n   * has an appropriate number of confirmations\n   * * broadcasts the zone file to the Atlas network after the register transaction\n   * has an appropriate number of confirmations\n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   *\n   * @param preorderTransaction the hex-encoded, signed preorder transaction generated\n   * using the `makePreorder` function\n   * @param registerTransaction the hex-encoded, signed register transaction generated\n   * using the `makeRegister` function\n   * @param zoneFile the zone file to be broadcast to the Atlas network\n   * @return Returns a Promise that resolves to an object with a\n   * `transaction_hash` key containing the transaction hash of the broadcasted transaction.\n   *\n   * In the event of an error, it rejects with:\n   * * a `RemoteServiceError` if there is a problem\n   *   with the transaction broadcast service\n   * * `MissingParameterError` if you call the function without a required\n   *   parameter\n   * @private\n   */\n  broadcastNameRegistration(\n    preorderTransaction: string,\n    registerTransaction: string,\n    zoneFile: string\n  ) {\n    /*\n       * POST /v1/broadcast/registration\n       * Request body:\n       * JSON.stringify({\n       * preorderTransaction,\n       * registerTransaction,\n       * zoneFile\n       * })\n       */\n\n    if (!preorderTransaction) {\n      const error = new MissingParameterError('preorderTransaction')\n      return Promise.reject(error)\n    }\n\n    if (!registerTransaction) {\n      const error = new MissingParameterError('registerTransaction')\n      return Promise.reject(error)\n    }\n\n    if (!zoneFile) {\n      const error = new MissingParameterError('zoneFile')\n      return Promise.reject(error)\n    }\n\n    const requestBody = {\n      preorderTransaction,\n      registerTransaction,\n      zoneFile\n    }\n\n    const endpoint = TX_BROADCAST_SERVICE_REGISTRATION_ENDPOINT\n\n    return this.broadcastServiceFetchHelper(endpoint, requestBody)\n  }\n\n  /**\n   * @ignore\n   */\n  getFeeRate(): Promise<number> {\n    return fetchPrivate('https://bitcoinfees.earn.com/api/v1/fees/recommended')\n      .then(resp => resp.json())\n      .then(rates => Math.floor(rates.fastestFee))\n  }\n\n  /**\n   * @ignore\n   */\n  countDustOutputs() {\n    throw new Error('Not implemented.')\n  }\n\n  /**\n   * @ignore\n   */\n  getUTXOs(address: string): Promise<UTXO[]> {\n    return this.getNetworkedUTXOs(address)\n      .then((networkedUTXOs) => {\n        let returnSet = networkedUTXOs.concat()\n        if (this.includeUtxoMap.hasOwnProperty(address)) {\n          returnSet = networkedUTXOs.concat(this.includeUtxoMap[address])\n        }\n\n        // aaron: I am *well* aware this is O(n)*O(m) runtime\n        //    however, clients should clear the exclude set periodically\n        const excludeSet = this.excludeUtxoSet\n        returnSet = returnSet.filter(\n          (utxo) => {\n            const inExcludeSet = excludeSet.reduce(\n              (inSet, utxoToCheck) => inSet || (utxoToCheck.tx_hash === utxo.tx_hash\n                          && utxoToCheck.tx_output_n === utxo.tx_output_n), false\n            )\n            return !inExcludeSet\n          }\n        )\n\n        return returnSet\n      })\n  }\n\n  /**\n   * This will modify the network's utxo set to include UTXOs\n   *  from the given transaction and exclude UTXOs *spent* in\n   *  that transaction. \n   * \n   * This is intended for use in third-party wallets or in DApps that register names.\n   * @param txHex - the hex-encoded transaction to use\n   * @return no return value, this modifies the UTXO config state\n   * @private\n   * @ignore\n   */\n  modifyUTXOSetFrom(txHex: string) {\n    const tx = Transaction.fromHex(txHex)\n\n    const excludeSet: UTXO[] = this.excludeUtxoSet.concat()\n\n    tx.ins.forEach((utxoUsed) => {\n      const reverseHash = Buffer.from(utxoUsed.hash)\n      reverseHash.reverse()\n      excludeSet.push({\n        tx_hash: reverseHash.toString('hex'),\n        tx_output_n: utxoUsed.index\n      })\n    })\n\n    this.excludeUtxoSet = excludeSet\n\n    const txHash = Buffer.from(tx.getHash().reverse()).toString('hex')\n    tx.outs.forEach((utxoCreated, txOutputN) => {\n      const isNullData = function isNullData(script: Buffer) {\n        try {\n          payments.embed({ output: script }, { validate: true })\n          return true\n        } catch (_) {\n          return false\n        }\n      }\n      if (isNullData(utxoCreated.script)) {\n        return\n      }\n      const address = bjsAddress.fromOutputScript(\n        utxoCreated.script, this.layer1\n      )\n\n      let includeSet: UTXO[] = []\n      if (this.includeUtxoMap.hasOwnProperty(address)) {\n        includeSet = includeSet.concat(this.includeUtxoMap[address])\n      }\n\n      includeSet.push({\n        tx_hash: txHash,\n        confirmations: 0,\n        value: (utxoCreated as TxOutput).value,\n        tx_output_n: txOutputN\n      })\n      this.includeUtxoMap[address] = includeSet\n    })\n  }\n\n  /**\n   * @ignore\n   */\n  resetUTXOs(address: string) {\n    delete this.includeUtxoMap[address]\n    this.excludeUtxoSet = []\n  }\n\n  /**\n   * @ignore\n   */\n  getConsensusHash() {\n    return fetchPrivate(`${this.blockstackAPIUrl}/v1/blockchains/bitcoin/consensus`)\n      .then(resp => resp.json())\n      .then(x => x.consensus_hash)\n  }\n\n  getTransactionInfo(txHash: string): Promise<TransactionInfo> {\n    return this.btc.getTransactionInfo(txHash)\n  }\n\n  /**\n   * @ignore\n   */\n  getBlockHeight() {\n    return this.btc.getBlockHeight()\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    return this.btc.getNetworkedUTXOs(address)\n  }\n}\n\n/**\n * @ignore\n */\nexport class LocalRegtest extends BlockstackNetwork {\n  constructor(apiUrl: string, broadcastServiceUrl: string,\n              bitcoinAPI: BitcoinNetwork) {\n    super(apiUrl, broadcastServiceUrl, bitcoinAPI, networks.testnet)\n  }\n\n  getFeeRate(): Promise<number> {\n    return Promise.resolve(Math.floor(0.00001000 * SATOSHIS_PER_BTC))\n  }\n}\n\n/**\n * @ignore\n */\nexport class BitcoindAPI extends BitcoinNetwork {\n  bitcoindUrl: string\n\n  bitcoindCredentials: {username: string, password: string}\n\n  importedBefore: any\n\n  constructor(bitcoindUrl: string, bitcoindCredentials: {username: string, password: string}) {\n    super()\n    this.bitcoindUrl = bitcoindUrl\n    this.bitcoindCredentials = bitcoindCredentials\n    this.importedBefore = {}\n  }\n\n  broadcastTransaction(transaction: string) {\n    const jsonRPC = {\n      jsonrpc: '1.0',\n      method: 'sendrawtransaction',\n      params: [transaction]\n    }\n    const authString =      Buffer.from(`${this.bitcoindCredentials.username}:${this.bitcoindCredentials.password}`)\n      .toString('base64')\n    const headers = { Authorization: `Basic ${authString}` }\n    return fetchPrivate(this.bitcoindUrl, {\n      method: 'POST',\n      body: JSON.stringify(jsonRPC),\n      headers\n    })\n      .then(resp => resp.json())\n      .then(respObj => respObj.result)\n  }\n\n  getBlockHeight() {\n    const jsonRPC = {\n      jsonrpc: '1.0',\n      method: 'getblockcount'\n    }\n    const authString =      Buffer.from(`${this.bitcoindCredentials.username}:${this.bitcoindCredentials.password}`)\n      .toString('base64')\n    const headers = { Authorization: `Basic ${authString}` }\n    return fetchPrivate(this.bitcoindUrl, {\n      method: 'POST',\n      body: JSON.stringify(jsonRPC),\n      headers\n    })\n      .then(resp => resp.json())\n      .then(respObj => respObj.result)\n  }\n\n  getTransactionInfo(txHash: string): Promise<TransactionInfo> {\n    const jsonRPC = {\n      jsonrpc: '1.0',\n      method: 'gettransaction',\n      params: [txHash]\n    }\n    const authString =      Buffer.from(`${this.bitcoindCredentials.username}:${this.bitcoindCredentials.password}`)\n      .toString('base64')\n    const headers = { Authorization: `Basic ${authString}` }\n    return fetchPrivate(this.bitcoindUrl, {\n      method: 'POST',\n      body: JSON.stringify(jsonRPC),\n      headers\n    })\n      .then(resp => resp.json())\n      .then(respObj => respObj.result)\n      .then(txInfo => txInfo.blockhash)\n      .then((blockhash) => {\n        const jsonRPCBlock = {\n          jsonrpc: '1.0',\n          method: 'getblockheader',\n          params: [blockhash]\n        }\n        headers.Authorization = `Basic ${authString}`\n        return fetchPrivate(this.bitcoindUrl, {\n          method: 'POST',\n          body: JSON.stringify(jsonRPCBlock),\n          headers\n        })\n      })\n      .then(resp => resp.json())\n      .then((respObj) => {\n        if (!respObj || !respObj.result) {\n          // unconfirmed \n          throw new Error('Unconfirmed transaction')\n        } else {\n          return { block_height: respObj.result.height }\n        }\n      })\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    const jsonRPCImport = {\n      jsonrpc: '1.0',\n      method: 'importaddress',\n      params: [address]\n    }\n    const jsonRPCUnspent = {\n      jsonrpc: '1.0',\n      method: 'listunspent',\n      params: [0, 9999999, [address]]\n    }\n    const authString = Buffer.from(`${this.bitcoindCredentials.username}:${this.bitcoindCredentials.password}`)\n      .toString('base64')\n    const headers = { Authorization: `Basic ${authString}` }\n\n    const importPromise = (this.importedBefore[address])\n      ? Promise.resolve()\n      : fetchPrivate(this.bitcoindUrl, {\n        method: 'POST',\n        body: JSON.stringify(jsonRPCImport),\n        headers\n      })\n        .then(() => { this.importedBefore[address] = true })\n\n    return importPromise\n      .then(() => fetchPrivate(this.bitcoindUrl, {\n        method: 'POST',\n        body: JSON.stringify(jsonRPCUnspent),\n        headers\n      }))\n      .then(resp => resp.json())\n      .then(x => x.result)\n      .then(utxos => utxos.map(\n        (x: any) => ({\n          value: Math.round(x.amount * SATOSHIS_PER_BTC),\n          confirmations: x.confirmations,\n          tx_hash: x.txid,\n          tx_output_n: x.vout\n        })\n      ))\n  }\n}\n\n/**\n * @ignore\n */\nexport class InsightClient extends BitcoinNetwork {\n  apiUrl: string\n\n  constructor(insightUrl: string = 'https://utxo.technofractal.com/') {\n    super()\n    this.apiUrl = insightUrl\n  }\n\n  broadcastTransaction(transaction: string) {\n    const jsonData = { rawtx: transaction }\n    return fetchPrivate(`${this.apiUrl}/tx/send`,\n                        {\n                          method: 'POST',\n                          headers: { 'Content-Type': 'application/json' },\n                          body: JSON.stringify(jsonData)\n                        })\n      .then(resp => resp.json())\n  }\n\n  getBlockHeight() {\n    return fetchPrivate(`${this.apiUrl}/status`)\n      .then(resp => resp.json())\n      .then(status => status.blocks)\n  }\n\n  getTransactionInfo(txHash: string): Promise<TransactionInfo> {\n    return fetchPrivate(`${this.apiUrl}/tx/${txHash}`)\n      .then(resp => resp.json())\n      .then((transactionInfo) => {\n        if (transactionInfo.error) {\n          throw new Error(`Error finding transaction: ${transactionInfo.error}`)\n        }\n        return fetchPrivate(`${this.apiUrl}/block/${transactionInfo.blockHash}`)\n      })\n      .then(resp => resp.json())\n      .then(blockInfo => ({ block_height: blockInfo.height }))\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    return fetchPrivate(`${this.apiUrl}/addr/${address}/utxo`)\n      .then(resp => resp.json())\n      .then(utxos => utxos.map(\n        (x: any) => ({\n          value: x.satoshis,\n          confirmations: x.confirmations,\n          tx_hash: x.txid,\n          tx_output_n: x.vout\n        })\n      ))\n  }\n}\n\n\n/**\n * @ignore\n */\nexport class BlockchainInfoApi extends BitcoinNetwork {\n  utxoProviderUrl: string\n\n  constructor(blockchainInfoUrl: string = 'https://blockchain.info') {\n    super()\n    this.utxoProviderUrl = blockchainInfoUrl\n  }\n\n  getBlockHeight() {\n    return fetchPrivate(`${this.utxoProviderUrl}/latestblock?cors=true`)\n      .then(resp => resp.json())\n      .then(blockObj => blockObj.height)\n  }\n\n  getNetworkedUTXOs(address: string): Promise<UTXO[]> {\n    return fetchPrivate(`${this.utxoProviderUrl}/unspent?format=json&active=${address}&cors=true`)\n      .then((resp) => {\n        if (resp.status === 500) {\n          Logger.debug('UTXO provider 500 usually means no UTXOs: returning []')\n          return {\n            unspent_outputs: []\n          }\n        } else {\n          return resp.json()\n        }\n      })\n      .then(utxoJSON => utxoJSON.unspent_outputs)\n      .then(utxoList => utxoList.map(\n        (utxo: any) => {\n          const utxoOut = {\n            value: utxo.value,\n            tx_output_n: utxo.tx_output_n,\n            confirmations: utxo.confirmations,\n            tx_hash: utxo.tx_hash_big_endian\n          }\n          return utxoOut\n        }\n      ))\n  }\n\n  getTransactionInfo(txHash: string): Promise<TransactionInfo> {\n    return fetchPrivate(`${this.utxoProviderUrl}/rawtx/${txHash}?cors=true`)\n      .then((resp) => {\n        if (resp.status === 200) {\n          return resp.json()\n        } else {\n          throw new Error(`Could not lookup transaction info for '${txHash}'. Server error.`)\n        }\n      })\n      .then(respObj => ({ block_height: respObj.block_height }))\n  }\n\n  broadcastTransaction(transaction: string) {\n    const form = new FormData()\n    form.append('tx', transaction)\n    return fetchPrivate(`${this.utxoProviderUrl}/pushtx?cors=true`,\n                        {\n                          method: 'POST',\n                          body: <any>form\n                        })\n      .then((resp) => {\n        const text = resp.text()\n        return text\n          .then((respText) => {\n            if (respText.toLowerCase().indexOf('transaction submitted') >= 0) {\n              const txHash = Buffer.from(\n                Transaction.fromHex(transaction)\n                  .getHash()\n                  .reverse()).toString('hex') // big_endian\n              return txHash\n            } else {\n              throw new RemoteServiceError(resp,\n                                           `Broadcast transaction failed with message: ${respText}`)\n            }\n          })\n      })\n  }\n}\n\n\n/**\n* @ignore\n*/\nconst LOCAL_REGTEST = new LocalRegtest(\n  'http://localhost:16268',\n  'http://localhost:16269',\n  new BitcoindAPI('http://localhost:18332/',\n                  { username: 'blockstack', password: 'blockstacksystem' })\n)\n\n/**\n* Instance of [[BlockstackNetwork]] set to the default endpoints. \n*/\nexport const MAINNET_DEFAULT = new BlockstackNetwork(\n  'https://core.blockstack.org',\n  'https://broadcast.blockstack.org',\n  new BlockchainInfoApi()\n)\n\n/**\n * Get WHOIS-like information for a name, including the address that owns it,\n * the block at which it expires, and the zone file anchored to it (if available). \n * This is intended for use in third-party wallets or in DApps that register names.\n * @param fullyQualifiedName the name to query.  Can be on-chain of off-chain.\n * @return a promise that resolves to the WHOIS-like information \n */\nexport function getNameInfo(fullyQualifiedName: string) {\n  return config.network.getNameInfo(fullyQualifiedName)\n}\n\n/**\n* @ignore\n*/\nexport const network = {\n  BlockstackNetwork,\n  LocalRegtest,\n  BlockchainInfoApi,\n  BitcoindAPI,\n  InsightClient,\n  defaults: { LOCAL_REGTEST, MAINNET_DEFAULT }\n}\n","'use strict';\n\nvar elliptic = exports;\n\nelliptic.version = require('../package.json').version;\nelliptic.utils = require('./elliptic/utils');\nelliptic.rand = require('brorand');\nelliptic.curve = require('./elliptic/curve');\nelliptic.curves = require('./elliptic/curves');\n\n// Protocols\nelliptic.ec = require('./elliptic/ec');\nelliptic.eddsa = require('./elliptic/eddsa');\n","\nimport { resolveZoneFileToProfile } from './profileZoneFiles'\nimport { config } from '../config'\nimport { fetchPrivate } from '../fetchUtil'\n\n/**\n * Look up a user profile by blockstack ID\n *\n * @param {string} username - The Blockstack ID of the profile to look up\n * @param {string} [zoneFileLookupURL=null] - The URL\n * to use for zonefile lookup. If falsey, lookupProfile will use the\n * blockstack.js [[getNameInfo]] function.\n * @returns {Promise} that resolves to a profile object\n */\nexport function lookupProfile(username: string, zoneFileLookupURL?: string): \n  Promise<Record<string, any>> {\n  if (!username) {\n    return Promise.reject()\n  }\n  let lookupPromise\n  if (zoneFileLookupURL) {\n    const url = `${zoneFileLookupURL.replace(/\\/$/, '')}/${username}`\n    lookupPromise = fetchPrivate(url)\n      .then(response => response.json())\n  } else {\n    lookupPromise = config.network.getNameInfo(username)\n  }\n  return lookupPromise\n    .then((responseJSON) => {\n      if (responseJSON.hasOwnProperty('zonefile')\n          && responseJSON.hasOwnProperty('address')) {\n        return resolveZoneFileToProfile(responseJSON.zonefile, responseJSON.address)\n      } else {\n        throw new Error('Invalid zonefile lookup response: did not contain `address`'\n                        + ' or `zonefile` field')\n      }\n    })\n}\n","/**\n * \n * @param serviceName \n * @param data \n * \n * @ignore\n */\nfunction formatAccount(serviceName: string, data: any) {\n  let proofUrl\n  if (data.proof && data.proof.url) {\n    proofUrl = data.proof.url\n  }\n  return {\n    '@type': 'Account',\n    service: serviceName,\n    identifier: data.username,\n    proofType: 'http',\n    proofUrl\n  }\n}\n\n/**\n * \n * @param profile \n * \n * @ignore\n */\nexport function getPersonFromLegacyFormat(profile: any) {\n  const profileData: {\n    ['@type']: string, \n    account?: any[],\n    name?: string,\n    description?: string,\n    address?: {\n      ['@type']: string,\n      addressLocality: string\n    },\n    image?: any[],\n    website?: Array<{\n      ['@type']: string,\n      url: string\n    }>\n  } = {\n    '@type': 'Person'\n  }\n\n  if (profile) {\n    if (profile.name && profile.name.formatted) {\n      profileData.name = profile.name.formatted\n    }\n\n    if (profile.bio) {\n      profileData.description = profile.bio\n    }\n\n    if (profile.location && profile.location.formatted) {\n      profileData.address = {\n        '@type': 'PostalAddress',\n        addressLocality: profile.location.formatted\n      }\n    }\n\n    const images = []\n    if (profile.avatar && profile.avatar.url) {\n      images.push({\n        '@type': 'ImageObject',\n        name: 'avatar',\n        contentUrl: profile.avatar.url\n      })\n    }\n    if (profile.cover && profile.cover.url) {\n      images.push({\n        '@type': 'ImageObject',\n        name: 'cover',\n        contentUrl: profile.cover.url\n      })\n    }\n    if (images.length) {\n      profileData.image = images\n    }\n\n    if (profile.website) {\n      profileData.website = [{\n        '@type': 'WebSite',\n        url: profile.website\n      }]\n    }\n\n    const accounts = []\n    if (profile.bitcoin && profile.bitcoin.address) {\n      accounts.push({\n        '@type': 'Account',\n        role: 'payment',\n        service: 'bitcoin',\n        identifier: profile.bitcoin.address\n      })\n    }\n    if (profile.twitter && profile.twitter.username) {\n      accounts.push(formatAccount('twitter', profile.twitter))\n    }\n    if (profile.facebook && profile.facebook.username) {\n      accounts.push(formatAccount('facebook', profile.facebook))\n    }\n    if (profile.github && profile.github.username) {\n      accounts.push(formatAccount('github', profile.github))\n    }\n\n    if (profile.auth) {\n      if (profile.auth.length > 0) {\n        if (profile.auth[0] && profile.auth[0].publicKeychain) {\n          accounts.push({\n            '@type': 'Account',\n            role: 'key',\n            service: 'bip32',\n            identifier: profile.auth[0].publicKeychain\n          })\n        }\n      }\n    }\n    if (profile.pgp && profile.pgp.url) {\n      accounts.push({\n        '@type': 'Account',\n        role: 'key',\n        service: 'pgp',\n        identifier: profile.pgp.fingerprint,\n        contentUrl: profile.pgp.url\n      })\n    }\n\n    profileData.account = accounts\n  }\n\n  return profileData\n}\n","\nimport { TransactionBuilder, ECPair } from 'bitcoinjs-lib'\nimport { hexStringToECPair, ecPairToAddress } from '../keys'\n\n/**\n * @ignore\n */\nexport interface TransactionSigner {\n  /**\n   * @returns version number of the signer, currently, should always be 1\n   * @private\n   * @ignore\n   */\n  signerVersion(): number;\n  /**\n   * @returns a string representing the transaction signer's address\n   * (usually Base58 check encoding)\n   * @private\n   * @ignore\n   */\n  getAddress(): Promise<string>;\n  /**\n   * Signs a transaction input\n   * @param {TransactionBuilder} transaction - the transaction to sign\n   * @param {number} inputIndex - the input on the transaction to sign\n   * @private\n   * @ignore\n   */\n  signTransaction(transaction: TransactionBuilder, inputIndex: number): Promise<void>;\n}\n\n/**\n * Class representing a transaction signer for pubkeyhash addresses\n * (a.k.a. single-sig addresses)\n * @private\n * @ignore\n */\nexport class PubkeyHashSigner implements TransactionSigner {\n  ecPair: ECPair.ECPairInterface\n\n  constructor(ecPair: ECPair.ECPairInterface) {\n    this.ecPair = ecPair\n  }\n\n  static fromHexString(keyHex: string) {\n    return new PubkeyHashSigner(hexStringToECPair(keyHex))\n  }\n\n  signerVersion(): number {\n    return 1\n  }\n\n  getAddress(): Promise<string> {\n    return Promise.resolve()\n      .then(() => ecPairToAddress(this.ecPair))\n  }\n\n  signTransaction(transaction: TransactionBuilder, inputIndex: number): Promise<void> {\n    return Promise.resolve()\n      .then(() => {\n        transaction.sign(inputIndex, this.ecPair)\n      })\n  }\n}\n","import { containsValidProofStatement, containsValidAddressProofStatement } from './serviceUtils'\nimport { fetchPrivate } from '../../fetchUtil'\nimport { AccountProofInfo } from '../profileProofs'\n\nexport type CheerioModuleType = typeof import('cheerio')\n\n/**\n * @ignore\n */\nexport abstract class Service {\n  async validateProof(proof: AccountProofInfo,\n                      ownerAddress: string,\n                      cheerio: CheerioModuleType,\n                      name: string = null\n  ): Promise<AccountProofInfo> {\n    try {\n      const proofUrl = this.getProofUrl(proof)\n      const res = await fetchPrivate(proofUrl)\n      if (res.status !== 200) {\n        throw new Error(`Proof url ${proofUrl} returned unexpected http status ${res.status}.\n            Unable to validate proof.`)\n      }\n      const text = await res.text()\n\n      // Validate identity in provided proof body/tags if required\n      if (this.shouldValidateIdentityInBody()\n          && proof.identifier !== this.getProofIdentity(text, cheerio)) {\n        return proof\n      }\n      const proofText = this.getProofStatement(text, cheerio)\n      proof.valid = containsValidProofStatement(proofText, name)\n        || containsValidAddressProofStatement(proofText, ownerAddress)\n      return proof\n    } catch (error) {\n      console.error(error)\n      proof.valid = false\n      return proof\n    }\n  }\n\n  shouldValidateIdentityInBody() {\n    return false\n  }\n\n  prefixScheme(proofUrl: string) {\n    if (!proofUrl.startsWith('https://') && !proofUrl.startsWith('http://')) {\n      return `https://${proofUrl}`\n    } else if (proofUrl.startsWith('http://')) {\n      return proofUrl.replace('http://', 'https://')\n    } else {\n      return proofUrl\n    }\n  }\n\n  getProofIdentity(searchText: string, _cheerio: CheerioModuleType): string {\n    return searchText\n  }\n\n  abstract getProofUrl(proof: AccountProofInfo): string;\n\n  abstract getProofStatement(searchText: string, cheerio: CheerioModuleType): string;\n\n  abstract normalizeUrl(proof: AccountProofInfo): string;\n}\n","import { Facebook } from './facebook'\nimport { Github } from './github'\nimport { Twitter } from './twitter'\nimport { Instagram } from './instagram'\nimport { HackerNews } from './hackerNews'\nimport { LinkedIn } from './linkedIn'\nimport { Service } from './service'\n\n\n\n/** @ignore */\nexport const profileServices: {\n  [serviceName: string]: Service\n} = {\n  facebook: new Facebook(),\n  github: new Github(),\n  twitter: new Twitter(),\n  instagram: new Instagram(),\n  hackerNews: new HackerNews(),\n  linkedIn: new LinkedIn()\n}\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass Facebook extends Service {\n  getProofUrl(proof: AccountProofInfo) {\n    return this.normalizeUrl(proof)\n  }\n\n  normalizeUrl(proof: AccountProofInfo) {\n    let proofUrl = proof.proof_url.toLowerCase()\n    const urlRegex = /(?:http[s]*:\\/\\/){0,1}(?:[a-zA-Z0-9-]+\\.)+facebook\\.com/\n\n    proofUrl = super.prefixScheme(proofUrl)\n\n    if (proofUrl.startsWith('https://facebook.com')) {\n      let tokens = proofUrl.split('https://facebook.com')\n      proofUrl = `https://www.facebook.com${tokens[1]}`\n      tokens = proofUrl.split('https://www.facebook.com/')[1].split('/posts/')\n      const postId = tokens[1]\n      proofUrl = `https://www.facebook.com/${proof.identifier}/posts/${postId}`\n    } else if (proofUrl.match(urlRegex)) {\n      const tokens = proofUrl.split('facebook.com/')[1].split('/posts/')\n      const postId = tokens[1]\n      proofUrl = `https://www.facebook.com/${proof.identifier}/posts/${postId}`\n    } else {\n      throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n    }\n\n    return proofUrl\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const statement = $('meta[name=\"description\"]').attr('content')\n    return (statement !== undefined) ? statement.trim() : ''\n  }\n\n  getBaseUrls(): string[] {\n    return []\n  }\n}\n\nexport { Facebook }\n","\nimport { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass Github extends Service {\n  getBaseUrls() {\n    const baseUrls = ['https://gist.github.com/', 'http://gist.github.com', 'gist.github.com']\n    return baseUrls\n  }\n\n  normalizeUrl(_proof: AccountProofInfo) {\n    return ''\n  }\n\n  getProofUrl(proof: AccountProofInfo) {\n    const baseUrls = this.getBaseUrls()\n    let proofUrl = proof.proof_url.toLowerCase()\n\n    proofUrl = super.prefixScheme(proofUrl)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      const requiredPrefix = `${baseUrls[i]}${proof.identifier}`.toLowerCase()\n      if (proofUrl.startsWith(requiredPrefix)) {\n        const raw = proofUrl.endsWith('/') ? 'raw' : '/raw'\n        return `${proofUrl}${raw}`\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n\n  getProofStatement(searchText: string, _cheerio: CheerioModuleType) {\n    return searchText\n  }\n}\n\nexport { Github }\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass Twitter extends Service {\n  getBaseUrls() {\n    const baseUrls = [\n      'https://twitter.com/',\n      'http://twitter.com/',\n      'twitter.com/'\n    ]\n    return baseUrls\n  }\n\n  normalizeUrl(_proof: AccountProofInfo) {\n    return ''\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const statement = $('meta[property=\"og:description\"]').attr('content')\n    if (statement !== undefined) {\n      return statement.trim().replace('', '').replace('', '')\n    } else {\n      return ''\n    }\n  }\n\n  getProofUrl(proof: AccountProofInfo): string {\n    const baseUrls = this.getBaseUrls()\n\n    let proofUrl = proof.proof_url.toLowerCase()\n    proofUrl = this.prefixScheme(proofUrl)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      const requiredPrefix = `${baseUrls[i]}${proof.identifier}`.toLowerCase()\n      if (proofUrl.startsWith(requiredPrefix)) {\n        return proofUrl\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n}\n\nexport { Twitter }\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass Instagram extends Service {\n  getBaseUrls() {\n    const baseUrls = ['https://www.instagram.com/', 'https://instagram.com/']\n    return baseUrls\n  }\n\n  getProofUrl(proof: AccountProofInfo) {\n    const baseUrls = this.getBaseUrls()\n    const normalizedProofUrl = this.normalizeUrl(proof)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      if (normalizedProofUrl.startsWith(`${baseUrls[i]}`)) {\n        return normalizedProofUrl\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n\n  normalizeUrl(proof: AccountProofInfo) {\n    let proofUrl = proof.proof_url\n    proofUrl = super.prefixScheme(proofUrl)\n\n    if (proofUrl.startsWith('https://instagram.com')) {\n      const tokens = proofUrl.split('https://instagram.com')\n      proofUrl = `https://www.instagram.com${tokens[1]}`\n    }\n    return proofUrl\n  }\n\n  shouldValidateIdentityInBody() {\n    return true\n  }\n\n  getProofIdentity(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const username = $('meta[property=\"og:description\"]').attr('content')\n    if (username !== undefined && username.split(':').length > 1) {\n      return username.split(':')[0].match(/(@\\w+)/)[0].substr(1)\n    } else {\n      return ''\n    }\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const statement = $('meta[property=\"og:description\"]')\n      .attr('content')\n\n    if (statement !== undefined && statement.split(':').length > 1) {\n      return statement.split(':')[1].trim().replace('', '').replace('', '')\n    } else {\n      return ''\n    }\n  }\n}\n\nexport { Instagram }\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass HackerNews extends Service {\n  getBaseUrls() {\n    const baseUrls = [\n      'https://news.ycombinator.com/user?id=',\n      'http://news.ycombinator.com/user?id=',\n      'news.ycombinator.com/user?id='\n    ]\n    return baseUrls\n  }\n\n  getProofUrl(proof: AccountProofInfo) {\n    const baseUrls = this.getBaseUrls()\n\n    const proofUrl = super.prefixScheme(proof.proof_url)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      if (proofUrl === `${baseUrls[i]}${proof.identifier}`) {\n        return proofUrl\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n\n  normalizeUrl(_proof: AccountProofInfo) {\n    return ''\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const tables = $('#hnmain').children().find('table')\n    let statement = ''\n\n    if (tables.length > 0) {\n      tables.each((tableIndex, table) => {\n        const rows = $(table).find('tr')\n\n        if (rows.length > 0) {\n          rows.each((idx, row) => {\n            const heading = $(row).find('td')\n              .first()\n              .text()\n              .trim()\n\n            if (heading === 'about:') {\n              statement = $(row).find('td')\n                .last()\n                .text()\n                .trim()\n            }\n          })\n        }\n      })\n    }\n\n    return statement\n  }\n}\n\nexport { HackerNews }\n","import { Service, CheerioModuleType } from './service'\nimport { AccountProofInfo } from '../profileProofs'\n\nclass LinkedIn extends Service {\n  getBaseUrls() {\n    const baseUrls = [\n      'https://www.linkedin.com/feed/update/',\n      'http://www.linkedin.com/feed/update/',\n      'www.linkedin.com/feed/update/'\n    ]\n    return baseUrls\n  }\n\n  getProofUrl(proof: AccountProofInfo) {\n    const baseUrls = this.getBaseUrls()\n    \n    let proofUrl = proof.proof_url.toLowerCase()\n    proofUrl = super.prefixScheme(proofUrl)\n\n    for (let i = 0; i < baseUrls.length; i++) {\n      if (proofUrl.startsWith(`${baseUrls[i]}`)) {\n        return proofUrl\n      }\n    }\n    throw new Error(`Proof url ${proof.proof_url} is not valid for service ${proof.service}`)\n  }\n\n  normalizeUrl(_proof: AccountProofInfo) {\n    return ''\n  }\n\n  shouldValidateIdentityInBody() {\n    return true\n  }\n\n  getProofIdentity(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const profileLink = $('body > main header a')\n\n    if (profileLink !== undefined) {\n      if (profileLink.attr('href') === undefined) {\n        return ''\n      }\n      const url = profileLink.attr('href')\n\n      // Parse URL for identifier\n      const identifier = url.split('?').shift().split('/').pop()\n\n      return identifier\n    } else {\n      return ''\n    }\n  }\n\n  getProofStatement(searchText: string, cheerio: CheerioModuleType) {\n    const $ = cheerio.load(searchText)\n    const postContent = $('head > meta[property=\"og:title\"]')\n    let statement = ''\n\n    if (postContent !== undefined) {\n      statement = postContent.attr('content')\n    }\n\n    return statement\n  }\n}\n\nexport { LinkedIn }\n","import { profileServices } from './services'\nimport { CheerioModuleType } from './services/service'\n\nexport interface AccountProofInfo {\n  service: string;\n  identifier: string;\n  proof_url: string;\n  valid?: boolean;\n}\n\n/**\n * Validates the social proofs in a user's profile. Currently supports validation of \n * Facebook, Twitter, GitHub, Instagram, LinkedIn and HackerNews accounts.\n *\n * @param {Object} profile The JSON of the profile to be validated\n * @param {string} ownerAddress The owner bitcoin address to be validated\n * @param {string} [name=null] The Blockstack name to be validated \n * @returns {Promise} that resolves to an array of validated proof objects\n */\nexport function validateProofs(profile: any,\n                               ownerAddress: string,\n                               cheerio: CheerioModuleType,\n                               name: string = null): Promise<AccountProofInfo[]> {\n  if (!profile) {\n    throw new Error('Profile must not be null')\n  }\n\n  let accounts: any[] = []\n  const proofsToValidate: Promise<AccountProofInfo>[] = []\n\n  if (profile.hasOwnProperty('account')) {\n    accounts = profile.account\n  } else {\n    return Promise.resolve([])\n  }\n\n  accounts.forEach((account) => {\n    // skip if proof service is not supported\n    if (account.hasOwnProperty('service')\n        && !profileServices.hasOwnProperty(account.service)) {\n      return\n    }\n\n    if (!(account.hasOwnProperty('proofType')\n        && account.proofType === 'http'\n        && account.hasOwnProperty('proofUrl'))) {\n      return\n    }\n\n    const proof: AccountProofInfo = {\n      service: account.service,\n      proof_url: account.proof_url || account.proofUrl,\n      identifier: account.identifier,\n      valid: false\n    }\n\n    proofsToValidate.push(profileServices[account.service]\n      .validateProof(proof, ownerAddress, cheerio, name))\n  })\n\n  return Promise.all(proofsToValidate)\n}\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\t\t\t\tif (value === undefined || (options.skipNull && value === null)) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined || (options.skipNull && value === null)) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === null || value === undefined || value.length === 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(',')];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined || (options.skipNull && value === null)) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.split('').indexOf(',') > -1;\n\t\t\t\tconst newValue = isArray ? value.split(',') : value;\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t}, options);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = Object.assign({}, object);\n\tif (options.skipNull) {\n\t\tfor (const key of Object.keys(objectCopy)) {\n\t\t\tif (objectCopy[key] === undefined || objectCopy[key] === null) {\n\t\t\t\tdelete objectCopy[key];\n\t\t\t}\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (input, options) => {\n\treturn {\n\t\turl: removeHash(input).split('?')[0] || '',\n\t\tquery: parse(extract(input), options)\n\t};\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","'use strict'\nvar Buffer = require('buffer').Buffer\nvar inherits = require('inherits')\nvar HashBase = require('hash-base')\n\nvar ARRAY16 = new Array(16)\n\nvar zl = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n  3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n  1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n  4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n]\n\nvar zr = [\n  5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n  6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n  15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n  8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n  12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n]\n\nvar sl = [\n  11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n  7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n  11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n  11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n  9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n]\n\nvar sr = [\n  8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n  9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n  9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n  15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n  8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n]\n\nvar hl = [0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e]\nvar hr = [0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000]\n\nfunction RIPEMD160 () {\n  HashBase.call(this, 64)\n\n  // state\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n}\n\ninherits(RIPEMD160, HashBase)\n\nRIPEMD160.prototype._update = function () {\n  var words = ARRAY16\n  for (var j = 0; j < 16; ++j) words[j] = this._block.readInt32LE(j * 4)\n\n  var al = this._a | 0\n  var bl = this._b | 0\n  var cl = this._c | 0\n  var dl = this._d | 0\n  var el = this._e | 0\n\n  var ar = this._a | 0\n  var br = this._b | 0\n  var cr = this._c | 0\n  var dr = this._d | 0\n  var er = this._e | 0\n\n  // computation\n  for (var i = 0; i < 80; i += 1) {\n    var tl\n    var tr\n    if (i < 16) {\n      tl = fn1(al, bl, cl, dl, el, words[zl[i]], hl[0], sl[i])\n      tr = fn5(ar, br, cr, dr, er, words[zr[i]], hr[0], sr[i])\n    } else if (i < 32) {\n      tl = fn2(al, bl, cl, dl, el, words[zl[i]], hl[1], sl[i])\n      tr = fn4(ar, br, cr, dr, er, words[zr[i]], hr[1], sr[i])\n    } else if (i < 48) {\n      tl = fn3(al, bl, cl, dl, el, words[zl[i]], hl[2], sl[i])\n      tr = fn3(ar, br, cr, dr, er, words[zr[i]], hr[2], sr[i])\n    } else if (i < 64) {\n      tl = fn4(al, bl, cl, dl, el, words[zl[i]], hl[3], sl[i])\n      tr = fn2(ar, br, cr, dr, er, words[zr[i]], hr[3], sr[i])\n    } else { // if (i<80) {\n      tl = fn5(al, bl, cl, dl, el, words[zl[i]], hl[4], sl[i])\n      tr = fn1(ar, br, cr, dr, er, words[zr[i]], hr[4], sr[i])\n    }\n\n    al = el\n    el = dl\n    dl = rotl(cl, 10)\n    cl = bl\n    bl = tl\n\n    ar = er\n    er = dr\n    dr = rotl(cr, 10)\n    cr = br\n    br = tr\n  }\n\n  // update state\n  var t = (this._b + cl + dr) | 0\n  this._b = (this._c + dl + er) | 0\n  this._c = (this._d + el + ar) | 0\n  this._d = (this._e + al + br) | 0\n  this._e = (this._a + bl + cr) | 0\n  this._a = t\n}\n\nRIPEMD160.prototype._digest = function () {\n  // create padding and handle blocks\n  this._block[this._blockOffset++] = 0x80\n  if (this._blockOffset > 56) {\n    this._block.fill(0, this._blockOffset, 64)\n    this._update()\n    this._blockOffset = 0\n  }\n\n  this._block.fill(0, this._blockOffset, 56)\n  this._block.writeUInt32LE(this._length[0], 56)\n  this._block.writeUInt32LE(this._length[1], 60)\n  this._update()\n\n  // produce result\n  var buffer = Buffer.alloc ? Buffer.alloc(20) : new Buffer(20)\n  buffer.writeInt32LE(this._a, 0)\n  buffer.writeInt32LE(this._b, 4)\n  buffer.writeInt32LE(this._c, 8)\n  buffer.writeInt32LE(this._d, 12)\n  buffer.writeInt32LE(this._e, 16)\n  return buffer\n}\n\nfunction rotl (x, n) {\n  return (x << n) | (x >>> (32 - n))\n}\n\nfunction fn1 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + (b ^ c ^ d) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn2 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b & c) | ((~b) & d)) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn3 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b | (~c)) ^ d) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn4 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + ((b & d) | (c & (~d))) + m + k) | 0, s) + e) | 0\n}\n\nfunction fn5 (a, b, c, d, e, m, k, s) {\n  return (rotl((a + (b ^ (c | (~d))) + m + k) | 0, s) + e) | 0\n}\n\nmodule.exports = RIPEMD160\n","var Buffer = require('safe-buffer').Buffer\nvar Transform = require('stream').Transform\nvar StringDecoder = require('string_decoder').StringDecoder\nvar inherits = require('inherits')\n\nfunction CipherBase (hashMode) {\n  Transform.call(this)\n  this.hashMode = typeof hashMode === 'string'\n  if (this.hashMode) {\n    this[hashMode] = this._finalOrDigest\n  } else {\n    this.final = this._finalOrDigest\n  }\n  if (this._final) {\n    this.__final = this._final\n    this._final = null\n  }\n  this._decoder = null\n  this._encoding = null\n}\ninherits(CipherBase, Transform)\n\nCipherBase.prototype.update = function (data, inputEnc, outputEnc) {\n  if (typeof data === 'string') {\n    data = Buffer.from(data, inputEnc)\n  }\n\n  var outData = this._update(data)\n  if (this.hashMode) return this\n\n  if (outputEnc) {\n    outData = this._toString(outData, outputEnc)\n  }\n\n  return outData\n}\n\nCipherBase.prototype.setAutoPadding = function () {}\nCipherBase.prototype.getAuthTag = function () {\n  throw new Error('trying to get auth tag in unsupported state')\n}\n\nCipherBase.prototype.setAuthTag = function () {\n  throw new Error('trying to set auth tag in unsupported state')\n}\n\nCipherBase.prototype.setAAD = function () {\n  throw new Error('trying to set aad in unsupported state')\n}\n\nCipherBase.prototype._transform = function (data, _, next) {\n  var err\n  try {\n    if (this.hashMode) {\n      this._update(data)\n    } else {\n      this.push(this._update(data))\n    }\n  } catch (e) {\n    err = e\n  } finally {\n    next(err)\n  }\n}\nCipherBase.prototype._flush = function (done) {\n  var err\n  try {\n    this.push(this.__final())\n  } catch (e) {\n    err = e\n  }\n\n  done(err)\n}\nCipherBase.prototype._finalOrDigest = function (outputEnc) {\n  var outData = this.__final() || Buffer.alloc(0)\n  if (outputEnc) {\n    outData = this._toString(outData, outputEnc, true)\n  }\n  return outData\n}\n\nCipherBase.prototype._toString = function (value, enc, fin) {\n  if (!this._decoder) {\n    this._decoder = new StringDecoder(enc)\n    this._encoding = enc\n  }\n\n  if (this._encoding !== enc) throw new Error('can\\'t switch encodings')\n\n  var out = this._decoder.write(value)\n  if (fin) {\n    out += this._decoder.end()\n  }\n\n  return out\n}\n\nmodule.exports = CipherBase\n","'use strict';\n\nvar curves = exports;\n\nvar hash = require('hash.js');\nvar curve = require('./curve');\nvar utils = require('./utils');\n\nvar assert = utils.assert;\n\nfunction PresetCurve(options) {\n  if (options.type === 'short')\n    this.curve = new curve.short(options);\n  else if (options.type === 'edwards')\n    this.curve = new curve.edwards(options);\n  else\n    this.curve = new curve.mont(options);\n  this.g = this.curve.g;\n  this.n = this.curve.n;\n  this.hash = options.hash;\n\n  assert(this.g.validate(), 'Invalid curve');\n  assert(this.g.mul(this.n).isInfinity(), 'Invalid curve, G*N != O');\n}\ncurves.PresetCurve = PresetCurve;\n\nfunction defineCurve(name, options) {\n  Object.defineProperty(curves, name, {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n      var curve = new PresetCurve(options);\n      Object.defineProperty(curves, name, {\n        configurable: true,\n        enumerable: true,\n        value: curve\n      });\n      return curve;\n    }\n  });\n}\n\ndefineCurve('p192', {\n  type: 'short',\n  prime: 'p192',\n  p: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',\n  b: '64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',\n  n: 'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012',\n    '07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811'\n  ]\n});\n\ndefineCurve('p224', {\n  type: 'short',\n  prime: 'p224',\n  p: 'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',\n  b: 'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',\n  n: 'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    'b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21',\n    'bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34'\n  ]\n});\n\ndefineCurve('p256', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',\n  a: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',\n  b: '5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',\n  n: 'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296',\n    '4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5'\n  ]\n});\n\ndefineCurve('p384', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 ffffffff',\n  a: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 fffffffc',\n  b: 'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f ' +\n     '5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',\n  n: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 ' +\n     'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',\n  hash: hash.sha384,\n  gRed: false,\n  g: [\n    'aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 ' +\n    '5502f25d bf55296c 3a545e38 72760ab7',\n    '3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 ' +\n    '0a60b1ce 1d7e819d 7a431d7c 90ea0e5f'\n  ]\n});\n\ndefineCurve('p521', {\n  type: 'short',\n  prime: null,\n  p: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff',\n  a: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff fffffffc',\n  b: '00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b ' +\n     '99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd ' +\n     '3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',\n  n: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 ' +\n     'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',\n  hash: hash.sha512,\n  gRed: false,\n  g: [\n    '000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 ' +\n    '053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 ' +\n    'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66',\n    '00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 ' +\n    '579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 ' +\n    '3fad0761 353c7086 a272c240 88be9476 9fd16650'\n  ]\n});\n\ndefineCurve('curve25519', {\n  type: 'mont',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '76d06',\n  b: '1',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '9'\n  ]\n});\n\ndefineCurve('ed25519', {\n  type: 'edwards',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '-1',\n  c: '1',\n  // -121665 * (121666^(-1)) (mod P)\n  d: '52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a',\n\n    // 4/5\n    '6666666666666666666666666666666666666666666666666666666666666658'\n  ]\n});\n\nvar pre;\ntry {\n  pre = require('./precomputed/secp256k1');\n} catch (e) {\n  pre = undefined;\n}\n\ndefineCurve('secp256k1', {\n  type: 'short',\n  prime: 'k256',\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',\n  a: '0',\n  b: '7',\n  n: 'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',\n  h: '1',\n  hash: hash.sha256,\n\n  // Precomputed endomorphism\n  beta: '7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',\n  lambda: '5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',\n  basis: [\n    {\n      a: '3086d221a7d46bcde86c90e49284eb15',\n      b: '-e4437ed6010e88286f547fa90abfe4c3'\n    },\n    {\n      a: '114ca50f7a8e2f3f657c1108d9d44cfd8',\n      b: '3086d221a7d46bcde86c90e49284eb15'\n    }\n  ],\n\n  gRed: false,\n  g: [\n    '79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798',\n    '483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',\n    pre\n  ]\n});\n","var hash = exports;\n\nhash.utils = require('./hash/utils');\nhash.common = require('./hash/common');\nhash.sha = require('./hash/sha');\nhash.ripemd = require('./hash/ripemd');\nhash.hmac = require('./hash/hmac');\n\n// Proxy hash functions to the main object\nhash.sha1 = hash.sha.sha1;\nhash.sha256 = hash.sha.sha256;\nhash.sha224 = hash.sha.sha224;\nhash.sha384 = hash.sha.sha384;\nhash.sha512 = hash.sha.sha512;\nhash.ripemd160 = hash.ripemd.ripemd160;\n","var types = {\n  Array: function (value) { return value !== null && value !== undefined && value.constructor === Array },\n  Boolean: function (value) { return typeof value === 'boolean' },\n  Function: function (value) { return typeof value === 'function' },\n  Nil: function (value) { return value === undefined || value === null },\n  Number: function (value) { return typeof value === 'number' },\n  Object: function (value) { return typeof value === 'object' },\n  String: function (value) { return typeof value === 'string' },\n  '': function () { return true }\n}\n\n// TODO: deprecate\ntypes.Null = types.Nil\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst types = require('./types');\nconst bech32 = require('bech32');\nconst bs58check = require('bs58check');\nconst typeforce = require('typeforce');\nfunction fromBase58Check(address) {\n  const payload = bs58check.decode(address);\n  // TODO: 4.0.0, move to \"toOutputScript\"\n  if (payload.length < 21) throw new TypeError(address + ' is too short');\n  if (payload.length > 21) throw new TypeError(address + ' is too long');\n  const version = payload.readUInt8(0);\n  const hash = payload.slice(1);\n  return { version, hash };\n}\nexports.fromBase58Check = fromBase58Check;\nfunction fromBech32(address) {\n  const result = bech32.decode(address);\n  const data = bech32.fromWords(result.words.slice(1));\n  return {\n    version: result.words[0],\n    prefix: result.prefix,\n    data: Buffer.from(data),\n  };\n}\nexports.fromBech32 = fromBech32;\nfunction toBase58Check(hash, version) {\n  typeforce(types.tuple(types.Hash160bit, types.UInt8), arguments);\n  const payload = Buffer.allocUnsafe(21);\n  payload.writeUInt8(version, 0);\n  hash.copy(payload, 1);\n  return bs58check.encode(payload);\n}\nexports.toBase58Check = toBase58Check;\nfunction toBech32(data, version, prefix) {\n  const words = bech32.toWords(data);\n  words.unshift(version);\n  return bech32.encode(prefix, words);\n}\nexports.toBech32 = toBech32;\nfunction fromOutputScript(output, network) {\n  // TODO: Network\n  network = network || networks.bitcoin;\n  try {\n    return payments.p2pkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2sh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wpkh({ output, network }).address;\n  } catch (e) {}\n  try {\n    return payments.p2wsh({ output, network }).address;\n  } catch (e) {}\n  throw new Error(bscript.toASM(output) + ' has no matching Address');\n}\nexports.fromOutputScript = fromOutputScript;\nfunction toOutputScript(address, network) {\n  network = network || networks.bitcoin;\n  let decodeBase58;\n  let decodeBech32;\n  try {\n    decodeBase58 = fromBase58Check(address);\n  } catch (e) {}\n  if (decodeBase58) {\n    if (decodeBase58.version === network.pubKeyHash)\n      return payments.p2pkh({ hash: decodeBase58.hash }).output;\n    if (decodeBase58.version === network.scriptHash)\n      return payments.p2sh({ hash: decodeBase58.hash }).output;\n  } else {\n    try {\n      decodeBech32 = fromBech32(address);\n    } catch (e) {}\n    if (decodeBech32) {\n      if (decodeBech32.prefix !== network.bech32)\n        throw new Error(address + ' has an invalid prefix');\n      if (decodeBech32.version === 0) {\n        if (decodeBech32.data.length === 20)\n          return payments.p2wpkh({ hash: decodeBech32.data }).output;\n        if (decodeBech32.data.length === 32)\n          return payments.p2wsh({ hash: decodeBech32.data }).output;\n      }\n    }\n  }\n  throw new Error(address + ' has no matching Script');\n}\nexports.toOutputScript = toOutputScript;\n","'use strict'\nvar ALPHABET = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l'\n\n// pre-compute lookup table\nvar ALPHABET_MAP = {}\nfor (var z = 0; z < ALPHABET.length; z++) {\n  var x = ALPHABET.charAt(z)\n\n  if (ALPHABET_MAP[x] !== undefined) throw new TypeError(x + ' is ambiguous')\n  ALPHABET_MAP[x] = z\n}\n\nfunction polymodStep (pre) {\n  var b = pre >> 25\n  return ((pre & 0x1FFFFFF) << 5) ^\n    (-((b >> 0) & 1) & 0x3b6a57b2) ^\n    (-((b >> 1) & 1) & 0x26508e6d) ^\n    (-((b >> 2) & 1) & 0x1ea119fa) ^\n    (-((b >> 3) & 1) & 0x3d4233dd) ^\n    (-((b >> 4) & 1) & 0x2a1462b3)\n}\n\nfunction prefixChk (prefix) {\n  var chk = 1\n  for (var i = 0; i < prefix.length; ++i) {\n    var c = prefix.charCodeAt(i)\n    if (c < 33 || c > 126) throw new Error('Invalid prefix (' + prefix + ')')\n\n    chk = polymodStep(chk) ^ (c >> 5)\n  }\n  chk = polymodStep(chk)\n\n  for (i = 0; i < prefix.length; ++i) {\n    var v = prefix.charCodeAt(i)\n    chk = polymodStep(chk) ^ (v & 0x1f)\n  }\n  return chk\n}\n\nfunction encode (prefix, words, LIMIT) {\n  LIMIT = LIMIT || 90\n  if ((prefix.length + 7 + words.length) > LIMIT) throw new TypeError('Exceeds length limit')\n\n  prefix = prefix.toLowerCase()\n\n  // determine chk mod\n  var chk = prefixChk(prefix)\n  var result = prefix + '1'\n  for (var i = 0; i < words.length; ++i) {\n    var x = words[i]\n    if ((x >> 5) !== 0) throw new Error('Non 5-bit word')\n\n    chk = polymodStep(chk) ^ x\n    result += ALPHABET.charAt(x)\n  }\n\n  for (i = 0; i < 6; ++i) {\n    chk = polymodStep(chk)\n  }\n  chk ^= 1\n\n  for (i = 0; i < 6; ++i) {\n    var v = (chk >> ((5 - i) * 5)) & 0x1f\n    result += ALPHABET.charAt(v)\n  }\n\n  return result\n}\n\nfunction decode (str, LIMIT) {\n  LIMIT = LIMIT || 90\n  if (str.length < 8) throw new TypeError(str + ' too short')\n  if (str.length > LIMIT) throw new TypeError('Exceeds length limit')\n\n  // don't allow mixed case\n  var lowered = str.toLowerCase()\n  var uppered = str.toUpperCase()\n  if (str !== lowered && str !== uppered) throw new Error('Mixed-case string ' + str)\n  str = lowered\n\n  var split = str.lastIndexOf('1')\n  if (split === -1) throw new Error('No separator character for ' + str)\n  if (split === 0) throw new Error('Missing prefix for ' + str)\n\n  var prefix = str.slice(0, split)\n  var wordChars = str.slice(split + 1)\n  if (wordChars.length < 6) throw new Error('Data too short')\n\n  var chk = prefixChk(prefix)\n  var words = []\n  for (var i = 0; i < wordChars.length; ++i) {\n    var c = wordChars.charAt(i)\n    var v = ALPHABET_MAP[c]\n    if (v === undefined) throw new Error('Unknown character ' + c)\n    chk = polymodStep(chk) ^ v\n\n    // not in the checksum?\n    if (i + 6 >= wordChars.length) continue\n    words.push(v)\n  }\n\n  if (chk !== 1) throw new Error('Invalid checksum for ' + str)\n  return { prefix: prefix, words: words }\n}\n\nfunction convert (data, inBits, outBits, pad) {\n  var value = 0\n  var bits = 0\n  var maxV = (1 << outBits) - 1\n\n  var result = []\n  for (var i = 0; i < data.length; ++i) {\n    value = (value << inBits) | data[i]\n    bits += inBits\n\n    while (bits >= outBits) {\n      bits -= outBits\n      result.push((value >> bits) & maxV)\n    }\n  }\n\n  if (pad) {\n    if (bits > 0) {\n      result.push((value << (outBits - bits)) & maxV)\n    }\n  } else {\n    if (bits >= inBits) throw new Error('Excess padding')\n    if ((value << (outBits - bits)) & maxV) throw new Error('Non-zero padding')\n  }\n\n  return result\n}\n\nfunction toWords (bytes) {\n  return convert(bytes, 8, 5, true)\n}\n\nfunction fromWords (words) {\n  return convert(words, 5, 8, false)\n}\n\nmodule.exports = {\n  decode: decode,\n  encode: encode,\n  toWords: toWords,\n  fromWords: fromWords\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst NETWORKS = require('./networks');\nconst types = require('./types');\nconst ecc = require('tiny-secp256k1');\nconst randomBytes = require('randombytes');\nconst typeforce = require('typeforce');\nconst wif = require('wif');\nconst isOptions = typeforce.maybe(\n  typeforce.compile({\n    compressed: types.maybe(types.Boolean),\n    network: types.maybe(types.Network),\n  }),\n);\nclass ECPair {\n  constructor(__D, __Q, options) {\n    this.__D = __D;\n    this.__Q = __Q;\n    this.lowR = false;\n    if (options === undefined) options = {};\n    this.compressed =\n      options.compressed === undefined ? true : options.compressed;\n    this.network = options.network || NETWORKS.bitcoin;\n    if (__Q !== undefined) this.__Q = ecc.pointCompress(__Q, this.compressed);\n  }\n  get privateKey() {\n    return this.__D;\n  }\n  get publicKey() {\n    if (!this.__Q) this.__Q = ecc.pointFromScalar(this.__D, this.compressed);\n    return this.__Q;\n  }\n  toWIF() {\n    if (!this.__D) throw new Error('Missing private key');\n    return wif.encode(this.network.wif, this.__D, this.compressed);\n  }\n  sign(hash, lowR) {\n    if (!this.__D) throw new Error('Missing private key');\n    if (lowR === undefined) lowR = this.lowR;\n    if (lowR === false) {\n      return ecc.sign(hash, this.__D);\n    } else {\n      let sig = ecc.sign(hash, this.__D);\n      const extraData = Buffer.alloc(32, 0);\n      let counter = 0;\n      // if first try is lowR, skip the loop\n      // for second try and on, add extra entropy counting up\n      while (sig[0] > 0x7f) {\n        counter++;\n        extraData.writeUIntLE(counter, 0, 6);\n        sig = ecc.signWithEntropy(hash, this.__D, extraData);\n      }\n      return sig;\n    }\n  }\n  verify(hash, signature) {\n    return ecc.verify(hash, this.publicKey, signature);\n  }\n}\nfunction fromPrivateKey(buffer, options) {\n  typeforce(types.Buffer256bit, buffer);\n  if (!ecc.isPrivate(buffer))\n    throw new TypeError('Private key not in range [1, n)');\n  typeforce(isOptions, options);\n  return new ECPair(buffer, undefined, options);\n}\nexports.fromPrivateKey = fromPrivateKey;\nfunction fromPublicKey(buffer, options) {\n  typeforce(ecc.isPoint, buffer);\n  typeforce(isOptions, options);\n  return new ECPair(undefined, buffer, options);\n}\nexports.fromPublicKey = fromPublicKey;\nfunction fromWIF(wifString, network) {\n  const decoded = wif.decode(wifString);\n  const version = decoded.version;\n  // list of networks?\n  if (types.Array(network)) {\n    network = network\n      .filter(x => {\n        return version === x.wif;\n      })\n      .pop();\n    if (!network) throw new Error('Unknown network version');\n    // otherwise, assume a network object (or default to bitcoin)\n  } else {\n    network = network || NETWORKS.bitcoin;\n    if (version !== network.wif) throw new Error('Invalid network version');\n  }\n  return fromPrivateKey(decoded.privateKey, {\n    compressed: decoded.compressed,\n    network: network,\n  });\n}\nexports.fromWIF = fromWIF;\nfunction makeRandom(options) {\n  typeforce(isOptions, options);\n  if (options === undefined) options = {};\n  const rng = options.rng || randomBytes;\n  let d;\n  do {\n    d = rng(32);\n    typeforce(types.Buffer256bit, d);\n  } while (!ecc.isPrivate(d));\n  return fromPrivateKey(d, options);\n}\nexports.makeRandom = makeRandom;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../typeFields');\nconst globalXpub = require('./global/globalXpub');\nconst unsignedTx = require('./global/unsignedTx');\nconst finalScriptSig = require('./input/finalScriptSig');\nconst finalScriptWitness = require('./input/finalScriptWitness');\nconst nonWitnessUtxo = require('./input/nonWitnessUtxo');\nconst partialSig = require('./input/partialSig');\nconst porCommitment = require('./input/porCommitment');\nconst sighashType = require('./input/sighashType');\nconst witnessUtxo = require('./input/witnessUtxo');\nconst bip32Derivation = require('./shared/bip32Derivation');\nconst checkPubkey = require('./shared/checkPubkey');\nconst redeemScript = require('./shared/redeemScript');\nconst witnessScript = require('./shared/witnessScript');\nconst globals = {\n  unsignedTx,\n  globalXpub,\n  // pass an Array of key bytes that require pubkey beside the key\n  checkPubkey: checkPubkey.makeChecker([]),\n};\nexports.globals = globals;\nconst inputs = {\n  nonWitnessUtxo,\n  partialSig,\n  sighashType,\n  finalScriptSig,\n  finalScriptWitness,\n  porCommitment,\n  witnessUtxo,\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.InputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.InputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.InputTypes.PARTIAL_SIG,\n    typeFields_1.InputTypes.BIP32_DERIVATION,\n  ]),\n};\nexports.inputs = inputs;\nconst outputs = {\n  bip32Derivation: bip32Derivation.makeConverter(\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ),\n  redeemScript: redeemScript.makeConverter(\n    typeFields_1.OutputTypes.REDEEM_SCRIPT,\n  ),\n  witnessScript: witnessScript.makeConverter(\n    typeFields_1.OutputTypes.WITNESS_SCRIPT,\n  ),\n  checkPubkey: checkPubkey.makeChecker([\n    typeFields_1.OutputTypes.BIP32_DERIVATION,\n  ]),\n};\nexports.outputs = outputs;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst varuint = require('./varint');\nexports.range = n => [...Array(n).keys()];\nfunction reverseBuffer(buffer) {\n  if (buffer.length < 1) return buffer;\n  let j = buffer.length - 1;\n  let tmp = 0;\n  for (let i = 0; i < buffer.length / 2; i++) {\n    tmp = buffer[i];\n    buffer[i] = buffer[j];\n    buffer[j] = tmp;\n    j--;\n  }\n  return buffer;\n}\nexports.reverseBuffer = reverseBuffer;\nfunction keyValsToBuffer(keyVals) {\n  const buffers = keyVals.map(keyValToBuffer);\n  buffers.push(Buffer.from([0]));\n  return Buffer.concat(buffers);\n}\nexports.keyValsToBuffer = keyValsToBuffer;\nfunction keyValToBuffer(keyVal) {\n  const keyLen = keyVal.key.length;\n  const valLen = keyVal.value.length;\n  const keyVarIntLen = varuint.encodingLength(keyLen);\n  const valVarIntLen = varuint.encodingLength(valLen);\n  const buffer = Buffer.allocUnsafe(\n    keyVarIntLen + keyLen + valVarIntLen + valLen,\n  );\n  varuint.encode(keyLen, buffer, 0);\n  keyVal.key.copy(buffer, keyVarIntLen);\n  varuint.encode(valLen, buffer, keyVarIntLen + keyLen);\n  keyVal.value.copy(buffer, keyVarIntLen + keyLen + valVarIntLen);\n  return buffer;\n}\nexports.keyValToBuffer = keyValToBuffer;\n// https://github.com/feross/buffer/blob/master/index.js#L1127\nfunction verifuint(value, max) {\n  if (typeof value !== 'number')\n    throw new Error('cannot write a non-number as a number');\n  if (value < 0)\n    throw new Error('specified a negative value for writing an unsigned value');\n  if (value > max) throw new Error('RangeError: value out of range');\n  if (Math.floor(value) !== value)\n    throw new Error('value has a fractional component');\n}\nfunction readUInt64LE(buffer, offset) {\n  const a = buffer.readUInt32LE(offset);\n  let b = buffer.readUInt32LE(offset + 4);\n  b *= 0x100000000;\n  verifuint(b + a, 0x001fffffffffffff);\n  return b + a;\n}\nexports.readUInt64LE = readUInt64LE;\nfunction writeUInt64LE(buffer, value, offset) {\n  verifuint(value, 0x001fffffffffffff);\n  buffer.writeInt32LE(value & -1, offset);\n  buffer.writeUInt32LE(Math.floor(value / 0x100000000), offset + 4);\n  return offset + 8;\n}\nexports.writeUInt64LE = writeUInt64LE;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","module.exports = require('./dist/base64url').default;\nmodule.exports.default = module.exports;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst secp256k1_1 = require(\"./secp256k1\");\nexports.SECP256K1Client = secp256k1_1.SECP256K1Client;\nconst cryptoClients = {\n    ES256K: secp256k1_1.SECP256K1Client\n};\nexports.cryptoClients = cryptoClients;\n//# sourceMappingURL=index.js.map","import { getCryptoLib } from './cryptoUtils'\n\nexport type Pbkdf2Digests = 'sha512' | 'sha256'\n\nexport interface Pbkdf2 {\n  derive(\n    password: string, \n    salt: Buffer,\n    iterations: number, \n    keyLength: number, \n    digest: Pbkdf2Digests): Promise<Buffer>;\n}\n\ntype NodePbkdf2Fn = typeof import('crypto').pbkdf2\n\nexport class NodeCryptoPbkdf2 implements Pbkdf2 {\n  nodePbkdf2: NodePbkdf2Fn\n\n  constructor(nodePbkdf2: NodePbkdf2Fn) {\n    this.nodePbkdf2 = nodePbkdf2\n  }\n\n  async derive(\n    password: string, \n    salt: Buffer,\n    iterations: number, \n    keyLength: number, \n    digest: Pbkdf2Digests): \n    Promise<Buffer> {\n    if (digest !== 'sha512' && digest !== 'sha256') {\n      throw new Error(`Unsupported digest \"${digest}\" for Pbkdf2`)\n    }\n    return new Promise((resolve, reject) => {\n      this.nodePbkdf2(password, salt, iterations, keyLength, digest, (error, result) => {\n        if (error) {\n          reject(error)\n        }\n        resolve(result)\n      })\n    })\n  }\n}\n\nexport class WebCryptoPbkdf2 implements Pbkdf2 {\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async derive(\n    password: string, \n    salt: Buffer,\n    iterations: number, \n    keyLength: number, \n    digest: Pbkdf2Digests): \n    Promise<Buffer> {\n    let algo: string\n    if (digest === 'sha256') {\n      algo = 'SHA-256'\n    } else if (digest === 'sha512') {\n      algo = 'SHA-512'\n    } else {\n      throw new Error(`Unsupported Pbkdf2 digest algorithm \"${digest}\"`)\n    }\n    let result: ArrayBuffer\n    const passwordBytes = Buffer.from(password, 'utf8')\n    try {\n      const key = await this.subtleCrypto.importKey(\n        'raw', passwordBytes, 'PBKDF2', false, ['deriveBits']\n      )\n      result = await this.subtleCrypto.deriveBits({\n        name: 'PBKDF2', salt, iterations, hash: { name: algo }\n      }, key, keyLength * 8)\n    } catch (error) {\n      // Browser appears to support WebCrypto but missing pbkdf2 support.\n      const partialWebCrypto = new WebCryptoPartialPbkdf2(this.subtleCrypto)\n      return partialWebCrypto.derive(password, salt, iterations, keyLength, digest)\n    }\n    return Buffer.from(result)\n  }\n}\n\nexport class WebCryptoPartialPbkdf2 implements Pbkdf2 {\n  // An async implementation for browsers that support WebCrypto hmac \n  // but not pbkdf2. Extracted from crypto-browserify/pbkdf2 and modified to \n  // use WebCrypto for hmac operations.\n  // Original: https://github.com/crypto-browserify/pbkdf2/tree/v3.0.17/lib\n\n  subtleCrypto: SubtleCrypto\n\n  constructor(subtleCrypto: SubtleCrypto) {\n    this.subtleCrypto = subtleCrypto\n  }\n\n  async derive(\n    password: string, \n    salt: Buffer,\n    iterations: number, \n    keyLength: number, \n    digest: Pbkdf2Digests): \n    Promise<Buffer> {\n    if (digest !== 'sha512' && digest !== 'sha256') {\n      throw new Error(`Unsupported digest \"${digest}\" for Pbkdf2`)\n    }\n    const key = Buffer.from(password, 'utf8')\n    const algo = digest === 'sha512' ? 'SHA-512' : 'SHA-256'\n    const algoOpts = { name: 'HMAC', hash: algo }\n    const hmacDigest = (key: ArrayBuffer, data: ArrayBuffer) => this.subtleCrypto\n      .importKey('raw', key, algoOpts, true, ['sign'])\n      .then(cryptoKey => this.subtleCrypto.sign(algoOpts, cryptoKey, data))\n      .then(result => new Uint8Array(result))\n  \n    const DK = new Uint8Array(keyLength)\n    const saltLength = salt.length\n    const block1 = new Uint8Array(saltLength + 4)\n    block1.set(salt)\n    let destPos = 0\n    const hLen = digest === 'sha512' ? 64 : 32\n    const l = Math.ceil(keyLength / hLen)\n  \n    function writeUInt32BE(data: Uint8Array, value: number, offset: number) {\n      value = +value\n      offset >>>= 0\n      data[offset] = (value >>> 24)\n      data[offset + 1] = (value >>> 16)\n      data[offset + 2] = (value >>> 8)\n      data[offset + 3] = (value & 0xff)\n      return offset + 4\n    }\n  \n    for (let i = 1; i <= l; i++) {\n      writeUInt32BE(block1, i, saltLength)\n      // eslint-disable-next-line no-await-in-loop\n      const T = await hmacDigest(key, block1)\n      let U = T\n      for (let j = 1; j < iterations; j++) {\n        // eslint-disable-next-line no-await-in-loop\n        U = await hmacDigest(key, U)\n        for (let k = 0; k < hLen; k++) {\n          T[k] ^= U[k]\n        }\n      }\n      DK.set(T.subarray(0, DK.byteLength - destPos), destPos)\n      destPos += hLen\n    }\n    return Buffer.from(DK.buffer)\n  }\n}\n\nexport async function createPbkdf2(): Promise<Pbkdf2> {\n  const cryptoLib = await getCryptoLib()\n  if (cryptoLib.name === 'subtleCrypto') {\n    return new WebCryptoPbkdf2(cryptoLib.lib)\n  } else {\n    return new NodeCryptoPbkdf2(cryptoLib.lib.pbkdf2)\n  }\n}\n\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict'\nvar inherits = require('inherits')\nvar HashBase = require('hash-base')\nvar Buffer = require('safe-buffer').Buffer\n\nvar ARRAY16 = new Array(16)\n\nfunction MD5 () {\n  HashBase.call(this, 64)\n\n  // state\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n}\n\ninherits(MD5, HashBase)\n\nMD5.prototype._update = function () {\n  var M = ARRAY16\n  for (var i = 0; i < 16; ++i) M[i] = this._block.readInt32LE(i * 4)\n\n  var a = this._a\n  var b = this._b\n  var c = this._c\n  var d = this._d\n\n  a = fnF(a, b, c, d, M[0], 0xd76aa478, 7)\n  d = fnF(d, a, b, c, M[1], 0xe8c7b756, 12)\n  c = fnF(c, d, a, b, M[2], 0x242070db, 17)\n  b = fnF(b, c, d, a, M[3], 0xc1bdceee, 22)\n  a = fnF(a, b, c, d, M[4], 0xf57c0faf, 7)\n  d = fnF(d, a, b, c, M[5], 0x4787c62a, 12)\n  c = fnF(c, d, a, b, M[6], 0xa8304613, 17)\n  b = fnF(b, c, d, a, M[7], 0xfd469501, 22)\n  a = fnF(a, b, c, d, M[8], 0x698098d8, 7)\n  d = fnF(d, a, b, c, M[9], 0x8b44f7af, 12)\n  c = fnF(c, d, a, b, M[10], 0xffff5bb1, 17)\n  b = fnF(b, c, d, a, M[11], 0x895cd7be, 22)\n  a = fnF(a, b, c, d, M[12], 0x6b901122, 7)\n  d = fnF(d, a, b, c, M[13], 0xfd987193, 12)\n  c = fnF(c, d, a, b, M[14], 0xa679438e, 17)\n  b = fnF(b, c, d, a, M[15], 0x49b40821, 22)\n\n  a = fnG(a, b, c, d, M[1], 0xf61e2562, 5)\n  d = fnG(d, a, b, c, M[6], 0xc040b340, 9)\n  c = fnG(c, d, a, b, M[11], 0x265e5a51, 14)\n  b = fnG(b, c, d, a, M[0], 0xe9b6c7aa, 20)\n  a = fnG(a, b, c, d, M[5], 0xd62f105d, 5)\n  d = fnG(d, a, b, c, M[10], 0x02441453, 9)\n  c = fnG(c, d, a, b, M[15], 0xd8a1e681, 14)\n  b = fnG(b, c, d, a, M[4], 0xe7d3fbc8, 20)\n  a = fnG(a, b, c, d, M[9], 0x21e1cde6, 5)\n  d = fnG(d, a, b, c, M[14], 0xc33707d6, 9)\n  c = fnG(c, d, a, b, M[3], 0xf4d50d87, 14)\n  b = fnG(b, c, d, a, M[8], 0x455a14ed, 20)\n  a = fnG(a, b, c, d, M[13], 0xa9e3e905, 5)\n  d = fnG(d, a, b, c, M[2], 0xfcefa3f8, 9)\n  c = fnG(c, d, a, b, M[7], 0x676f02d9, 14)\n  b = fnG(b, c, d, a, M[12], 0x8d2a4c8a, 20)\n\n  a = fnH(a, b, c, d, M[5], 0xfffa3942, 4)\n  d = fnH(d, a, b, c, M[8], 0x8771f681, 11)\n  c = fnH(c, d, a, b, M[11], 0x6d9d6122, 16)\n  b = fnH(b, c, d, a, M[14], 0xfde5380c, 23)\n  a = fnH(a, b, c, d, M[1], 0xa4beea44, 4)\n  d = fnH(d, a, b, c, M[4], 0x4bdecfa9, 11)\n  c = fnH(c, d, a, b, M[7], 0xf6bb4b60, 16)\n  b = fnH(b, c, d, a, M[10], 0xbebfbc70, 23)\n  a = fnH(a, b, c, d, M[13], 0x289b7ec6, 4)\n  d = fnH(d, a, b, c, M[0], 0xeaa127fa, 11)\n  c = fnH(c, d, a, b, M[3], 0xd4ef3085, 16)\n  b = fnH(b, c, d, a, M[6], 0x04881d05, 23)\n  a = fnH(a, b, c, d, M[9], 0xd9d4d039, 4)\n  d = fnH(d, a, b, c, M[12], 0xe6db99e5, 11)\n  c = fnH(c, d, a, b, M[15], 0x1fa27cf8, 16)\n  b = fnH(b, c, d, a, M[2], 0xc4ac5665, 23)\n\n  a = fnI(a, b, c, d, M[0], 0xf4292244, 6)\n  d = fnI(d, a, b, c, M[7], 0x432aff97, 10)\n  c = fnI(c, d, a, b, M[14], 0xab9423a7, 15)\n  b = fnI(b, c, d, a, M[5], 0xfc93a039, 21)\n  a = fnI(a, b, c, d, M[12], 0x655b59c3, 6)\n  d = fnI(d, a, b, c, M[3], 0x8f0ccc92, 10)\n  c = fnI(c, d, a, b, M[10], 0xffeff47d, 15)\n  b = fnI(b, c, d, a, M[1], 0x85845dd1, 21)\n  a = fnI(a, b, c, d, M[8], 0x6fa87e4f, 6)\n  d = fnI(d, a, b, c, M[15], 0xfe2ce6e0, 10)\n  c = fnI(c, d, a, b, M[6], 0xa3014314, 15)\n  b = fnI(b, c, d, a, M[13], 0x4e0811a1, 21)\n  a = fnI(a, b, c, d, M[4], 0xf7537e82, 6)\n  d = fnI(d, a, b, c, M[11], 0xbd3af235, 10)\n  c = fnI(c, d, a, b, M[2], 0x2ad7d2bb, 15)\n  b = fnI(b, c, d, a, M[9], 0xeb86d391, 21)\n\n  this._a = (this._a + a) | 0\n  this._b = (this._b + b) | 0\n  this._c = (this._c + c) | 0\n  this._d = (this._d + d) | 0\n}\n\nMD5.prototype._digest = function () {\n  // create padding and handle blocks\n  this._block[this._blockOffset++] = 0x80\n  if (this._blockOffset > 56) {\n    this._block.fill(0, this._blockOffset, 64)\n    this._update()\n    this._blockOffset = 0\n  }\n\n  this._block.fill(0, this._blockOffset, 56)\n  this._block.writeUInt32LE(this._length[0], 56)\n  this._block.writeUInt32LE(this._length[1], 60)\n  this._update()\n\n  // produce result\n  var buffer = Buffer.allocUnsafe(16)\n  buffer.writeInt32LE(this._a, 0)\n  buffer.writeInt32LE(this._b, 4)\n  buffer.writeInt32LE(this._c, 8)\n  buffer.writeInt32LE(this._d, 12)\n  return buffer\n}\n\nfunction rotl (x, n) {\n  return (x << n) | (x >>> (32 - n))\n}\n\nfunction fnF (a, b, c, d, m, k, s) {\n  return (rotl((a + ((b & c) | ((~b) & d)) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnG (a, b, c, d, m, k, s) {\n  return (rotl((a + ((b & d) | (c & (~d))) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnH (a, b, c, d, m, k, s) {\n  return (rotl((a + (b ^ c ^ d) + m + k) | 0, s) + b) | 0\n}\n\nfunction fnI (a, b, c, d, m, k, s) {\n  return (rotl((a + ((c ^ (b | (~d)))) + m + k) | 0, s) + b) | 0\n}\n\nmodule.exports = MD5\n","'use strict'\nvar Buffer = require('safe-buffer').Buffer\nvar Transform = require('stream').Transform\nvar inherits = require('inherits')\n\nfunction throwIfNotStringOrBuffer (val, prefix) {\n  if (!Buffer.isBuffer(val) && typeof val !== 'string') {\n    throw new TypeError(prefix + ' must be a string or a buffer')\n  }\n}\n\nfunction HashBase (blockSize) {\n  Transform.call(this)\n\n  this._block = Buffer.allocUnsafe(blockSize)\n  this._blockSize = blockSize\n  this._blockOffset = 0\n  this._length = [0, 0, 0, 0]\n\n  this._finalized = false\n}\n\ninherits(HashBase, Transform)\n\nHashBase.prototype._transform = function (chunk, encoding, callback) {\n  var error = null\n  try {\n    this.update(chunk, encoding)\n  } catch (err) {\n    error = err\n  }\n\n  callback(error)\n}\n\nHashBase.prototype._flush = function (callback) {\n  var error = null\n  try {\n    this.push(this.digest())\n  } catch (err) {\n    error = err\n  }\n\n  callback(error)\n}\n\nHashBase.prototype.update = function (data, encoding) {\n  throwIfNotStringOrBuffer(data, 'Data')\n  if (this._finalized) throw new Error('Digest already called')\n  if (!Buffer.isBuffer(data)) data = Buffer.from(data, encoding)\n\n  // consume data\n  var block = this._block\n  var offset = 0\n  while (this._blockOffset + data.length - offset >= this._blockSize) {\n    for (var i = this._blockOffset; i < this._blockSize;) block[i++] = data[offset++]\n    this._update()\n    this._blockOffset = 0\n  }\n  while (offset < data.length) block[this._blockOffset++] = data[offset++]\n\n  // update length\n  for (var j = 0, carry = data.length * 8; carry > 0; ++j) {\n    this._length[j] += carry\n    carry = (this._length[j] / 0x0100000000) | 0\n    if (carry > 0) this._length[j] -= 0x0100000000 * carry\n  }\n\n  return this\n}\n\nHashBase.prototype._update = function () {\n  throw new Error('_update is not implemented')\n}\n\nHashBase.prototype.digest = function (encoding) {\n  if (this._finalized) throw new Error('Digest already called')\n  this._finalized = true\n\n  var digest = this._digest()\n  if (encoding !== undefined) digest = digest.toString(encoding)\n\n  // reset state\n  this._block.fill(0)\n  this._blockOffset = 0\n  for (var i = 0; i < 4; ++i) this._length[i] = 0\n\n  return digest\n}\n\nHashBase.prototype._digest = function () {\n  throw new Error('_digest is not implemented')\n}\n\nmodule.exports = HashBase\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n  0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n  0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n  0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n  0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n  0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n  0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n  0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n  0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n  0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n  0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n  0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n  0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n  0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n  0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n  0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2\n]\n\nvar W = new Array(64)\n\nfunction Sha256 () {\n  this.init()\n\n  this._w = W // new Array(64)\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha256, Hash)\n\nSha256.prototype.init = function () {\n  this._a = 0x6a09e667\n  this._b = 0xbb67ae85\n  this._c = 0x3c6ef372\n  this._d = 0xa54ff53a\n  this._e = 0x510e527f\n  this._f = 0x9b05688c\n  this._g = 0x1f83d9ab\n  this._h = 0x5be0cd19\n\n  return this\n}\n\nfunction ch (x, y, z) {\n  return z ^ (x & (y ^ z))\n}\n\nfunction maj (x, y, z) {\n  return (x & y) | (z & (x | y))\n}\n\nfunction sigma0 (x) {\n  return (x >>> 2 | x << 30) ^ (x >>> 13 | x << 19) ^ (x >>> 22 | x << 10)\n}\n\nfunction sigma1 (x) {\n  return (x >>> 6 | x << 26) ^ (x >>> 11 | x << 21) ^ (x >>> 25 | x << 7)\n}\n\nfunction gamma0 (x) {\n  return (x >>> 7 | x << 25) ^ (x >>> 18 | x << 14) ^ (x >>> 3)\n}\n\nfunction gamma1 (x) {\n  return (x >>> 17 | x << 15) ^ (x >>> 19 | x << 13) ^ (x >>> 10)\n}\n\nSha256.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n  var f = this._f | 0\n  var g = this._g | 0\n  var h = this._h | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 64; ++i) W[i] = (gamma1(W[i - 2]) + W[i - 7] + gamma0(W[i - 15]) + W[i - 16]) | 0\n\n  for (var j = 0; j < 64; ++j) {\n    var T1 = (h + sigma1(e) + ch(e, f, g) + K[j] + W[j]) | 0\n    var T2 = (sigma0(a) + maj(a, b, c)) | 0\n\n    h = g\n    g = f\n    f = e\n    e = (d + T1) | 0\n    d = c\n    c = b\n    b = a\n    a = (T1 + T2) | 0\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n  this._f = (f + this._f) | 0\n  this._g = (g + this._g) | 0\n  this._h = (h + this._h) | 0\n}\n\nSha256.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(32)\n\n  H.writeInt32BE(this._a, 0)\n  H.writeInt32BE(this._b, 4)\n  H.writeInt32BE(this._c, 8)\n  H.writeInt32BE(this._d, 12)\n  H.writeInt32BE(this._e, 16)\n  H.writeInt32BE(this._f, 20)\n  H.writeInt32BE(this._g, 24)\n  H.writeInt32BE(this._h, 28)\n\n  return H\n}\n\nmodule.exports = Sha256\n","var inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n]\n\nvar W = new Array(160)\n\nfunction Sha512 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 128, 112)\n}\n\ninherits(Sha512, Hash)\n\nSha512.prototype.init = function () {\n  this._ah = 0x6a09e667\n  this._bh = 0xbb67ae85\n  this._ch = 0x3c6ef372\n  this._dh = 0xa54ff53a\n  this._eh = 0x510e527f\n  this._fh = 0x9b05688c\n  this._gh = 0x1f83d9ab\n  this._hh = 0x5be0cd19\n\n  this._al = 0xf3bcc908\n  this._bl = 0x84caa73b\n  this._cl = 0xfe94f82b\n  this._dl = 0x5f1d36f1\n  this._el = 0xade682d1\n  this._fl = 0x2b3e6c1f\n  this._gl = 0xfb41bd6b\n  this._hl = 0x137e2179\n\n  return this\n}\n\nfunction Ch (x, y, z) {\n  return z ^ (x & (y ^ z))\n}\n\nfunction maj (x, y, z) {\n  return (x & y) | (z & (x | y))\n}\n\nfunction sigma0 (x, xl) {\n  return (x >>> 28 | xl << 4) ^ (xl >>> 2 | x << 30) ^ (xl >>> 7 | x << 25)\n}\n\nfunction sigma1 (x, xl) {\n  return (x >>> 14 | xl << 18) ^ (x >>> 18 | xl << 14) ^ (xl >>> 9 | x << 23)\n}\n\nfunction Gamma0 (x, xl) {\n  return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7)\n}\n\nfunction Gamma0l (x, xl) {\n  return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7 | xl << 25)\n}\n\nfunction Gamma1 (x, xl) {\n  return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6)\n}\n\nfunction Gamma1l (x, xl) {\n  return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6 | xl << 26)\n}\n\nfunction getCarry (a, b) {\n  return (a >>> 0) < (b >>> 0) ? 1 : 0\n}\n\nSha512.prototype._update = function (M) {\n  var W = this._w\n\n  var ah = this._ah | 0\n  var bh = this._bh | 0\n  var ch = this._ch | 0\n  var dh = this._dh | 0\n  var eh = this._eh | 0\n  var fh = this._fh | 0\n  var gh = this._gh | 0\n  var hh = this._hh | 0\n\n  var al = this._al | 0\n  var bl = this._bl | 0\n  var cl = this._cl | 0\n  var dl = this._dl | 0\n  var el = this._el | 0\n  var fl = this._fl | 0\n  var gl = this._gl | 0\n  var hl = this._hl | 0\n\n  for (var i = 0; i < 32; i += 2) {\n    W[i] = M.readInt32BE(i * 4)\n    W[i + 1] = M.readInt32BE(i * 4 + 4)\n  }\n  for (; i < 160; i += 2) {\n    var xh = W[i - 15 * 2]\n    var xl = W[i - 15 * 2 + 1]\n    var gamma0 = Gamma0(xh, xl)\n    var gamma0l = Gamma0l(xl, xh)\n\n    xh = W[i - 2 * 2]\n    xl = W[i - 2 * 2 + 1]\n    var gamma1 = Gamma1(xh, xl)\n    var gamma1l = Gamma1l(xl, xh)\n\n    // W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16]\n    var Wi7h = W[i - 7 * 2]\n    var Wi7l = W[i - 7 * 2 + 1]\n\n    var Wi16h = W[i - 16 * 2]\n    var Wi16l = W[i - 16 * 2 + 1]\n\n    var Wil = (gamma0l + Wi7l) | 0\n    var Wih = (gamma0 + Wi7h + getCarry(Wil, gamma0l)) | 0\n    Wil = (Wil + gamma1l) | 0\n    Wih = (Wih + gamma1 + getCarry(Wil, gamma1l)) | 0\n    Wil = (Wil + Wi16l) | 0\n    Wih = (Wih + Wi16h + getCarry(Wil, Wi16l)) | 0\n\n    W[i] = Wih\n    W[i + 1] = Wil\n  }\n\n  for (var j = 0; j < 160; j += 2) {\n    Wih = W[j]\n    Wil = W[j + 1]\n\n    var majh = maj(ah, bh, ch)\n    var majl = maj(al, bl, cl)\n\n    var sigma0h = sigma0(ah, al)\n    var sigma0l = sigma0(al, ah)\n    var sigma1h = sigma1(eh, el)\n    var sigma1l = sigma1(el, eh)\n\n    // t1 = h + sigma1 + ch + K[j] + W[j]\n    var Kih = K[j]\n    var Kil = K[j + 1]\n\n    var chh = Ch(eh, fh, gh)\n    var chl = Ch(el, fl, gl)\n\n    var t1l = (hl + sigma1l) | 0\n    var t1h = (hh + sigma1h + getCarry(t1l, hl)) | 0\n    t1l = (t1l + chl) | 0\n    t1h = (t1h + chh + getCarry(t1l, chl)) | 0\n    t1l = (t1l + Kil) | 0\n    t1h = (t1h + Kih + getCarry(t1l, Kil)) | 0\n    t1l = (t1l + Wil) | 0\n    t1h = (t1h + Wih + getCarry(t1l, Wil)) | 0\n\n    // t2 = sigma0 + maj\n    var t2l = (sigma0l + majl) | 0\n    var t2h = (sigma0h + majh + getCarry(t2l, sigma0l)) | 0\n\n    hh = gh\n    hl = gl\n    gh = fh\n    gl = fl\n    fh = eh\n    fl = el\n    el = (dl + t1l) | 0\n    eh = (dh + t1h + getCarry(el, dl)) | 0\n    dh = ch\n    dl = cl\n    ch = bh\n    cl = bl\n    bh = ah\n    bl = al\n    al = (t1l + t2l) | 0\n    ah = (t1h + t2h + getCarry(al, t1l)) | 0\n  }\n\n  this._al = (this._al + al) | 0\n  this._bl = (this._bl + bl) | 0\n  this._cl = (this._cl + cl) | 0\n  this._dl = (this._dl + dl) | 0\n  this._el = (this._el + el) | 0\n  this._fl = (this._fl + fl) | 0\n  this._gl = (this._gl + gl) | 0\n  this._hl = (this._hl + hl) | 0\n\n  this._ah = (this._ah + ah + getCarry(this._al, al)) | 0\n  this._bh = (this._bh + bh + getCarry(this._bl, bl)) | 0\n  this._ch = (this._ch + ch + getCarry(this._cl, cl)) | 0\n  this._dh = (this._dh + dh + getCarry(this._dl, dl)) | 0\n  this._eh = (this._eh + eh + getCarry(this._el, el)) | 0\n  this._fh = (this._fh + fh + getCarry(this._fl, fl)) | 0\n  this._gh = (this._gh + gh + getCarry(this._gl, gl)) | 0\n  this._hh = (this._hh + hh + getCarry(this._hl, hl)) | 0\n}\n\nSha512.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(64)\n\n  function writeInt64BE (h, l, offset) {\n    H.writeInt32BE(h, offset)\n    H.writeInt32BE(l, offset + 4)\n  }\n\n  writeInt64BE(this._ah, this._al, 0)\n  writeInt64BE(this._bh, this._bl, 8)\n  writeInt64BE(this._ch, this._cl, 16)\n  writeInt64BE(this._dh, this._dl, 24)\n  writeInt64BE(this._eh, this._el, 32)\n  writeInt64BE(this._fh, this._fl, 40)\n  writeInt64BE(this._gh, this._gl, 48)\n  writeInt64BE(this._hh, this._hl, 56)\n\n  return H\n}\n\nmodule.exports = Sha512\n","'use strict'\nvar inherits = require('inherits')\nvar Legacy = require('./legacy')\nvar Base = require('cipher-base')\nvar Buffer = require('safe-buffer').Buffer\nvar md5 = require('create-hash/md5')\nvar RIPEMD160 = require('ripemd160')\n\nvar sha = require('sha.js')\n\nvar ZEROS = Buffer.alloc(128)\n\nfunction Hmac (alg, key) {\n  Base.call(this, 'digest')\n  if (typeof key === 'string') {\n    key = Buffer.from(key)\n  }\n\n  var blocksize = (alg === 'sha512' || alg === 'sha384') ? 128 : 64\n\n  this._alg = alg\n  this._key = key\n  if (key.length > blocksize) {\n    var hash = alg === 'rmd160' ? new RIPEMD160() : sha(alg)\n    key = hash.update(key).digest()\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = this._ipad = Buffer.allocUnsafe(blocksize)\n  var opad = this._opad = Buffer.allocUnsafe(blocksize)\n\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n  this._hash = alg === 'rmd160' ? new RIPEMD160() : sha(alg)\n  this._hash.update(ipad)\n}\n\ninherits(Hmac, Base)\n\nHmac.prototype._update = function (data) {\n  this._hash.update(data)\n}\n\nHmac.prototype._final = function () {\n  var h = this._hash.digest()\n  var hash = this._alg === 'rmd160' ? new RIPEMD160() : sha(this._alg)\n  return hash.update(this._opad).update(h).digest()\n}\n\nmodule.exports = function createHmac (alg, key) {\n  alg = alg.toLowerCase()\n  if (alg === 'rmd160' || alg === 'ripemd160') {\n    return new Hmac('rmd160', key)\n  }\n  if (alg === 'md5') {\n    return new Legacy(md5, key)\n  }\n  return new Hmac(alg, key)\n}\n","var MD5 = require('md5.js')\n\nmodule.exports = function (buffer) {\n  return new MD5().update(buffer).digest()\n}\n","'use strict';\n\nvar utils = exports;\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg !== 'string') {\n    for (var i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n    return res;\n  }\n  if (enc === 'hex') {\n    msg = msg.replace(/[^a-z0-9]+/ig, '');\n    if (msg.length % 2 !== 0)\n      msg = '0' + msg;\n    for (var i = 0; i < msg.length; i += 2)\n      res.push(parseInt(msg[i] + msg[i + 1], 16));\n  } else {\n    for (var i = 0; i < msg.length; i++) {\n      var c = msg.charCodeAt(i);\n      var hi = c >> 8;\n      var lo = c & 0xff;\n      if (hi)\n        res.push(hi, lo);\n      else\n        res.push(lo);\n    }\n  }\n  return res;\n}\nutils.toArray = toArray;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nutils.zero2 = zero2;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nutils.toHex = toHex;\n\nutils.encode = function encode(arr, enc) {\n  if (enc === 'hex')\n    return toHex(arr);\n  else\n    return arr;\n};\n","var r;\n\nmodule.exports = function rand(len) {\n  if (!r)\n    r = new Rand(null);\n\n  return r.generate(len);\n};\n\nfunction Rand(rand) {\n  this.rand = rand;\n}\nmodule.exports.Rand = Rand;\n\nRand.prototype.generate = function generate(len) {\n  return this._rand(len);\n};\n\n// Emulate crypto API using randy\nRand.prototype._rand = function _rand(n) {\n  if (this.rand.getBytes)\n    return this.rand.getBytes(n);\n\n  var res = new Uint8Array(n);\n  for (var i = 0; i < res.length; i++)\n    res[i] = this.rand.getByte();\n  return res;\n};\n\nif (typeof self === 'object') {\n  if (self.crypto && self.crypto.getRandomValues) {\n    // Modern browsers\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.crypto.getRandomValues(arr);\n      return arr;\n    };\n  } else if (self.msCrypto && self.msCrypto.getRandomValues) {\n    // IE\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.msCrypto.getRandomValues(arr);\n      return arr;\n    };\n\n  // Safari's WebWorkers do not have `crypto`\n  } else if (typeof window === 'object') {\n    // Old junk\n    Rand.prototype._rand = function() {\n      throw new Error('Not implemented yet');\n    };\n  }\n} else {\n  // Node.js or Web worker with no crypto support\n  try {\n    var crypto = require('crypto');\n    if (typeof crypto.randomBytes !== 'function')\n      throw new Error('Not supported');\n\n    Rand.prototype._rand = function _rand(n) {\n      return crypto.randomBytes(n);\n    };\n  } catch (e) {\n  }\n}\n","'use strict';\n\nvar curve = exports;\n\ncurve.base = require('./base');\ncurve.short = require('./short');\ncurve.mont = require('./mont');\ncurve.edwards = require('./edwards');\n","'use strict';\n\nvar utils = require('../utils');\nvar rotr32 = utils.rotr32;\n\nfunction ft_1(s, x, y, z) {\n  if (s === 0)\n    return ch32(x, y, z);\n  if (s === 1 || s === 3)\n    return p32(x, y, z);\n  if (s === 2)\n    return maj32(x, y, z);\n}\nexports.ft_1 = ft_1;\n\nfunction ch32(x, y, z) {\n  return (x & y) ^ ((~x) & z);\n}\nexports.ch32 = ch32;\n\nfunction maj32(x, y, z) {\n  return (x & y) ^ (x & z) ^ (y & z);\n}\nexports.maj32 = maj32;\n\nfunction p32(x, y, z) {\n  return x ^ y ^ z;\n}\nexports.p32 = p32;\n\nfunction s0_256(x) {\n  return rotr32(x, 2) ^ rotr32(x, 13) ^ rotr32(x, 22);\n}\nexports.s0_256 = s0_256;\n\nfunction s1_256(x) {\n  return rotr32(x, 6) ^ rotr32(x, 11) ^ rotr32(x, 25);\n}\nexports.s1_256 = s1_256;\n\nfunction g0_256(x) {\n  return rotr32(x, 7) ^ rotr32(x, 18) ^ (x >>> 3);\n}\nexports.g0_256 = g0_256;\n\nfunction g1_256(x) {\n  return rotr32(x, 17) ^ rotr32(x, 19) ^ (x >>> 10);\n}\nexports.g1_256 = g1_256;\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar shaCommon = require('./common');\nvar assert = require('minimalistic-assert');\n\nvar sum32 = utils.sum32;\nvar sum32_4 = utils.sum32_4;\nvar sum32_5 = utils.sum32_5;\nvar ch32 = shaCommon.ch32;\nvar maj32 = shaCommon.maj32;\nvar s0_256 = shaCommon.s0_256;\nvar s1_256 = shaCommon.s1_256;\nvar g0_256 = shaCommon.g0_256;\nvar g1_256 = shaCommon.g1_256;\n\nvar BlockHash = common.BlockHash;\n\nvar sha256_K = [\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n  0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n  0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n  0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n  0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n  0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n  0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n  0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n  0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n];\n\nfunction SHA256() {\n  if (!(this instanceof SHA256))\n    return new SHA256();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n  ];\n  this.k = sha256_K;\n  this.W = new Array(64);\n}\nutils.inherits(SHA256, BlockHash);\nmodule.exports = SHA256;\n\nSHA256.blockSize = 512;\nSHA256.outSize = 256;\nSHA256.hmacStrength = 192;\nSHA256.padLength = 64;\n\nSHA256.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i++)\n    W[i] = sum32_4(g1_256(W[i - 2]), W[i - 7], g0_256(W[i - 15]), W[i - 16]);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n  var f = this.h[5];\n  var g = this.h[6];\n  var h = this.h[7];\n\n  assert(this.k.length === W.length);\n  for (i = 0; i < W.length; i++) {\n    var T1 = sum32_5(h, s1_256(e), ch32(e, f, g), this.k[i], W[i]);\n    var T2 = sum32(s0_256(a), maj32(a, b, c));\n    h = g;\n    g = f;\n    f = e;\n    e = sum32(d, T1);\n    d = c;\n    c = b;\n    b = a;\n    a = sum32(T1, T2);\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n  this.h[5] = sum32(this.h[5], f);\n  this.h[6] = sum32(this.h[6], g);\n  this.h[7] = sum32(this.h[7], h);\n};\n\nSHA256.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar assert = require('minimalistic-assert');\n\nvar rotr64_hi = utils.rotr64_hi;\nvar rotr64_lo = utils.rotr64_lo;\nvar shr64_hi = utils.shr64_hi;\nvar shr64_lo = utils.shr64_lo;\nvar sum64 = utils.sum64;\nvar sum64_hi = utils.sum64_hi;\nvar sum64_lo = utils.sum64_lo;\nvar sum64_4_hi = utils.sum64_4_hi;\nvar sum64_4_lo = utils.sum64_4_lo;\nvar sum64_5_hi = utils.sum64_5_hi;\nvar sum64_5_lo = utils.sum64_5_lo;\n\nvar BlockHash = common.BlockHash;\n\nvar sha512_K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction SHA512() {\n  if (!(this instanceof SHA512))\n    return new SHA512();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xf3bcc908,\n    0xbb67ae85, 0x84caa73b,\n    0x3c6ef372, 0xfe94f82b,\n    0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1,\n    0x9b05688c, 0x2b3e6c1f,\n    0x1f83d9ab, 0xfb41bd6b,\n    0x5be0cd19, 0x137e2179 ];\n  this.k = sha512_K;\n  this.W = new Array(160);\n}\nutils.inherits(SHA512, BlockHash);\nmodule.exports = SHA512;\n\nSHA512.blockSize = 1024;\nSHA512.outSize = 512;\nSHA512.hmacStrength = 192;\nSHA512.padLength = 128;\n\nSHA512.prototype._prepareBlock = function _prepareBlock(msg, start) {\n  var W = this.W;\n\n  // 32 x 32bit words\n  for (var i = 0; i < 32; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i += 2) {\n    var c0_hi = g1_512_hi(W[i - 4], W[i - 3]);  // i - 2\n    var c0_lo = g1_512_lo(W[i - 4], W[i - 3]);\n    var c1_hi = W[i - 14];  // i - 7\n    var c1_lo = W[i - 13];\n    var c2_hi = g0_512_hi(W[i - 30], W[i - 29]);  // i - 15\n    var c2_lo = g0_512_lo(W[i - 30], W[i - 29]);\n    var c3_hi = W[i - 32];  // i - 16\n    var c3_lo = W[i - 31];\n\n    W[i] = sum64_4_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n    W[i + 1] = sum64_4_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n  }\n};\n\nSHA512.prototype._update = function _update(msg, start) {\n  this._prepareBlock(msg, start);\n\n  var W = this.W;\n\n  var ah = this.h[0];\n  var al = this.h[1];\n  var bh = this.h[2];\n  var bl = this.h[3];\n  var ch = this.h[4];\n  var cl = this.h[5];\n  var dh = this.h[6];\n  var dl = this.h[7];\n  var eh = this.h[8];\n  var el = this.h[9];\n  var fh = this.h[10];\n  var fl = this.h[11];\n  var gh = this.h[12];\n  var gl = this.h[13];\n  var hh = this.h[14];\n  var hl = this.h[15];\n\n  assert(this.k.length === W.length);\n  for (var i = 0; i < W.length; i += 2) {\n    var c0_hi = hh;\n    var c0_lo = hl;\n    var c1_hi = s1_512_hi(eh, el);\n    var c1_lo = s1_512_lo(eh, el);\n    var c2_hi = ch64_hi(eh, el, fh, fl, gh, gl);\n    var c2_lo = ch64_lo(eh, el, fh, fl, gh, gl);\n    var c3_hi = this.k[i];\n    var c3_lo = this.k[i + 1];\n    var c4_hi = W[i];\n    var c4_lo = W[i + 1];\n\n    var T1_hi = sum64_5_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n    var T1_lo = sum64_5_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n\n    c0_hi = s0_512_hi(ah, al);\n    c0_lo = s0_512_lo(ah, al);\n    c1_hi = maj64_hi(ah, al, bh, bl, ch, cl);\n    c1_lo = maj64_lo(ah, al, bh, bl, ch, cl);\n\n    var T2_hi = sum64_hi(c0_hi, c0_lo, c1_hi, c1_lo);\n    var T2_lo = sum64_lo(c0_hi, c0_lo, c1_hi, c1_lo);\n\n    hh = gh;\n    hl = gl;\n\n    gh = fh;\n    gl = fl;\n\n    fh = eh;\n    fl = el;\n\n    eh = sum64_hi(dh, dl, T1_hi, T1_lo);\n    el = sum64_lo(dl, dl, T1_hi, T1_lo);\n\n    dh = ch;\n    dl = cl;\n\n    ch = bh;\n    cl = bl;\n\n    bh = ah;\n    bl = al;\n\n    ah = sum64_hi(T1_hi, T1_lo, T2_hi, T2_lo);\n    al = sum64_lo(T1_hi, T1_lo, T2_hi, T2_lo);\n  }\n\n  sum64(this.h, 0, ah, al);\n  sum64(this.h, 2, bh, bl);\n  sum64(this.h, 4, ch, cl);\n  sum64(this.h, 6, dh, dl);\n  sum64(this.h, 8, eh, el);\n  sum64(this.h, 10, fh, fl);\n  sum64(this.h, 12, gh, gl);\n  sum64(this.h, 14, hh, hl);\n};\n\nSHA512.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n\nfunction ch64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ ((~xh) & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction ch64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ ((~xl) & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ (xh & zh) ^ (yh & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ (xl & zl) ^ (yl & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 28);\n  var c1_hi = rotr64_hi(xl, xh, 2);  // 34\n  var c2_hi = rotr64_hi(xl, xh, 7);  // 39\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 28);\n  var c1_lo = rotr64_lo(xl, xh, 2);  // 34\n  var c2_lo = rotr64_lo(xl, xh, 7);  // 39\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 14);\n  var c1_hi = rotr64_hi(xh, xl, 18);\n  var c2_hi = rotr64_hi(xl, xh, 9);  // 41\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 14);\n  var c1_lo = rotr64_lo(xh, xl, 18);\n  var c2_lo = rotr64_lo(xl, xh, 9);  // 41\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 1);\n  var c1_hi = rotr64_hi(xh, xl, 8);\n  var c2_hi = shr64_hi(xh, xl, 7);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 1);\n  var c1_lo = rotr64_lo(xh, xl, 8);\n  var c2_lo = shr64_lo(xh, xl, 7);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 19);\n  var c1_hi = rotr64_hi(xl, xh, 29);  // 61\n  var c2_hi = shr64_hi(xh, xl, 6);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 19);\n  var c1_lo = rotr64_lo(xl, xh, 29);  // 61\n  var c2_lo = shr64_lo(xh, xl, 6);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n","var native = require('./native')\n\nfunction getTypeName (fn) {\n  return fn.name || fn.toString().match(/function (.*?)\\s*\\(/)[1]\n}\n\nfunction getValueTypeName (value) {\n  return native.Nil(value) ? '' : getTypeName(value.constructor)\n}\n\nfunction getValue (value) {\n  if (native.Function(value)) return ''\n  if (native.String(value)) return JSON.stringify(value)\n  if (value && native.Object(value)) return ''\n  return value\n}\n\nfunction captureStackTrace (e, t) {\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(e, t)\n  }\n}\n\nfunction tfJSON (type) {\n  if (native.Function(type)) return type.toJSON ? type.toJSON() : getTypeName(type)\n  if (native.Array(type)) return 'Array'\n  if (type && native.Object(type)) return 'Object'\n\n  return type !== undefined ? type : ''\n}\n\nfunction tfErrorString (type, value, valueTypeName) {\n  var valueJson = getValue(value)\n\n  return 'Expected ' + tfJSON(type) + ', got' +\n    (valueTypeName !== '' ? ' ' + valueTypeName : '') +\n    (valueJson !== '' ? ' ' + valueJson : '')\n}\n\nfunction TfTypeError (type, value, valueTypeName) {\n  valueTypeName = valueTypeName || getValueTypeName(value)\n  this.message = tfErrorString(type, value, valueTypeName)\n\n  captureStackTrace(this, TfTypeError)\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfTypeError.prototype = Object.create(Error.prototype)\nTfTypeError.prototype.constructor = TfTypeError\n\nfunction tfPropertyErrorString (type, label, name, value, valueTypeName) {\n  var description = '\" of type '\n  if (label === 'key') description = '\" with key type '\n\n  return tfErrorString('property \"' + tfJSON(name) + description + tfJSON(type), value, valueTypeName)\n}\n\nfunction TfPropertyTypeError (type, property, label, value, valueTypeName) {\n  if (type) {\n    valueTypeName = valueTypeName || getValueTypeName(value)\n    this.message = tfPropertyErrorString(type, label, property, value, valueTypeName)\n  } else {\n    this.message = 'Unexpected property \"' + property + '\"'\n  }\n\n  captureStackTrace(this, TfTypeError)\n  this.__label = label\n  this.__property = property\n  this.__type = type\n  this.__value = value\n  this.__valueTypeName = valueTypeName\n}\n\nTfPropertyTypeError.prototype = Object.create(Error.prototype)\nTfPropertyTypeError.prototype.constructor = TfTypeError\n\nfunction tfCustomError (expected, actual) {\n  return new TfTypeError(expected, {}, actual)\n}\n\nfunction tfSubError (e, property, label) {\n  // sub child?\n  if (e instanceof TfPropertyTypeError) {\n    property = property + '.' + e.__property\n\n    e = new TfPropertyTypeError(\n      e.__type, property, e.__label, e.__value, e.__valueTypeName\n    )\n\n  // child?\n  } else if (e instanceof TfTypeError) {\n    e = new TfPropertyTypeError(\n      e.__type, property, label, e.__value, e.__valueTypeName\n    )\n  }\n\n  captureStackTrace(e)\n  return e\n}\n\nmodule.exports = {\n  TfTypeError: TfTypeError,\n  TfPropertyTypeError: TfPropertyTypeError,\n  tfCustomError: tfCustomError,\n  tfSubError: tfSubError,\n  tfJSON: tfJSON,\n  getValueTypeName: getValueTypeName\n}\n","var bs58check = require('bs58check')\n\nfunction decodeRaw (buffer, version) {\n  // check version only if defined\n  if (version !== undefined && buffer[0] !== version) throw new Error('Invalid network version')\n\n  // uncompressed\n  if (buffer.length === 33) {\n    return {\n      version: buffer[0],\n      privateKey: buffer.slice(1, 33),\n      compressed: false\n    }\n  }\n\n  // invalid length\n  if (buffer.length !== 34) throw new Error('Invalid WIF length')\n\n  // invalid compression flag\n  if (buffer[33] !== 0x01) throw new Error('Invalid compression flag')\n\n  return {\n    version: buffer[0],\n    privateKey: buffer.slice(1, 33),\n    compressed: true\n  }\n}\n\nfunction encodeRaw (version, privateKey, compressed) {\n  var result = new Buffer(compressed ? 34 : 33)\n\n  result.writeUInt8(version, 0)\n  privateKey.copy(result, 1)\n\n  if (compressed) {\n    result[33] = 0x01\n  }\n\n  return result\n}\n\nfunction decode (string, version) {\n  return decodeRaw(bs58check.decode(string), version)\n}\n\nfunction encode (version, privateKey, compressed) {\n  if (typeof version === 'number') return bs58check.encode(encodeRaw(version, privateKey, compressed))\n\n  return bs58check.encode(\n    encodeRaw(\n      version.version,\n      version.privateKey,\n      version.compressed\n    )\n  )\n}\n\nmodule.exports = {\n  decode: decode,\n  decodeRaw: decodeRaw,\n  encode: encode,\n  encodeRaw: encodeRaw\n}\n","// Reference https://github.com/bitcoin/bips/blob/master/bip-0066.mediawiki\n// Format: 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n// NOTE: SIGHASH byte ignored AND restricted, truncate before use\n\nvar Buffer = require('safe-buffer').Buffer\n\nfunction check (buffer) {\n  if (buffer.length < 8) return false\n  if (buffer.length > 72) return false\n  if (buffer[0] !== 0x30) return false\n  if (buffer[1] !== buffer.length - 2) return false\n  if (buffer[2] !== 0x02) return false\n\n  var lenR = buffer[3]\n  if (lenR === 0) return false\n  if (5 + lenR >= buffer.length) return false\n  if (buffer[4 + lenR] !== 0x02) return false\n\n  var lenS = buffer[5 + lenR]\n  if (lenS === 0) return false\n  if ((6 + lenR + lenS) !== buffer.length) return false\n\n  if (buffer[4] & 0x80) return false\n  if (lenR > 1 && (buffer[4] === 0x00) && !(buffer[5] & 0x80)) return false\n\n  if (buffer[lenR + 6] & 0x80) return false\n  if (lenS > 1 && (buffer[lenR + 6] === 0x00) && !(buffer[lenR + 7] & 0x80)) return false\n  return true\n}\n\nfunction decode (buffer) {\n  if (buffer.length < 8) throw new Error('DER sequence length is too short')\n  if (buffer.length > 72) throw new Error('DER sequence length is too long')\n  if (buffer[0] !== 0x30) throw new Error('Expected DER sequence')\n  if (buffer[1] !== buffer.length - 2) throw new Error('DER sequence length is invalid')\n  if (buffer[2] !== 0x02) throw new Error('Expected DER integer')\n\n  var lenR = buffer[3]\n  if (lenR === 0) throw new Error('R length is zero')\n  if (5 + lenR >= buffer.length) throw new Error('R length is too long')\n  if (buffer[4 + lenR] !== 0x02) throw new Error('Expected DER integer (2)')\n\n  var lenS = buffer[5 + lenR]\n  if (lenS === 0) throw new Error('S length is zero')\n  if ((6 + lenR + lenS) !== buffer.length) throw new Error('S length is invalid')\n\n  if (buffer[4] & 0x80) throw new Error('R value is negative')\n  if (lenR > 1 && (buffer[4] === 0x00) && !(buffer[5] & 0x80)) throw new Error('R value excessively padded')\n\n  if (buffer[lenR + 6] & 0x80) throw new Error('S value is negative')\n  if (lenS > 1 && (buffer[lenR + 6] === 0x00) && !(buffer[lenR + 7] & 0x80)) throw new Error('S value excessively padded')\n\n  // non-BIP66 - extract R, S values\n  return {\n    r: buffer.slice(4, 4 + lenR),\n    s: buffer.slice(6 + lenR)\n  }\n}\n\n/*\n * Expects r and s to be positive DER integers.\n *\n * The DER format uses the most significant bit as a sign bit (& 0x80).\n * If the significant bit is set AND the integer is positive, a 0x00 is prepended.\n *\n * Examples:\n *\n *      0 =>     0x00\n *      1 =>     0x01\n *     -1 =>     0xff\n *    127 =>     0x7f\n *   -127 =>     0x81\n *    128 =>   0x0080\n *   -128 =>     0x80\n *    255 =>   0x00ff\n *   -255 =>   0xff01\n *  16300 =>   0x3fac\n * -16300 =>   0xc054\n *  62300 => 0x00f35c\n * -62300 => 0xff0ca4\n*/\nfunction encode (r, s) {\n  var lenR = r.length\n  var lenS = s.length\n  if (lenR === 0) throw new Error('R length is zero')\n  if (lenS === 0) throw new Error('S length is zero')\n  if (lenR > 33) throw new Error('R length is too long')\n  if (lenS > 33) throw new Error('S length is too long')\n  if (r[0] & 0x80) throw new Error('R value is negative')\n  if (s[0] & 0x80) throw new Error('S value is negative')\n  if (lenR > 1 && (r[0] === 0x00) && !(r[1] & 0x80)) throw new Error('R value excessively padded')\n  if (lenS > 1 && (s[0] === 0x00) && !(s[1] & 0x80)) throw new Error('S value excessively padded')\n\n  var signature = Buffer.allocUnsafe(6 + lenR + lenS)\n\n  // 0x30 [total-length] 0x02 [R-length] [R] 0x02 [S-length] [S]\n  signature[0] = 0x30\n  signature[1] = signature.length - 2\n  signature[2] = 0x02\n  signature[3] = r.length\n  r.copy(signature, 4)\n  signature[4 + lenR] = 0x02\n  signature[5 + lenR] = s.length\n  s.copy(signature, 6 + lenR)\n\n  return signature\n}\n\nmodule.exports = {\n  check: check,\n  decode: decode,\n  encode: encode\n}\n","'use strict'\nvar Buffer = require('safe-buffer').Buffer\n\n// Number.MAX_SAFE_INTEGER\nvar MAX_SAFE_INTEGER = 9007199254740991\n\nfunction checkUInt53 (n) {\n  if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0) throw new RangeError('value out of range')\n}\n\nfunction encode (number, buffer, offset) {\n  checkUInt53(number)\n\n  if (!buffer) buffer = Buffer.allocUnsafe(encodingLength(number))\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  // 8 bit\n  if (number < 0xfd) {\n    buffer.writeUInt8(number, offset)\n    encode.bytes = 1\n\n  // 16 bit\n  } else if (number <= 0xffff) {\n    buffer.writeUInt8(0xfd, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n    encode.bytes = 3\n\n  // 32 bit\n  } else if (number <= 0xffffffff) {\n    buffer.writeUInt8(0xfe, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n    encode.bytes = 5\n\n  // 64 bit\n  } else {\n    buffer.writeUInt8(0xff, offset)\n    buffer.writeUInt32LE(number >>> 0, offset + 1)\n    buffer.writeUInt32LE((number / 0x100000000) | 0, offset + 5)\n    encode.bytes = 9\n  }\n\n  return buffer\n}\n\nfunction decode (buffer, offset) {\n  if (!Buffer.isBuffer(buffer)) throw new TypeError('buffer must be a Buffer instance')\n  if (!offset) offset = 0\n\n  var first = buffer.readUInt8(offset)\n\n  // 8 bit\n  if (first < 0xfd) {\n    decode.bytes = 1\n    return first\n\n  // 16 bit\n  } else if (first === 0xfd) {\n    decode.bytes = 3\n    return buffer.readUInt16LE(offset + 1)\n\n  // 32 bit\n  } else if (first === 0xfe) {\n    decode.bytes = 5\n    return buffer.readUInt32LE(offset + 1)\n\n  // 64 bit\n  } else {\n    decode.bytes = 9\n    var lo = buffer.readUInt32LE(offset + 1)\n    var hi = buffer.readUInt32LE(offset + 5)\n    var number = hi * 0x0100000000 + lo\n    checkUInt53(number)\n\n    return number\n  }\n}\n\nfunction encodingLength (number) {\n  checkUInt53(number)\n\n  return (\n    number < 0xfd ? 1\n      : number <= 0xffff ? 3\n        : number <= 0xffffffff ? 5\n          : 9\n  )\n}\n\nmodule.exports = { encode: encode, decode: decode, encodingLength: encodingLength }\n","'use strict';\nfunction __export(m) {\n  for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, '__esModule', { value: true });\n__export(require('./fromBuffer'));\n__export(require('./toBuffer'));\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst converter = require('./converter');\nfunction checkForInput(inputs, inputIndex) {\n  const input = inputs[inputIndex];\n  if (input === undefined) throw new Error(`No input #${inputIndex}`);\n  return input;\n}\nexports.checkForInput = checkForInput;\nfunction checkForOutput(outputs, outputIndex) {\n  const output = outputs[outputIndex];\n  if (output === undefined) throw new Error(`No output #${outputIndex}`);\n  return output;\n}\nexports.checkForOutput = checkForOutput;\nfunction checkHasKey(checkKeyVal, keyVals, enumLength) {\n  if (checkKeyVal.key[0] < enumLength) {\n    throw new Error(\n      `Use the method for your specific key instead of addUnknownKeyVal*`,\n    );\n  }\n  if (\n    keyVals &&\n    keyVals.filter(kv => kv.key.equals(checkKeyVal.key)).length !== 0\n  ) {\n    throw new Error(`Duplicate Key: ${checkKeyVal.key.toString('hex')}`);\n  }\n}\nexports.checkHasKey = checkHasKey;\nfunction getEnumLength(myenum) {\n  let count = 0;\n  Object.keys(myenum).forEach(val => {\n    if (Number(isNaN(Number(val)))) {\n      count++;\n    }\n  });\n  return count;\n}\nexports.getEnumLength = getEnumLength;\nfunction inputCheckUncleanFinalized(inputIndex, input) {\n  let result = false;\n  if (!input.nonWitnessUtxo !== !input.witnessUtxo) {\n    const needScriptSig = !!input.redeemScript;\n    const needWitnessScript = !!input.witnessScript;\n    const scriptSigOK = !needScriptSig || !!input.finalScriptSig;\n    const witnessScriptOK = !needWitnessScript || !!input.finalScriptWitness;\n    const hasOneFinal = !!input.finalScriptSig || !!input.finalScriptWitness;\n    result = scriptSigOK && witnessScriptOK && hasOneFinal;\n  }\n  if (result === false) {\n    throw new Error(\n      `Input #${inputIndex} has too much or too little data to clean`,\n    );\n  }\n}\nexports.inputCheckUncleanFinalized = inputCheckUncleanFinalized;\nfunction throwForUpdateMaker(typeName, name, expected, data) {\n  throw new Error(\n    `Data for ${typeName} key ${name} is incorrect: Expected ` +\n      `${expected} and got ${JSON.stringify(data)}`,\n  );\n}\nfunction updateMaker(typeName) {\n  return (updateData, mainData) => {\n    for (const name of Object.keys(updateData)) {\n      // @ts-ignore\n      const data = updateData[name];\n      // @ts-ignore\n      const { canAdd, canAddToArray, check, expected } =\n        // @ts-ignore\n        converter[typeName + 's'][name] || {};\n      const isArray = !!canAddToArray;\n      // If unknown data. ignore and do not add\n      if (check) {\n        if (isArray) {\n          if (\n            !Array.isArray(data) ||\n            // @ts-ignore\n            (mainData[name] && !Array.isArray(mainData[name]))\n          ) {\n            throw new Error(`Key type ${name} must be an array`);\n          }\n          if (!data.every(check)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          // @ts-ignore\n          const arr = mainData[name] || [];\n          const dupeCheckSet = new Set();\n          if (!data.every(v => canAddToArray(arr, v, dupeCheckSet))) {\n            throw new Error('Can not add duplicate data to array');\n          }\n          // @ts-ignore\n          mainData[name] = arr.concat(data);\n        } else {\n          if (!check(data)) {\n            throwForUpdateMaker(typeName, name, expected, data);\n          }\n          if (!canAdd(mainData, data)) {\n            throw new Error(`Can not add duplicate data to ${typeName}`);\n          }\n          // @ts-ignore\n          mainData[name] = data;\n        }\n      }\n    }\n  };\n}\nexports.updateGlobal = updateMaker('global');\nexports.updateInput = updateMaker('input');\nexports.updateOutput = updateMaker('output');\nfunction addInputAttributes(inputs, data) {\n  const index = inputs.length - 1;\n  const input = checkForInput(inputs, index);\n  exports.updateInput(data, input);\n}\nexports.addInputAttributes = addInputAttributes;\nfunction addOutputAttributes(outputs, data) {\n  const index = outputs.length - 1;\n  const output = checkForInput(outputs, index);\n  exports.updateOutput(data, output);\n}\nexports.addOutputAttributes = addOutputAttributes;\nfunction defaultVersionSetter(version, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Version: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(version, 0);\n  return txBuf;\n}\nexports.defaultVersionSetter = defaultVersionSetter;\nfunction defaultLocktimeSetter(locktime, txBuf) {\n  if (!Buffer.isBuffer(txBuf) || txBuf.length < 4) {\n    throw new Error('Set Locktime: Invalid Transaction');\n  }\n  txBuf.writeUInt32LE(locktime, txBuf.length - 4);\n  return txBuf;\n}\nexports.defaultLocktimeSetter = defaultLocktimeSetter;\n","'use strict';\n// OP_0 {pubKeyHash}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 22 &&\n    buffer[0] === script_1.OPS.OP_0 &&\n    buffer[1] === 0x14\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness pubKeyHash output';\n};\n","'use strict';\n// OP_0 {scriptHash}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 34 &&\n    buffer[0] === script_1.OPS.OP_0 &&\n    buffer[1] === 0x20\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness scriptHash output';\n};\n","(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(typeof self !== 'undefined' ? self : this);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst sha_js_1 = require(\"sha.js\");\nfunction hashSha256(input) {\n    const hashFunction = new sha_js_1.sha256();\n    return hashFunction.update(input).digest();\n}\nexports.hashSha256 = hashSha256;\nfunction hashSha256Async(input) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            const isSubtleCryptoAvailable = typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n            if (isSubtleCryptoAvailable) {\n                // Use the W3C Web Crypto API if available (running in a web browser).\n                const buffer = typeof input === 'string' ? Buffer.from(input) : input;\n                const hash = yield crypto.subtle.digest('SHA-256', buffer);\n                return Buffer.from(hash);\n            }\n            else {\n                // Otherwise try loading the Node.js `crypto` module (running in Node.js, or an older browser with a polyfill).\n                const nodeCrypto = require('crypto');\n                if (!nodeCrypto.createHash) {\n                    throw new Error('`crypto` module does not contain `createHash`');\n                }\n                return Promise.resolve(nodeCrypto.createHash('sha256').update(input).digest());\n            }\n        }\n        catch (error) {\n            console.log(error);\n            console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, ' +\n                'nor the or the Node.js `require(\"crypto\").createHash` module is available. ' +\n                'Falling back to JS implementation.');\n            return Promise.resolve(hashSha256(input));\n        }\n    });\n}\nexports.hashSha256Async = hashSha256Async;\n//# sourceMappingURL=sha256.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeZoneFile = makeZoneFile;\n\nvar _zoneFileTemplate = require(\"./zoneFileTemplate\");\n\nfunction makeZoneFile(jsonZoneFile, template = (0, _zoneFileTemplate.getZoneFileTemplate)()) {\n  template = processOrigin(jsonZoneFile['$origin'], template);\n  template = processTTL(jsonZoneFile['$ttl'], template);\n  template = processSOA(jsonZoneFile['soa'], template);\n  template = processNS(jsonZoneFile['ns'], template);\n  template = processA(jsonZoneFile['a'], template);\n  template = processAAAA(jsonZoneFile['aaaa'], template);\n  template = processCNAME(jsonZoneFile['cname'], template);\n  template = processMX(jsonZoneFile['mx'], template);\n  template = processPTR(jsonZoneFile['ptr'], template);\n  template = processTXT(jsonZoneFile['txt'], template);\n  template = processSRV(jsonZoneFile['srv'], template);\n  template = processSPF(jsonZoneFile['spf'], template);\n  template = processURI(jsonZoneFile['uri'], template);\n  template = processValues(jsonZoneFile, template);\n  return template.replace(/\\n{2,}/gim, '\\n\\n');\n}\n\n;\n\nfunction processOrigin(data, template) {\n  let ret = '';\n\n  if (typeof data !== 'undefined') {\n    ret += '$ORIGIN ' + data;\n  }\n\n  return template.replace('{$origin}', ret);\n}\n\n;\n\nfunction processTTL(data, template) {\n  let ret = '';\n\n  if (typeof data !== 'undefined') {\n    ret += '$TTL ' + data;\n  }\n\n  return template.replace('{$ttl}', ret);\n}\n\n;\n\nfunction processSOA(data, template) {\n  let ret = template;\n\n  if (typeof data !== 'undefined') {\n    data.name = data.name || '@';\n    data.ttl = data.ttl || '';\n\n    for (const key in data) {\n      const value = data[key];\n      ret = ret.replace('{' + key + '}', value + '\\t');\n    }\n  }\n\n  return ret;\n}\n\n;\n\nfunction processNS(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tNS\\t' + record.host + '\\n';\n    }\n  }\n\n  return template.replace('{ns}', ret);\n}\n\n;\n\nfunction processA(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tA\\t' + record.ip + '\\n';\n    }\n  }\n\n  return template.replace('{a}', ret);\n}\n\n;\n\nfunction processAAAA(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tAAAA\\t' + record.ip + '\\n';\n    }\n  }\n\n  return template.replace('{aaaa}', ret);\n}\n\n;\n\nfunction processCNAME(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tCNAME\\t' + record.alias + '\\n';\n    }\n  }\n\n  return template.replace('{cname}', ret);\n}\n\n;\n\nfunction processMX(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tMX\\t' + record.preference + '\\t' + record.host + '\\n';\n    }\n  }\n\n  return template.replace('{mx}', ret);\n}\n\n;\n\nfunction processPTR(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tPTR\\t' + record.host + '\\n';\n    }\n  }\n\n  return template.replace('{ptr}', ret);\n}\n\n;\n\nfunction processTXT(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tTXT\\t';\n      const txtData = record.txt;\n\n      if (typeof txtData === 'string') {\n        ret += '\"' + txtData + '\"';\n      } else if (txtData instanceof Array) {\n        ret += txtData.map(function (datum) {\n          return '\"' + datum + '\"';\n        }).join(' ');\n      }\n\n      ret += '\\n';\n    }\n  }\n\n  return template.replace('{txt}', ret);\n}\n\n;\n\nfunction processSRV(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tSRV\\t' + record.priority + '\\t';\n      ret += record.weight + '\\t';\n      ret += record.port + '\\t';\n      ret += record.target + '\\n';\n    }\n  }\n\n  return template.replace('{srv}', ret);\n}\n\n;\n\nfunction processSPF(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tSPF\\t' + record.data + '\\n';\n    }\n  }\n\n  return template.replace('{spf}', ret);\n}\n\n;\n\nfunction processURI(data, template) {\n  let ret = '';\n\n  if (data) {\n    for (const record of data) {\n      ret += (record.name || '@') + '\\t';\n      if (record.ttl) ret += record.ttl + '\\t';\n      ret += 'IN\\tURI\\t' + record.priority + '\\t';\n      ret += record.weight + '\\t';\n      ret += '\"' + record.target + '\"\\n';\n    }\n  }\n\n  return template.replace('{uri}', ret);\n}\n\n;\n\nfunction processValues(jsonZoneFile, template) {\n  template = template.replace('{zone}', jsonZoneFile['$origin'] || (jsonZoneFile['soa'] ? jsonZoneFile['soa']['name'] : false) || '');\n  template = template.replace('{datetime}', new Date().toISOString());\n  const time = Math.round(Date.now() / 1000);\n  return template.replace('{time}', `${time}`);\n}\n\n;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseZoneFile = parseZoneFile;\n\nfunction parseZoneFile(text) {\n  text = removeComments(text);\n  text = flatten(text);\n  return parseRRs(text);\n}\n\n;\n\nfunction removeComments(text) {\n  const re = /(^|[^\\\\]);.*/g;\n  return text.replace(re, function (m, g1) {\n    return g1 ? g1 : ''; // if g1 is set/matched, re-insert it, else remove\n  });\n}\n\nfunction flatten(text) {\n  const captured = [];\n  const re = /\\([\\s\\S]*?\\)/gim;\n  let match = re.exec(text);\n\n  while (match !== null) {\n    const replacement = match[0].replace(/\\s+/gm, ' ');\n    captured.push({\n      match,\n      replacement\n    }); // captured Text, index, input\n\n    match = re.exec(text);\n  }\n\n  const arrText = text.split('');\n\n  for (const cur of captured) {\n    const {\n      match,\n      replacement\n    } = cur;\n    arrText.splice(match.index, match[0].length, replacement);\n  }\n\n  return arrText.join('').replace(/\\(|\\)/gim, ' ');\n}\n\nfunction parseRRs(text) {\n  const ret = {};\n  const rrs = text.split('\\n');\n\n  for (const rr of rrs) {\n    if (!rr || !rr.trim()) {\n      continue;\n    }\n\n    const uRR = rr.toUpperCase();\n\n    if (/\\s+TXT\\s+/.test(uRR)) {\n      ret.txt = ret.txt || [];\n      ret.txt.push(parseTXT(rr));\n    } else if (uRR.indexOf('$ORIGIN') === 0) {\n      ret.$origin = rr.split(/\\s+/g)[1];\n    } else if (uRR.indexOf('$TTL') === 0) {\n      ret.$ttl = parseInt(rr.split(/\\s+/g)[1], 10);\n    } else if (/\\s+SOA\\s+/.test(uRR)) {\n      ret.soa = parseSOA(rr);\n    } else if (/\\s+NS\\s+/.test(uRR)) {\n      ret.ns = ret.ns || [];\n      ret.ns.push(parseNS(rr));\n    } else if (/\\s+A\\s+/.test(uRR)) {\n      ret.a = ret.a || [];\n      ret.a.push(parseA(rr, ret.a));\n    } else if (/\\s+AAAA\\s+/.test(uRR)) {\n      ret.aaaa = ret.aaaa || [];\n      ret.aaaa.push(parseAAAA(rr));\n    } else if (/\\s+CNAME\\s+/.test(uRR)) {\n      ret.cname = ret.cname || [];\n      ret.cname.push(parseCNAME(rr));\n    } else if (/\\s+MX\\s+/.test(uRR)) {\n      ret.mx = ret.mx || [];\n      ret.mx.push(parseMX(rr));\n    } else if (/\\s+PTR\\s+/.test(uRR)) {\n      ret.ptr = ret.ptr || [];\n      ret.ptr.push(parsePTR(rr, ret.ptr, ret.$origin));\n    } else if (/\\s+SRV\\s+/.test(uRR)) {\n      ret.srv = ret.srv || [];\n      ret.srv.push(parseSRV(rr));\n    } else if (/\\s+SPF\\s+/.test(uRR)) {\n      ret.spf = ret.spf || [];\n      ret.spf.push(parseSPF(rr));\n    } else if (/\\s+URI\\s+/.test(uRR)) {\n      ret.uri = ret.uri || [];\n      ret.uri.push(parseURI(rr));\n    }\n  }\n\n  return ret;\n}\n\nfunction parseSOA(rr) {\n  const soa = {};\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  soa.name = rrTokens[0];\n  soa.minimum = parseInt(rrTokens[l - 1], 10);\n  soa.expire = parseInt(rrTokens[l - 2], 10);\n  soa.retry = parseInt(rrTokens[l - 3], 10);\n  soa.refresh = parseInt(rrTokens[l - 4], 10);\n  soa.serial = parseInt(rrTokens[l - 5], 10);\n  soa.rname = rrTokens[l - 6];\n  soa.mname = rrTokens[l - 7];\n  if (!isNaN(rrTokens[1])) soa.ttl = parseInt(rrTokens[1], 10);\n  return soa;\n}\n\nfunction parseNS(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    host: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseA(rr, recordsSoFar) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const urrTokens = rr.trim().toUpperCase().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    ip: rrTokens[l - 1]\n  };\n\n  if (urrTokens.lastIndexOf('A') === 0) {\n    if (recordsSoFar.length) {\n      result.name = recordsSoFar[recordsSoFar.length - 1].name;\n    } else {\n      result.name = '@';\n    }\n  }\n\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseAAAA(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    ip: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseCNAME(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    alias: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseMX(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    preference: parseInt(rrTokens[l - 2], 10),\n    host: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseTXT(rr) {\n  const rrTokens = rr.trim().match(/[^\\s\\\"']+|\\\"[^\\\"]*\\\"|'[^']*'/g);\n  if (!rrTokens) throw new Error('Failure to tokenize TXT record');\n  const l = rrTokens.length;\n  const indexTXT = rrTokens.indexOf('TXT');\n\n  function stripText(txt) {\n    if (txt.indexOf('\\\"') > -1) {\n      txt = txt.split('\\\"')[1];\n    }\n\n    if (txt.indexOf('\"') > -1) {\n      txt = txt.split('\"')[1];\n    }\n\n    return txt;\n  }\n\n  let tokenTxt;\n\n  if (l - indexTXT - 1 > 1) {\n    tokenTxt = rrTokens.slice(indexTXT + 1).map(stripText);\n  } else {\n    tokenTxt = stripText(rrTokens[l - 1]);\n  }\n\n  const result = {\n    name: rrTokens[0],\n    txt: tokenTxt\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parsePTR(rr, recordsSoFar, currentOrigin) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const urrTokens = rr.trim().toUpperCase().split(/\\s+/g);\n\n  if (urrTokens.lastIndexOf('PTR') === 0 && recordsSoFar[recordsSoFar.length - 1]) {\n    rrTokens.unshift(recordsSoFar[recordsSoFar.length - 1].name);\n  }\n\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    fullname: rrTokens[0] + '.' + currentOrigin,\n    host: rrTokens[l - 1]\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseSRV(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    target: rrTokens[l - 1],\n    priority: parseInt(rrTokens[l - 4], 10),\n    weight: parseInt(rrTokens[l - 3], 10),\n    port: parseInt(rrTokens[l - 2], 10)\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseSPF(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const result = {\n    name: rrTokens[0],\n    data: ''\n  };\n  let l = rrTokens.length;\n\n  while (l-- > 4) {\n    result.data = rrTokens[l] + ' ' + result.data.trim();\n  }\n\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}\n\nfunction parseURI(rr) {\n  const rrTokens = rr.trim().split(/\\s+/g);\n  const l = rrTokens.length;\n  const result = {\n    name: rrTokens[0],\n    target: rrTokens[l - 1].replace(/\"/g, ''),\n    priority: parseInt(rrTokens[l - 3], 10),\n    weight: parseInt(rrTokens[l - 2], 10)\n  };\n  if (!isNaN(rrTokens[1])) result.ttl = parseInt(rrTokens[1], 10);\n  return result;\n}","\n\nimport { TransactionBuilder, address as bjsAddress, TxOutput } from 'bitcoinjs-lib'\nimport * as BN from 'bn.js'\n\nimport {\n  addUTXOsToFund, DUST_MINIMUM,\n  estimateTXBytes, sumOutputValues, hash160, signInputs, getTransactionInsideBuilder\n} from './utils'\nimport {\n  makePreorderSkeleton, makeRegisterSkeleton,\n  makeUpdateSkeleton, makeTransferSkeleton, makeRenewalSkeleton,\n  makeRevokeSkeleton, makeNamespacePreorderSkeleton,\n  makeNamespaceRevealSkeleton, makeNamespaceReadySkeleton,\n  makeNameImportSkeleton, makeAnnounceSkeleton,\n  makeTokenTransferSkeleton, BlockstackNamespace\n} from './skeletons'\n\nimport { config } from '../config'\nimport { InvalidAmountError, InvalidParameterError } from '../errors'\nimport { TransactionSigner, PubkeyHashSigner } from './signers'\nimport { UTXO } from '../network'\n\nconst dummyConsensusHash = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'\nconst dummyZonefileHash  = 'ffffffffffffffffffffffffffffffffffffffff'\n\n/**\n* @ignore\n*/\nfunction addOwnerInput(utxos: UTXO[],\n                       ownerAddress: string,\n                       txB: TransactionBuilder,\n                       addChangeOut: boolean = true\n) {\n  // add an owner UTXO and a change out.\n  if (utxos.length <= 0) {\n    throw new Error('Owner has no UTXOs for UPDATE.')\n  }\n\n  utxos.sort((a, b) => a.value - b.value)\n  const ownerUTXO = utxos[0]\n  const ownerInput = txB.addInput(ownerUTXO.tx_hash, ownerUTXO.tx_output_n)\n  if (addChangeOut) {\n    txB.addOutput(ownerAddress, ownerUTXO.value)\n  }\n  return { index: ownerInput, value: ownerUTXO.value }\n}\n\n/**\n* @ignore\n*/\nfunction fundTransaction(txB: TransactionBuilder, paymentAddress: string,\n                         utxos: UTXO[],\n                         feeRate: number, inAmounts: number, changeIndex: number | null = null\n) {\n  // change index for the payer.\n  if (changeIndex === null) {\n    changeIndex = txB.addOutput(paymentAddress, DUST_MINIMUM)\n  }\n  // fund the transaction fee.\n  const txFee = estimateTXBytes(txB, 0, 0) * feeRate\n  const outAmounts = sumOutputValues(txB)\n  const change = addUTXOsToFund(txB, utxos, txFee + outAmounts - inAmounts, feeRate)\n  const txInner = getTransactionInsideBuilder(txB)\n  const txOut = txInner.outs[changeIndex] as TxOutput\n  txOut.value += change\n  return txB\n}\n\n/**\n* @ignore\n*/\nfunction returnTransactionHex(txB: TransactionBuilder,\n                              buildIncomplete: boolean = false\n) {\n  if (buildIncomplete) {\n    return txB.buildIncomplete().toHex()\n  } else {\n    return txB.build().toHex()\n  }\n}\n\n/**\n* @ignore\n*/\nfunction getTransactionSigner(input: string | TransactionSigner): TransactionSigner {\n  if (typeof input === 'string') {\n    return PubkeyHashSigner.fromHexString(input)\n  } else {\n    return input\n  }\n}\n\n/**\n * Estimates cost of a preorder transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to preorder\n * @param {String} destinationAddress - the address to receive the name (this\n *    must be passed as the 'registrationAddress' in the register transaction)\n * @param {String} paymentAddress - the address funding the preorder\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the preorder. This includes a 5500 satoshi dust output for the preorder.\n *    Even though this is a change output, the payer must supply enough funds\n *    to generate this output, so we include it in the cost.\n * @private\n */\nfunction estimatePreorder(fullyQualifiedName: string,\n                          destinationAddress: string,\n                          paymentAddress: string,\n                          paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const preorderPromise = network.getNamePrice(fullyQualifiedName)\n    .then(namePrice => makePreorderSkeleton(\n      fullyQualifiedName, dummyConsensusHash, paymentAddress,\n      network.getDefaultBurnAddress(), namePrice,\n      destinationAddress\n    ))\n\n  return Promise.all([network.getFeeRate(), preorderPromise])\n    .then(([feeRate, preorderTX]) => {\n      const outputsValue = sumOutputValues(preorderTX)\n      const txFee = feeRate * estimateTXBytes(preorderTX, paymentUtxos, 0)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates cost of a register transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to register\n * @param {String} registerAddress - the address to receive the name\n * @param {String} paymentAddress - the address funding the register\n * @param {Boolean} includingZonefile - whether or not we will broadcast\n *    a zonefile hash as part  of the register\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the register.\n * @private\n */\nfunction estimateRegister(fullyQualifiedName: string,\n                          registerAddress: string,\n                          paymentAddress: string,\n                          includingZonefile: boolean = false,\n                          paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  let valueHash\n  if (includingZonefile) {\n    valueHash = dummyZonefileHash\n  }\n\n  const registerTX = makeRegisterSkeleton(\n    fullyQualifiedName, registerAddress, valueHash\n  )\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(registerTX)\n      // 1 additional output for payer change\n      const txFee = feeRate * estimateTXBytes(registerTX, paymentUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates cost of an update transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to update\n * @param {String} ownerAddress - the owner of the name\n * @param {String} paymentAddress - the address funding the update\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the update.\n * @private\n */\nasync function estimateUpdate(fullyQualifiedName: string,\n                              ownerAddress: string,\n                              paymentAddress: string,\n                              paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  const updateTX = makeUpdateSkeleton(\n    fullyQualifiedName, dummyConsensusHash, dummyZonefileHash\n  )\n\n  const feeRate = await network.getFeeRate()\n  const outputsValue = sumOutputValues(updateTX)\n  // 1 additional input for the owner\n  // 2 additional outputs for owner / payer change\n  const txFee = feeRate * estimateTXBytes(updateTX, 1 + paymentUtxos, 2)\n  return txFee + outputsValue\n}\n\n/**\n * Estimates cost of an transfer transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to transfer\n * @param {String} destinationAddress - the next owner of the name\n * @param {String} ownerAddress - the current owner of the name\n * @param {String} paymentAddress - the address funding the transfer\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the transfer.\n * @private\n */\nasync function estimateTransfer(fullyQualifiedName: string,\n                                destinationAddress: string,\n                                ownerAddress: string,\n                                paymentAddress: string,\n                                paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  const transferTX = makeTransferSkeleton(\n    fullyQualifiedName, dummyConsensusHash,\n    destinationAddress)\n\n  const feeRate = await network.getFeeRate()\n  const outputsValue = sumOutputValues(transferTX)\n  // 1 additional input for the owner\n  // 2 additional outputs for owner / payer change\n  const txFee = feeRate * estimateTXBytes(transferTX, 1 + paymentUtxos, 2)\n  return txFee + outputsValue\n}\n\n/**\n * Estimates cost of an transfer transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to renew\n * @param {String} destinationAddress - the next owner of the name\n * @param {String} ownerAddress - the current owner of the name\n * @param {String} paymentAddress - the address funding the transfer\n * @param {Boolean} includingZonefile - whether or not we will broadcast a zonefile hash\n      in the renewal operation\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the transfer.\n * @private\n */\nfunction estimateRenewal(fullyQualifiedName: string,\n                         destinationAddress: string,\n                         ownerAddress: string,\n                         paymentAddress: string,\n                         includingZonefile: boolean = false,\n                         paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  let valueHash: string\n  if (includingZonefile) {\n    valueHash = dummyZonefileHash\n  }\n\n  const renewalPromise = network.getNamePrice(fullyQualifiedName)\n    .then(namePrice => makeRenewalSkeleton(\n      fullyQualifiedName, destinationAddress, ownerAddress,\n      network.getDefaultBurnAddress(), namePrice, valueHash\n    ))\n\n  return Promise.all([network.getFeeRate(), renewalPromise])\n    .then(([feeRate, renewalTX]) => {\n      const outputsValue = sumOutputValues(renewalTX)\n      // 1 additional input for the owner\n      // and renewal skeleton includes all outputs for owner change, but not for payer change.\n      const txFee = feeRate * estimateTXBytes(renewalTX, 1 + paymentUtxos, 1)\n      return txFee + outputsValue - 5500 // don't count the dust change for old owner.\n    })\n}\n\n/**\n * Estimates cost of a revoke transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to revoke\n * @param {String} ownerAddress - the current owner of the name\n * @param {String} paymentAddress  the address funding the revoke\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund the\n *    revoke.\n * @private\n */\nfunction estimateRevoke(fullyQualifiedName: string,\n                        ownerAddress: string,\n                        paymentAddress: string,\n                        paymentUtxos: number = 1\n): Promise<number>  {\n  const network = config.network\n  const revokeTX = makeRevokeSkeleton(fullyQualifiedName)\n\n  return Promise.all([network.getFeeRate()])\n    .then(([feeRate]) => {\n      const outputsValue = sumOutputValues(revokeTX)\n      // 1 additional input for owner\n      // 1 additional output for payer change\n      const txFee = feeRate * estimateTXBytes(revokeTX, 1 + paymentUtxos, 2)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates cost of a namespace preorder transaction for a namespace\n * @param {String} namespaceID - the namespace to preorder\n * @param {String} revealAddress - the address to receive the namespace (this\n *    must be passed as the 'revealAddress' in the namespace-reveal transaction)\n * @param {String} paymentAddress - the address funding the preorder\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address.\n * @returns {Promise} - a promise which resolves to the satoshi cost to fund\n *    the preorder. This includes a 5500 satoshi dust output for the preorder.\n *    Even though this is a change output, the payer must supply enough funds\n *    to generate this output, so we include it in the cost.\n * @private\n */\nfunction estimateNamespacePreorder(namespaceID: string,\n                                   revealAddress: string,\n                                   paymentAddress: string,\n                                   paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n\n  const preorderPromise = network.getNamespacePrice(namespaceID)\n    .then(namespacePrice => makeNamespacePreorderSkeleton(\n      namespaceID, dummyConsensusHash, paymentAddress, revealAddress,\n      namespacePrice\n    ))\n\n  return Promise.all([network.getFeeRate(), preorderPromise])\n    .then(([feeRate, preorderTX]) => {\n      const outputsValue = sumOutputValues(preorderTX)\n      const txFee = feeRate * estimateTXBytes(preorderTX, paymentUtxos, 0)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates cost of a namesapce reveal transaction for a namespace\n * @param {BlockstackNamespace} namespace - the namespace to reveal\n * @param {String} revealAddress - the address to receive the namespace\n *    (this must have been passed as 'revealAddress' to a prior namespace\n *    preorder)\n * @param {String} paymentAddress - the address that pays for this transaction\n * @param {Number} paymentUtxos - the number of UTXOs we expect will be required\n *    from the payment address\n * @returns {Promise} - a promise which resolves to the satoshi cost to\n *    fund the reveal.  This includes a 5500 satoshi dust output for the\n *    preorder.  Even though this is a change output, the payer must have\n *    enough funds to generate this output, so we include it in the cost.\n * @private\n */\nfunction estimateNamespaceReveal(namespace: BlockstackNamespace,\n                                 revealAddress: string,\n                                 paymentAddress: string,\n                                 paymentUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const revealTX = makeNamespaceRevealSkeleton(namespace, revealAddress)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(revealTX)\n      // 1 additional output for payer change\n      const txFee = feeRate * estimateTXBytes(revealTX, paymentUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates the cost of a namespace-ready transaction for a namespace\n * @param {String} namespaceID - the namespace to ready\n * @param {Number} revealUtxos - the number of UTXOs we expect will\n *  be required from the reveal address\n * @returns {Promise} - a promise which resolves to the satoshi cost to\n *  fund this namespacey-ready transaction.\n * @private\n */\nfunction estimateNamespaceReady(namespaceID: string,\n                                revealUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const readyTX = makeNamespaceReadySkeleton(namespaceID)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(readyTX)\n      const txFee = feeRate * estimateTXBytes(readyTX, revealUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates the cost of a name-import transaction\n * @param {String} name - the fully-qualified name\n * @param {String} recipientAddr - the recipient\n * @param {String} zonefileHash - the zone file hash\n * @param {Number} importUtxos - the number of UTXOs we expect will\n *  be required from the importer address\n * @returns {Promise} - a promise which resolves to the satoshi cost\n *  to fund this name-import transaction\n * @private\n */\nfunction estimateNameImport(name: string,\n                            recipientAddr: string,\n                            zonefileHash: string,\n                            importUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const importTX = makeNameImportSkeleton(name, recipientAddr, zonefileHash)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(importTX)\n      const txFee = feeRate * estimateTXBytes(importTX, importUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates the cost of an announce transaction\n * @param {String} messageHash - the hash of the message\n * @param {Number} senderUtxos - the number of utxos we expect will\n *  be required from the importer address\n * @returns {Promise} - a promise which resolves to the satoshi cost\n *  to fund this announce transaction\n * @private\n */\nfunction estimateAnnounce(messageHash: string,\n                          senderUtxos: number = 1\n): Promise<number> {\n  const network = config.network\n  const announceTX = makeAnnounceSkeleton(messageHash)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(announceTX)\n      const txFee = feeRate * estimateTXBytes(announceTX, senderUtxos, 1)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Estimates the cost of a token-transfer transaction\n * @param {String} recipientAddress - the recipient of the tokens\n * @param {String} tokenType - the type of token to spend\n * @param {Object} tokenAmount - a 64-bit unsigned BigInteger encoding the number of tokens\n *   to spend\n * @param {String} scratchArea - an arbitrary string to store with the transaction\n * @param {Number} senderUtxos - the number of utxos we expect will\n *  be required from the importer address\n * @param {Number} additionalOutputs - the number of outputs we expect to add beyond\n *  just the recipient output (default = 1, if the token owner is also the bitcoin funder)\n * @returns {Promise} - a promise which resolves to the satoshi cost to\n *  fund this token-transfer transaction\n * @private\n */\nfunction estimateTokenTransfer(recipientAddress: string,\n                               tokenType: string,\n                               tokenAmount: BN,\n                               scratchArea: string,\n                               senderUtxos: number = 1,\n                               additionalOutputs: number = 1\n) {\n  const network = config.network\n  const tokenTransferTX = makeTokenTransferSkeleton(\n    recipientAddress, dummyConsensusHash, tokenType, tokenAmount, scratchArea)\n\n  return network.getFeeRate()\n    .then((feeRate) => {\n      const outputsValue = sumOutputValues(tokenTransferTX)\n      const txFee = feeRate * estimateTXBytes(tokenTransferTX, senderUtxos, additionalOutputs)\n      return txFee + outputsValue\n    })\n}\n\n/**\n * Generates a preorder transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to pre-order\n * @param {String} destinationAddress - the address to receive the name (this\n *    must be passed as the 'registrationAddress' in the register transaction)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the transaction or a transaction signer object\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n * indicating whether the function should attempt to return an unsigned (or not fully signed)\n * transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nasync function makePreorder(fullyQualifiedName: string,\n                            destinationAddress: string,\n                            paymentKeyIn: string | TransactionSigner,\n                            buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const namespace = fullyQualifiedName.split('.').pop()\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const preorderAddress = await paymentKey.getAddress()\n\n\n  const preorderPromise = Promise.all([network.getConsensusHash(),\n                                       network.getNamePrice(fullyQualifiedName),\n                                       network.getNamespaceBurnAddress(namespace)])\n    .then(([consensusHash, namePrice, burnAddress]) => makePreorderSkeleton(\n      fullyQualifiedName, consensusHash, preorderAddress, burnAddress,\n      namePrice, destinationAddress\n    ))\n\n  return Promise.all([network.getUTXOs(preorderAddress), network.getFeeRate(), preorderPromise])\n    .then(([utxos, feeRate, preorderSkeleton]) => {\n      const txB = TransactionBuilder.fromTransaction(preorderSkeleton, network.layer1)\n      txB.setVersion(1)\n\n      const changeIndex = 1 // preorder skeleton always creates a change output at index = 1\n      const signingTxB = fundTransaction(txB, preorderAddress, utxos, feeRate, 0, changeIndex)\n\n      return signInputs(signingTxB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates an update transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to update\n * @param {String | TransactionSigner} ownerKeyIn - a hex string of the\n *    owner key, or a transaction signer object. This will provide one\n *    UTXO input, and also recieve a dust output.\n * @param {String | TransactionSigner} paymentKeyIn - a hex string, or a\n *    transaction signer object, of the private key used to fund the\n *    transaction's txfees\n * @param {String} zonefile - the zonefile data to update (this will be hashed\n *    to include in the transaction), the zonefile itself must be published\n *    after the UPDATE propagates.\n * @param {String} valueHash - if given, this is the hash to store (instead of\n *    zonefile).  zonefile will be ignored if this is given.\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nasync function makeUpdate(fullyQualifiedName: string,\n                          ownerKeyIn: string | TransactionSigner,\n                          paymentKeyIn: string | TransactionSigner,\n                          zonefile: string,\n                          valueHash: string = '',\n                          buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n  if (!valueHash && !zonefile) {\n    return Promise.reject(\n      new Error('Need zonefile or valueHash arguments')\n    )\n  }\n  if (valueHash.length === 0) {\n    if (!zonefile) {\n      return Promise.reject(\n        new Error('Need zonefile or valueHash arguments')\n      )\n    }\n    valueHash = hash160(Buffer.from(zonefile)).toString('hex')\n  } else if (valueHash.length !== 40) {\n    return Promise.reject(\n      new Error(`Invalid valueHash ${valueHash}`)\n    )\n  }\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n  const ownerKey = getTransactionSigner(ownerKeyIn)\n\n  return Promise.all([ownerKey.getAddress(), paymentKey.getAddress()])\n    .then(([ownerAddress, paymentAddress]) => {\n      const txPromise = network.getConsensusHash()\n        .then(consensusHash => makeUpdateSkeleton(fullyQualifiedName, consensusHash, valueHash))\n        .then((updateTX) => {\n          const txB = TransactionBuilder.fromTransaction(updateTX, network.layer1)\n          txB.setVersion(1)\n          return txB\n        })\n\n      return Promise.all([txPromise, network.getUTXOs(paymentAddress),\n                          network.getUTXOs(ownerAddress), network.getFeeRate()])\n        .then(([txB, payerUtxos, ownerUtxos, feeRate]) => {\n          const ownerInput = addOwnerInput(ownerUtxos, ownerAddress, txB)\n          const signingTxB = fundTransaction(txB, paymentAddress, payerUtxos, feeRate,\n                                             ownerInput.value)\n\n          return signInputs(signingTxB, paymentKey, [{ index: ownerInput.index, signer: ownerKey }])\n        })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a register transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to register\n * @param {String} registerAddress - the address to receive the name (this\n *    must have been passed as the 'destinationAddress' in the preorder transaction)\n *    this address will receive a dust UTXO\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key (or a TransactionSigner object) used to fund the\n *    transaction (this *must* be the same as the payment address used\n *    to fund the preorder)\n * @param {String} zonefile - the zonefile data to include (this will be hashed\n *    to include in the transaction), the zonefile itself must be published\n *    after the UPDATE propagates.\n * @param {String} valueHash - the hash of the zone file data to include.\n *    It will be used instead of zonefile, if given\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nasync function makeRegister(fullyQualifiedName: string,\n                            registerAddress: string,\n                            paymentKeyIn: string | TransactionSigner,\n                            zonefile: string = null,\n                            valueHash: string = null,\n                            buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n  if (!valueHash && !!zonefile) {\n    valueHash = hash160(Buffer.from(zonefile)).toString('hex')\n  } else if (!!valueHash && valueHash.length !== 40) {\n    return Promise.reject(\n      new Error(`Invalid zonefile hash ${valueHash}`)\n    )\n  }\n\n  const registerSkeleton = makeRegisterSkeleton(\n    fullyQualifiedName, registerAddress, valueHash\n  )\n\n  const txB = TransactionBuilder.fromTransaction(registerSkeleton, network.layer1)\n  txB.setVersion(1)\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const paymentAddress = await paymentKey.getAddress()\n\n  return Promise.all([network.getUTXOs(paymentAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const signingTxB = fundTransaction(txB, paymentAddress, utxos, feeRate, 0)\n\n      return signInputs(signingTxB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n\n/**\n * Generates a transfer transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to transfer\n * @param {String} destinationAddress - the address to receive the name.\n *    this address will receive a dust UTXO\n * @param {String | TransactionSigner} ownerKeyIn - a hex string of\n *    the current owner's private key (or a TransactionSigner object)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the transaction (or a\n *    TransactionSigner object)\n * @param {Boolean} keepZonefile - if true, then preserve the name's zone file\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *   indicating whether the function should attempt to return an unsigned (or not fully signed)\n *   transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nfunction makeTransfer(fullyQualifiedName: string,\n                      destinationAddress: string,\n                      ownerKeyIn: string | TransactionSigner,\n                      paymentKeyIn: string | TransactionSigner,\n                      keepZonefile: boolean = false,\n                      buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n  const ownerKey = getTransactionSigner(ownerKeyIn)\n\n  return Promise.all([ownerKey.getAddress(), paymentKey.getAddress()])\n    .then(([ownerAddress, paymentAddress]) => {\n      const txPromise = network.getConsensusHash()\n        .then(consensusHash => makeTransferSkeleton(\n          fullyQualifiedName, consensusHash, destinationAddress, keepZonefile\n        ))\n        .then((transferTX) => {\n          const txB = TransactionBuilder\n            .fromTransaction(transferTX, network.layer1)\n          txB.setVersion(1)\n          return txB\n        })\n\n      return Promise.all([txPromise, network.getUTXOs(paymentAddress),\n                          network.getUTXOs(ownerAddress), network.getFeeRate()])\n        .then(([txB, payerUtxos, ownerUtxos, feeRate]) => {\n          const ownerInput = addOwnerInput(ownerUtxos, ownerAddress, txB)\n          const signingTxB = fundTransaction(txB, paymentAddress, payerUtxos, feeRate,\n                                             ownerInput.value)\n\n          return signInputs(signingTxB, paymentKey, [{ index: ownerInput.index, signer: ownerKey }])\n        })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a revoke transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to revoke\n * @param {String | TransactionSigner} ownerKeyIn - a hex string of\n *    the current owner's private key (or a TransactionSigner object)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the transaction (or a\n *    TransactionSigner object)\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nfunction makeRevoke(fullyQualifiedName: string,\n                    ownerKeyIn: string | TransactionSigner,\n                    paymentKeyIn: string | TransactionSigner,\n                    buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n  const ownerKey = getTransactionSigner(ownerKeyIn)\n\n  return Promise.all([ownerKey.getAddress(), paymentKey.getAddress()])\n    .then(([ownerAddress, paymentAddress]) => {\n      const revokeTX = makeRevokeSkeleton(fullyQualifiedName)\n      const txPromise = TransactionBuilder.fromTransaction(revokeTX, network.layer1)\n      txPromise.setVersion(1)\n\n\n      return Promise.all([txPromise, network.getUTXOs(paymentAddress),\n                          network.getUTXOs(ownerAddress), network.getFeeRate()])\n        .then(([txB, payerUtxos, ownerUtxos, feeRate]) => {\n          const ownerInput = addOwnerInput(ownerUtxos, ownerAddress, txB)\n          const signingTxB = fundTransaction(txB, paymentAddress, payerUtxos, feeRate,\n                                             ownerInput.value)\n          return signInputs(signingTxB, paymentKey, [{ index: ownerInput.index, signer: ownerKey }])\n        })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a renewal transaction for a domain name.\n * @param {String} fullyQualifiedName - the name to transfer\n * @param {String} destinationAddress - the address to receive the name after renewal\n *    this address will receive a dust UTXO\n * @param {String | TransactionSigner} ownerKeyIn - a hex string of\n *    the current owner's private key (or a TransactionSigner object)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the renewal (or a TransactionSigner\n *    object)\n * @param {String} zonefile - the zonefile data to include, if given (this will be hashed\n *    to include in the transaction), the zonefile itself must be published\n *    after the RENEWAL propagates.\n * @param {String} valueHash - the raw zone file hash to include (this will be used\n *    instead of zonefile, if given).\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n */\nasync function makeRenewal(fullyQualifiedName: string,\n                           destinationAddress: string,\n                           ownerKeyIn: string | TransactionSigner,\n                           paymentKeyIn: string | TransactionSigner,\n                           zonefile: string = null,\n                           valueHash: string = null,\n                           buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  if (!valueHash && !!zonefile) {\n    valueHash = hash160(Buffer.from(zonefile)).toString('hex')\n  }\n\n  const namespace = fullyQualifiedName.split('.').pop()\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n  const ownerKey = getTransactionSigner(ownerKeyIn)\n\n  return Promise.all([ownerKey.getAddress(), paymentKey.getAddress()])\n    .then(([ownerAddress, paymentAddress]) => {\n      const txPromise = Promise.all([network.getNamePrice(fullyQualifiedName),\n                                     network.getNamespaceBurnAddress(namespace)])\n        .then(([namePrice, burnAddress]) => makeRenewalSkeleton(\n          fullyQualifiedName, destinationAddress, ownerAddress,\n          burnAddress, namePrice, valueHash\n        ))\n        .then((tx) => {\n          const txB = TransactionBuilder.fromTransaction(tx, network.layer1)\n          txB.setVersion(1)\n          return txB\n        })\n\n      return Promise.all([txPromise, network.getUTXOs(paymentAddress),\n                          network.getUTXOs(ownerAddress), network.getFeeRate()])\n        .then(([txB, payerUtxos, ownerUtxos, feeRate]) => {\n          const ownerInput = addOwnerInput(ownerUtxos, ownerAddress, txB, false)\n          const txInner = getTransactionInsideBuilder(txB)\n          const ownerOutput = txInner.outs[2] as TxOutput\n          const ownerOutputAddr = bjsAddress.fromOutputScript(\n            ownerOutput.script, network.layer1\n          )\n          if (ownerOutputAddr !== ownerAddress) {\n            return Promise.reject(\n              new Error(`Original owner ${ownerAddress} should have an output at `\n                        + `index 2 in transaction was ${ownerOutputAddr}`)\n            )\n          }\n          ownerOutput.value = ownerInput.value\n          const signingTxB = fundTransaction(txB, paymentAddress, payerUtxos, feeRate,\n                                             ownerInput.value)\n          return signInputs(signingTxB, paymentKey, [{ index: ownerInput.index, signer: ownerKey }])\n        })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n\n/**\n * Generates a namespace preorder transaction for a namespace\n * @param {String} namespaceID - the namespace to pre-order\n * @param {String} revealAddress - the address to receive the namespace (this\n *    must be passed as the 'revealAddress' in the namespace-reveal transaction)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string of\n *    the private key used to fund the transaction (or a\n *    TransactionSigner object)\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *    indicating whether the function should attempt to return an unsigned (or not fully signed)\n *    transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *    this function *does not* perform the requisite safety checks -- please see\n *    the safety module for those.\n * @private\n * \n * @ignore\n */\nasync function makeNamespacePreorder(namespaceID: string,\n                                     revealAddress: string,\n                                     paymentKeyIn: string | TransactionSigner,\n                                     buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const preorderAddress = await paymentKey.getAddress()\n  const preorderPromise = Promise.all([network.getConsensusHash(),\n                                       network.getNamespacePrice(namespaceID)])\n    .then(([consensusHash, namespacePrice]) => makeNamespacePreorderSkeleton(\n      namespaceID, consensusHash, preorderAddress, revealAddress,\n      namespacePrice))\n\n  return Promise.all([network.getUTXOs(preorderAddress), network.getFeeRate(), preorderPromise])\n    .then(([utxos, feeRate, preorderSkeleton]) => {\n      const txB = TransactionBuilder.fromTransaction(preorderSkeleton, network.layer1)\n      txB.setVersion(1)\n\n      const changeIndex = 1 // preorder skeleton always creates a change output at index = 1\n      const signingTxB = fundTransaction(txB, preorderAddress, utxos, feeRate, 0, changeIndex)\n\n      return signInputs(signingTxB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n\n/**\n * Generates a namespace reveal transaction for a namespace\n * @param {BlockstackNamespace} namespace - the namespace to reveal\n * @param {String} revealAddress - the address to receive the namespace (this\n *   must be passed as the 'revealAddress' in the namespace-reveal transaction)\n * @param {String | TransactionSigner} paymentKeyIn - a hex string (or\n *   a TransactionSigner object) of the private key used to fund the\n *   transaction\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *   indicating whether the function should attempt to return an unsigned (or not fully signed)\n *   transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *   this function *does not* perform the requisite safety checks -- please see\n *   the safety module for those.\n * @private\n */\nasync function makeNamespaceReveal(namespace: BlockstackNamespace,\n                                   revealAddress: string,\n                                   paymentKeyIn: string | TransactionSigner,\n                                   buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  if (!namespace.check()) {\n    return Promise.reject(new Error('Invalid namespace'))\n  }\n\n  const namespaceRevealTX = makeNamespaceRevealSkeleton(namespace, revealAddress)\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const preorderAddress = await paymentKey.getAddress()\n  return Promise.all([network.getUTXOs(preorderAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = TransactionBuilder\n        .fromTransaction(namespaceRevealTX, network.layer1)\n      txB.setVersion(1)\n      const signingTxB = fundTransaction(txB, preorderAddress, utxos, feeRate, 0)\n\n      return signInputs(signingTxB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n\n/**\n * Generates a namespace ready transaction for a namespace\n * @param {String} namespaceID - the namespace to launch\n * @param {String | TransactionSigner} revealKeyIn - the private key\n *  of the 'revealAddress' used to reveal the namespace\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *  indicating whether the function should attempt to return an unsigned (or not fully signed)\n *  transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n *  this function *does not* perform the requisite safety checks -- please see\n *  the safety module for those.\n * @private\n */\nasync function makeNamespaceReady(namespaceID: string,\n                                  revealKeyIn: string | TransactionSigner,\n                                  buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const namespaceReadyTX = makeNamespaceReadySkeleton(namespaceID)\n\n  const revealKey = getTransactionSigner(revealKeyIn)\n\n  const revealAddress = await revealKey.getAddress()\n  return Promise.all([network.getUTXOs(revealAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = TransactionBuilder.fromTransaction(namespaceReadyTX, network.layer1)\n      txB.setVersion(1)\n      const signingTxB = fundTransaction(txB, revealAddress, utxos, feeRate, 0)\n      return signInputs(signingTxB, revealKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a name import transaction for a namespace\n * @param {String} name - the name to import\n * @param {String} recipientAddr - the address to receive the name\n * @param {String} zonefileHash - the hash of the zonefile to give this name\n * @param {String | TransactionSigner} importerKeyIn - the private key\n * that pays for the import\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n * indicating whether the function should attempt to return an unsigned (or not fully signed)\n * transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n * this function does not perform the requisite safety checks -- please see\n * the safety module for those.\n * @private\n */\nasync function makeNameImport(name: string,\n                              recipientAddr: string,\n                              zonefileHash: string,\n                              importerKeyIn: string | TransactionSigner,\n                              buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const nameImportTX = makeNameImportSkeleton(name, recipientAddr, zonefileHash)\n\n  const importerKey = getTransactionSigner(importerKeyIn)\n\n  const importerAddress = await importerKey.getAddress()\n  return Promise.all([network.getUTXOs(importerAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = TransactionBuilder.fromTransaction(nameImportTX, network.layer1)\n      const signingTxB = fundTransaction(txB, importerAddress, utxos, feeRate, 0)\n      return signInputs(signingTxB, importerKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates an announce transaction\n * @param {String} messageHash - the hash of the message to send.  Should be\n *  an already-announced zone file hash\n * @param {String | TransactionSigner} senderKeyIn - the private key\n *  that pays for the transaction.  Should be the key that owns the\n *  name that the message recipients subscribe to\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n * indicating whether the function should attempt to return an unsigned (or not fully signed)\n * transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n * this function does not perform the requisite safety checks -- please see the\n * safety module for those.\n * @private\n */\nasync function makeAnnounce(messageHash: string,\n                            senderKeyIn: string | TransactionSigner,\n                            buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n\n  const announceTX = makeAnnounceSkeleton(messageHash)\n\n  const senderKey = getTransactionSigner(senderKeyIn)\n\n  const senderAddress = await senderKey.getAddress()\n  return Promise.all([network.getUTXOs(senderAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = TransactionBuilder.fromTransaction(announceTX, network.layer1)\n      const signingTxB = fundTransaction(txB, senderAddress, utxos, feeRate, 0)\n      return signInputs(signingTxB, senderKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a token-transfer transaction\n * @param {String} recipientAddress - the address to receive the tokens\n * @param {String} tokenType - the type of tokens to send\n * @param {Object} tokenAmount - the BigInteger encoding of an unsigned 64-bit number of\n *  tokens to send\n * @param {String} scratchArea - an arbitrary string to include with the transaction\n * @param {String | TransactionSigner} senderKeyIn - the hex-encoded private key to send\n *   the tokens\n * @param {String | TransactionSigner} btcFunderKeyIn - the hex-encoded private key to fund\n *   the bitcoin fees for the transaction. Optional -- if not passed, will attempt to\n *   fund with sender key.\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n *   indicating whether the function should attempt to return an unsigned (or not fully signed)\n *   transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n * This function does not perform the requisite safety checks -- please see the\n * safety module for those.\n * @private\n */\nfunction makeTokenTransfer(recipientAddress: string, tokenType: string,\n                           tokenAmount: BN, scratchArea: string,\n                           senderKeyIn: string | TransactionSigner,\n                           btcFunderKeyIn?: string | TransactionSigner,\n                           buildIncomplete: boolean = false\n): Promise<string> {\n  const network = config.network\n  const separateFunder = !!btcFunderKeyIn\n\n  const senderKey = getTransactionSigner(senderKeyIn)\n  const btcKey = btcFunderKeyIn ? getTransactionSigner(btcFunderKeyIn) : senderKey\n\n  const txPromise = network.getConsensusHash()\n    .then(consensusHash =>  makeTokenTransferSkeleton(\n      recipientAddress, consensusHash, tokenType, tokenAmount, scratchArea))\n\n  return Promise.all([senderKey.getAddress(), btcKey.getAddress()])\n    .then(([senderAddress, btcAddress]) => {\n      const btcUTXOsPromise = separateFunder\n        ? network.getUTXOs(btcAddress) : Promise.resolve<UTXO[]>([])\n      return Promise.all([\n        network.getUTXOs(senderAddress),\n        btcUTXOsPromise,\n        network.getFeeRate(),\n        txPromise\n      ]).then(([senderUTXOs, btcUTXOs, feeRate, tokenTransferTX]) => {\n        const txB = TransactionBuilder.fromTransaction(tokenTransferTX, network.layer1)\n\n        if (separateFunder) {\n          const payerInput = addOwnerInput(senderUTXOs, senderAddress, txB)\n          const signingTxB = fundTransaction(txB, btcAddress, btcUTXOs, feeRate, payerInput.value)\n          return signInputs(signingTxB, btcKey,\n                            [{ index: payerInput.index, signer: senderKey }])\n        } else {\n          const signingTxB = fundTransaction(txB, senderAddress, senderUTXOs, feeRate, 0)\n          return signInputs(signingTxB, senderKey)\n        }\n      })\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\n/**\n * Generates a bitcoin spend to a specified address. This will fund up to `amount`\n *   of satoshis from the payer's UTXOs. It will generate a change output if and only\n *   if the amount of leftover change is *greater* than the additional fees associated\n *   with the extra output. If the requested amount is not enough to fund the transaction's\n *   associated fees, then this will reject with a InvalidAmountError\n *\n * UTXOs are selected largest to smallest, and UTXOs which cannot fund the fees associated\n *   with their own input will not be included.\n *\n * If you specify an amount > the total balance of the payer address, then this will\n *   generate a maximum spend transaction\n *\n * @param {String} destinationAddress - the address to receive the bitcoin payment\n * @param {String | TransactionSigner} paymentKeyIn - the private key\n *    used to fund the bitcoin spend\n * @param {number} amount - the amount in satoshis for the payment address to\n *    spend in this transaction\n * @param {boolean} buildIncomplete - optional boolean, defaults to false,\n * indicating whether the function should attempt to return an unsigned (or not fully signed)\n * transaction. Useful for passing around a TX for multi-sig input signing.\n * @returns {Promise} - a promise which resolves to the hex-encoded transaction.\n * @private\n */\nasync function makeBitcoinSpend(destinationAddress: string,\n                                paymentKeyIn: string | TransactionSigner,\n                                amount: number,\n                                buildIncomplete: boolean = false\n): Promise<string> {\n  if (amount <= 0) {\n    return Promise.reject(new InvalidParameterError('amount', 'amount must be greater than zero'))\n  }\n\n  const network = config.network\n\n  const paymentKey = getTransactionSigner(paymentKeyIn)\n\n  const paymentAddress = await paymentKey.getAddress()\n\n  return Promise.all([network.getUTXOs(paymentAddress), network.getFeeRate()])\n    .then(([utxos, feeRate]) => {\n      const txB = new TransactionBuilder(network.layer1)\n      txB.setVersion(1)\n      const destinationIndex = txB.addOutput(destinationAddress, 0)\n\n      // will add utxos up to _amount_ and return the amount of leftover _change_\n      let change\n      try {\n        change = addUTXOsToFund(txB, utxos, amount, feeRate, false)\n      } catch (err) {\n        if (err.name === 'NotEnoughFundsError') {\n          // actual amount funded = amount requested - remainder\n          amount -= err.leftToFund\n          change = 0\n        } else {\n          throw err\n        }\n      }\n\n      let feesToPay = feeRate * estimateTXBytes(txB, 0, 0)\n      const feeForChange = feeRate * (estimateTXBytes(txB, 0, 1)) - feesToPay\n\n      // it's worthwhile to add a change output\n      if (change > feeForChange) {\n        feesToPay += feeForChange\n        txB.addOutput(paymentAddress, change)\n      }\n\n      // now let's compute how much output is leftover once we pay the fees.\n      const outputAmount = amount - feesToPay\n      if (outputAmount < DUST_MINIMUM) {\n        throw new InvalidAmountError(feesToPay, amount)\n      }\n\n      // we need to manually set the output values now\n      const txInner = getTransactionInsideBuilder(txB)\n      const txOut = txInner.outs[destinationIndex] as TxOutput\n      txOut.value = outputAmount\n\n      // ready to sign.\n      return signInputs(txB, paymentKey)\n    })\n    .then(signingTxB => returnTransactionHex(signingTxB, buildIncomplete))\n}\n\nexport const transactions = {\n  makeRenewal,\n  makeUpdate,\n  makePreorder,\n  makeRegister,\n  makeTransfer,\n  makeRevoke,\n  makeNamespacePreorder,\n  makeNamespaceReveal,\n  makeNamespaceReady,\n  makeBitcoinSpend,\n  makeNameImport,\n  makeAnnounce,\n  makeTokenTransfer,\n  BlockstackNamespace,\n  estimatePreorder,\n  estimateRegister,\n  estimateTransfer,\n  estimateUpdate,\n  estimateRenewal,\n  estimateRevoke,\n  estimateNamespacePreorder,\n  estimateNamespaceReveal,\n  estimateNamespaceReady,\n  estimateNameImport,\n  estimateAnnounce,\n  estimateTokenTransfer\n}\n","import { payments, bip32, BIP32Interface, ECPair } from 'bitcoinjs-lib'\nimport { mnemonicToSeed, generateMnemonic } from 'bip39'\nimport { encryptMnemonic, decryptMnemonic } from './encryption/wallet'\nimport { randomBytes, GetRandomBytes } from './encryption/cryptoRandom'\nimport { hashSha256Sync } from './encryption/sha2Hash'\nimport { TriplesecDecryptSignature } from './encryption/cryptoUtils'\nimport { ecPairToHexString } from './keys'\n\nconst APPS_NODE_INDEX = 0\nconst IDENTITY_KEYCHAIN = 888\nconst BLOCKSTACK_ON_BITCOIN = 0\n\nconst BITCOIN_BIP_44_PURPOSE = 44\nconst BITCOIN_COIN_TYPE = 0\nconst BITCOIN_ACCOUNT_INDEX = 0\n\nconst EXTERNAL_ADDRESS = 'EXTERNAL_ADDRESS'\nconst CHANGE_ADDRESS = 'CHANGE_ADDRESS'\n\n/**\n * \n * @ignore\n */\nexport type IdentityKeyPair = {\n  key: string,\n  keyID: string,\n  address: string,\n  appsNodeKey: string,\n  salt: string\n}\n\n/**\n * \n * @ignore\n */\nfunction hashCode(string: string) {\n  let hash = 0\n  if (string.length === 0) return hash\n  for (let i = 0; i < string.length; i++) {\n    const character = string.charCodeAt(i)\n    hash = (hash << 5) - hash + character\n    hash &= hash\n  }\n  return hash & 0x7fffffff\n}\n\n/**\n * \n * @ignore\n */\nfunction getNodePrivateKey(node: BIP32Interface): string {\n  return ecPairToHexString(ECPair.fromPrivateKey(node.privateKey))\n}\n\n/**\n * \n * @ignore\n */\nfunction getNodePublicKey(node: BIP32Interface): string {\n  return node.publicKey.toString('hex')\n}\n\n/**\n * Get a BIP32 node for an application-specific domain.\n * @param {String} appsNode - the BIP32Interface ir base58-encoded private key for\n * applications node\n * @param {String} salt - a string, used to salt the\n * application-specific addresses\n * @param {String} appDomain - the appDomain to generate a key for\n * @return {String} the private key hex-string. this will be a 64\n * character string\n * @ignore\n */\nexport function getLegacyAppNode(appsNode: string | BIP32Interface, \n                                 salt: string, appDomain: string): BIP32Interface {\n  const hashBuffer = hashSha256Sync(Buffer.from(`${appDomain}${salt}`))\n  const hash = hashBuffer.toString('hex')\n  const appIndex = hashCode(hash)\n  const appNodeInstance = typeof appsNode === 'string' ? bip32.fromBase58(appsNode) : appsNode\n  return appNodeInstance.deriveHardened(appIndex)\n}\n\n/**\n * The `BlockstackWallet` class manages the hierarchical derivation\n * paths for a standard Blockstack client wallet. This includes paths\n * for Bitcoin payment address, Blockstack identity addresses, Blockstack\n * application specific addresses.\n * \n * @ignore\n */\nexport class BlockstackWallet {\n  rootNode: BIP32Interface\n\n  constructor(rootNode: BIP32Interface) {\n    this.rootNode = rootNode\n  }\n\n  toBase58(): string {\n    return this.rootNode.toBase58()\n  }\n\n  /**\n   * Initialize a Blockstack wallet from a seed buffer\n   * @param {Buffer} seed - the input seed for initializing the root node\n   *  of the hierarchical wallet\n   * @return {BlockstackWallet} the constructed wallet\n   */\n  static fromSeedBuffer(seed: Buffer): BlockstackWallet {\n    return new BlockstackWallet(bip32.fromSeed(seed))\n  }\n\n  /**\n   * Initialize a Blockstack wallet from a base58 string\n   * @param {string} keychain - the Base58 string used to initialize\n   *  the root node of the hierarchical wallet\n   * @return {BlockstackWallet} the constructed wallet\n   */\n  static fromBase58(keychain: string): BlockstackWallet {\n    return new BlockstackWallet(bip32.fromBase58(keychain))\n  }\n\n  /**\n   * Initialize a blockstack wallet from an encrypted phrase & password. Throws\n   * if the password is incorrect. Supports all formats of Blockstack phrases.\n   * @param {string} data - The encrypted phrase as a hex-encoded string\n   * @param {string} password - The plain password\n   * @return {Promise<BlockstackWallet>} the constructed wallet\n   * \n   * @ignore\n   */\n  static async fromEncryptedMnemonic(data: string | Buffer, password: string, \n                                     triplesecDecrypt: TriplesecDecryptSignature\n  ): Promise<BlockstackWallet> {\n    try {\n      const mnemonic = await decryptMnemonic(data, password, triplesecDecrypt)\n      const seed = await mnemonicToSeed(mnemonic)\n      return new BlockstackWallet(bip32.fromSeed(seed))\n    } catch (err) {\n      if (err.message && err.message.startsWith('bad header;')) {\n        throw new Error('Incorrect password')\n      } else {\n        throw err\n      }\n    }\n  }\n\n  /**\n   * Generate a BIP-39 12 word mnemonic\n   * @return {Promise<string>} space-separated 12 word phrase\n   */\n  static generateMnemonic() {\n    return generateMnemonic(128, randomBytes)\n  }\n\n  /**\n   * Encrypt a mnemonic phrase with a password\n   * @param {string} mnemonic - Raw mnemonic phrase\n   * @param {string} password - Password to encrypt mnemonic with\n   * @return {Promise<string>} Hex-encoded encrypted mnemonic\n   * \n   */\n  static async encryptMnemonic(mnemonic: string, password: string, opts?: {\n    getRandomBytes?: GetRandomBytes\n  }): Promise<string> {\n    const encryptedBuffer = await encryptMnemonic(mnemonic, password, opts)\n    return encryptedBuffer.toString('hex')\n  }\n\n  getIdentityPrivateKeychain(): BIP32Interface { \n    return this.rootNode\n      .deriveHardened(IDENTITY_KEYCHAIN)\n      .deriveHardened(BLOCKSTACK_ON_BITCOIN)\n  }\n\n  getBitcoinPrivateKeychain(): BIP32Interface { \n    return this.rootNode\n      .deriveHardened(BITCOIN_BIP_44_PURPOSE)\n      .deriveHardened(BITCOIN_COIN_TYPE)\n      .deriveHardened(BITCOIN_ACCOUNT_INDEX)\n  }\n\n  getBitcoinNode(addressIndex: number, chainType: string = EXTERNAL_ADDRESS): BIP32Interface {\n    return BlockstackWallet.getNodeFromBitcoinKeychain(\n      this.getBitcoinPrivateKeychain().toBase58(),\n      addressIndex,\n      chainType\n    )\n  }\n\n  getIdentityAddressNode(identityIndex: number): BIP32Interface {\n    const identityPrivateKeychain = this.getIdentityPrivateKeychain()\n    return identityPrivateKeychain.deriveHardened(identityIndex)\n  }\n\n  static getAppsNode(identityNode: BIP32Interface): BIP32Interface {\n    return identityNode.deriveHardened(APPS_NODE_INDEX)\n  }\n\n  /**\n   * Get a salt for use with creating application specific addresses\n   * @return {String} the salt\n   */\n  getIdentitySalt(): string {\n    const identityPrivateKeychain = this.getIdentityPrivateKeychain()\n    // NOTE: This is being decoded as a utf8 string rather than a hex string\n    const publicKeyHex = Buffer.from(getNodePublicKey(identityPrivateKeychain))\n    return hashSha256Sync(publicKeyHex).toString('hex')\n  }\n\n  /**\n   * Get a bitcoin receive address at a given index\n   * @param {number} addressIndex - the index of the address\n   * @return {String} address\n   */\n  getBitcoinAddress(addressIndex: number): string { \n    return BlockstackWallet.getAddressFromBIP32Node(this.getBitcoinNode(addressIndex))\n  }\n\n  /**\n   * Get the private key hex-string for a given bitcoin receive address\n   * @param {number} addressIndex - the index of the address\n   * @return {String} the hex-string. this will be either 64\n   * characters long to denote an uncompressed bitcoin address, or 66\n   * characters long for a compressed bitcoin address.\n   */\n  getBitcoinPrivateKey(addressIndex: number): string {\n    return getNodePrivateKey(this.getBitcoinNode(addressIndex))\n  }\n\n  /**\n   * Get the root node for the bitcoin public keychain\n   * @return {String} base58-encoding of the public node\n   */\n  getBitcoinPublicKeychain(): BIP32Interface {\n    return this.getBitcoinPrivateKeychain().neutered()\n  }\n\n  /**\n   * Get the root node for the identity public keychain\n   * @return {String} base58-encoding of the public node\n   */\n  getIdentityPublicKeychain(): BIP32Interface {\n    return this.getIdentityPrivateKeychain().neutered()\n  }\n\n  static getNodeFromBitcoinKeychain(\n    keychainBase58: string,\n    addressIndex: number,\n    chainType: string = EXTERNAL_ADDRESS\n  ): BIP32Interface {\n    let chain\n    if (chainType === EXTERNAL_ADDRESS) {\n      chain = 0\n    } else if (chainType === CHANGE_ADDRESS) {\n      chain = 1\n    } else {\n      throw new Error('Invalid chain type')\n    }\n    const keychain = bip32.fromBase58(keychainBase58)\n\n    return keychain.derive(chain).derive(addressIndex)\n  }\n\n  /**\n   * Get a bitcoin address given a base-58 encoded bitcoin node\n   * (usually called the account node)\n   * @param {String} keychainBase58 - base58-encoding of the node\n   * @param {number} addressIndex - index of the address to get\n   * @param {String} chainType - either 'EXTERNAL_ADDRESS' (for a\n   * \"receive\" address) or 'CHANGE_ADDRESS'\n   * @return {String} the address\n   */\n  static getAddressFromBitcoinKeychain(keychainBase58: string, addressIndex: number,\n                                       chainType: string = EXTERNAL_ADDRESS): string {\n    return BlockstackWallet.getAddressFromBIP32Node(BlockstackWallet\n      .getNodeFromBitcoinKeychain(keychainBase58, addressIndex, chainType))\n  }\n\n  /**\n   * Get a ECDSA private key hex-string for an application-specific\n   *  address.\n   * @param {String} appsNodeKey - the base58-encoded private key for\n   * applications node (the `appsNodeKey` return in getIdentityKeyPair())\n   * @param {String} salt - a string, used to salt the\n   * application-specific addresses\n   * @param {String} appDomain - the appDomain to generate a key for\n   * @return {String} the private key hex-string. this will be a 64\n   * character string\n   */\n  static getLegacyAppPrivateKey(appsNodeKey: string, \n                                salt: string, appDomain: string): string {\n    const appNode = getLegacyAppNode(appsNodeKey, salt, appDomain)\n    return getNodePrivateKey(appNode).slice(0, 64)\n  }\n\n  static getAddressFromBIP32Node(node: BIP32Interface) {\n    return payments.p2pkh({ pubkey: node.publicKey }).address\n  }\n\n  /**\n   * Get a ECDSA private key hex-string for an application-specific\n   *  address.\n   * @param {String} appsNodeKey - the base58-encoded private key for\n   * applications node (the `appsNodeKey` return in getIdentityKeyPair())\n   * @param {String} salt - a string, used to salt the\n   * application-specific addresses\n   * @param {String} appDomain - the appDomain to generate a key for\n   * @return {String} the private key hex-string. this will be a 64\n   * character string\n   */\n  static getAppPrivateKey(appsNodeKey: string, salt: string, appDomain: string): \n    string {\n    const hashBuffer = hashSha256Sync(Buffer.from(`${appDomain}${salt}`))\n    const hash = hashBuffer.toString('hex')\n    const appIndexHexes: string[] = []\n    // note: there's hardcoded numbers here, precisely because I want this\n    //   code to be very specific to the derivation paths we expect.\n    if (hash.length !== 64) {\n      throw new Error(`Unexpected app-domain hash length of ${hash.length}`)\n    }\n    for (let i = 0; i < 11; i++) { // split the hash into 3-byte chunks\n      // because child nodes can only be up to 2^31,\n      // and we shouldn't deal in partial bytes.\n      appIndexHexes.push(hash.slice(i * 6, i * 6 + 6))\n    }\n    let appNode = bip32.fromBase58(appsNodeKey)\n    appIndexHexes.forEach((hex) => {\n      if (hex.length > 6) {\n        throw new Error('Invalid hex string length')\n      }\n      appNode = appNode.deriveHardened(parseInt(hex, 16))\n    })\n    return getNodePrivateKey(appNode).slice(0, 64)\n  }\n\n  /**\n   * Get the keypair information for a given identity index. This\n   * information is used to obtain the private key for an identity address\n   * and derive application specific keys for that address.\n   * @param {number} addressIndex - the identity index\n   * @param {boolean} alwaysUncompressed - if true, always return a\n   *   private-key hex string corresponding to the uncompressed address\n   * @return {Object} an IdentityKeyPair type object with keys:\n   *   .key {String} - the private key hex-string\n   *   .keyID {String} - the public key hex-string\n   *   .address {String} - the identity address\n   *   .appsNodeKey {String} - the base-58 encoding of the applications node\n   *   .salt {String} - the salt used for creating app-specific addresses\n   */\n  getIdentityKeyPair(addressIndex: number, \n                     alwaysUncompressed: boolean = false): IdentityKeyPair {\n    const identityNode = this.getIdentityAddressNode(addressIndex)\n\n    const address = BlockstackWallet.getAddressFromBIP32Node(identityNode)\n    let identityKey = getNodePrivateKey(identityNode)\n    if (alwaysUncompressed && identityKey.length === 66) {\n      identityKey = identityKey.slice(0, 64)\n    }\n\n    const identityKeyID = getNodePublicKey(identityNode)\n    const appsNodeKey = BlockstackWallet.getAppsNode(identityNode).toBase58()\n    const salt = this.getIdentitySalt()\n    const keyPair = {\n      key: identityKey,\n      keyID: identityKeyID,\n      address,\n      appsNodeKey,\n      salt\n    }\n    return keyPair\n  }\n}\n","var MAX_ALLOC = Math.pow(2, 30) - 1 // default in iojs\n\nfunction checkBuffer (buf, name) {\n  if (typeof buf !== 'string' && !Buffer.isBuffer(buf)) {\n    throw new TypeError(name + ' must be a buffer or string')\n  }\n}\n\nmodule.exports = function (password, salt, iterations, keylen) {\n  checkBuffer(password, 'Password')\n  checkBuffer(salt, 'Salt')\n\n  if (typeof iterations !== 'number') {\n    throw new TypeError('Iterations not a number')\n  }\n\n  if (iterations < 0) {\n    throw new TypeError('Bad iterations')\n  }\n\n  if (typeof keylen !== 'number') {\n    throw new TypeError('Key length not a number')\n  }\n\n  if (keylen < 0 || keylen > MAX_ALLOC || keylen !== keylen) { /* eslint no-self-compare: 0 */\n    throw new TypeError('Bad key length')\n  }\n}\n","var defaultEncoding\n/* istanbul ignore next */\nif (process.browser) {\n  defaultEncoding = 'utf-8'\n} else {\n  var pVersionMajor = parseInt(process.version.split('.')[0].slice(1), 10)\n\n  defaultEncoding = pVersionMajor >= 6 ? 'utf-8' : 'binary'\n}\nmodule.exports = defaultEncoding\n","var md5 = require('create-hash/md5')\nvar RIPEMD160 = require('ripemd160')\nvar sha = require('sha.js')\n\nvar checkParameters = require('./precondition')\nvar defaultEncoding = require('./default-encoding')\nvar Buffer = require('safe-buffer').Buffer\nvar ZEROS = Buffer.alloc(128)\nvar sizes = {\n  md5: 16,\n  sha1: 20,\n  sha224: 28,\n  sha256: 32,\n  sha384: 48,\n  sha512: 64,\n  rmd160: 20,\n  ripemd160: 20\n}\n\nfunction Hmac (alg, key, saltLen) {\n  var hash = getDigest(alg)\n  var blocksize = (alg === 'sha512' || alg === 'sha384') ? 128 : 64\n\n  if (key.length > blocksize) {\n    key = hash(key)\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = Buffer.allocUnsafe(blocksize + sizes[alg])\n  var opad = Buffer.allocUnsafe(blocksize + sizes[alg])\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n\n  var ipad1 = Buffer.allocUnsafe(blocksize + saltLen + 4)\n  ipad.copy(ipad1, 0, 0, blocksize)\n  this.ipad1 = ipad1\n  this.ipad2 = ipad\n  this.opad = opad\n  this.alg = alg\n  this.blocksize = blocksize\n  this.hash = hash\n  this.size = sizes[alg]\n}\n\nHmac.prototype.run = function (data, ipad) {\n  data.copy(ipad, this.blocksize)\n  var h = this.hash(ipad)\n  h.copy(this.opad, this.blocksize)\n  return this.hash(this.opad)\n}\n\nfunction getDigest (alg) {\n  function shaFunc (data) {\n    return sha(alg).update(data).digest()\n  }\n  function rmd160Func (data) {\n    return new RIPEMD160().update(data).digest()\n  }\n\n  if (alg === 'rmd160' || alg === 'ripemd160') return rmd160Func\n  if (alg === 'md5') return md5\n  return shaFunc\n}\n\nfunction pbkdf2 (password, salt, iterations, keylen, digest) {\n  checkParameters(password, salt, iterations, keylen)\n\n  if (!Buffer.isBuffer(password)) password = Buffer.from(password, defaultEncoding)\n  if (!Buffer.isBuffer(salt)) salt = Buffer.from(salt, defaultEncoding)\n\n  digest = digest || 'sha1'\n\n  var hmac = new Hmac(digest, password, salt.length)\n\n  var DK = Buffer.allocUnsafe(keylen)\n  var block1 = Buffer.allocUnsafe(salt.length + 4)\n  salt.copy(block1, 0, 0, salt.length)\n\n  var destPos = 0\n  var hLen = sizes[digest]\n  var l = Math.ceil(keylen / hLen)\n\n  for (var i = 1; i <= l; i++) {\n    block1.writeUInt32BE(i, salt.length)\n\n    var T = hmac.run(block1, hmac.ipad1)\n    var U = T\n\n    for (var j = 1; j < iterations; j++) {\n      U = hmac.run(U, hmac.ipad2)\n      for (var k = 0; k < hLen; k++) T[k] ^= U[k]\n    }\n\n    T.copy(DK, destPos)\n    destPos += hLen\n  }\n\n  return DK\n}\n\nmodule.exports = pbkdf2\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// browserify by default only pulls in files that are hard coded in requires\n// In order of last to first in this file, the default wordlist will be chosen\n// based on what is present. (Bundles may remove wordlists they don't need)\nconst wordlists = {};\nexports.wordlists = wordlists;\nlet _default;\nexports._default = _default;\ntry {\n    exports._default = _default = require('./wordlists/chinese_simplified.json');\n    wordlists.chinese_simplified = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/chinese_traditional.json');\n    wordlists.chinese_traditional = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/korean.json');\n    wordlists.korean = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/french.json');\n    wordlists.french = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/italian.json');\n    wordlists.italian = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/spanish.json');\n    wordlists.spanish = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/japanese.json');\n    wordlists.japanese = _default;\n    wordlists.JA = _default;\n}\ncatch (err) { }\ntry {\n    exports._default = _default = require('./wordlists/english.json');\n    wordlists.english = _default;\n    wordlists.EN = _default;\n}\ncatch (err) { }\n","/* eslint-env browser */\nmodule.exports = typeof self == 'object' ? self.FormData : window.FormData;\n","// Extracted from https://github.com/crypto-browserify/ripemd160\nconst ARRAY16 = new Array(16);\nconst zl = [\n    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n    7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n    3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n    1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n    4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n];\nconst zr = [\n    5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n    6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n    15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n    8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n    12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n];\nconst sl = [\n    11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n    7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n    11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n    11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n    9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n];\nconst sr = [\n    8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n    9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n    9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n    15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n    8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n];\nconst hl = [0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e];\nconst hr = [0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000];\nfunction rotl(x, n) {\n    return (x << n) | (x >>> (32 - n));\n}\nfunction fn1(a, b, c, d, e, m, k, s) {\n    return (rotl((a + (b ^ c ^ d) + m + k) | 0, s) + e) | 0;\n}\nfunction fn2(a, b, c, d, e, m, k, s) {\n    return (rotl((a + ((b & c) | ((~b) & d)) + m + k) | 0, s) + e) | 0;\n}\nfunction fn3(a, b, c, d, e, m, k, s) {\n    return (rotl((a + ((b | (~c)) ^ d) + m + k) | 0, s) + e) | 0;\n}\nfunction fn4(a, b, c, d, e, m, k, s) {\n    return (rotl((a + ((b & d) | (c & (~d))) + m + k) | 0, s) + e) | 0;\n}\nfunction fn5(a, b, c, d, e, m, k, s) {\n    return (rotl((a + (b ^ (c | (~d))) + m + k) | 0, s) + e) | 0;\n}\nfunction readInt32LE(buffer, offset) {\n    offset >>>= 0;\n    return (buffer[offset])\n        | (buffer[offset + 1] << 8)\n        | (buffer[offset + 2] << 16)\n        | (buffer[offset + 3] << 24);\n}\nfunction writeUInt32LE(buffer, value, offset) {\n    value = +value;\n    offset >>>= 0;\n    buffer[offset + 3] = (value >>> 24);\n    buffer[offset + 2] = (value >>> 16);\n    buffer[offset + 1] = (value >>> 8);\n    buffer[offset] = (value & 0xff);\n    return offset + 4;\n}\nfunction writeInt32LE(buffer, value, offset) {\n    value = +value;\n    offset >>>= 0;\n    buffer[offset] = (value & 0xff);\n    buffer[offset + 1] = (value >>> 8);\n    buffer[offset + 2] = (value >>> 16);\n    buffer[offset + 3] = (value >>> 24);\n    return offset + 4;\n}\nfunction createArray(size) {\n    if (typeof Uint8Array !== 'undefined') {\n        return new Uint8Array(size);\n    }\n    else {\n        return new Array(size);\n    }\n}\nexport default class RIPEMD160 {\n    constructor() {\n        this._block = createArray(64);\n        this._blockSize = 64;\n        this._blockOffset = 0;\n        this._length = [0, 0, 0, 0];\n        this._finalized = false;\n        this._a = 0x67452301;\n        this._b = 0xefcdab89;\n        this._c = 0x98badcfe;\n        this._d = 0x10325476;\n        this._e = 0xc3d2e1f0;\n    }\n    update(data) {\n        if (this._finalized)\n            throw new Error('Digest already called');\n        // consume data\n        const block = this._block;\n        let offset = 0;\n        while (this._blockOffset + data.length - offset >= this._blockSize) {\n            for (let i = this._blockOffset; i < this._blockSize;)\n                block[i++] = data[offset++];\n            this._update();\n            this._blockOffset = 0;\n        }\n        while (offset < data.length)\n            block[this._blockOffset++] = data[offset++];\n        // update length\n        for (let j = 0, carry = data.length * 8; carry > 0; ++j) {\n            this._length[j] += carry;\n            carry = (this._length[j] / 0x0100000000) | 0;\n            if (carry > 0)\n                this._length[j] -= 0x0100000000 * carry;\n        }\n        return this;\n    }\n    _update() {\n        const words = ARRAY16;\n        for (let j = 0; j < 16; ++j) {\n            words[j] = readInt32LE(this._block, j * 4);\n        }\n        let al = this._a | 0;\n        let bl = this._b | 0;\n        let cl = this._c | 0;\n        let dl = this._d | 0;\n        let el = this._e | 0;\n        let ar = this._a | 0;\n        let br = this._b | 0;\n        let cr = this._c | 0;\n        let dr = this._d | 0;\n        let er = this._e | 0;\n        // computation\n        for (let i = 0; i < 80; i += 1) {\n            let tl;\n            let tr;\n            if (i < 16) {\n                tl = fn1(al, bl, cl, dl, el, words[zl[i]], hl[0], sl[i]);\n                tr = fn5(ar, br, cr, dr, er, words[zr[i]], hr[0], sr[i]);\n            }\n            else if (i < 32) {\n                tl = fn2(al, bl, cl, dl, el, words[zl[i]], hl[1], sl[i]);\n                tr = fn4(ar, br, cr, dr, er, words[zr[i]], hr[1], sr[i]);\n            }\n            else if (i < 48) {\n                tl = fn3(al, bl, cl, dl, el, words[zl[i]], hl[2], sl[i]);\n                tr = fn3(ar, br, cr, dr, er, words[zr[i]], hr[2], sr[i]);\n            }\n            else if (i < 64) {\n                tl = fn4(al, bl, cl, dl, el, words[zl[i]], hl[3], sl[i]);\n                tr = fn2(ar, br, cr, dr, er, words[zr[i]], hr[3], sr[i]);\n            }\n            else { // if (i<80) {\n                tl = fn5(al, bl, cl, dl, el, words[zl[i]], hl[4], sl[i]);\n                tr = fn1(ar, br, cr, dr, er, words[zr[i]], hr[4], sr[i]);\n            }\n            al = el;\n            el = dl;\n            dl = rotl(cl, 10);\n            cl = bl;\n            bl = tl;\n            ar = er;\n            er = dr;\n            dr = rotl(cr, 10);\n            cr = br;\n            br = tr;\n        }\n        // update state\n        const t = (this._b + cl + dr) | 0;\n        this._b = (this._c + dl + er) | 0;\n        this._c = (this._d + el + ar) | 0;\n        this._d = (this._e + al + br) | 0;\n        this._e = (this._a + bl + cr) | 0;\n        this._a = t;\n    }\n    digest() {\n        if (this._finalized) {\n            throw new Error('Digest already called');\n        }\n        this._finalized = true;\n        // create padding and handle blocks\n        this._block[this._blockOffset++] = 0x80;\n        if (this._blockOffset > 56) {\n            this._block.fill(0, this._blockOffset, 64);\n            this._update();\n            this._blockOffset = 0;\n        }\n        this._block.fill(0, this._blockOffset, 56);\n        writeUInt32LE(this._block, this._length[0], 56);\n        writeUInt32LE(this._block, this._length[1], 60);\n        this._update();\n        // produce result\n        const buffer = createArray(20);\n        writeInt32LE(buffer, this._a, 0);\n        writeInt32LE(buffer, this._b, 4);\n        writeInt32LE(buffer, this._c, 8);\n        writeInt32LE(buffer, this._d, 12);\n        writeInt32LE(buffer, this._e, 16);\n        // reset state\n        this._block.fill(0);\n        this._blockOffset = 0;\n        for (let i = 0; i < 4; ++i) {\n            this._length[i] = 0;\n        }\n        return buffer;\n    }\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bip32_1 = require(\"./bip32\");\nexports.fromSeed = bip32_1.fromSeed;\nexports.fromBase58 = bip32_1.fromBase58;\nexports.fromPublicKey = bip32_1.fromPublicKey;\nexports.fromPrivateKey = bip32_1.fromPrivateKey;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst crypto = require(\"./crypto\");\nconst bs58check = require('bs58check');\nconst ecc = require('tiny-secp256k1');\nconst typeforce = require('typeforce');\nconst wif = require('wif');\nconst UINT256_TYPE = typeforce.BufferN(32);\nconst NETWORK_TYPE = typeforce.compile({\n    wif: typeforce.UInt8,\n    bip32: {\n        public: typeforce.UInt32,\n        private: typeforce.UInt32,\n    },\n});\nconst BITCOIN = {\n    wif: 0x80,\n    bip32: {\n        public: 0x0488b21e,\n        private: 0x0488ade4,\n    },\n};\nconst HIGHEST_BIT = 0x80000000;\nconst UINT31_MAX = Math.pow(2, 31) - 1;\nfunction BIP32Path(value) {\n    return (typeforce.String(value) && value.match(/^(m\\/)?(\\d+'?\\/)*\\d+'?$/) !== null);\n}\nfunction UInt31(value) {\n    return typeforce.UInt32(value) && value <= UINT31_MAX;\n}\nclass BIP32 {\n    constructor(__D, __Q, chainCode, network, __DEPTH = 0, __INDEX = 0, __PARENT_FINGERPRINT = 0x00000000) {\n        this.__D = __D;\n        this.__Q = __Q;\n        this.chainCode = chainCode;\n        this.network = network;\n        this.__DEPTH = __DEPTH;\n        this.__INDEX = __INDEX;\n        this.__PARENT_FINGERPRINT = __PARENT_FINGERPRINT;\n        typeforce(NETWORK_TYPE, network);\n        this.lowR = false;\n    }\n    get depth() {\n        return this.__DEPTH;\n    }\n    get index() {\n        return this.__INDEX;\n    }\n    get parentFingerprint() {\n        return this.__PARENT_FINGERPRINT;\n    }\n    get publicKey() {\n        if (this.__Q === undefined)\n            this.__Q = ecc.pointFromScalar(this.__D, true);\n        return this.__Q;\n    }\n    get privateKey() {\n        return this.__D;\n    }\n    get identifier() {\n        return crypto.hash160(this.publicKey);\n    }\n    get fingerprint() {\n        return this.identifier.slice(0, 4);\n    }\n    // Private === not neutered\n    // Public === neutered\n    isNeutered() {\n        return this.__D === undefined;\n    }\n    neutered() {\n        return fromPublicKeyLocal(this.publicKey, this.chainCode, this.network, this.depth, this.index, this.parentFingerprint);\n    }\n    toBase58() {\n        const network = this.network;\n        const version = !this.isNeutered()\n            ? network.bip32.private\n            : network.bip32.public;\n        const buffer = Buffer.allocUnsafe(78);\n        // 4 bytes: version bytes\n        buffer.writeUInt32BE(version, 0);\n        // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ....\n        buffer.writeUInt8(this.depth, 4);\n        // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n        buffer.writeUInt32BE(this.parentFingerprint, 5);\n        // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n        // This is encoded in big endian. (0x00000000 if master key)\n        buffer.writeUInt32BE(this.index, 9);\n        // 32 bytes: the chain code\n        this.chainCode.copy(buffer, 13);\n        // 33 bytes: the public key or private key data\n        if (!this.isNeutered()) {\n            // 0x00 + k for private keys\n            buffer.writeUInt8(0, 45);\n            this.privateKey.copy(buffer, 46);\n            // 33 bytes: the public key\n        }\n        else {\n            // X9.62 encoding for public keys\n            this.publicKey.copy(buffer, 45);\n        }\n        return bs58check.encode(buffer);\n    }\n    toWIF() {\n        if (!this.privateKey)\n            throw new TypeError('Missing private key');\n        return wif.encode(this.network.wif, this.privateKey, true);\n    }\n    // https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki#child-key-derivation-ckd-functions\n    derive(index) {\n        typeforce(typeforce.UInt32, index);\n        const isHardened = index >= HIGHEST_BIT;\n        const data = Buffer.allocUnsafe(37);\n        // Hardened child\n        if (isHardened) {\n            if (this.isNeutered())\n                throw new TypeError('Missing private key for hardened child key');\n            // data = 0x00 || ser256(kpar) || ser32(index)\n            data[0] = 0x00;\n            this.privateKey.copy(data, 1);\n            data.writeUInt32BE(index, 33);\n            // Normal child\n        }\n        else {\n            // data = serP(point(kpar)) || ser32(index)\n            //      = serP(Kpar) || ser32(index)\n            this.publicKey.copy(data, 0);\n            data.writeUInt32BE(index, 33);\n        }\n        const I = crypto.hmacSHA512(this.chainCode, data);\n        const IL = I.slice(0, 32);\n        const IR = I.slice(32);\n        // if parse256(IL) >= n, proceed with the next value for i\n        if (!ecc.isPrivate(IL))\n            return this.derive(index + 1);\n        // Private parent key -> private child key\n        let hd;\n        if (!this.isNeutered()) {\n            // ki = parse256(IL) + kpar (mod n)\n            const ki = ecc.privateAdd(this.privateKey, IL);\n            // In case ki == 0, proceed with the next value for i\n            if (ki == null)\n                return this.derive(index + 1);\n            hd = fromPrivateKeyLocal(ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n            // Public parent key -> public child key\n        }\n        else {\n            // Ki = point(parse256(IL)) + Kpar\n            //    = G*IL + Kpar\n            const Ki = ecc.pointAddScalar(this.publicKey, IL, true);\n            // In case Ki is the point at infinity, proceed with the next value for i\n            if (Ki === null)\n                return this.derive(index + 1);\n            hd = fromPublicKeyLocal(Ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));\n        }\n        return hd;\n    }\n    deriveHardened(index) {\n        typeforce(UInt31, index);\n        // Only derives hardened private keys by default\n        return this.derive(index + HIGHEST_BIT);\n    }\n    derivePath(path) {\n        typeforce(BIP32Path, path);\n        let splitPath = path.split('/');\n        if (splitPath[0] === 'm') {\n            if (this.parentFingerprint)\n                throw new TypeError('Expected master, got child');\n            splitPath = splitPath.slice(1);\n        }\n        return splitPath.reduce((prevHd, indexStr) => {\n            let index;\n            if (indexStr.slice(-1) === `'`) {\n                index = parseInt(indexStr.slice(0, -1), 10);\n                return prevHd.deriveHardened(index);\n            }\n            else {\n                index = parseInt(indexStr, 10);\n                return prevHd.derive(index);\n            }\n        }, this);\n    }\n    sign(hash, lowR) {\n        if (!this.privateKey)\n            throw new Error('Missing private key');\n        if (lowR === undefined)\n            lowR = this.lowR;\n        if (lowR === false) {\n            return ecc.sign(hash, this.privateKey);\n        }\n        else {\n            let sig = ecc.sign(hash, this.privateKey);\n            const extraData = Buffer.alloc(32, 0);\n            let counter = 0;\n            // if first try is lowR, skip the loop\n            // for second try and on, add extra entropy counting up\n            while (sig[0] > 0x7f) {\n                counter++;\n                extraData.writeUIntLE(counter, 0, 6);\n                sig = ecc.signWithEntropy(hash, this.privateKey, extraData);\n            }\n            return sig;\n        }\n    }\n    verify(hash, signature) {\n        return ecc.verify(hash, this.publicKey, signature);\n    }\n}\nfunction fromBase58(inString, network) {\n    const buffer = bs58check.decode(inString);\n    if (buffer.length !== 78)\n        throw new TypeError('Invalid buffer length');\n    network = network || BITCOIN;\n    // 4 bytes: version bytes\n    const version = buffer.readUInt32BE(0);\n    if (version !== network.bip32.private && version !== network.bip32.public)\n        throw new TypeError('Invalid network version');\n    // 1 byte: depth: 0x00 for master nodes, 0x01 for level-1 descendants, ...\n    const depth = buffer[4];\n    // 4 bytes: the fingerprint of the parent's key (0x00000000 if master key)\n    const parentFingerprint = buffer.readUInt32BE(5);\n    if (depth === 0) {\n        if (parentFingerprint !== 0x00000000)\n            throw new TypeError('Invalid parent fingerprint');\n    }\n    // 4 bytes: child number. This is the number i in xi = xpar/i, with xi the key being serialized.\n    // This is encoded in MSB order. (0x00000000 if master key)\n    const index = buffer.readUInt32BE(9);\n    if (depth === 0 && index !== 0)\n        throw new TypeError('Invalid index');\n    // 32 bytes: the chain code\n    const chainCode = buffer.slice(13, 45);\n    let hd;\n    // 33 bytes: private key data (0x00 + k)\n    if (version === network.bip32.private) {\n        if (buffer.readUInt8(45) !== 0x00)\n            throw new TypeError('Invalid private key');\n        const k = buffer.slice(46, 78);\n        hd = fromPrivateKeyLocal(k, chainCode, network, depth, index, parentFingerprint);\n        // 33 bytes: public key data (0x02 + X or 0x03 + X)\n    }\n    else {\n        const X = buffer.slice(45, 78);\n        hd = fromPublicKeyLocal(X, chainCode, network, depth, index, parentFingerprint);\n    }\n    return hd;\n}\nexports.fromBase58 = fromBase58;\nfunction fromPrivateKey(privateKey, chainCode, network) {\n    return fromPrivateKeyLocal(privateKey, chainCode, network);\n}\nexports.fromPrivateKey = fromPrivateKey;\nfunction fromPrivateKeyLocal(privateKey, chainCode, network, depth, index, parentFingerprint) {\n    typeforce({\n        privateKey: UINT256_TYPE,\n        chainCode: UINT256_TYPE,\n    }, { privateKey, chainCode });\n    network = network || BITCOIN;\n    if (!ecc.isPrivate(privateKey))\n        throw new TypeError('Private key not in range [1, n)');\n    return new BIP32(privateKey, undefined, chainCode, network, depth, index, parentFingerprint);\n}\nfunction fromPublicKey(publicKey, chainCode, network) {\n    return fromPublicKeyLocal(publicKey, chainCode, network);\n}\nexports.fromPublicKey = fromPublicKey;\nfunction fromPublicKeyLocal(publicKey, chainCode, network, depth, index, parentFingerprint) {\n    typeforce({\n        publicKey: typeforce.BufferN(33),\n        chainCode: UINT256_TYPE,\n    }, { publicKey, chainCode });\n    network = network || BITCOIN;\n    // verify the X coordinate is a point on the curve\n    if (!ecc.isPoint(publicKey))\n        throw new TypeError('Point is not on the curve');\n    return new BIP32(undefined, publicKey, chainCode, network, depth, index, parentFingerprint);\n}\nfunction fromSeed(seed, network) {\n    typeforce(typeforce.Buffer, seed);\n    if (seed.length < 16)\n        throw new TypeError('Seed should be at least 128 bits');\n    if (seed.length > 64)\n        throw new TypeError('Seed should be at most 512 bits');\n    network = network || BITCOIN;\n    const I = crypto.hmacSHA512(Buffer.from('Bitcoin seed', 'utf8'), seed);\n    const IL = I.slice(0, 32);\n    const IR = I.slice(32);\n    return fromPrivateKey(IL, IR, network);\n}\nexports.fromSeed = fromSeed;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst createHash = require('create-hash');\nconst createHmac = require('create-hmac');\nfunction hash160(buffer) {\n    const sha256Hash = createHash('sha256')\n        .update(buffer)\n        .digest();\n    try {\n        return createHash('rmd160')\n            .update(sha256Hash)\n            .digest();\n    }\n    catch (err) {\n        return createHash('ripemd160')\n            .update(sha256Hash)\n            .digest();\n    }\n}\nexports.hash160 = hash160;\nfunction hmacSHA512(key, data) {\n    return createHmac('sha512', key)\n        .update(data)\n        .digest();\n}\nexports.hmacSHA512 = hmacSHA512;\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","module.exports = require('./lib/_stream_writable.js');\n","module.exports = require('./lib/_stream_duplex.js');\n","module.exports = require('./readable').Transform\n","module.exports = require('./readable').PassThrough\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-0, as defined\n * in FIPS PUB 180-1\n * This source code is derived from sha1.js of the same repository.\n * The difference between SHA-0 and SHA-1 is just a bitwise rotate left\n * operation was added.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha, Hash)\n\nSha.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16]\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha1 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha1, Hash)\n\nSha1.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl1 (num) {\n  return (num << 1) | (num >>> 31)\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha1.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = rotl1(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16])\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha1.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha1\n","/**\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-256, as defined\n * in FIPS 180-2\n * Version 2.2-beta Copyright Angel Marin, Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n *\n */\n\nvar inherits = require('inherits')\nvar Sha256 = require('./sha256')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar W = new Array(64)\n\nfunction Sha224 () {\n  this.init()\n\n  this._w = W // new Array(64)\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha224, Sha256)\n\nSha224.prototype.init = function () {\n  this._a = 0xc1059ed8\n  this._b = 0x367cd507\n  this._c = 0x3070dd17\n  this._d = 0xf70e5939\n  this._e = 0xffc00b31\n  this._f = 0x68581511\n  this._g = 0x64f98fa7\n  this._h = 0xbefa4fa4\n\n  return this\n}\n\nSha224.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(28)\n\n  H.writeInt32BE(this._a, 0)\n  H.writeInt32BE(this._b, 4)\n  H.writeInt32BE(this._c, 8)\n  H.writeInt32BE(this._d, 12)\n  H.writeInt32BE(this._e, 16)\n  H.writeInt32BE(this._f, 20)\n  H.writeInt32BE(this._g, 24)\n\n  return H\n}\n\nmodule.exports = Sha224\n","var inherits = require('inherits')\nvar SHA512 = require('./sha512')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar W = new Array(160)\n\nfunction Sha384 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 128, 112)\n}\n\ninherits(Sha384, SHA512)\n\nSha384.prototype.init = function () {\n  this._ah = 0xcbbb9d5d\n  this._bh = 0x629a292a\n  this._ch = 0x9159015a\n  this._dh = 0x152fecd8\n  this._eh = 0x67332667\n  this._fh = 0x8eb44a87\n  this._gh = 0xdb0c2e0d\n  this._hh = 0x47b5481d\n\n  this._al = 0xc1059ed8\n  this._bl = 0x367cd507\n  this._cl = 0x3070dd17\n  this._dl = 0xf70e5939\n  this._el = 0xffc00b31\n  this._fl = 0x68581511\n  this._gl = 0x64f98fa7\n  this._hl = 0xbefa4fa4\n\n  return this\n}\n\nSha384.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(48)\n\n  function writeInt64BE (h, l, offset) {\n    H.writeInt32BE(h, offset)\n    H.writeInt32BE(l, offset + 4)\n  }\n\n  writeInt64BE(this._ah, this._al, 0)\n  writeInt64BE(this._bh, this._bl, 8)\n  writeInt64BE(this._ch, this._cl, 16)\n  writeInt64BE(this._dh, this._dl, 24)\n  writeInt64BE(this._eh, this._el, 32)\n  writeInt64BE(this._fh, this._fl, 40)\n\n  return H\n}\n\nmodule.exports = Sha384\n","'use strict'\nvar inherits = require('inherits')\nvar Buffer = require('safe-buffer').Buffer\n\nvar Base = require('cipher-base')\n\nvar ZEROS = Buffer.alloc(128)\nvar blocksize = 64\n\nfunction Hmac (alg, key) {\n  Base.call(this, 'digest')\n  if (typeof key === 'string') {\n    key = Buffer.from(key)\n  }\n\n  this._alg = alg\n  this._key = key\n\n  if (key.length > blocksize) {\n    key = alg(key)\n  } else if (key.length < blocksize) {\n    key = Buffer.concat([key, ZEROS], blocksize)\n  }\n\n  var ipad = this._ipad = Buffer.allocUnsafe(blocksize)\n  var opad = this._opad = Buffer.allocUnsafe(blocksize)\n\n  for (var i = 0; i < blocksize; i++) {\n    ipad[i] = key[i] ^ 0x36\n    opad[i] = key[i] ^ 0x5C\n  }\n\n  this._hash = [ipad]\n}\n\ninherits(Hmac, Base)\n\nHmac.prototype._update = function (data) {\n  this._hash.push(data)\n}\n\nHmac.prototype._final = function () {\n  var h = this._alg(Buffer.concat(this._hash))\n  return this._alg(Buffer.concat([this._opad, h]))\n}\nmodule.exports = Hmac\n","'use strict'\n\nvar base58 = require('bs58')\nvar Buffer = require('safe-buffer').Buffer\n\nmodule.exports = function (checksumFn) {\n  // Encode a buffer as a base58-check encoded string\n  function encode (payload) {\n    var checksum = checksumFn(payload)\n\n    return base58.encode(Buffer.concat([\n      payload,\n      checksum\n    ], payload.length + 4))\n  }\n\n  function decodeRaw (buffer) {\n    var payload = buffer.slice(0, -4)\n    var checksum = buffer.slice(-4)\n    var newChecksum = checksumFn(payload)\n\n    if (checksum[0] ^ newChecksum[0] |\n        checksum[1] ^ newChecksum[1] |\n        checksum[2] ^ newChecksum[2] |\n        checksum[3] ^ newChecksum[3]) return\n\n    return payload\n  }\n\n  // Decode a base58-check encoded string to a buffer, no result if checksum is wrong\n  function decodeUnsafe (string) {\n    var buffer = base58.decodeUnsafe(string)\n    if (!buffer) return\n\n    return decodeRaw(buffer)\n  }\n\n  function decode (string) {\n    var buffer = base58.decode(string)\n    var payload = decodeRaw(buffer, checksumFn)\n    if (!payload) throw new Error('Invalid checksum')\n    return payload\n  }\n\n  return {\n    encode: encode,\n    decode: decode,\n    decodeUnsafe: decodeUnsafe\n  }\n}\n","var basex = require('base-x')\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","'use strict'\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\n// @ts-ignore\nvar _Buffer = require('safe-buffer').Buffer\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256)\n  BASE_MAP.fill(255)\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i)\n    var xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  var BASE = ALPHABET.length\n  var LEADER = ALPHABET.charAt(0)\n  var FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (!_Buffer.isBuffer(source)) { throw new TypeError('Expected Buffer') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0\n    var length = 0\n    var pbegin = 0\n    var pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    var b58 = new Uint8Array(size)\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin]\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return _Buffer.alloc(0) }\n    var psz = 0\n        // Skip leading spaces.\n    if (source[psz] === ' ') { return }\n        // Skip and count leading '1's.\n    var zeroes = 0\n    var length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size)\n        // Process the characters.\n    while (source[psz]) {\n            // Decode character\n      var carry = BASE_MAP[source.charCodeAt(psz)]\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n        // Skip trailing spaces.\n    if (source[psz] === ' ') { return }\n        // Skip leading zeroes in b256.\n    var it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    var vch = _Buffer.allocUnsafe(zeroes + (size - it4))\n    vch.fill(0x00, 0, zeroes)\n    var j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nmodule.exports = base\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar assert = utils.assert;\n\nfunction ShortCurve(conf) {\n  Base.call(this, 'short', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.tinv = this.two.redInvm();\n\n  this.zeroA = this.a.fromRed().cmpn(0) === 0;\n  this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0;\n\n  // If the curve is endomorphic, precalculate beta and lambda\n  this.endo = this._getEndomorphism(conf);\n  this._endoWnafT1 = new Array(4);\n  this._endoWnafT2 = new Array(4);\n}\ninherits(ShortCurve, Base);\nmodule.exports = ShortCurve;\n\nShortCurve.prototype._getEndomorphism = function _getEndomorphism(conf) {\n  // No efficient endomorphism\n  if (!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)\n    return;\n\n  // Compute beta and lambda, that lambda * P = (beta * Px; Py)\n  var beta;\n  var lambda;\n  if (conf.beta) {\n    beta = new BN(conf.beta, 16).toRed(this.red);\n  } else {\n    var betas = this._getEndoRoots(this.p);\n    // Choose the smallest beta\n    beta = betas[0].cmp(betas[1]) < 0 ? betas[0] : betas[1];\n    beta = beta.toRed(this.red);\n  }\n  if (conf.lambda) {\n    lambda = new BN(conf.lambda, 16);\n  } else {\n    // Choose the lambda that is matching selected beta\n    var lambdas = this._getEndoRoots(this.n);\n    if (this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta)) === 0) {\n      lambda = lambdas[0];\n    } else {\n      lambda = lambdas[1];\n      assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta)) === 0);\n    }\n  }\n\n  // Get basis vectors, used for balanced length-two representation\n  var basis;\n  if (conf.basis) {\n    basis = conf.basis.map(function(vec) {\n      return {\n        a: new BN(vec.a, 16),\n        b: new BN(vec.b, 16)\n      };\n    });\n  } else {\n    basis = this._getEndoBasis(lambda);\n  }\n\n  return {\n    beta: beta,\n    lambda: lambda,\n    basis: basis\n  };\n};\n\nShortCurve.prototype._getEndoRoots = function _getEndoRoots(num) {\n  // Find roots of for x^2 + x + 1 in F\n  // Root = (-1 +- Sqrt(-3)) / 2\n  //\n  var red = num === this.p ? this.red : BN.mont(num);\n  var tinv = new BN(2).toRed(red).redInvm();\n  var ntinv = tinv.redNeg();\n\n  var s = new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);\n\n  var l1 = ntinv.redAdd(s).fromRed();\n  var l2 = ntinv.redSub(s).fromRed();\n  return [ l1, l2 ];\n};\n\nShortCurve.prototype._getEndoBasis = function _getEndoBasis(lambda) {\n  // aprxSqrt >= sqrt(this.n)\n  var aprxSqrt = this.n.ushrn(Math.floor(this.n.bitLength() / 2));\n\n  // 3.74\n  // Run EGCD, until r(L + 1) < aprxSqrt\n  var u = lambda;\n  var v = this.n.clone();\n  var x1 = new BN(1);\n  var y1 = new BN(0);\n  var x2 = new BN(0);\n  var y2 = new BN(1);\n\n  // NOTE: all vectors are roots of: a + b * lambda = 0 (mod n)\n  var a0;\n  var b0;\n  // First vector\n  var a1;\n  var b1;\n  // Second vector\n  var a2;\n  var b2;\n\n  var prevR;\n  var i = 0;\n  var r;\n  var x;\n  while (u.cmpn(0) !== 0) {\n    var q = v.div(u);\n    r = v.sub(q.mul(u));\n    x = x2.sub(q.mul(x1));\n    var y = y2.sub(q.mul(y1));\n\n    if (!a1 && r.cmp(aprxSqrt) < 0) {\n      a0 = prevR.neg();\n      b0 = x1;\n      a1 = r.neg();\n      b1 = x;\n    } else if (a1 && ++i === 2) {\n      break;\n    }\n    prevR = r;\n\n    v = u;\n    u = r;\n    x2 = x1;\n    x1 = x;\n    y2 = y1;\n    y1 = y;\n  }\n  a2 = r.neg();\n  b2 = x;\n\n  var len1 = a1.sqr().add(b1.sqr());\n  var len2 = a2.sqr().add(b2.sqr());\n  if (len2.cmp(len1) >= 0) {\n    a2 = a0;\n    b2 = b0;\n  }\n\n  // Normalize signs\n  if (a1.negative) {\n    a1 = a1.neg();\n    b1 = b1.neg();\n  }\n  if (a2.negative) {\n    a2 = a2.neg();\n    b2 = b2.neg();\n  }\n\n  return [\n    { a: a1, b: b1 },\n    { a: a2, b: b2 }\n  ];\n};\n\nShortCurve.prototype._endoSplit = function _endoSplit(k) {\n  var basis = this.endo.basis;\n  var v1 = basis[0];\n  var v2 = basis[1];\n\n  var c1 = v2.b.mul(k).divRound(this.n);\n  var c2 = v1.b.neg().mul(k).divRound(this.n);\n\n  var p1 = c1.mul(v1.a);\n  var p2 = c2.mul(v2.a);\n  var q1 = c1.mul(v1.b);\n  var q2 = c2.mul(v2.b);\n\n  // Calculate answer\n  var k1 = k.sub(p1).sub(p2);\n  var k2 = q1.add(q2).neg();\n  return { k1: k1, k2: k2 };\n};\n\nShortCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var y2 = x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  // XXX Is there any way to tell if the number is odd without converting it\n  // to non-red form?\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nShortCurve.prototype.validate = function validate(point) {\n  if (point.inf)\n    return true;\n\n  var x = point.x;\n  var y = point.y;\n\n  var ax = this.a.redMul(x);\n  var rhs = x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);\n  return y.redSqr().redISub(rhs).cmpn(0) === 0;\n};\n\nShortCurve.prototype._endoWnafMulAdd =\n    function _endoWnafMulAdd(points, coeffs, jacobianResult) {\n  var npoints = this._endoWnafT1;\n  var ncoeffs = this._endoWnafT2;\n  for (var i = 0; i < points.length; i++) {\n    var split = this._endoSplit(coeffs[i]);\n    var p = points[i];\n    var beta = p._getBeta();\n\n    if (split.k1.negative) {\n      split.k1.ineg();\n      p = p.neg(true);\n    }\n    if (split.k2.negative) {\n      split.k2.ineg();\n      beta = beta.neg(true);\n    }\n\n    npoints[i * 2] = p;\n    npoints[i * 2 + 1] = beta;\n    ncoeffs[i * 2] = split.k1;\n    ncoeffs[i * 2 + 1] = split.k2;\n  }\n  var res = this._wnafMulAdd(1, npoints, ncoeffs, i * 2, jacobianResult);\n\n  // Clean-up references to points and coefficients\n  for (var j = 0; j < i * 2; j++) {\n    npoints[j] = null;\n    ncoeffs[j] = null;\n  }\n  return res;\n};\n\nfunction Point(curve, x, y, isRed) {\n  Base.BasePoint.call(this, curve, 'affine');\n  if (x === null && y === null) {\n    this.x = null;\n    this.y = null;\n    this.inf = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    // Force redgomery representation when loading from JSON\n    if (isRed) {\n      this.x.forceRed(this.curve.red);\n      this.y.forceRed(this.curve.red);\n    }\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    this.inf = false;\n  }\n}\ninherits(Point, Base.BasePoint);\n\nShortCurve.prototype.point = function point(x, y, isRed) {\n  return new Point(this, x, y, isRed);\n};\n\nShortCurve.prototype.pointFromJSON = function pointFromJSON(obj, red) {\n  return Point.fromJSON(this, obj, red);\n};\n\nPoint.prototype._getBeta = function _getBeta() {\n  if (!this.curve.endo)\n    return;\n\n  var pre = this.precomputed;\n  if (pre && pre.beta)\n    return pre.beta;\n\n  var beta = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);\n  if (pre) {\n    var curve = this.curve;\n    var endoMul = function(p) {\n      return curve.point(p.x.redMul(curve.endo.beta), p.y);\n    };\n    pre.beta = beta;\n    beta.precomputed = {\n      beta: null,\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(endoMul)\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(endoMul)\n      }\n    };\n  }\n  return beta;\n};\n\nPoint.prototype.toJSON = function toJSON() {\n  if (!this.precomputed)\n    return [ this.x, this.y ];\n\n  return [ this.x, this.y, this.precomputed && {\n    doubles: this.precomputed.doubles && {\n      step: this.precomputed.doubles.step,\n      points: this.precomputed.doubles.points.slice(1)\n    },\n    naf: this.precomputed.naf && {\n      wnd: this.precomputed.naf.wnd,\n      points: this.precomputed.naf.points.slice(1)\n    }\n  } ];\n};\n\nPoint.fromJSON = function fromJSON(curve, obj, red) {\n  if (typeof obj === 'string')\n    obj = JSON.parse(obj);\n  var res = curve.point(obj[0], obj[1], red);\n  if (!obj[2])\n    return res;\n\n  function obj2point(obj) {\n    return curve.point(obj[0], obj[1], red);\n  }\n\n  var pre = obj[2];\n  res.precomputed = {\n    beta: null,\n    doubles: pre.doubles && {\n      step: pre.doubles.step,\n      points: [ res ].concat(pre.doubles.points.map(obj2point))\n    },\n    naf: pre.naf && {\n      wnd: pre.naf.wnd,\n      points: [ res ].concat(pre.naf.points.map(obj2point))\n    }\n  };\n  return res;\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  return this.inf;\n};\n\nPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.inf)\n    return p;\n\n  // P + O = P\n  if (p.inf)\n    return this;\n\n  // P + P = 2P\n  if (this.eq(p))\n    return this.dbl();\n\n  // P + (-P) = O\n  if (this.neg().eq(p))\n    return this.curve.point(null, null);\n\n  // P + Q = O\n  if (this.x.cmp(p.x) === 0)\n    return this.curve.point(null, null);\n\n  var c = this.y.redSub(p.y);\n  if (c.cmpn(0) !== 0)\n    c = c.redMul(this.x.redSub(p.x).redInvm());\n  var nx = c.redSqr().redISub(this.x).redISub(p.x);\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.inf)\n    return this;\n\n  // 2P = O\n  var ys1 = this.y.redAdd(this.y);\n  if (ys1.cmpn(0) === 0)\n    return this.curve.point(null, null);\n\n  var a = this.curve.a;\n\n  var x2 = this.x.redSqr();\n  var dyinv = ys1.redInvm();\n  var c = x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);\n\n  var nx = c.redSqr().redISub(this.x.redAdd(this.x));\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.getX = function getX() {\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  return this.y.fromRed();\n};\n\nPoint.prototype.mul = function mul(k) {\n  k = new BN(k, 16);\n  if (this.isInfinity())\n    return this;\n  else if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else if (this.curve.endo)\n    return this.curve._endoWnafMulAdd([ this ], [ k ]);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs, true);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2, true);\n};\n\nPoint.prototype.eq = function eq(p) {\n  return this === p ||\n         this.inf === p.inf &&\n             (this.inf || this.x.cmp(p.x) === 0 && this.y.cmp(p.y) === 0);\n};\n\nPoint.prototype.neg = function neg(_precompute) {\n  if (this.inf)\n    return this;\n\n  var res = this.curve.point(this.x, this.y.redNeg());\n  if (_precompute && this.precomputed) {\n    var pre = this.precomputed;\n    var negate = function(p) {\n      return p.neg();\n    };\n    res.precomputed = {\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(negate)\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(negate)\n      }\n    };\n  }\n  return res;\n};\n\nPoint.prototype.toJ = function toJ() {\n  if (this.inf)\n    return this.curve.jpoint(null, null, null);\n\n  var res = this.curve.jpoint(this.x, this.y, this.curve.one);\n  return res;\n};\n\nfunction JPoint(curve, x, y, z) {\n  Base.BasePoint.call(this, curve, 'jacobian');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.one;\n    this.y = this.curve.one;\n    this.z = new BN(0);\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = new BN(z, 16);\n  }\n  if (!this.x.red)\n    this.x = this.x.toRed(this.curve.red);\n  if (!this.y.red)\n    this.y = this.y.toRed(this.curve.red);\n  if (!this.z.red)\n    this.z = this.z.toRed(this.curve.red);\n\n  this.zOne = this.z === this.curve.one;\n}\ninherits(JPoint, Base.BasePoint);\n\nShortCurve.prototype.jpoint = function jpoint(x, y, z) {\n  return new JPoint(this, x, y, z);\n};\n\nJPoint.prototype.toP = function toP() {\n  if (this.isInfinity())\n    return this.curve.point(null, null);\n\n  var zinv = this.z.redInvm();\n  var zinv2 = zinv.redSqr();\n  var ax = this.x.redMul(zinv2);\n  var ay = this.y.redMul(zinv2).redMul(zinv);\n\n  return this.curve.point(ax, ay);\n};\n\nJPoint.prototype.neg = function neg() {\n  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);\n};\n\nJPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p;\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 12M + 4S + 7A\n  var pz2 = p.z.redSqr();\n  var z2 = this.z.redSqr();\n  var u1 = this.x.redMul(pz2);\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y.redMul(pz2.redMul(p.z));\n  var s2 = p.y.redMul(z2.redMul(this.z));\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(p.z).redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mixedAdd = function mixedAdd(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p.toJ();\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 8M + 3S + 7A\n  var z2 = this.z.redSqr();\n  var u1 = this.x;\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y;\n  var s2 = p.y.redMul(z2).redMul(this.z);\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.dblp = function dblp(pow) {\n  if (pow === 0)\n    return this;\n  if (this.isInfinity())\n    return this;\n  if (!pow)\n    return this.dbl();\n\n  if (this.curve.zeroA || this.curve.threeA) {\n    var r = this;\n    for (var i = 0; i < pow; i++)\n      r = r.dbl();\n    return r;\n  }\n\n  // 1M + 2S + 1A + N * (4S + 5M + 8A)\n  // N = 1 => 6M + 6S + 9A\n  var a = this.curve.a;\n  var tinv = this.curve.tinv;\n\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  // Reuse results\n  var jyd = jy.redAdd(jy);\n  for (var i = 0; i < pow; i++) {\n    var jx2 = jx.redSqr();\n    var jyd2 = jyd.redSqr();\n    var jyd4 = jyd2.redSqr();\n    var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n    var t1 = jx.redMul(jyd2);\n    var nx = c.redSqr().redISub(t1.redAdd(t1));\n    var t2 = t1.redISub(nx);\n    var dny = c.redMul(t2);\n    dny = dny.redIAdd(dny).redISub(jyd4);\n    var nz = jyd.redMul(jz);\n    if (i + 1 < pow)\n      jz4 = jz4.redMul(jyd4);\n\n    jx = nx;\n    jz = nz;\n    jyd = dny;\n  }\n\n  return this.curve.jpoint(jx, jyd.redMul(tinv), jz);\n};\n\nJPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  if (this.curve.zeroA)\n    return this._zeroDbl();\n  else if (this.curve.threeA)\n    return this._threeDbl();\n  else\n    return this._dbl();\n};\n\nJPoint.prototype._zeroDbl = function _zeroDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 14A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a; a = 0\n    var m = xx.redAdd(xx).redIAdd(xx);\n    // T = M ^ 2 - 2*S\n    var t = m.redSqr().redISub(s).redISub(s);\n\n    // 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2*Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-dbl-2009-l\n    // 2M + 5S + 13A\n\n    // A = X1^2\n    var a = this.x.redSqr();\n    // B = Y1^2\n    var b = this.y.redSqr();\n    // C = B^2\n    var c = b.redSqr();\n    // D = 2 * ((X1 + B)^2 - A - C)\n    var d = this.x.redAdd(b).redSqr().redISub(a).redISub(c);\n    d = d.redIAdd(d);\n    // E = 3 * A\n    var e = a.redAdd(a).redIAdd(a);\n    // F = E^2\n    var f = e.redSqr();\n\n    // 8 * C\n    var c8 = c.redIAdd(c);\n    c8 = c8.redIAdd(c8);\n    c8 = c8.redIAdd(c8);\n\n    // X3 = F - 2 * D\n    nx = f.redISub(d).redISub(d);\n    // Y3 = E * (D - X3) - 8 * C\n    ny = e.redMul(d.redISub(nx)).redISub(c8);\n    // Z3 = 2 * Y1 * Z1\n    nz = this.y.redMul(this.z);\n    nz = nz.redIAdd(nz);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._threeDbl = function _threeDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 15A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a\n    var m = xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);\n    // T = M^2 - 2 * S\n    var t = m.redSqr().redISub(s).redISub(s);\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2 * Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html#doubling-dbl-2001-b\n    // 3M + 5S\n\n    // delta = Z1^2\n    var delta = this.z.redSqr();\n    // gamma = Y1^2\n    var gamma = this.y.redSqr();\n    // beta = X1 * gamma\n    var beta = this.x.redMul(gamma);\n    // alpha = 3 * (X1 - delta) * (X1 + delta)\n    var alpha = this.x.redSub(delta).redMul(this.x.redAdd(delta));\n    alpha = alpha.redAdd(alpha).redIAdd(alpha);\n    // X3 = alpha^2 - 8 * beta\n    var beta4 = beta.redIAdd(beta);\n    beta4 = beta4.redIAdd(beta4);\n    var beta8 = beta4.redAdd(beta4);\n    nx = alpha.redSqr().redISub(beta8);\n    // Z3 = (Y1 + Z1)^2 - gamma - delta\n    nz = this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);\n    // Y3 = alpha * (4 * beta - X3) - 8 * gamma^2\n    var ggamma8 = gamma.redSqr();\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ny = alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._dbl = function _dbl() {\n  var a = this.curve.a;\n\n  // 4M + 6S + 10A\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  var jx2 = jx.redSqr();\n  var jy2 = jy.redSqr();\n\n  var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n  var jxd4 = jx.redAdd(jx);\n  jxd4 = jxd4.redIAdd(jxd4);\n  var t1 = jxd4.redMul(jy2);\n  var nx = c.redSqr().redISub(t1.redAdd(t1));\n  var t2 = t1.redISub(nx);\n\n  var jyd8 = jy2.redSqr();\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  var ny = c.redMul(t2).redISub(jyd8);\n  var nz = jy.redAdd(jy).redMul(jz);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.trpl = function trpl() {\n  if (!this.curve.zeroA)\n    return this.dbl().add(this);\n\n  // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html#tripling-tpl-2007-bl\n  // 5M + 10S + ...\n\n  // XX = X1^2\n  var xx = this.x.redSqr();\n  // YY = Y1^2\n  var yy = this.y.redSqr();\n  // ZZ = Z1^2\n  var zz = this.z.redSqr();\n  // YYYY = YY^2\n  var yyyy = yy.redSqr();\n  // M = 3 * XX + a * ZZ2; a = 0\n  var m = xx.redAdd(xx).redIAdd(xx);\n  // MM = M^2\n  var mm = m.redSqr();\n  // E = 6 * ((X1 + YY)^2 - XX - YYYY) - MM\n  var e = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n  e = e.redIAdd(e);\n  e = e.redAdd(e).redIAdd(e);\n  e = e.redISub(mm);\n  // EE = E^2\n  var ee = e.redSqr();\n  // T = 16*YYYY\n  var t = yyyy.redIAdd(yyyy);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  // U = (M + E)^2 - MM - EE - T\n  var u = m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);\n  // X3 = 4 * (X1 * EE - 4 * YY * U)\n  var yyu4 = yy.redMul(u);\n  yyu4 = yyu4.redIAdd(yyu4);\n  yyu4 = yyu4.redIAdd(yyu4);\n  var nx = this.x.redMul(ee).redISub(yyu4);\n  nx = nx.redIAdd(nx);\n  nx = nx.redIAdd(nx);\n  // Y3 = 8 * Y1 * (U * (T - U) - E * EE)\n  var ny = this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  // Z3 = (Z1 + E)^2 - ZZ - EE\n  var nz = this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mul = function mul(k, kbase) {\n  k = new BN(k, kbase);\n\n  return this.curve._wnafMul(this, k);\n};\n\nJPoint.prototype.eq = function eq(p) {\n  if (p.type === 'affine')\n    return this.eq(p.toJ());\n\n  if (this === p)\n    return true;\n\n  // x1 * z2^2 == x2 * z1^2\n  var z2 = this.z.redSqr();\n  var pz2 = p.z.redSqr();\n  if (this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0) !== 0)\n    return false;\n\n  // y1 * z2^3 == y2 * z1^3\n  var z3 = z2.redMul(this.z);\n  var pz3 = pz2.redMul(p.z);\n  return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0) === 0;\n};\n\nJPoint.prototype.eqXToP = function eqXToP(x) {\n  var zs = this.z.redSqr();\n  var rx = x.toRed(this.curve.red).redMul(zs);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(zs);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\nJPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC JPoint Infinity>';\n  return '<EC JPoint x: ' + this.x.toString(16, 2) +\n      ' y: ' + this.y.toString(16, 2) +\n      ' z: ' + this.z.toString(16, 2) + '>';\n};\n\nJPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n","'use strict';\n\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar utils = require('../utils');\n\nfunction MontCurve(conf) {\n  Base.call(this, 'mont', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.i4 = new BN(4).toRed(this.red).redInvm();\n  this.two = new BN(2).toRed(this.red);\n  this.a24 = this.i4.redMul(this.a.redAdd(this.two));\n}\ninherits(MontCurve, Base);\nmodule.exports = MontCurve;\n\nMontCurve.prototype.validate = function validate(point) {\n  var x = point.normalize().x;\n  var x2 = x.redSqr();\n  var rhs = x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);\n  var y = rhs.redSqrt();\n\n  return y.redSqr().cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, z) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && z === null) {\n    this.x = this.curve.one;\n    this.z = this.curve.zero;\n  } else {\n    this.x = new BN(x, 16);\n    this.z = new BN(z, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n  }\n}\ninherits(Point, Base.BasePoint);\n\nMontCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  return this.point(utils.toArray(bytes, enc), 1);\n};\n\nMontCurve.prototype.point = function point(x, z) {\n  return new Point(this, x, z);\n};\n\nMontCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nPoint.prototype.precompute = function precompute() {\n  // No-op\n};\n\nPoint.prototype._encode = function _encode() {\n  return this.getX().toArray('be', this.curve.p.byteLength());\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1] || curve.one);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n\nPoint.prototype.dbl = function dbl() {\n  // http://hyperelliptic.org/EFD/g1p/auto-montgom-xz.html#doubling-dbl-1987-m-3\n  // 2M + 2S + 4A\n\n  // A = X1 + Z1\n  var a = this.x.redAdd(this.z);\n  // AA = A^2\n  var aa = a.redSqr();\n  // B = X1 - Z1\n  var b = this.x.redSub(this.z);\n  // BB = B^2\n  var bb = b.redSqr();\n  // C = AA - BB\n  var c = aa.redSub(bb);\n  // X3 = AA * BB\n  var nx = aa.redMul(bb);\n  // Z3 = C * (BB + A24 * C)\n  var nz = c.redMul(bb.redAdd(this.curve.a24.redMul(c)));\n  return this.curve.point(nx, nz);\n};\n\nPoint.prototype.add = function add() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.diffAdd = function diffAdd(p, diff) {\n  // http://hyperelliptic.org/EFD/g1p/auto-montgom-xz.html#diffadd-dadd-1987-m-3\n  // 4M + 2S + 6A\n\n  // A = X2 + Z2\n  var a = this.x.redAdd(this.z);\n  // B = X2 - Z2\n  var b = this.x.redSub(this.z);\n  // C = X3 + Z3\n  var c = p.x.redAdd(p.z);\n  // D = X3 - Z3\n  var d = p.x.redSub(p.z);\n  // DA = D * A\n  var da = d.redMul(a);\n  // CB = C * B\n  var cb = c.redMul(b);\n  // X5 = Z1 * (DA + CB)^2\n  var nx = diff.z.redMul(da.redAdd(cb).redSqr());\n  // Z5 = X1 * (DA - CB)^2\n  var nz = diff.x.redMul(da.redISub(cb).redSqr());\n  return this.curve.point(nx, nz);\n};\n\nPoint.prototype.mul = function mul(k) {\n  var t = k.clone();\n  var a = this; // (N / 2) * Q + Q\n  var b = this.curve.point(null, null); // (N / 2) * Q\n  var c = this; // Q\n\n  for (var bits = []; t.cmpn(0) !== 0; t.iushrn(1))\n    bits.push(t.andln(1));\n\n  for (var i = bits.length - 1; i >= 0; i--) {\n    if (bits[i] === 0) {\n      // N * Q + Q = ((N / 2) * Q + Q)) + (N / 2) * Q\n      a = a.diffAdd(b, c);\n      // N * Q = 2 * ((N / 2) * Q + Q))\n      b = b.dbl();\n    } else {\n      // N * Q = ((N / 2) * Q + Q) + ((N / 2) * Q)\n      b = a.diffAdd(b, c);\n      // N * Q + Q = 2 * ((N / 2) * Q + Q)\n      a = a.dbl();\n    }\n  }\n  return b;\n};\n\nPoint.prototype.mulAdd = function mulAdd() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.jumlAdd = function jumlAdd() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this.getX().cmp(other.getX()) === 0;\n};\n\nPoint.prototype.normalize = function normalize() {\n  this.x = this.x.redMul(this.z.redInvm());\n  this.z = this.curve.one;\n  return this;\n};\n\nPoint.prototype.getX = function getX() {\n  // Normalize coordinates\n  this.normalize();\n\n  return this.x.fromRed();\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar assert = utils.assert;\n\nfunction EdwardsCurve(conf) {\n  // NOTE: Important as we are creating point in Base.call()\n  this.twisted = (conf.a | 0) !== 1;\n  this.mOneA = this.twisted && (conf.a | 0) === -1;\n  this.extended = this.mOneA;\n\n  Base.call(this, 'edwards', conf);\n\n  this.a = new BN(conf.a, 16).umod(this.red.m);\n  this.a = this.a.toRed(this.red);\n  this.c = new BN(conf.c, 16).toRed(this.red);\n  this.c2 = this.c.redSqr();\n  this.d = new BN(conf.d, 16).toRed(this.red);\n  this.dd = this.d.redAdd(this.d);\n\n  assert(!this.twisted || this.c.fromRed().cmpn(1) === 0);\n  this.oneC = (conf.c | 0) === 1;\n}\ninherits(EdwardsCurve, Base);\nmodule.exports = EdwardsCurve;\n\nEdwardsCurve.prototype._mulA = function _mulA(num) {\n  if (this.mOneA)\n    return num.redNeg();\n  else\n    return this.a.redMul(num);\n};\n\nEdwardsCurve.prototype._mulC = function _mulC(num) {\n  if (this.oneC)\n    return num;\n  else\n    return this.c.redMul(num);\n};\n\n// Just for compatibility with Short curve\nEdwardsCurve.prototype.jpoint = function jpoint(x, y, z, t) {\n  return this.point(x, y, z, t);\n};\n\nEdwardsCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var x2 = x.redSqr();\n  var rhs = this.c2.redSub(this.a.redMul(x2));\n  var lhs = this.one.redSub(this.c2.redMul(this.d).redMul(x2));\n\n  var y2 = rhs.redMul(lhs.redInvm());\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.pointFromY = function pointFromY(y, odd) {\n  y = new BN(y, 16);\n  if (!y.red)\n    y = y.toRed(this.red);\n\n  // x^2 = (y^2 - c^2) / (c^2 d y^2 - a)\n  var y2 = y.redSqr();\n  var lhs = y2.redSub(this.c2);\n  var rhs = y2.redMul(this.d).redMul(this.c2).redSub(this.a);\n  var x2 = lhs.redMul(rhs.redInvm());\n\n  if (x2.cmp(this.zero) === 0) {\n    if (odd)\n      throw new Error('invalid point');\n    else\n      return this.point(this.zero, y);\n  }\n\n  var x = x2.redSqrt();\n  if (x.redSqr().redSub(x2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  if (x.fromRed().isOdd() !== odd)\n    x = x.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.validate = function validate(point) {\n  if (point.isInfinity())\n    return true;\n\n  // Curve: A * X^2 + Y^2 = C^2 * (1 + D * X^2 * Y^2)\n  point.normalize();\n\n  var x2 = point.x.redSqr();\n  var y2 = point.y.redSqr();\n  var lhs = x2.redMul(this.a).redAdd(y2);\n  var rhs = this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));\n\n  return lhs.cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, y, z, t) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.zero;\n    this.y = this.curve.one;\n    this.z = this.curve.one;\n    this.t = this.curve.zero;\n    this.zOne = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = z ? new BN(z, 16) : this.curve.one;\n    this.t = t && new BN(t, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n    if (this.t && !this.t.red)\n      this.t = this.t.toRed(this.curve.red);\n    this.zOne = this.z === this.curve.one;\n\n    // Use extended coordinates\n    if (this.curve.extended && !this.t) {\n      this.t = this.x.redMul(this.y);\n      if (!this.zOne)\n        this.t = this.t.redMul(this.z.redInvm());\n    }\n  }\n}\ninherits(Point, Base.BasePoint);\n\nEdwardsCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nEdwardsCurve.prototype.point = function point(x, y, z, t) {\n  return new Point(this, x, y, z, t);\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1], obj[2]);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.x.cmpn(0) === 0 &&\n    (this.y.cmp(this.z) === 0 ||\n    (this.zOne && this.y.cmp(this.curve.c) === 0));\n};\n\nPoint.prototype._extDbl = function _extDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #doubling-dbl-2008-hwcd\n  // 4M + 4S\n\n  // A = X1^2\n  var a = this.x.redSqr();\n  // B = Y1^2\n  var b = this.y.redSqr();\n  // C = 2 * Z1^2\n  var c = this.z.redSqr();\n  c = c.redIAdd(c);\n  // D = a * A\n  var d = this.curve._mulA(a);\n  // E = (X1 + Y1)^2 - A - B\n  var e = this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);\n  // G = D + B\n  var g = d.redAdd(b);\n  // F = G - C\n  var f = g.redSub(c);\n  // H = D - B\n  var h = d.redSub(b);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projDbl = function _projDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #doubling-dbl-2008-bbjlp\n  //     #doubling-dbl-2007-bl\n  // and others\n  // Generally 3M + 4S or 2M + 4S\n\n  // B = (X1 + Y1)^2\n  var b = this.x.redAdd(this.y).redSqr();\n  // C = X1^2\n  var c = this.x.redSqr();\n  // D = Y1^2\n  var d = this.y.redSqr();\n\n  var nx;\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // E = a * C\n    var e = this.curve._mulA(c);\n    // F = E + D\n    var f = e.redAdd(d);\n    if (this.zOne) {\n      // X3 = (B - C - D) * (F - 2)\n      nx = b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F^2 - 2 * F\n      nz = f.redSqr().redSub(f).redSub(f);\n    } else {\n      // H = Z1^2\n      var h = this.z.redSqr();\n      // J = F - 2 * H\n      var j = f.redSub(h).redISub(h);\n      // X3 = (B-C-D)*J\n      nx = b.redSub(c).redISub(d).redMul(j);\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F * J\n      nz = f.redMul(j);\n    }\n  } else {\n    // E = C + D\n    var e = c.redAdd(d);\n    // H = (c * Z1)^2\n    var h = this.curve._mulC(this.z).redSqr();\n    // J = E - 2 * H\n    var j = e.redSub(h).redSub(h);\n    // X3 = c * (B - E) * J\n    nx = this.curve._mulC(b.redISub(e)).redMul(j);\n    // Y3 = c * E * (C - D)\n    ny = this.curve._mulC(e).redMul(c.redISub(d));\n    // Z3 = E * J\n    nz = e.redMul(j);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  // Double in extended coordinates\n  if (this.curve.extended)\n    return this._extDbl();\n  else\n    return this._projDbl();\n};\n\nPoint.prototype._extAdd = function _extAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #addition-add-2008-hwcd-3\n  // 8M\n\n  // A = (Y1 - X1) * (Y2 - X2)\n  var a = this.y.redSub(this.x).redMul(p.y.redSub(p.x));\n  // B = (Y1 + X1) * (Y2 + X2)\n  var b = this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));\n  // C = T1 * k * T2\n  var c = this.t.redMul(this.curve.dd).redMul(p.t);\n  // D = Z1 * 2 * Z2\n  var d = this.z.redMul(p.z.redAdd(p.z));\n  // E = B - A\n  var e = b.redSub(a);\n  // F = D - C\n  var f = d.redSub(c);\n  // G = D + C\n  var g = d.redAdd(c);\n  // H = B + A\n  var h = b.redAdd(a);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projAdd = function _projAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #addition-add-2008-bbjlp\n  //     #addition-add-2007-bl\n  // 10M + 1S\n\n  // A = Z1 * Z2\n  var a = this.z.redMul(p.z);\n  // B = A^2\n  var b = a.redSqr();\n  // C = X1 * X2\n  var c = this.x.redMul(p.x);\n  // D = Y1 * Y2\n  var d = this.y.redMul(p.y);\n  // E = d * C * D\n  var e = this.curve.d.redMul(c).redMul(d);\n  // F = B - E\n  var f = b.redSub(e);\n  // G = B + E\n  var g = b.redAdd(e);\n  // X3 = A * F * ((X1 + Y1) * (X2 + Y2) - C - D)\n  var tmp = this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);\n  var nx = a.redMul(f).redMul(tmp);\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // Y3 = A * G * (D - a * C)\n    ny = a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));\n    // Z3 = F * G\n    nz = f.redMul(g);\n  } else {\n    // Y3 = A * G * (D - C)\n    ny = a.redMul(g).redMul(d.redSub(c));\n    // Z3 = c * F * G\n    nz = this.curve._mulC(f).redMul(g);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.add = function add(p) {\n  if (this.isInfinity())\n    return p;\n  if (p.isInfinity())\n    return this;\n\n  if (this.curve.extended)\n    return this._extAdd(p);\n  else\n    return this._projAdd(p);\n};\n\nPoint.prototype.mul = function mul(k) {\n  if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, false);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, true);\n};\n\nPoint.prototype.normalize = function normalize() {\n  if (this.zOne)\n    return this;\n\n  // Normalize coordinates\n  var zi = this.z.redInvm();\n  this.x = this.x.redMul(zi);\n  this.y = this.y.redMul(zi);\n  if (this.t)\n    this.t = this.t.redMul(zi);\n  this.z = this.curve.one;\n  this.zOne = true;\n  return this;\n};\n\nPoint.prototype.neg = function neg() {\n  return this.curve.point(this.x.redNeg(),\n                          this.y,\n                          this.z,\n                          this.t && this.t.redNeg());\n};\n\nPoint.prototype.getX = function getX() {\n  this.normalize();\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  this.normalize();\n  return this.y.fromRed();\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this === other ||\n         this.getX().cmp(other.getX()) === 0 &&\n         this.getY().cmp(other.getY()) === 0;\n};\n\nPoint.prototype.eqXToP = function eqXToP(x) {\n  var rx = x.toRed(this.curve.red).redMul(this.z);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(this.z);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\n// Compatibility with BaseCurve\nPoint.prototype.toP = Point.prototype.normalize;\nPoint.prototype.mixedAdd = Point.prototype.add;\n","'use strict';\n\nexports.sha1 = require('./sha/1');\nexports.sha224 = require('./sha/224');\nexports.sha256 = require('./sha/256');\nexports.sha384 = require('./sha/384');\nexports.sha512 = require('./sha/512');\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar shaCommon = require('./common');\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_5 = utils.sum32_5;\nvar ft_1 = shaCommon.ft_1;\nvar BlockHash = common.BlockHash;\n\nvar sha1_K = [\n  0x5A827999, 0x6ED9EBA1,\n  0x8F1BBCDC, 0xCA62C1D6\n];\n\nfunction SHA1() {\n  if (!(this instanceof SHA1))\n    return new SHA1();\n\n  BlockHash.call(this);\n  this.h = [\n    0x67452301, 0xefcdab89, 0x98badcfe,\n    0x10325476, 0xc3d2e1f0 ];\n  this.W = new Array(80);\n}\n\nutils.inherits(SHA1, BlockHash);\nmodule.exports = SHA1;\n\nSHA1.blockSize = 512;\nSHA1.outSize = 160;\nSHA1.hmacStrength = 80;\nSHA1.padLength = 64;\n\nSHA1.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n\n  for(; i < W.length; i++)\n    W[i] = rotl32(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n\n  for (i = 0; i < W.length; i++) {\n    var s = ~~(i / 20);\n    var t = sum32_5(rotl32(a, 5), ft_1(s, b, c, d), e, W[i], sha1_K[s]);\n    e = d;\n    d = c;\n    c = rotl32(b, 30);\n    b = a;\n    a = t;\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n};\n\nSHA1.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar SHA256 = require('./256');\n\nfunction SHA224() {\n  if (!(this instanceof SHA224))\n    return new SHA224();\n\n  SHA256.call(this);\n  this.h = [\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\n    0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4 ];\n}\nutils.inherits(SHA224, SHA256);\nmodule.exports = SHA224;\n\nSHA224.blockSize = 512;\nSHA224.outSize = 224;\nSHA224.hmacStrength = 192;\nSHA224.padLength = 64;\n\nSHA224.prototype._digest = function digest(enc) {\n  // Just truncate output\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 7), 'big');\n  else\n    return utils.split32(this.h.slice(0, 7), 'big');\n};\n\n","'use strict';\n\nvar utils = require('../utils');\n\nvar SHA512 = require('./512');\n\nfunction SHA384() {\n  if (!(this instanceof SHA384))\n    return new SHA384();\n\n  SHA512.call(this);\n  this.h = [\n    0xcbbb9d5d, 0xc1059ed8,\n    0x629a292a, 0x367cd507,\n    0x9159015a, 0x3070dd17,\n    0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31,\n    0x8eb44a87, 0x68581511,\n    0xdb0c2e0d, 0x64f98fa7,\n    0x47b5481d, 0xbefa4fa4 ];\n}\nutils.inherits(SHA384, SHA512);\nmodule.exports = SHA384;\n\nSHA384.blockSize = 1024;\nSHA384.outSize = 384;\nSHA384.hmacStrength = 192;\nSHA384.padLength = 128;\n\nSHA384.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 12), 'big');\n  else\n    return utils.split32(this.h.slice(0, 12), 'big');\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar common = require('./common');\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_3 = utils.sum32_3;\nvar sum32_4 = utils.sum32_4;\nvar BlockHash = common.BlockHash;\n\nfunction RIPEMD160() {\n  if (!(this instanceof RIPEMD160))\n    return new RIPEMD160();\n\n  BlockHash.call(this);\n\n  this.h = [ 0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0 ];\n  this.endian = 'little';\n}\nutils.inherits(RIPEMD160, BlockHash);\nexports.ripemd160 = RIPEMD160;\n\nRIPEMD160.blockSize = 512;\nRIPEMD160.outSize = 160;\nRIPEMD160.hmacStrength = 192;\nRIPEMD160.padLength = 64;\n\nRIPEMD160.prototype._update = function update(msg, start) {\n  var A = this.h[0];\n  var B = this.h[1];\n  var C = this.h[2];\n  var D = this.h[3];\n  var E = this.h[4];\n  var Ah = A;\n  var Bh = B;\n  var Ch = C;\n  var Dh = D;\n  var Eh = E;\n  for (var j = 0; j < 80; j++) {\n    var T = sum32(\n      rotl32(\n        sum32_4(A, f(j, B, C, D), msg[r[j] + start], K(j)),\n        s[j]),\n      E);\n    A = E;\n    E = D;\n    D = rotl32(C, 10);\n    C = B;\n    B = T;\n    T = sum32(\n      rotl32(\n        sum32_4(Ah, f(79 - j, Bh, Ch, Dh), msg[rh[j] + start], Kh(j)),\n        sh[j]),\n      Eh);\n    Ah = Eh;\n    Eh = Dh;\n    Dh = rotl32(Ch, 10);\n    Ch = Bh;\n    Bh = T;\n  }\n  T = sum32_3(this.h[1], C, Dh);\n  this.h[1] = sum32_3(this.h[2], D, Eh);\n  this.h[2] = sum32_3(this.h[3], E, Ah);\n  this.h[3] = sum32_3(this.h[4], A, Bh);\n  this.h[4] = sum32_3(this.h[0], B, Ch);\n  this.h[0] = T;\n};\n\nRIPEMD160.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'little');\n  else\n    return utils.split32(this.h, 'little');\n};\n\nfunction f(j, x, y, z) {\n  if (j <= 15)\n    return x ^ y ^ z;\n  else if (j <= 31)\n    return (x & y) | ((~x) & z);\n  else if (j <= 47)\n    return (x | (~y)) ^ z;\n  else if (j <= 63)\n    return (x & z) | (y & (~z));\n  else\n    return x ^ (y | (~z));\n}\n\nfunction K(j) {\n  if (j <= 15)\n    return 0x00000000;\n  else if (j <= 31)\n    return 0x5a827999;\n  else if (j <= 47)\n    return 0x6ed9eba1;\n  else if (j <= 63)\n    return 0x8f1bbcdc;\n  else\n    return 0xa953fd4e;\n}\n\nfunction Kh(j) {\n  if (j <= 15)\n    return 0x50a28be6;\n  else if (j <= 31)\n    return 0x5c4dd124;\n  else if (j <= 47)\n    return 0x6d703ef3;\n  else if (j <= 63)\n    return 0x7a6d76e9;\n  else\n    return 0x00000000;\n}\n\nvar r = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n  3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n  1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n  4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n];\n\nvar rh = [\n  5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n  6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n  15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n  8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n  12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n];\n\nvar s = [\n  11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n  7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n  11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n  11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n  9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n];\n\nvar sh = [\n  8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n  9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n  9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n  15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n  8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n];\n","'use strict';\n\nvar utils = require('./utils');\nvar assert = require('minimalistic-assert');\n\nfunction Hmac(hash, key, enc) {\n  if (!(this instanceof Hmac))\n    return new Hmac(hash, key, enc);\n  this.Hash = hash;\n  this.blockSize = hash.blockSize / 8;\n  this.outSize = hash.outSize / 8;\n  this.inner = null;\n  this.outer = null;\n\n  this._init(utils.toArray(key, enc));\n}\nmodule.exports = Hmac;\n\nHmac.prototype._init = function init(key) {\n  // Shorten key, if needed\n  if (key.length > this.blockSize)\n    key = new this.Hash().update(key).digest();\n  assert(key.length <= this.blockSize);\n\n  // Add padding to key\n  for (var i = key.length; i < this.blockSize; i++)\n    key.push(0);\n\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x36;\n  this.inner = new this.Hash().update(key);\n\n  // 0x36 ^ 0x5c = 0x6a\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x6a;\n  this.outer = new this.Hash().update(key);\n};\n\nHmac.prototype.update = function update(msg, enc) {\n  this.inner.update(msg, enc);\n  return this;\n};\n\nHmac.prototype.digest = function digest(enc) {\n  this.outer.update(this.inner.digest());\n  return this.outer.digest(enc);\n};\n","module.exports = {\n  doubles: {\n    step: 4,\n    points: [\n      [\n        'e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a',\n        'f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821'\n      ],\n      [\n        '8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508',\n        '11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf'\n      ],\n      [\n        '175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739',\n        'd3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695'\n      ],\n      [\n        '363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640',\n        '4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9'\n      ],\n      [\n        '8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c',\n        '4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36'\n      ],\n      [\n        '723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda',\n        '96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f'\n      ],\n      [\n        'eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa',\n        '5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999'\n      ],\n      [\n        '100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0',\n        'cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09'\n      ],\n      [\n        'e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d',\n        '9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d'\n      ],\n      [\n        'feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d',\n        'e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088'\n      ],\n      [\n        'da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1',\n        '9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d'\n      ],\n      [\n        '53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0',\n        '5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8'\n      ],\n      [\n        '8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047',\n        '10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a'\n      ],\n      [\n        '385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862',\n        '283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453'\n      ],\n      [\n        '6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7',\n        '7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160'\n      ],\n      [\n        '3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd',\n        '56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0'\n      ],\n      [\n        '85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83',\n        '7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6'\n      ],\n      [\n        '948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a',\n        '53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589'\n      ],\n      [\n        '6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8',\n        'bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17'\n      ],\n      [\n        'e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d',\n        '4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda'\n      ],\n      [\n        'e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725',\n        '7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd'\n      ],\n      [\n        '213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754',\n        '4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2'\n      ],\n      [\n        '4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c',\n        '17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6'\n      ],\n      [\n        'fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6',\n        '6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f'\n      ],\n      [\n        '76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39',\n        'c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01'\n      ],\n      [\n        'c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891',\n        '893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3'\n      ],\n      [\n        'd895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b',\n        'febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f'\n      ],\n      [\n        'b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03',\n        '2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7'\n      ],\n      [\n        'e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d',\n        'eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78'\n      ],\n      [\n        'a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070',\n        '7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1'\n      ],\n      [\n        '90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4',\n        'e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150'\n      ],\n      [\n        '8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da',\n        '662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82'\n      ],\n      [\n        'e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11',\n        '1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc'\n      ],\n      [\n        '8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e',\n        'efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b'\n      ],\n      [\n        'e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41',\n        '2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51'\n      ],\n      [\n        'b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef',\n        '67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45'\n      ],\n      [\n        'd68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8',\n        'db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120'\n      ],\n      [\n        '324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d',\n        '648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84'\n      ],\n      [\n        '4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96',\n        '35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d'\n      ],\n      [\n        '9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd',\n        'ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d'\n      ],\n      [\n        '6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5',\n        '9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8'\n      ],\n      [\n        'a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266',\n        '40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8'\n      ],\n      [\n        '7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71',\n        '34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac'\n      ],\n      [\n        '928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac',\n        'c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f'\n      ],\n      [\n        '85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751',\n        '1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962'\n      ],\n      [\n        'ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e',\n        '493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907'\n      ],\n      [\n        '827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241',\n        'c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec'\n      ],\n      [\n        'eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3',\n        'be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d'\n      ],\n      [\n        'e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f',\n        '4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414'\n      ],\n      [\n        '1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19',\n        'aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd'\n      ],\n      [\n        '146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be',\n        'b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0'\n      ],\n      [\n        'fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9',\n        '6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811'\n      ],\n      [\n        'da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2',\n        '8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1'\n      ],\n      [\n        'a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13',\n        '7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c'\n      ],\n      [\n        '174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c',\n        'ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73'\n      ],\n      [\n        '959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba',\n        '2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd'\n      ],\n      [\n        'd2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151',\n        'e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405'\n      ],\n      [\n        '64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073',\n        'd99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589'\n      ],\n      [\n        '8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458',\n        '38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e'\n      ],\n      [\n        '13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b',\n        '69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27'\n      ],\n      [\n        'bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366',\n        'd3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1'\n      ],\n      [\n        '8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa',\n        '40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482'\n      ],\n      [\n        '8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0',\n        '620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945'\n      ],\n      [\n        'dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787',\n        '7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573'\n      ],\n      [\n        'f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e',\n        'ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82'\n      ]\n    ]\n  },\n  naf: {\n    wnd: 7,\n    points: [\n      [\n        'f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9',\n        '388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672'\n      ],\n      [\n        '2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4',\n        'd8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6'\n      ],\n      [\n        '5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc',\n        '6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da'\n      ],\n      [\n        'acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe',\n        'cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37'\n      ],\n      [\n        '774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb',\n        'd984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b'\n      ],\n      [\n        'f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8',\n        'ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81'\n      ],\n      [\n        'd7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e',\n        '581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58'\n      ],\n      [\n        'defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34',\n        '4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77'\n      ],\n      [\n        '2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c',\n        '85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a'\n      ],\n      [\n        '352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5',\n        '321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c'\n      ],\n      [\n        '2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f',\n        '2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67'\n      ],\n      [\n        '9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714',\n        '73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402'\n      ],\n      [\n        'daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729',\n        'a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55'\n      ],\n      [\n        'c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db',\n        '2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482'\n      ],\n      [\n        '6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4',\n        'e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82'\n      ],\n      [\n        '1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5',\n        'b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396'\n      ],\n      [\n        '605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479',\n        '2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49'\n      ],\n      [\n        '62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d',\n        '80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf'\n      ],\n      [\n        '80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f',\n        '1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a'\n      ],\n      [\n        '7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb',\n        'd0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7'\n      ],\n      [\n        'd528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9',\n        'eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933'\n      ],\n      [\n        '49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963',\n        '758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a'\n      ],\n      [\n        '77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74',\n        '958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6'\n      ],\n      [\n        'f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530',\n        'e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37'\n      ],\n      [\n        '463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b',\n        '5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e'\n      ],\n      [\n        'f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247',\n        'cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6'\n      ],\n      [\n        'caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1',\n        'cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476'\n      ],\n      [\n        '2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120',\n        '4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40'\n      ],\n      [\n        '7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435',\n        '91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61'\n      ],\n      [\n        '754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18',\n        '673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683'\n      ],\n      [\n        'e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8',\n        '59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5'\n      ],\n      [\n        '186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb',\n        '3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b'\n      ],\n      [\n        'df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f',\n        '55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417'\n      ],\n      [\n        '5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143',\n        'efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868'\n      ],\n      [\n        '290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba',\n        'e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a'\n      ],\n      [\n        'af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45',\n        'f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6'\n      ],\n      [\n        '766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a',\n        '744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996'\n      ],\n      [\n        '59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e',\n        'c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e'\n      ],\n      [\n        'f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8',\n        'e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d'\n      ],\n      [\n        '7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c',\n        '30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2'\n      ],\n      [\n        '948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519',\n        'e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e'\n      ],\n      [\n        '7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab',\n        '100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437'\n      ],\n      [\n        '3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca',\n        'ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311'\n      ],\n      [\n        'd3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf',\n        '8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4'\n      ],\n      [\n        '1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610',\n        '68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575'\n      ],\n      [\n        '733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4',\n        'f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d'\n      ],\n      [\n        '15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c',\n        'd56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d'\n      ],\n      [\n        'a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940',\n        'edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629'\n      ],\n      [\n        'e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980',\n        'a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06'\n      ],\n      [\n        '311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3',\n        '66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374'\n      ],\n      [\n        '34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf',\n        '9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee'\n      ],\n      [\n        'f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63',\n        '4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1'\n      ],\n      [\n        'd7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448',\n        'fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b'\n      ],\n      [\n        '32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf',\n        '5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661'\n      ],\n      [\n        '7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5',\n        '8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6'\n      ],\n      [\n        'ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6',\n        '8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e'\n      ],\n      [\n        '16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5',\n        '5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d'\n      ],\n      [\n        'eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99',\n        'f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc'\n      ],\n      [\n        '78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51',\n        'f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4'\n      ],\n      [\n        '494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5',\n        '42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c'\n      ],\n      [\n        'a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5',\n        '204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b'\n      ],\n      [\n        'c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997',\n        '4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913'\n      ],\n      [\n        '841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881',\n        '73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154'\n      ],\n      [\n        '5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5',\n        '39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865'\n      ],\n      [\n        '36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66',\n        'd2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc'\n      ],\n      [\n        '336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726',\n        'ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224'\n      ],\n      [\n        '8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede',\n        '6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e'\n      ],\n      [\n        '1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94',\n        '60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6'\n      ],\n      [\n        '85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31',\n        '3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511'\n      ],\n      [\n        '29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51',\n        'b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b'\n      ],\n      [\n        'a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252',\n        'ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2'\n      ],\n      [\n        '4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5',\n        'cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c'\n      ],\n      [\n        'd24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b',\n        '6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3'\n      ],\n      [\n        'ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4',\n        '322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d'\n      ],\n      [\n        'af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f',\n        '6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700'\n      ],\n      [\n        'e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889',\n        '2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4'\n      ],\n      [\n        '591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246',\n        'b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196'\n      ],\n      [\n        '11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984',\n        '998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4'\n      ],\n      [\n        '3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a',\n        'b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257'\n      ],\n      [\n        'cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030',\n        'bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13'\n      ],\n      [\n        'c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197',\n        '6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096'\n      ],\n      [\n        'c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593',\n        'c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38'\n      ],\n      [\n        'a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef',\n        '21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f'\n      ],\n      [\n        '347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38',\n        '60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448'\n      ],\n      [\n        'da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a',\n        '49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a'\n      ],\n      [\n        'c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111',\n        '5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4'\n      ],\n      [\n        '4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502',\n        '7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437'\n      ],\n      [\n        '3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea',\n        'be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7'\n      ],\n      [\n        'cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26',\n        '8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d'\n      ],\n      [\n        'b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986',\n        '39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a'\n      ],\n      [\n        'd4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e',\n        '62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54'\n      ],\n      [\n        '48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4',\n        '25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77'\n      ],\n      [\n        'dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda',\n        'ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517'\n      ],\n      [\n        '6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859',\n        'cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10'\n      ],\n      [\n        'e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f',\n        'f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125'\n      ],\n      [\n        'eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c',\n        '6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e'\n      ],\n      [\n        '13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942',\n        'fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1'\n      ],\n      [\n        'ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a',\n        '1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2'\n      ],\n      [\n        'b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80',\n        '5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423'\n      ],\n      [\n        'ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d',\n        '438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8'\n      ],\n      [\n        '8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1',\n        'cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758'\n      ],\n      [\n        '52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63',\n        'c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375'\n      ],\n      [\n        'e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352',\n        '6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d'\n      ],\n      [\n        '7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193',\n        'ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec'\n      ],\n      [\n        '5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00',\n        '9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0'\n      ],\n      [\n        '32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58',\n        'ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c'\n      ],\n      [\n        'e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7',\n        'd3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4'\n      ],\n      [\n        '8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8',\n        'c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f'\n      ],\n      [\n        '4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e',\n        '67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649'\n      ],\n      [\n        '3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d',\n        'cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826'\n      ],\n      [\n        '674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b',\n        '299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5'\n      ],\n      [\n        'd32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f',\n        'f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87'\n      ],\n      [\n        '30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6',\n        '462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b'\n      ],\n      [\n        'be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297',\n        '62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc'\n      ],\n      [\n        '93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a',\n        '7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c'\n      ],\n      [\n        'b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c',\n        'ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f'\n      ],\n      [\n        'd5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52',\n        '4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a'\n      ],\n      [\n        'd3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb',\n        'bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46'\n      ],\n      [\n        '463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065',\n        'bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f'\n      ],\n      [\n        '7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917',\n        '603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03'\n      ],\n      [\n        '74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9',\n        'cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08'\n      ],\n      [\n        '30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3',\n        '553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8'\n      ],\n      [\n        '9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57',\n        '712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373'\n      ],\n      [\n        '176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66',\n        'ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3'\n      ],\n      [\n        '75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8',\n        '9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8'\n      ],\n      [\n        '809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721',\n        '9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1'\n      ],\n      [\n        '1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180',\n        '4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9'\n      ]\n    ]\n  }\n};\n","'use strict';\n\nvar BN = require('bn.js');\nvar HmacDRBG = require('hmac-drbg');\nvar utils = require('../utils');\nvar curves = require('../curves');\nvar rand = require('brorand');\nvar assert = utils.assert;\n\nvar KeyPair = require('./key');\nvar Signature = require('./signature');\n\nfunction EC(options) {\n  if (!(this instanceof EC))\n    return new EC(options);\n\n  // Shortcut `elliptic.ec(curve-name)`\n  if (typeof options === 'string') {\n    assert(curves.hasOwnProperty(options), 'Unknown curve ' + options);\n\n    options = curves[options];\n  }\n\n  // Shortcut for `elliptic.ec(elliptic.curves.curveName)`\n  if (options instanceof curves.PresetCurve)\n    options = { curve: options };\n\n  this.curve = options.curve.curve;\n  this.n = this.curve.n;\n  this.nh = this.n.ushrn(1);\n  this.g = this.curve.g;\n\n  // Point on curve\n  this.g = options.curve.g;\n  this.g.precompute(options.curve.n.bitLength() + 1);\n\n  // Hash for function for DRBG\n  this.hash = options.hash || options.curve.hash;\n}\nmodule.exports = EC;\n\nEC.prototype.keyPair = function keyPair(options) {\n  return new KeyPair(this, options);\n};\n\nEC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {\n  return KeyPair.fromPrivate(this, priv, enc);\n};\n\nEC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {\n  return KeyPair.fromPublic(this, pub, enc);\n};\n\nEC.prototype.genKeyPair = function genKeyPair(options) {\n  if (!options)\n    options = {};\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n    entropy: options.entropy || rand(this.hash.hmacStrength),\n    entropyEnc: options.entropy && options.entropyEnc || 'utf8',\n    nonce: this.n.toArray()\n  });\n\n  var bytes = this.n.byteLength();\n  var ns2 = this.n.sub(new BN(2));\n  do {\n    var priv = new BN(drbg.generate(bytes));\n    if (priv.cmp(ns2) > 0)\n      continue;\n\n    priv.iaddn(1);\n    return this.keyFromPrivate(priv);\n  } while (true);\n};\n\nEC.prototype._truncateToN = function truncateToN(msg, truncOnly) {\n  var delta = msg.byteLength() * 8 - this.n.bitLength();\n  if (delta > 0)\n    msg = msg.ushrn(delta);\n  if (!truncOnly && msg.cmp(this.n) >= 0)\n    return msg.sub(this.n);\n  else\n    return msg;\n};\n\nEC.prototype.sign = function sign(msg, key, enc, options) {\n  if (typeof enc === 'object') {\n    options = enc;\n    enc = null;\n  }\n  if (!options)\n    options = {};\n\n  key = this.keyFromPrivate(key, enc);\n  msg = this._truncateToN(new BN(msg, 16));\n\n  // Zero-extend key to provide enough entropy\n  var bytes = this.n.byteLength();\n  var bkey = key.getPrivate().toArray('be', bytes);\n\n  // Zero-extend nonce to have the same byte size as N\n  var nonce = msg.toArray('be', bytes);\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    entropy: bkey,\n    nonce: nonce,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8'\n  });\n\n  // Number of bytes to generate\n  var ns1 = this.n.sub(new BN(1));\n\n  for (var iter = 0; true; iter++) {\n    var k = options.k ?\n        options.k(iter) :\n        new BN(drbg.generate(this.n.byteLength()));\n    k = this._truncateToN(k, true);\n    if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0)\n      continue;\n\n    var kp = this.g.mul(k);\n    if (kp.isInfinity())\n      continue;\n\n    var kpX = kp.getX();\n    var r = kpX.umod(this.n);\n    if (r.cmpn(0) === 0)\n      continue;\n\n    var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));\n    s = s.umod(this.n);\n    if (s.cmpn(0) === 0)\n      continue;\n\n    var recoveryParam = (kp.getY().isOdd() ? 1 : 0) |\n                        (kpX.cmp(r) !== 0 ? 2 : 0);\n\n    // Use complement of `s`, if it is > `n / 2`\n    if (options.canonical && s.cmp(this.nh) > 0) {\n      s = this.n.sub(s);\n      recoveryParam ^= 1;\n    }\n\n    return new Signature({ r: r, s: s, recoveryParam: recoveryParam });\n  }\n};\n\nEC.prototype.verify = function verify(msg, signature, key, enc) {\n  msg = this._truncateToN(new BN(msg, 16));\n  key = this.keyFromPublic(key, enc);\n  signature = new Signature(signature, 'hex');\n\n  // Perform primitive values validation\n  var r = signature.r;\n  var s = signature.s;\n  if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0)\n    return false;\n  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0)\n    return false;\n\n  // Validate signature\n  var sinv = s.invm(this.n);\n  var u1 = sinv.mul(msg).umod(this.n);\n  var u2 = sinv.mul(r).umod(this.n);\n\n  if (!this.curve._maxwellTrick) {\n    var p = this.g.mulAdd(u1, key.getPublic(), u2);\n    if (p.isInfinity())\n      return false;\n\n    return p.getX().umod(this.n).cmp(r) === 0;\n  }\n\n  // NOTE: Greg Maxwell's trick, inspired by:\n  // https://git.io/vad3K\n\n  var p = this.g.jmulAdd(u1, key.getPublic(), u2);\n  if (p.isInfinity())\n    return false;\n\n  // Compare `p.x` of Jacobian point with `r`,\n  // this will do `p.x == r * p.z^2` instead of multiplying `p.x` by the\n  // inverse of `p.z^2`\n  return p.eqXToP(r);\n};\n\nEC.prototype.recoverPubKey = function(msg, signature, j, enc) {\n  assert((3 & j) === j, 'The recovery param is more than two bits');\n  signature = new Signature(signature, enc);\n\n  var n = this.n;\n  var e = new BN(msg);\n  var r = signature.r;\n  var s = signature.s;\n\n  // A set LSB signifies that the y-coordinate is odd\n  var isYOdd = j & 1;\n  var isSecondKey = j >> 1;\n  if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey)\n    throw new Error('Unable to find sencond key candinate');\n\n  // 1.1. Let x = r + jn.\n  if (isSecondKey)\n    r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);\n  else\n    r = this.curve.pointFromX(r, isYOdd);\n\n  var rInv = signature.r.invm(n);\n  var s1 = n.sub(e).mul(rInv).umod(n);\n  var s2 = s.mul(rInv).umod(n);\n\n  // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n  return this.g.mulAdd(s1, r, s2);\n};\n\nEC.prototype.getKeyRecoveryParam = function(e, signature, Q, enc) {\n  signature = new Signature(signature, enc);\n  if (signature.recoveryParam !== null)\n    return signature.recoveryParam;\n\n  for (var i = 0; i < 4; i++) {\n    var Qprime;\n    try {\n      Qprime = this.recoverPubKey(e, signature, i);\n    } catch (e) {\n      continue;\n    }\n\n    if (Qprime.eq(Q))\n      return i;\n  }\n  throw new Error('Unable to find valid recovery factor');\n};\n","'use strict';\n\nvar hash = require('hash.js');\nvar utils = require('minimalistic-crypto-utils');\nvar assert = require('minimalistic-assert');\n\nfunction HmacDRBG(options) {\n  if (!(this instanceof HmacDRBG))\n    return new HmacDRBG(options);\n  this.hash = options.hash;\n  this.predResist = !!options.predResist;\n\n  this.outLen = this.hash.outSize;\n  this.minEntropy = options.minEntropy || this.hash.hmacStrength;\n\n  this._reseed = null;\n  this.reseedInterval = null;\n  this.K = null;\n  this.V = null;\n\n  var entropy = utils.toArray(options.entropy, options.entropyEnc || 'hex');\n  var nonce = utils.toArray(options.nonce, options.nonceEnc || 'hex');\n  var pers = utils.toArray(options.pers, options.persEnc || 'hex');\n  assert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n  this._init(entropy, nonce, pers);\n}\nmodule.exports = HmacDRBG;\n\nHmacDRBG.prototype._init = function init(entropy, nonce, pers) {\n  var seed = entropy.concat(nonce).concat(pers);\n\n  this.K = new Array(this.outLen / 8);\n  this.V = new Array(this.outLen / 8);\n  for (var i = 0; i < this.V.length; i++) {\n    this.K[i] = 0x00;\n    this.V[i] = 0x01;\n  }\n\n  this._update(seed);\n  this._reseed = 1;\n  this.reseedInterval = 0x1000000000000;  // 2^48\n};\n\nHmacDRBG.prototype._hmac = function hmac() {\n  return new hash.hmac(this.hash, this.K);\n};\n\nHmacDRBG.prototype._update = function update(seed) {\n  var kmac = this._hmac()\n                 .update(this.V)\n                 .update([ 0x00 ]);\n  if (seed)\n    kmac = kmac.update(seed);\n  this.K = kmac.digest();\n  this.V = this._hmac().update(this.V).digest();\n  if (!seed)\n    return;\n\n  this.K = this._hmac()\n               .update(this.V)\n               .update([ 0x01 ])\n               .update(seed)\n               .digest();\n  this.V = this._hmac().update(this.V).digest();\n};\n\nHmacDRBG.prototype.reseed = function reseed(entropy, entropyEnc, add, addEnc) {\n  // Optional entropy enc\n  if (typeof entropyEnc !== 'string') {\n    addEnc = add;\n    add = entropyEnc;\n    entropyEnc = null;\n  }\n\n  entropy = utils.toArray(entropy, entropyEnc);\n  add = utils.toArray(add, addEnc);\n\n  assert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n\n  this._update(entropy.concat(add || []));\n  this._reseed = 1;\n};\n\nHmacDRBG.prototype.generate = function generate(len, enc, add, addEnc) {\n  if (this._reseed > this.reseedInterval)\n    throw new Error('Reseed is required');\n\n  // Optional encoding\n  if (typeof enc !== 'string') {\n    addEnc = add;\n    add = enc;\n    enc = null;\n  }\n\n  // Optional additional data\n  if (add) {\n    add = utils.toArray(add, addEnc || 'hex');\n    this._update(add);\n  }\n\n  var temp = [];\n  while (temp.length < len) {\n    this.V = this._hmac().update(this.V).digest();\n    temp = temp.concat(this.V);\n  }\n\n  var res = temp.slice(0, len);\n  this._update(add);\n  this._reseed++;\n  return utils.encode(res, enc);\n};\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar assert = utils.assert;\n\nfunction KeyPair(ec, options) {\n  this.ec = ec;\n  this.priv = null;\n  this.pub = null;\n\n  // KeyPair(ec, { priv: ..., pub: ... })\n  if (options.priv)\n    this._importPrivate(options.priv, options.privEnc);\n  if (options.pub)\n    this._importPublic(options.pub, options.pubEnc);\n}\nmodule.exports = KeyPair;\n\nKeyPair.fromPublic = function fromPublic(ec, pub, enc) {\n  if (pub instanceof KeyPair)\n    return pub;\n\n  return new KeyPair(ec, {\n    pub: pub,\n    pubEnc: enc\n  });\n};\n\nKeyPair.fromPrivate = function fromPrivate(ec, priv, enc) {\n  if (priv instanceof KeyPair)\n    return priv;\n\n  return new KeyPair(ec, {\n    priv: priv,\n    privEnc: enc\n  });\n};\n\nKeyPair.prototype.validate = function validate() {\n  var pub = this.getPublic();\n\n  if (pub.isInfinity())\n    return { result: false, reason: 'Invalid public key' };\n  if (!pub.validate())\n    return { result: false, reason: 'Public key is not a point' };\n  if (!pub.mul(this.ec.curve.n).isInfinity())\n    return { result: false, reason: 'Public key * N != O' };\n\n  return { result: true, reason: null };\n};\n\nKeyPair.prototype.getPublic = function getPublic(compact, enc) {\n  // compact is optional argument\n  if (typeof compact === 'string') {\n    enc = compact;\n    compact = null;\n  }\n\n  if (!this.pub)\n    this.pub = this.ec.g.mul(this.priv);\n\n  if (!enc)\n    return this.pub;\n\n  return this.pub.encode(enc, compact);\n};\n\nKeyPair.prototype.getPrivate = function getPrivate(enc) {\n  if (enc === 'hex')\n    return this.priv.toString(16, 2);\n  else\n    return this.priv;\n};\n\nKeyPair.prototype._importPrivate = function _importPrivate(key, enc) {\n  this.priv = new BN(key, enc || 16);\n\n  // Ensure that the priv won't be bigger than n, otherwise we may fail\n  // in fixed multiplication method\n  this.priv = this.priv.umod(this.ec.curve.n);\n};\n\nKeyPair.prototype._importPublic = function _importPublic(key, enc) {\n  if (key.x || key.y) {\n    // Montgomery points only have an `x` coordinate.\n    // Weierstrass/Edwards points on the other hand have both `x` and\n    // `y` coordinates.\n    if (this.ec.curve.type === 'mont') {\n      assert(key.x, 'Need x coordinate');\n    } else if (this.ec.curve.type === 'short' ||\n               this.ec.curve.type === 'edwards') {\n      assert(key.x && key.y, 'Need both x and y coordinate');\n    }\n    this.pub = this.ec.curve.point(key.x, key.y);\n    return;\n  }\n  this.pub = this.ec.curve.decodePoint(key, enc);\n};\n\n// ECDH\nKeyPair.prototype.derive = function derive(pub) {\n  return pub.mul(this.priv).getX();\n};\n\n// ECDSA\nKeyPair.prototype.sign = function sign(msg, enc, options) {\n  return this.ec.sign(msg, this, enc, options);\n};\n\nKeyPair.prototype.verify = function verify(msg, signature) {\n  return this.ec.verify(msg, signature, this);\n};\n\nKeyPair.prototype.inspect = function inspect() {\n  return '<Key priv: ' + (this.priv && this.priv.toString(16, 2)) +\n         ' pub: ' + (this.pub && this.pub.inspect()) + ' >';\n};\n","'use strict';\n\nvar BN = require('bn.js');\n\nvar utils = require('../utils');\nvar assert = utils.assert;\n\nfunction Signature(options, enc) {\n  if (options instanceof Signature)\n    return options;\n\n  if (this._importDER(options, enc))\n    return;\n\n  assert(options.r && options.s, 'Signature without r or s');\n  this.r = new BN(options.r, 16);\n  this.s = new BN(options.s, 16);\n  if (options.recoveryParam === undefined)\n    this.recoveryParam = null;\n  else\n    this.recoveryParam = options.recoveryParam;\n}\nmodule.exports = Signature;\n\nfunction Position() {\n  this.place = 0;\n}\n\nfunction getLength(buf, p) {\n  var initial = buf[p.place++];\n  if (!(initial & 0x80)) {\n    return initial;\n  }\n  var octetLen = initial & 0xf;\n\n  // Indefinite length or overflow\n  if (octetLen === 0 || octetLen > 4) {\n    return false;\n  }\n\n  var val = 0;\n  for (var i = 0, off = p.place; i < octetLen; i++, off++) {\n    val <<= 8;\n    val |= buf[off];\n    val >>>= 0;\n  }\n\n  // Leading zeroes\n  if (val <= 0x7f) {\n    return false;\n  }\n\n  p.place = off;\n  return val;\n}\n\nfunction rmPadding(buf) {\n  var i = 0;\n  var len = buf.length - 1;\n  while (!buf[i] && !(buf[i + 1] & 0x80) && i < len) {\n    i++;\n  }\n  if (i === 0) {\n    return buf;\n  }\n  return buf.slice(i);\n}\n\nSignature.prototype._importDER = function _importDER(data, enc) {\n  data = utils.toArray(data, enc);\n  var p = new Position();\n  if (data[p.place++] !== 0x30) {\n    return false;\n  }\n  var len = getLength(data, p);\n  if (len === false) {\n    return false;\n  }\n  if ((len + p.place) !== data.length) {\n    return false;\n  }\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var rlen = getLength(data, p);\n  if (rlen === false) {\n    return false;\n  }\n  var r = data.slice(p.place, rlen + p.place);\n  p.place += rlen;\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var slen = getLength(data, p);\n  if (slen === false) {\n    return false;\n  }\n  if (data.length !== slen + p.place) {\n    return false;\n  }\n  var s = data.slice(p.place, slen + p.place);\n  if (r[0] === 0) {\n    if (r[1] & 0x80) {\n      r = r.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n  if (s[0] === 0) {\n    if (s[1] & 0x80) {\n      s = s.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n\n  this.r = new BN(r);\n  this.s = new BN(s);\n  this.recoveryParam = null;\n\n  return true;\n};\n\nfunction constructLength(arr, len) {\n  if (len < 0x80) {\n    arr.push(len);\n    return;\n  }\n  var octets = 1 + (Math.log(len) / Math.LN2 >>> 3);\n  arr.push(octets | 0x80);\n  while (--octets) {\n    arr.push((len >>> (octets << 3)) & 0xff);\n  }\n  arr.push(len);\n}\n\nSignature.prototype.toDER = function toDER(enc) {\n  var r = this.r.toArray();\n  var s = this.s.toArray();\n\n  // Pad values\n  if (r[0] & 0x80)\n    r = [ 0 ].concat(r);\n  // Pad values\n  if (s[0] & 0x80)\n    s = [ 0 ].concat(s);\n\n  r = rmPadding(r);\n  s = rmPadding(s);\n\n  while (!s[0] && !(s[1] & 0x80)) {\n    s = s.slice(1);\n  }\n  var arr = [ 0x02 ];\n  constructLength(arr, r.length);\n  arr = arr.concat(r);\n  arr.push(0x02);\n  constructLength(arr, s.length);\n  var backHalf = arr.concat(s);\n  var res = [ 0x30 ];\n  constructLength(res, backHalf.length);\n  res = res.concat(backHalf);\n  return utils.encode(res, enc);\n};\n","'use strict';\n\nvar hash = require('hash.js');\nvar curves = require('../curves');\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar KeyPair = require('./key');\nvar Signature = require('./signature');\n\nfunction EDDSA(curve) {\n  assert(curve === 'ed25519', 'only tested with ed25519 so far');\n\n  if (!(this instanceof EDDSA))\n    return new EDDSA(curve);\n\n  var curve = curves[curve].curve;\n  this.curve = curve;\n  this.g = curve.g;\n  this.g.precompute(curve.n.bitLength() + 1);\n\n  this.pointClass = curve.point().constructor;\n  this.encodingLength = Math.ceil(curve.n.bitLength() / 8);\n  this.hash = hash.sha512;\n}\n\nmodule.exports = EDDSA;\n\n/**\n* @param {Array|String} message - message bytes\n* @param {Array|String|KeyPair} secret - secret bytes or a keypair\n* @returns {Signature} - signature\n*/\nEDDSA.prototype.sign = function sign(message, secret) {\n  message = parseBytes(message);\n  var key = this.keyFromSecret(secret);\n  var r = this.hashInt(key.messagePrefix(), message);\n  var R = this.g.mul(r);\n  var Rencoded = this.encodePoint(R);\n  var s_ = this.hashInt(Rencoded, key.pubBytes(), message)\n               .mul(key.priv());\n  var S = r.add(s_).umod(this.curve.n);\n  return this.makeSignature({ R: R, S: S, Rencoded: Rencoded });\n};\n\n/**\n* @param {Array} message - message bytes\n* @param {Array|String|Signature} sig - sig bytes\n* @param {Array|String|Point|KeyPair} pub - public key\n* @returns {Boolean} - true if public key matches sig of message\n*/\nEDDSA.prototype.verify = function verify(message, sig, pub) {\n  message = parseBytes(message);\n  sig = this.makeSignature(sig);\n  var key = this.keyFromPublic(pub);\n  var h = this.hashInt(sig.Rencoded(), key.pubBytes(), message);\n  var SG = this.g.mul(sig.S());\n  var RplusAh = sig.R().add(key.pub().mul(h));\n  return RplusAh.eq(SG);\n};\n\nEDDSA.prototype.hashInt = function hashInt() {\n  var hash = this.hash();\n  for (var i = 0; i < arguments.length; i++)\n    hash.update(arguments[i]);\n  return utils.intFromLE(hash.digest()).umod(this.curve.n);\n};\n\nEDDSA.prototype.keyFromPublic = function keyFromPublic(pub) {\n  return KeyPair.fromPublic(this, pub);\n};\n\nEDDSA.prototype.keyFromSecret = function keyFromSecret(secret) {\n  return KeyPair.fromSecret(this, secret);\n};\n\nEDDSA.prototype.makeSignature = function makeSignature(sig) {\n  if (sig instanceof Signature)\n    return sig;\n  return new Signature(this, sig);\n};\n\n/**\n* * https://tools.ietf.org/html/draft-josefsson-eddsa-ed25519-03#section-5.2\n*\n* EDDSA defines methods for encoding and decoding points and integers. These are\n* helper convenience methods, that pass along to utility functions implied\n* parameters.\n*\n*/\nEDDSA.prototype.encodePoint = function encodePoint(point) {\n  var enc = point.getY().toArray('le', this.encodingLength);\n  enc[this.encodingLength - 1] |= point.getX().isOdd() ? 0x80 : 0;\n  return enc;\n};\n\nEDDSA.prototype.decodePoint = function decodePoint(bytes) {\n  bytes = utils.parseBytes(bytes);\n\n  var lastIx = bytes.length - 1;\n  var normed = bytes.slice(0, lastIx).concat(bytes[lastIx] & ~0x80);\n  var xIsOdd = (bytes[lastIx] & 0x80) !== 0;\n\n  var y = utils.intFromLE(normed);\n  return this.curve.pointFromY(y, xIsOdd);\n};\n\nEDDSA.prototype.encodeInt = function encodeInt(num) {\n  return num.toArray('le', this.encodingLength);\n};\n\nEDDSA.prototype.decodeInt = function decodeInt(bytes) {\n  return utils.intFromLE(bytes);\n};\n\nEDDSA.prototype.isPoint = function isPoint(val) {\n  return val instanceof this.pointClass;\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar cachedProperty = utils.cachedProperty;\n\n/**\n* @param {EDDSA} eddsa - instance\n* @param {Object} params - public/private key parameters\n*\n* @param {Array<Byte>} [params.secret] - secret seed bytes\n* @param {Point} [params.pub] - public key point (aka `A` in eddsa terms)\n* @param {Array<Byte>} [params.pub] - public key point encoded as bytes\n*\n*/\nfunction KeyPair(eddsa, params) {\n  this.eddsa = eddsa;\n  this._secret = parseBytes(params.secret);\n  if (eddsa.isPoint(params.pub))\n    this._pub = params.pub;\n  else\n    this._pubBytes = parseBytes(params.pub);\n}\n\nKeyPair.fromPublic = function fromPublic(eddsa, pub) {\n  if (pub instanceof KeyPair)\n    return pub;\n  return new KeyPair(eddsa, { pub: pub });\n};\n\nKeyPair.fromSecret = function fromSecret(eddsa, secret) {\n  if (secret instanceof KeyPair)\n    return secret;\n  return new KeyPair(eddsa, { secret: secret });\n};\n\nKeyPair.prototype.secret = function secret() {\n  return this._secret;\n};\n\ncachedProperty(KeyPair, 'pubBytes', function pubBytes() {\n  return this.eddsa.encodePoint(this.pub());\n});\n\ncachedProperty(KeyPair, 'pub', function pub() {\n  if (this._pubBytes)\n    return this.eddsa.decodePoint(this._pubBytes);\n  return this.eddsa.g.mul(this.priv());\n});\n\ncachedProperty(KeyPair, 'privBytes', function privBytes() {\n  var eddsa = this.eddsa;\n  var hash = this.hash();\n  var lastIx = eddsa.encodingLength - 1;\n\n  var a = hash.slice(0, eddsa.encodingLength);\n  a[0] &= 248;\n  a[lastIx] &= 127;\n  a[lastIx] |= 64;\n\n  return a;\n});\n\ncachedProperty(KeyPair, 'priv', function priv() {\n  return this.eddsa.decodeInt(this.privBytes());\n});\n\ncachedProperty(KeyPair, 'hash', function hash() {\n  return this.eddsa.hash().update(this.secret()).digest();\n});\n\ncachedProperty(KeyPair, 'messagePrefix', function messagePrefix() {\n  return this.hash().slice(this.eddsa.encodingLength);\n});\n\nKeyPair.prototype.sign = function sign(message) {\n  assert(this._secret, 'KeyPair can only verify');\n  return this.eddsa.sign(message, this);\n};\n\nKeyPair.prototype.verify = function verify(message, sig) {\n  return this.eddsa.verify(message, sig, this);\n};\n\nKeyPair.prototype.getSecret = function getSecret(enc) {\n  assert(this._secret, 'KeyPair is public only');\n  return utils.encode(this.secret(), enc);\n};\n\nKeyPair.prototype.getPublic = function getPublic(enc) {\n  return utils.encode(this.pubBytes(), enc);\n};\n\nmodule.exports = KeyPair;\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar cachedProperty = utils.cachedProperty;\nvar parseBytes = utils.parseBytes;\n\n/**\n* @param {EDDSA} eddsa - eddsa instance\n* @param {Array<Bytes>|Object} sig -\n* @param {Array<Bytes>|Point} [sig.R] - R point as Point or bytes\n* @param {Array<Bytes>|bn} [sig.S] - S scalar as bn or bytes\n* @param {Array<Bytes>} [sig.Rencoded] - R point encoded\n* @param {Array<Bytes>} [sig.Sencoded] - S scalar encoded\n*/\nfunction Signature(eddsa, sig) {\n  this.eddsa = eddsa;\n\n  if (typeof sig !== 'object')\n    sig = parseBytes(sig);\n\n  if (Array.isArray(sig)) {\n    sig = {\n      R: sig.slice(0, eddsa.encodingLength),\n      S: sig.slice(eddsa.encodingLength)\n    };\n  }\n\n  assert(sig.R && sig.S, 'Signature without R or S');\n\n  if (eddsa.isPoint(sig.R))\n    this._R = sig.R;\n  if (sig.S instanceof BN)\n    this._S = sig.S;\n\n  this._Rencoded = Array.isArray(sig.R) ? sig.R : sig.Rencoded;\n  this._Sencoded = Array.isArray(sig.S) ? sig.S : sig.Sencoded;\n}\n\ncachedProperty(Signature, 'S', function S() {\n  return this.eddsa.decodeInt(this.Sencoded());\n});\n\ncachedProperty(Signature, 'R', function R() {\n  return this.eddsa.decodePoint(this.Rencoded());\n});\n\ncachedProperty(Signature, 'Rencoded', function Rencoded() {\n  return this.eddsa.encodePoint(this.R());\n});\n\ncachedProperty(Signature, 'Sencoded', function Sencoded() {\n  return this.eddsa.encodeInt(this.S());\n});\n\nSignature.prototype.toBytes = function toBytes() {\n  return this.Rencoded().concat(this.Sencoded());\n};\n\nSignature.prototype.toHex = function toHex() {\n  return utils.encode(this.toBytes(), 'hex').toUpperCase();\n};\n\nmodule.exports = Signature;\n","const createHmac = require('create-hmac')\n\nconst ONE1 = Buffer.alloc(1, 1)\nconst ZERO1 = Buffer.alloc(1, 0)\n\n// https://tools.ietf.org/html/rfc6979#section-3.2\nfunction deterministicGenerateK (hash, x, checkSig, isPrivate, extraEntropy) {\n  // Step A, ignored as hash already provided\n  // Step B\n  // Step C\n  let k = Buffer.alloc(32, 0)\n  let v = Buffer.alloc(32, 1)\n\n  // Step D\n  k = createHmac('sha256', k)\n    .update(v)\n    .update(ZERO1)\n    .update(x)\n    .update(hash)\n    .update(extraEntropy || '')\n    .digest()\n\n  // Step E\n  v = createHmac('sha256', k).update(v).digest()\n\n  // Step F\n  k = createHmac('sha256', k)\n    .update(v)\n    .update(ONE1)\n    .update(x)\n    .update(hash)\n    .update(extraEntropy || '')\n    .digest()\n\n  // Step G\n  v = createHmac('sha256', k).update(v).digest()\n\n  // Step H1/H2a, ignored as tlen === qlen (256 bit)\n  // Step H2b\n  v = createHmac('sha256', k).update(v).digest()\n\n  let T = v\n\n  // Step H3, repeat until T is within the interval [1, n - 1] and is suitable for ECDSA\n  while (!isPrivate(T) || !checkSig(T)) {\n    k = createHmac('sha256', k)\n      .update(v)\n      .update(ZERO1)\n      .digest()\n\n    v = createHmac('sha256', k).update(v).digest()\n\n    // Step H1/H2a, again, ignored as tlen === qlen (256 bit)\n    // Step H2b again\n    v = createHmac('sha256', k).update(v).digest()\n    T = v\n  }\n\n  return T\n}\n\nmodule.exports = deterministicGenerateK\n","var NATIVE = require('./native')\nvar ERRORS = require('./errors')\n\nfunction _Buffer (value) {\n  return Buffer.isBuffer(value)\n}\n\nfunction Hex (value) {\n  return typeof value === 'string' && /^([0-9a-f]{2})+$/i.test(value)\n}\n\nfunction _LengthN (type, length) {\n  var name = type.toJSON()\n\n  function Length (value) {\n    if (!type(value)) return false\n    if (value.length === length) return true\n\n    throw ERRORS.tfCustomError(name + '(Length: ' + length + ')', name + '(Length: ' + value.length + ')')\n  }\n  Length.toJSON = function () { return name }\n\n  return Length\n}\n\nvar _ArrayN = _LengthN.bind(null, NATIVE.Array)\nvar _BufferN = _LengthN.bind(null, _Buffer)\nvar _HexN = _LengthN.bind(null, Hex)\nvar _StringN = _LengthN.bind(null, NATIVE.String)\n\nfunction Range (a, b, f) {\n  f = f || NATIVE.Number\n  function _range (value, strict) {\n    return f(value, strict) && (value > a) && (value < b)\n  }\n  _range.toJSON = function () {\n    return `${f.toJSON()} between [${a}, ${b}]`\n  }\n  return _range\n}\n\nvar INT53_MAX = Math.pow(2, 53) - 1\n\nfunction Finite (value) {\n  return typeof value === 'number' && isFinite(value)\n}\nfunction Int8 (value) { return ((value << 24) >> 24) === value }\nfunction Int16 (value) { return ((value << 16) >> 16) === value }\nfunction Int32 (value) { return (value | 0) === value }\nfunction Int53 (value) {\n  return typeof value === 'number' &&\n    value >= -INT53_MAX &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\nfunction UInt8 (value) { return (value & 0xff) === value }\nfunction UInt16 (value) { return (value & 0xffff) === value }\nfunction UInt32 (value) { return (value >>> 0) === value }\nfunction UInt53 (value) {\n  return typeof value === 'number' &&\n    value >= 0 &&\n    value <= INT53_MAX &&\n    Math.floor(value) === value\n}\n\nvar types = {\n  ArrayN: _ArrayN,\n  Buffer: _Buffer,\n  BufferN: _BufferN,\n  Finite: Finite,\n  Hex: Hex,\n  HexN: _HexN,\n  Int8: Int8,\n  Int16: Int16,\n  Int32: Int32,\n  Int53: Int53,\n  Range: Range,\n  StringN: _StringN,\n  UInt8: UInt8,\n  UInt16: UInt16,\n  UInt32: UInt32,\n  UInt53: UInt53\n}\n\nfor (var typeName in types) {\n  types[typeName].toJSON = function (t) {\n    return t\n  }.bind(null, typeName)\n}\n\nmodule.exports = types\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// output: OP_RETURN ...\nfunction p2data(a, opts) {\n  if (!a.data && !a.output) throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      data: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'embed', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.data) return;\n    return bscript.compile([OPS.OP_RETURN].concat(a.data));\n  });\n  lazy.prop(o, 'data', () => {\n    if (!a.output) return;\n    return bscript.decompile(a.output).slice(1);\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      const chunks = bscript.decompile(a.output);\n      if (chunks[0] !== OPS.OP_RETURN) throw new TypeError('Output is invalid');\n      if (!chunks.slice(1).every(typef.Buffer))\n        throw new TypeError('Output is invalid');\n      if (a.data && !stacksEqual(a.data, o.data))\n        throw new TypeError('Data mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2data = p2data;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction decode(buffer, maxLength, minimal) {\n  maxLength = maxLength || 4;\n  minimal = minimal === undefined ? true : minimal;\n  const length = buffer.length;\n  if (length === 0) return 0;\n  if (length > maxLength) throw new TypeError('Script number overflow');\n  if (minimal) {\n    if ((buffer[length - 1] & 0x7f) === 0) {\n      if (length <= 1 || (buffer[length - 2] & 0x80) === 0)\n        throw new Error('Non-minimally encoded script number');\n    }\n  }\n  // 40-bit\n  if (length === 5) {\n    const a = buffer.readUInt32LE(0);\n    const b = buffer.readUInt8(4);\n    if (b & 0x80) return -((b & ~0x80) * 0x100000000 + a);\n    return b * 0x100000000 + a;\n  }\n  // 32-bit / 24-bit / 16-bit / 8-bit\n  let result = 0;\n  for (let i = 0; i < length; ++i) {\n    result |= buffer[i] << (8 * i);\n  }\n  if (buffer[length - 1] & 0x80)\n    return -(result & ~(0x80 << (8 * (length - 1))));\n  return result;\n}\nexports.decode = decode;\nfunction scriptNumSize(i) {\n  return i > 0x7fffffff\n    ? 5\n    : i > 0x7fffff\n    ? 4\n    : i > 0x7fff\n    ? 3\n    : i > 0x7f\n    ? 2\n    : i > 0x00\n    ? 1\n    : 0;\n}\nfunction encode(_number) {\n  let value = Math.abs(_number);\n  const size = scriptNumSize(value);\n  const buffer = Buffer.allocUnsafe(size);\n  const negative = _number < 0;\n  for (let i = 0; i < size; ++i) {\n    buffer.writeUInt8(value & 0xff, i);\n    value >>= 8;\n  }\n  if (buffer[size - 1] & 0x80) {\n    buffer.writeUInt8(negative ? 0x80 : 0x00, size - 1);\n  } else if (negative) {\n    buffer[size - 1] |= 0x80;\n  }\n  return buffer;\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst types = require('./types');\nconst bip66 = require('bip66');\nconst typeforce = require('typeforce');\nconst ZERO = Buffer.alloc(1, 0);\nfunction toDER(x) {\n  let i = 0;\n  while (x[i] === 0) ++i;\n  if (i === x.length) return ZERO;\n  x = x.slice(i);\n  if (x[0] & 0x80) return Buffer.concat([ZERO, x], 1 + x.length);\n  return x;\n}\nfunction fromDER(x) {\n  if (x[0] === 0x00) x = x.slice(1);\n  const buffer = Buffer.alloc(32, 0);\n  const bstart = Math.max(0, 32 - x.length);\n  x.copy(buffer, bstart);\n  return buffer;\n}\n// BIP62: 1 byte hashType flag (only 0x01, 0x02, 0x03, 0x81, 0x82 and 0x83 are allowed)\nfunction decode(buffer) {\n  const hashType = buffer.readUInt8(buffer.length - 1);\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const decoded = bip66.decode(buffer.slice(0, -1));\n  const r = fromDER(decoded.r);\n  const s = fromDER(decoded.s);\n  const signature = Buffer.concat([r, s], 64);\n  return { signature, hashType };\n}\nexports.decode = decode;\nfunction encode(signature, hashType) {\n  typeforce(\n    {\n      signature: types.BufferN(64),\n      hashType: types.UInt8,\n    },\n    { signature, hashType },\n  );\n  const hashTypeMod = hashType & ~0x80;\n  if (hashTypeMod <= 0 || hashTypeMod >= 4)\n    throw new Error('Invalid hashType ' + hashType);\n  const hashTypeBuffer = Buffer.allocUnsafe(1);\n  hashTypeBuffer.writeUInt8(hashType, 0);\n  const r = toDER(signature.slice(0, 32));\n  const s = toDER(signature.slice(32, 64));\n  return Buffer.concat([bip66.encode(r, s), hashTypeBuffer]);\n}\nexports.encode = encode;\n","var OPS = require('bitcoin-ops')\n\nfunction encodingLength (i) {\n  return i < OPS.OP_PUSHDATA1 ? 1\n  : i <= 0xff ? 2\n  : i <= 0xffff ? 3\n  : 5\n}\n\nfunction encode (buffer, number, offset) {\n  var size = encodingLength(number)\n\n  // ~6 bit\n  if (size === 1) {\n    buffer.writeUInt8(number, offset)\n\n  // 8 bit\n  } else if (size === 2) {\n    buffer.writeUInt8(OPS.OP_PUSHDATA1, offset)\n    buffer.writeUInt8(number, offset + 1)\n\n  // 16 bit\n  } else if (size === 3) {\n    buffer.writeUInt8(OPS.OP_PUSHDATA2, offset)\n    buffer.writeUInt16LE(number, offset + 1)\n\n  // 32 bit\n  } else {\n    buffer.writeUInt8(OPS.OP_PUSHDATA4, offset)\n    buffer.writeUInt32LE(number, offset + 1)\n  }\n\n  return size\n}\n\nfunction decode (buffer, offset) {\n  var opcode = buffer.readUInt8(offset)\n  var number, size\n\n  // ~6 bit\n  if (opcode < OPS.OP_PUSHDATA1) {\n    number = opcode\n    size = 1\n\n  // 8 bit\n  } else if (opcode === OPS.OP_PUSHDATA1) {\n    if (offset + 2 > buffer.length) return null\n    number = buffer.readUInt8(offset + 1)\n    size = 2\n\n  // 16 bit\n  } else if (opcode === OPS.OP_PUSHDATA2) {\n    if (offset + 3 > buffer.length) return null\n    number = buffer.readUInt16LE(offset + 1)\n    size = 3\n\n  // 32 bit\n  } else {\n    if (offset + 5 > buffer.length) return null\n    if (opcode !== OPS.OP_PUSHDATA4) throw new Error('Unexpected opcode')\n\n    number = buffer.readUInt32LE(offset + 1)\n    size = 5\n  }\n\n  return {\n    opcode: opcode,\n    number: number,\n    size: size\n  }\n}\n\nmodule.exports = {\n  encodingLength: encodingLength,\n  encode: encode,\n  decode: decode\n}\n","var OPS = require('./index.json')\n\nvar map = {}\nfor (var op in OPS) {\n  var code = OPS[op]\n  map[code] = op\n}\n\nmodule.exports = map\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst OPS = bscript.OPS;\nconst typef = require('typeforce');\nconst ecc = require('tiny-secp256k1');\nconst OP_INT_BASE = OPS.OP_RESERVED; // OP_1 - 1\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: OP_0 [signatures ...]\n// output: m [pubKeys ...] n OP_CHECKMULTISIG\nfunction p2ms(a, opts) {\n  if (\n    !a.input &&\n    !a.output &&\n    !(a.pubkeys && a.m !== undefined) &&\n    !a.signatures\n  )\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  function isAcceptableSignature(x) {\n    return (\n      bscript.isCanonicalScriptSignature(x) ||\n      (opts.allowIncomplete && x === OPS.OP_0) !== undefined\n    );\n  }\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      m: typef.maybe(typef.Number),\n      n: typef.maybe(typef.Number),\n      output: typef.maybe(typef.Buffer),\n      pubkeys: typef.maybe(typef.arrayOf(ecc.isPoint)),\n      signatures: typef.maybe(typef.arrayOf(isAcceptableSignature)),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const network = a.network || networks_1.bitcoin;\n  const o = { network };\n  let chunks = [];\n  let decoded = false;\n  function decode(output) {\n    if (decoded) return;\n    decoded = true;\n    chunks = bscript.decompile(output);\n    o.m = chunks[0] - OP_INT_BASE;\n    o.n = chunks[chunks.length - 2] - OP_INT_BASE;\n    o.pubkeys = chunks.slice(1, -2);\n  }\n  lazy.prop(o, 'output', () => {\n    if (!a.m) return;\n    if (!o.n) return;\n    if (!a.pubkeys) return;\n    return bscript.compile(\n      [].concat(\n        OP_INT_BASE + a.m,\n        a.pubkeys,\n        OP_INT_BASE + o.n,\n        OPS.OP_CHECKMULTISIG,\n      ),\n    );\n  });\n  lazy.prop(o, 'm', () => {\n    if (!o.output) return;\n    decode(o.output);\n    return o.m;\n  });\n  lazy.prop(o, 'n', () => {\n    if (!o.pubkeys) return;\n    return o.pubkeys.length;\n  });\n  lazy.prop(o, 'pubkeys', () => {\n    if (!a.output) return;\n    decode(a.output);\n    return o.pubkeys;\n  });\n  lazy.prop(o, 'signatures', () => {\n    if (!a.input) return;\n    return bscript.decompile(a.input).slice(1);\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signatures) return;\n    return bscript.compile([OPS.OP_0].concat(a.signatures));\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  lazy.prop(o, 'name', () => {\n    if (!o.m || !o.n) return;\n    return `p2ms(${o.m} of ${o.n})`;\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      decode(a.output);\n      if (!typef.Number(chunks[0])) throw new TypeError('Output is invalid');\n      if (!typef.Number(chunks[chunks.length - 2]))\n        throw new TypeError('Output is invalid');\n      if (chunks[chunks.length - 1] !== OPS.OP_CHECKMULTISIG)\n        throw new TypeError('Output is invalid');\n      if (o.m <= 0 || o.n > 16 || o.m > o.n || o.n !== chunks.length - 3)\n        throw new TypeError('Output is invalid');\n      if (!o.pubkeys.every(x => ecc.isPoint(x)))\n        throw new TypeError('Output is invalid');\n      if (a.m !== undefined && a.m !== o.m) throw new TypeError('m mismatch');\n      if (a.n !== undefined && a.n !== o.n) throw new TypeError('n mismatch');\n      if (a.pubkeys && !stacksEqual(a.pubkeys, o.pubkeys))\n        throw new TypeError('Pubkeys mismatch');\n    }\n    if (a.pubkeys) {\n      if (a.n !== undefined && a.n !== a.pubkeys.length)\n        throw new TypeError('Pubkey count mismatch');\n      o.n = a.pubkeys.length;\n      if (o.n < o.m) throw new TypeError('Pubkey count cannot be less than m');\n    }\n    if (a.signatures) {\n      if (a.signatures.length < o.m)\n        throw new TypeError('Not enough signatures provided');\n      if (a.signatures.length > o.m)\n        throw new TypeError('Too many signatures provided');\n    }\n    if (a.input) {\n      if (a.input[0] !== OPS.OP_0) throw new TypeError('Input is invalid');\n      if (\n        o.signatures.length === 0 ||\n        !o.signatures.every(isAcceptableSignature)\n      )\n        throw new TypeError('Input has invalid signature(s)');\n      if (a.signatures && !stacksEqual(a.signatures, o.signatures))\n        throw new TypeError('Signature mismatch');\n      if (a.m !== undefined && a.m !== a.signatures.length)\n        throw new TypeError('Signature count mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2ms = p2ms;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\n// input: {signature}\n// output: {pubKey} OP_CHECKSIG\nfunction p2pk(a, opts) {\n  if (!a.input && !a.output && !a.pubkey && !a.input && !a.signature)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.Buffer),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pk', network };\n  lazy.prop(o, 'output', () => {\n    if (!a.pubkey) return;\n    return bscript.compile([a.pubkey, OPS.OP_CHECKSIG]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.output) return;\n    return a.output.slice(1, -1);\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.signature) return;\n    return bscript.compile([a.signature]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    if (a.output) {\n      if (a.output[a.output.length - 1] !== OPS.OP_CHECKSIG)\n        throw new TypeError('Output is invalid');\n      if (!ecc.isPoint(o.pubkey))\n        throw new TypeError('Output pubkey is invalid');\n      if (a.pubkey && !a.pubkey.equals(o.pubkey))\n        throw new TypeError('Pubkey mismatch');\n    }\n    if (a.signature) {\n      if (a.input && !a.input.equals(o.input))\n        throw new TypeError('Signature mismatch');\n    }\n    if (a.input) {\n      if (_chunks().length !== 1) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(o.signature))\n        throw new TypeError('Input has invalid signature');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pk = p2pk;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bs58check = require('bs58check');\n// input: {signature} {pubkey}\n// output: OP_DUP OP_HASH160 {hash160(pubkey)} OP_EQUALVERIFY OP_CHECKSIG\nfunction p2pkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      output: typef.maybe(typef.BufferN(25)),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      input: typef.maybe(typef.Buffer),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2pkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(network.pubKeyHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(3, 23);\n    if (a.address) return _address().hash;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([\n      OPS.OP_DUP,\n      OPS.OP_HASH160,\n      o.hash,\n      OPS.OP_EQUALVERIFY,\n      OPS.OP_CHECKSIG,\n    ]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (!a.input) return;\n    return _chunks()[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.input) return;\n    return _chunks()[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return bscript.compile([a.signature, a.pubkey]);\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!o.input) return;\n    return [];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.pubKeyHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 25 ||\n        a.output[0] !== OPS.OP_DUP ||\n        a.output[1] !== OPS.OP_HASH160 ||\n        a.output[2] !== 0x14 ||\n        a.output[23] !== OPS.OP_EQUALVERIFY ||\n        a.output[24] !== OPS.OP_CHECKSIG\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(3, 23);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n    }\n    if (a.input) {\n      const chunks = _chunks();\n      if (chunks.length !== 2) throw new TypeError('Input is invalid');\n      if (!bscript.isCanonicalScriptSignature(chunks[0]))\n        throw new TypeError('Input has invalid signature');\n      if (!ecc.isPoint(chunks[1]))\n        throw new TypeError('Input has invalid pubkey');\n      if (a.signature && !a.signature.equals(chunks[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(chunks[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(chunks[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2pkh = p2pkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst bs58check = require('bs58check');\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: [redeemScriptSig ...] {redeemScript}\n// witness: <?>\n// output: OP_HASH160 {hash160(redeemScript)} OP_EQUAL\nfunction p2sh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.input)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      output: typef.maybe(typef.BufferN(23)),\n      redeem: typef.maybe({\n        network: typef.maybe(typef.Object),\n        output: typef.maybe(typef.Buffer),\n        input: typef.maybe(typef.Buffer),\n        witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n      }),\n      input: typef.maybe(typef.Buffer),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  const _address = lazy.value(() => {\n    const payload = bs58check.decode(a.address);\n    const version = payload.readUInt8(0);\n    const hash = payload.slice(1);\n    return { version, hash };\n  });\n  const _chunks = lazy.value(() => {\n    return bscript.decompile(a.input);\n  });\n  const _redeem = lazy.value(() => {\n    const chunks = _chunks();\n    return {\n      network,\n      output: chunks[chunks.length - 1],\n      input: bscript.compile(chunks.slice(0, -1)),\n      witness: a.witness || [],\n    };\n  });\n  // output dependents\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const payload = Buffer.allocUnsafe(21);\n    payload.writeUInt8(o.network.scriptHash, 0);\n    o.hash.copy(payload, 1);\n    return bs58check.encode(payload);\n  });\n  lazy.prop(o, 'hash', () => {\n    // in order of least effort\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().hash;\n    if (o.redeem && o.redeem.output) return bcrypto.hash160(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_HASH160, o.hash, OPS.OP_EQUAL]);\n  });\n  // input dependents\n  lazy.prop(o, 'redeem', () => {\n    if (!a.input) return;\n    return _redeem();\n  });\n  lazy.prop(o, 'input', () => {\n    if (!a.redeem || !a.redeem.input || !a.redeem.output) return;\n    return bscript.compile(\n      [].concat(bscript.decompile(a.redeem.input), a.redeem.output),\n    );\n  });\n  lazy.prop(o, 'witness', () => {\n    if (o.redeem && o.redeem.witness) return o.redeem.witness;\n    if (o.input) return [];\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2sh'];\n    if (o.redeem !== undefined) nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().version !== network.scriptHash)\n        throw new TypeError('Invalid version or Network mismatch');\n      if (_address().hash.length !== 20) throw new TypeError('Invalid address');\n      hash = _address().hash;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 23 ||\n        a.output[0] !== OPS.OP_HASH160 ||\n        a.output[1] !== 0x14 ||\n        a.output[22] !== OPS.OP_EQUAL\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2, 22);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    // inlined to prevent 'no-inner-declarations' failing\n    const checkRedeem = redeem => {\n      // is the redeem output empty/invalid?\n      if (redeem.output) {\n        const decompile = bscript.decompile(redeem.output);\n        if (!decompile || decompile.length < 1)\n          throw new TypeError('Redeem.output too short');\n        // match hash against other sources\n        const hash2 = bcrypto.hash160(redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (redeem.input) {\n        const hasInput = redeem.input.length > 0;\n        const hasWitness = redeem.witness && redeem.witness.length > 0;\n        if (!hasInput && !hasWitness) throw new TypeError('Empty input');\n        if (hasInput && hasWitness)\n          throw new TypeError('Input and witness provided');\n        if (hasInput) {\n          const richunks = bscript.decompile(redeem.input);\n          if (!bscript.isPushOnly(richunks))\n            throw new TypeError('Non push-only scriptSig');\n        }\n      }\n    };\n    if (a.input) {\n      const chunks = _chunks();\n      if (!chunks || chunks.length < 1) throw new TypeError('Input too short');\n      if (!Buffer.isBuffer(_redeem().output))\n        throw new TypeError('Input is invalid');\n      checkRedeem(_redeem());\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      if (a.input) {\n        const redeem = _redeem();\n        if (a.redeem.output && !a.redeem.output.equals(redeem.output))\n          throw new TypeError('Redeem.output mismatch');\n        if (a.redeem.input && !a.redeem.input.equals(redeem.input))\n          throw new TypeError('Redeem.input mismatch');\n      }\n      checkRedeem(a.redeem);\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.witness &&\n        !stacksEqual(a.redeem.witness, a.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2sh = p2sh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst ecc = require('tiny-secp256k1');\nconst bech32 = require('bech32');\nconst EMPTY_BUFFER = Buffer.alloc(0);\n// witness: {signature} {pubKey}\n// input: <>\n// output: OP_0 {pubKeyHash}\nfunction p2wpkh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.pubkey && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(20)),\n      input: typef.maybe(typef.BufferN(0)),\n      network: typef.maybe(typef.Object),\n      output: typef.maybe(typef.BufferN(22)),\n      pubkey: typef.maybe(ecc.isPoint),\n      signature: typef.maybe(bscript.isCanonicalScriptSignature),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const network = a.network || networks_1.bitcoin;\n  const o = { name: 'p2wpkh', network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2, 22);\n    if (a.address) return _address().data;\n    if (a.pubkey || o.pubkey) return bcrypto.hash160(a.pubkey || o.pubkey);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'pubkey', () => {\n    if (a.pubkey) return a.pubkey;\n    if (!a.witness) return;\n    return a.witness[1];\n  });\n  lazy.prop(o, 'signature', () => {\n    if (!a.witness) return;\n    return a.witness[0];\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    if (!a.pubkey) return;\n    if (!a.signature) return;\n    return [a.signature, a.pubkey];\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (network && network.bech32 !== _address().prefix)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 20)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 22 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x14\n      )\n        throw new TypeError('Output is invalid');\n      if (hash.length > 0 && !hash.equals(a.output.slice(2)))\n        throw new TypeError('Hash mismatch');\n      else hash = a.output.slice(2);\n    }\n    if (a.pubkey) {\n      const pkh = bcrypto.hash160(a.pubkey);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n      else hash = pkh;\n    }\n    if (a.witness) {\n      if (a.witness.length !== 2) throw new TypeError('Witness is invalid');\n      if (!bscript.isCanonicalScriptSignature(a.witness[0]))\n        throw new TypeError('Witness has invalid signature');\n      if (!ecc.isPoint(a.witness[1]))\n        throw new TypeError('Witness has invalid pubkey');\n      if (a.signature && !a.signature.equals(a.witness[0]))\n        throw new TypeError('Signature mismatch');\n      if (a.pubkey && !a.pubkey.equals(a.witness[1]))\n        throw new TypeError('Pubkey mismatch');\n      const pkh = bcrypto.hash160(a.witness[1]);\n      if (hash.length > 0 && !hash.equals(pkh))\n        throw new TypeError('Hash mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wpkh = p2wpkh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bcrypto = require('../crypto');\nconst networks_1 = require('../networks');\nconst bscript = require('../script');\nconst lazy = require('./lazy');\nconst typef = require('typeforce');\nconst OPS = bscript.OPS;\nconst bech32 = require('bech32');\nconst EMPTY_BUFFER = Buffer.alloc(0);\nfunction stacksEqual(a, b) {\n  if (a.length !== b.length) return false;\n  return a.every((x, i) => {\n    return x.equals(b[i]);\n  });\n}\n// input: <>\n// witness: [redeemScriptSig ...] {redeemScript}\n// output: OP_0 {sha256(redeemScript)}\nfunction p2wsh(a, opts) {\n  if (!a.address && !a.hash && !a.output && !a.redeem && !a.witness)\n    throw new TypeError('Not enough data');\n  opts = Object.assign({ validate: true }, opts || {});\n  typef(\n    {\n      network: typef.maybe(typef.Object),\n      address: typef.maybe(typef.String),\n      hash: typef.maybe(typef.BufferN(32)),\n      output: typef.maybe(typef.BufferN(34)),\n      redeem: typef.maybe({\n        input: typef.maybe(typef.Buffer),\n        network: typef.maybe(typef.Object),\n        output: typef.maybe(typef.Buffer),\n        witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n      }),\n      input: typef.maybe(typef.BufferN(0)),\n      witness: typef.maybe(typef.arrayOf(typef.Buffer)),\n    },\n    a,\n  );\n  const _address = lazy.value(() => {\n    const result = bech32.decode(a.address);\n    const version = result.words.shift();\n    const data = bech32.fromWords(result.words);\n    return {\n      version,\n      prefix: result.prefix,\n      data: Buffer.from(data),\n    };\n  });\n  const _rchunks = lazy.value(() => {\n    return bscript.decompile(a.redeem.input);\n  });\n  let network = a.network;\n  if (!network) {\n    network = (a.redeem && a.redeem.network) || networks_1.bitcoin;\n  }\n  const o = { network };\n  lazy.prop(o, 'address', () => {\n    if (!o.hash) return;\n    const words = bech32.toWords(o.hash);\n    words.unshift(0x00);\n    return bech32.encode(network.bech32, words);\n  });\n  lazy.prop(o, 'hash', () => {\n    if (a.output) return a.output.slice(2);\n    if (a.address) return _address().data;\n    if (o.redeem && o.redeem.output) return bcrypto.sha256(o.redeem.output);\n  });\n  lazy.prop(o, 'output', () => {\n    if (!o.hash) return;\n    return bscript.compile([OPS.OP_0, o.hash]);\n  });\n  lazy.prop(o, 'redeem', () => {\n    if (!a.witness) return;\n    return {\n      output: a.witness[a.witness.length - 1],\n      input: EMPTY_BUFFER,\n      witness: a.witness.slice(0, -1),\n    };\n  });\n  lazy.prop(o, 'input', () => {\n    if (!o.witness) return;\n    return EMPTY_BUFFER;\n  });\n  lazy.prop(o, 'witness', () => {\n    // transform redeem input to witness stack?\n    if (\n      a.redeem &&\n      a.redeem.input &&\n      a.redeem.input.length > 0 &&\n      a.redeem.output &&\n      a.redeem.output.length > 0\n    ) {\n      const stack = bscript.toStack(_rchunks());\n      // assign, and blank the existing input\n      o.redeem = Object.assign({ witness: stack }, a.redeem);\n      o.redeem.input = EMPTY_BUFFER;\n      return [].concat(stack, a.redeem.output);\n    }\n    if (!a.redeem) return;\n    if (!a.redeem.output) return;\n    if (!a.redeem.witness) return;\n    return [].concat(a.redeem.witness, a.redeem.output);\n  });\n  lazy.prop(o, 'name', () => {\n    const nameParts = ['p2wsh'];\n    if (o.redeem !== undefined) nameParts.push(o.redeem.name);\n    return nameParts.join('-');\n  });\n  // extended validation\n  if (opts.validate) {\n    let hash = Buffer.from([]);\n    if (a.address) {\n      if (_address().prefix !== network.bech32)\n        throw new TypeError('Invalid prefix or Network mismatch');\n      if (_address().version !== 0x00)\n        throw new TypeError('Invalid address version');\n      if (_address().data.length !== 32)\n        throw new TypeError('Invalid address data');\n      hash = _address().data;\n    }\n    if (a.hash) {\n      if (hash.length > 0 && !hash.equals(a.hash))\n        throw new TypeError('Hash mismatch');\n      else hash = a.hash;\n    }\n    if (a.output) {\n      if (\n        a.output.length !== 34 ||\n        a.output[0] !== OPS.OP_0 ||\n        a.output[1] !== 0x20\n      )\n        throw new TypeError('Output is invalid');\n      const hash2 = a.output.slice(2);\n      if (hash.length > 0 && !hash.equals(hash2))\n        throw new TypeError('Hash mismatch');\n      else hash = hash2;\n    }\n    if (a.redeem) {\n      if (a.redeem.network && a.redeem.network !== network)\n        throw new TypeError('Network mismatch');\n      // is there two redeem sources?\n      if (\n        a.redeem.input &&\n        a.redeem.input.length > 0 &&\n        a.redeem.witness &&\n        a.redeem.witness.length > 0\n      )\n        throw new TypeError('Ambiguous witness source');\n      // is the redeem output non-empty?\n      if (a.redeem.output) {\n        if (bscript.decompile(a.redeem.output).length === 0)\n          throw new TypeError('Redeem.output is invalid');\n        // match hash against other sources\n        const hash2 = bcrypto.sha256(a.redeem.output);\n        if (hash.length > 0 && !hash.equals(hash2))\n          throw new TypeError('Hash mismatch');\n        else hash = hash2;\n      }\n      if (a.redeem.input && !bscript.isPushOnly(_rchunks()))\n        throw new TypeError('Non push-only scriptSig');\n      if (\n        a.witness &&\n        a.redeem.witness &&\n        !stacksEqual(a.witness, a.redeem.witness)\n      )\n        throw new TypeError('Witness and redeem.witness mismatch');\n    }\n    if (a.witness) {\n      if (\n        a.redeem &&\n        a.redeem.output &&\n        !a.redeem.output.equals(a.witness[a.witness.length - 1])\n      )\n        throw new TypeError('Witness and redeem.output mismatch');\n    }\n  }\n  return Object.assign(o, a);\n}\nexports.p2wsh = p2wsh;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bufferutils_1 = require('./bufferutils');\nconst bcrypto = require('./crypto');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst fastMerkleRoot = require('merkle-lib/fastRoot');\nconst typeforce = require('typeforce');\nconst varuint = require('varuint-bitcoin');\nconst errorMerkleNoTxes = new TypeError(\n  'Cannot compute merkle root for zero transactions',\n);\nconst errorWitnessNotSegwit = new TypeError(\n  'Cannot compute witness commit for non-segwit block',\n);\nclass Block {\n  constructor() {\n    this.version = 1;\n    this.prevHash = undefined;\n    this.merkleRoot = undefined;\n    this.timestamp = 0;\n    this.witnessCommit = undefined;\n    this.bits = 0;\n    this.nonce = 0;\n    this.transactions = undefined;\n  }\n  static fromBuffer(buffer) {\n    if (buffer.length < 80) throw new Error('Buffer too small (< 80 bytes)');\n    let offset = 0;\n    const readSlice = n => {\n      offset += n;\n      return buffer.slice(offset - n, offset);\n    };\n    const readUInt32 = () => {\n      const i = buffer.readUInt32LE(offset);\n      offset += 4;\n      return i;\n    };\n    const readInt32 = () => {\n      const i = buffer.readInt32LE(offset);\n      offset += 4;\n      return i;\n    };\n    const block = new Block();\n    block.version = readInt32();\n    block.prevHash = readSlice(32);\n    block.merkleRoot = readSlice(32);\n    block.timestamp = readUInt32();\n    block.bits = readUInt32();\n    block.nonce = readUInt32();\n    if (buffer.length === 80) return block;\n    const readVarInt = () => {\n      const vi = varuint.decode(buffer, offset);\n      offset += varuint.decode.bytes;\n      return vi;\n    };\n    const readTransaction = () => {\n      const tx = transaction_1.Transaction.fromBuffer(\n        buffer.slice(offset),\n        true,\n      );\n      offset += tx.byteLength();\n      return tx;\n    };\n    const nTransactions = readVarInt();\n    block.transactions = [];\n    for (let i = 0; i < nTransactions; ++i) {\n      const tx = readTransaction();\n      block.transactions.push(tx);\n    }\n    const witnessCommit = block.getWitnessCommit();\n    // This Block contains a witness commit\n    if (witnessCommit) block.witnessCommit = witnessCommit;\n    return block;\n  }\n  static fromHex(hex) {\n    return Block.fromBuffer(Buffer.from(hex, 'hex'));\n  }\n  static calculateTarget(bits) {\n    const exponent = ((bits & 0xff000000) >> 24) - 3;\n    const mantissa = bits & 0x007fffff;\n    const target = Buffer.alloc(32, 0);\n    target.writeUIntBE(mantissa, 29 - exponent, 3);\n    return target;\n  }\n  static calculateMerkleRoot(transactions, forWitness) {\n    typeforce([{ getHash: types.Function }], transactions);\n    if (transactions.length === 0) throw errorMerkleNoTxes;\n    if (forWitness && !txesHaveWitnessCommit(transactions))\n      throw errorWitnessNotSegwit;\n    const hashes = transactions.map(transaction =>\n      transaction.getHash(forWitness),\n    );\n    const rootHash = fastMerkleRoot(hashes, bcrypto.hash256);\n    return forWitness\n      ? bcrypto.hash256(\n          Buffer.concat([rootHash, transactions[0].ins[0].witness[0]]),\n        )\n      : rootHash;\n  }\n  getWitnessCommit() {\n    if (!txesHaveWitnessCommit(this.transactions)) return null;\n    // The merkle root for the witness data is in an OP_RETURN output.\n    // There is no rule for the index of the output, so use filter to find it.\n    // The root is prepended with 0xaa21a9ed so check for 0x6a24aa21a9ed\n    // If multiple commits are found, the output with highest index is assumed.\n    const witnessCommits = this.transactions[0].outs\n      .filter(out =>\n        out.script.slice(0, 6).equals(Buffer.from('6a24aa21a9ed', 'hex')),\n      )\n      .map(out => out.script.slice(6, 38));\n    if (witnessCommits.length === 0) return null;\n    // Use the commit with the highest output (should only be one though)\n    const result = witnessCommits[witnessCommits.length - 1];\n    if (!(result instanceof Buffer && result.length === 32)) return null;\n    return result;\n  }\n  hasWitnessCommit() {\n    if (\n      this.witnessCommit instanceof Buffer &&\n      this.witnessCommit.length === 32\n    )\n      return true;\n    if (this.getWitnessCommit() !== null) return true;\n    return false;\n  }\n  hasWitness() {\n    return anyTxHasWitness(this.transactions);\n  }\n  byteLength(headersOnly) {\n    if (headersOnly || !this.transactions) return 80;\n    return (\n      80 +\n      varuint.encodingLength(this.transactions.length) +\n      this.transactions.reduce((a, x) => a + x.byteLength(), 0)\n    );\n  }\n  getHash() {\n    return bcrypto.hash256(this.toBuffer(true));\n  }\n  getId() {\n    return bufferutils_1.reverseBuffer(this.getHash()).toString('hex');\n  }\n  getUTCDate() {\n    const date = new Date(0); // epoch\n    date.setUTCSeconds(this.timestamp);\n    return date;\n  }\n  // TODO: buffer, offset compatibility\n  toBuffer(headersOnly) {\n    const buffer = Buffer.allocUnsafe(this.byteLength(headersOnly));\n    let offset = 0;\n    const writeSlice = slice => {\n      slice.copy(buffer, offset);\n      offset += slice.length;\n    };\n    const writeInt32 = i => {\n      buffer.writeInt32LE(i, offset);\n      offset += 4;\n    };\n    const writeUInt32 = i => {\n      buffer.writeUInt32LE(i, offset);\n      offset += 4;\n    };\n    writeInt32(this.version);\n    writeSlice(this.prevHash);\n    writeSlice(this.merkleRoot);\n    writeUInt32(this.timestamp);\n    writeUInt32(this.bits);\n    writeUInt32(this.nonce);\n    if (headersOnly || !this.transactions) return buffer;\n    varuint.encode(this.transactions.length, buffer, offset);\n    offset += varuint.encode.bytes;\n    this.transactions.forEach(tx => {\n      const txSize = tx.byteLength(); // TODO: extract from toBuffer?\n      tx.toBuffer(buffer, offset);\n      offset += txSize;\n    });\n    return buffer;\n  }\n  toHex(headersOnly) {\n    return this.toBuffer(headersOnly).toString('hex');\n  }\n  checkTxRoots() {\n    // If the Block has segwit transactions but no witness commit,\n    // there's no way it can be valid, so fail the check.\n    const hasWitnessCommit = this.hasWitnessCommit();\n    if (!hasWitnessCommit && this.hasWitness()) return false;\n    return (\n      this.__checkMerkleRoot() &&\n      (hasWitnessCommit ? this.__checkWitnessCommit() : true)\n    );\n  }\n  checkProofOfWork() {\n    const hash = bufferutils_1.reverseBuffer(this.getHash());\n    const target = Block.calculateTarget(this.bits);\n    return hash.compare(target) <= 0;\n  }\n  __checkMerkleRoot() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    const actualMerkleRoot = Block.calculateMerkleRoot(this.transactions);\n    return this.merkleRoot.compare(actualMerkleRoot) === 0;\n  }\n  __checkWitnessCommit() {\n    if (!this.transactions) throw errorMerkleNoTxes;\n    if (!this.hasWitnessCommit()) throw errorWitnessNotSegwit;\n    const actualWitnessCommit = Block.calculateMerkleRoot(\n      this.transactions,\n      true,\n    );\n    return this.witnessCommit.compare(actualWitnessCommit) === 0;\n  }\n}\nexports.Block = Block;\nfunction txesHaveWitnessCommit(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions[0] &&\n    transactions[0].ins &&\n    transactions[0].ins instanceof Array &&\n    transactions[0].ins[0] &&\n    transactions[0].ins[0].witness &&\n    transactions[0].ins[0].witness instanceof Array &&\n    transactions[0].ins[0].witness.length > 0\n  );\n}\nfunction anyTxHasWitness(transactions) {\n  return (\n    transactions instanceof Array &&\n    transactions.some(\n      tx =>\n        typeof tx === 'object' &&\n        tx.ins instanceof Array &&\n        tx.ins.some(\n          input =>\n            typeof input === 'object' &&\n            input.witness instanceof Array &&\n            input.witness.length > 0,\n        ),\n    )\n  );\n}\n","// constant-space merkle root calculation algorithm\nmodule.exports = function fastRoot (values, digestFn) {\n  if (!Array.isArray(values)) throw TypeError('Expected values Array')\n  if (typeof digestFn !== 'function') throw TypeError('Expected digest Function')\n\n  var length = values.length\n  var results = values.concat()\n\n  while (length > 1) {\n    var j = 0\n\n    for (var i = 0; i < length; i += 2, ++j) {\n      var left = results[i]\n      var right = i + 1 === length ? left : results[i + 1]\n      var data = Buffer.concat([left, right])\n\n      results[j] = digestFn(data)\n    }\n\n    length = j\n  }\n\n  return results[0]\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bip174_1 = require('bip174');\nconst varuint = require('bip174/src/lib/converter/varint');\nconst utils_1 = require('bip174/src/lib/utils');\nconst address_1 = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst crypto_1 = require('./crypto');\nconst ecpair_1 = require('./ecpair');\nconst networks_1 = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst transaction_1 = require('./transaction');\n/**\n * These are the default arguments for a Psbt instance.\n */\nconst DEFAULT_OPTS = {\n  /**\n   * A bitcoinjs Network object. This is only used if you pass an `address`\n   * parameter to addOutput. Otherwise it is not needed and can be left default.\n   */\n  network: networks_1.bitcoin,\n  /**\n   * When extractTransaction is called, the fee rate is checked.\n   * THIS IS NOT TO BE RELIED ON.\n   * It is only here as a last ditch effort to prevent sending a 500 BTC fee etc.\n   */\n  maximumFeeRate: 5000,\n};\n/**\n * Psbt class can parse and generate a PSBT binary based off of the BIP174.\n * There are 6 roles that this class fulfills. (Explained in BIP174)\n *\n * Creator: This can be done with `new Psbt()`\n * Updater: This can be done with `psbt.addInput(input)`, `psbt.addInputs(inputs)`,\n *   `psbt.addOutput(output)`, `psbt.addOutputs(outputs)` when you are looking to\n *   add new inputs and outputs to the PSBT, and `psbt.updateGlobal(itemObject)`,\n *   `psbt.updateInput(itemObject)`, `psbt.updateOutput(itemObject)`\n *   addInput requires hash: Buffer | string; and index: number; as attributes\n *   and can also include any attributes that are used in updateInput method.\n *   addOutput requires script: Buffer; and value: number; and likewise can include\n *   data for updateOutput.\n *   For a list of what attributes should be what types. Check the bip174 library.\n *   Also, check the integration tests for some examples of usage.\n * Signer: There are a few methods. signAllInputs and signAllInputsAsync, which will search all input\n *   information for your pubkey or pubkeyhash, and only sign inputs where it finds\n *   your info. Or you can explicitly sign a specific input with signInput and\n *   signInputAsync. For the async methods you can create a SignerAsync object\n *   and use something like a hardware wallet to sign with. (You must implement this)\n * Combiner: psbts can be combined easily with `psbt.combine(psbt2, psbt3, psbt4 ...)`\n *   the psbt calling combine will always have precedence when a conflict occurs.\n *   Combine checks if the internal bitcoin transaction is the same, so be sure that\n *   all sequences, version, locktime, etc. are the same before combining.\n * Input Finalizer: This role is fairly important. Not only does it need to construct\n *   the input scriptSigs and witnesses, but it SHOULD verify the signatures etc.\n *   Before running `psbt.finalizeAllInputs()` please run `psbt.validateSignaturesOfAllInputs()`\n *   Running any finalize method will delete any data in the input(s) that are no longer\n *   needed due to the finalized scripts containing the information.\n * Transaction Extractor: This role will perform some checks before returning a\n *   Transaction object. Such as fee rate not being larger than maximumFeeRate etc.\n */\nclass Psbt {\n  constructor(opts = {}, data = new bip174_1.Psbt(new PsbtTransaction())) {\n    this.data = data;\n    // set defaults\n    this.opts = Object.assign({}, DEFAULT_OPTS, opts);\n    this.__CACHE = {\n      __NON_WITNESS_UTXO_TX_CACHE: [],\n      __NON_WITNESS_UTXO_BUF_CACHE: [],\n      __TX_IN_CACHE: {},\n      __TX: this.data.globalMap.unsignedTx.tx,\n    };\n    if (this.data.inputs.length === 0) this.setVersion(2);\n    // Make data hidden when enumerating\n    const dpew = (obj, attr, enumerable, writable) =>\n      Object.defineProperty(obj, attr, {\n        enumerable,\n        writable,\n      });\n    dpew(this, '__CACHE', false, true);\n    dpew(this, 'opts', false, true);\n  }\n  static fromBase64(data, opts = {}) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromHex(data, opts = {}) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, opts);\n  }\n  static fromBuffer(buffer, opts = {}) {\n    const psbtBase = bip174_1.Psbt.fromBuffer(buffer, transactionFromBuffer);\n    const psbt = new Psbt(opts, psbtBase);\n    checkTxForDupeIns(psbt.__CACHE.__TX, psbt.__CACHE);\n    return psbt;\n  }\n  get inputCount() {\n    return this.data.inputs.length;\n  }\n  combine(...those) {\n    this.data.combine(...those.map(o => o.data));\n    return this;\n  }\n  clone() {\n    // TODO: more efficient cloning\n    const res = Psbt.fromBuffer(this.data.toBuffer());\n    res.opts = JSON.parse(JSON.stringify(this.opts));\n    return res;\n  }\n  setMaximumFeeRate(satoshiPerByte) {\n    check32Bit(satoshiPerByte); // 42.9 BTC per byte IS excessive... so throw\n    this.opts.maximumFeeRate = satoshiPerByte;\n  }\n  setVersion(version) {\n    check32Bit(version);\n    checkInputsForPartialSig(this.data.inputs, 'setVersion');\n    const c = this.__CACHE;\n    c.__TX.version = version;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setLocktime(locktime) {\n    check32Bit(locktime);\n    checkInputsForPartialSig(this.data.inputs, 'setLocktime');\n    const c = this.__CACHE;\n    c.__TX.locktime = locktime;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  setInputSequence(inputIndex, sequence) {\n    check32Bit(sequence);\n    checkInputsForPartialSig(this.data.inputs, 'setInputSequence');\n    const c = this.__CACHE;\n    if (c.__TX.ins.length <= inputIndex) {\n      throw new Error('Input index too high');\n    }\n    c.__TX.ins[inputIndex].sequence = sequence;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addInputs(inputDatas) {\n    inputDatas.forEach(inputData => this.addInput(inputData));\n    return this;\n  }\n  addInput(inputData) {\n    checkInputsForPartialSig(this.data.inputs, 'addInput');\n    const c = this.__CACHE;\n    this.data.addInput(inputData);\n    const txIn = c.__TX.ins[c.__TX.ins.length - 1];\n    checkTxInputCache(c, txIn);\n    const inputIndex = this.data.inputs.length - 1;\n    const input = this.data.inputs[inputIndex];\n    if (input.nonWitnessUtxo) {\n      addNonWitnessTxCache(this.__CACHE, input, inputIndex);\n    }\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  addOutputs(outputDatas) {\n    outputDatas.forEach(outputData => this.addOutput(outputData));\n    return this;\n  }\n  addOutput(outputData) {\n    checkInputsForPartialSig(this.data.inputs, 'addOutput');\n    const { address } = outputData;\n    if (typeof address === 'string') {\n      const { network } = this.opts;\n      const script = address_1.toOutputScript(address, network);\n      outputData = Object.assign(outputData, { script });\n    }\n    const c = this.__CACHE;\n    this.data.addOutput(outputData);\n    c.__FEE = undefined;\n    c.__FEE_RATE = undefined;\n    c.__EXTRACTED_TX = undefined;\n    return this;\n  }\n  extractTransaction(disableFeeCheck) {\n    if (!this.data.inputs.every(isFinalized)) throw new Error('Not finalized');\n    const c = this.__CACHE;\n    if (!disableFeeCheck) {\n      checkFees(this, c, this.opts);\n    }\n    if (c.__EXTRACTED_TX) return c.__EXTRACTED_TX;\n    const tx = c.__TX.clone();\n    inputFinalizeGetAmts(this.data.inputs, tx, c, true);\n    return tx;\n  }\n  getFeeRate() {\n    return getTxCacheValue(\n      '__FEE_RATE',\n      'fee rate',\n      this.data.inputs,\n      this.__CACHE,\n    );\n  }\n  getFee() {\n    return getTxCacheValue('__FEE', 'fee', this.data.inputs, this.__CACHE);\n  }\n  finalizeAllInputs() {\n    utils_1.checkForInput(this.data.inputs, 0); // making sure we have at least one\n    range(this.data.inputs.length).forEach(idx => this.finalizeInput(idx));\n    return this;\n  }\n  finalizeInput(inputIndex) {\n    const input = utils_1.checkForInput(this.data.inputs, inputIndex);\n    const { script, isP2SH, isP2WSH, isSegwit } = getScriptFromInput(\n      inputIndex,\n      input,\n      this.__CACHE,\n    );\n    if (!script) throw new Error(`No script found for input #${inputIndex}`);\n    const scriptType = classifyScript(script);\n    if (!canFinalize(input, script, scriptType))\n      throw new Error(`Can not finalize input #${inputIndex}`);\n    checkPartialSigSighashes(input);\n    const { finalScriptSig, finalScriptWitness } = getFinalScripts(\n      script,\n      scriptType,\n      input.partialSig,\n      isSegwit,\n      isP2SH,\n      isP2WSH,\n    );\n    if (finalScriptSig) this.data.updateInput(inputIndex, { finalScriptSig });\n    if (finalScriptWitness)\n      this.data.updateInput(inputIndex, { finalScriptWitness });\n    if (!finalScriptSig && !finalScriptWitness)\n      throw new Error(`Unknown error finalizing input #${inputIndex}`);\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n  validateSignaturesOfAllInputs() {\n    utils_1.checkForInput(this.data.inputs, 0); // making sure we have at least one\n    const results = range(this.data.inputs.length).map(idx =>\n      this.validateSignaturesOfInput(idx),\n    );\n    return results.reduce((final, res) => res === true && final, true);\n  }\n  validateSignaturesOfInput(inputIndex, pubkey) {\n    const input = this.data.inputs[inputIndex];\n    const partialSig = (input || {}).partialSig;\n    if (!input || !partialSig || partialSig.length < 1)\n      throw new Error('No signatures to validate');\n    const mySigs = pubkey\n      ? partialSig.filter(sig => sig.pubkey.equals(pubkey))\n      : partialSig;\n    if (mySigs.length < 1) throw new Error('No signatures for this pubkey');\n    const results = [];\n    let hashCache;\n    let scriptCache;\n    let sighashCache;\n    for (const pSig of mySigs) {\n      const sig = bscript.signature.decode(pSig.signature);\n      const { hash, script } =\n        sighashCache !== sig.hashType\n          ? getHashForSig(\n              inputIndex,\n              Object.assign({}, input, { sighashType: sig.hashType }),\n              this.__CACHE,\n            )\n          : { hash: hashCache, script: scriptCache };\n      sighashCache = sig.hashType;\n      hashCache = hash;\n      scriptCache = script;\n      checkScriptForPubkey(pSig.pubkey, script, 'verify');\n      const keypair = ecpair_1.fromPublicKey(pSig.pubkey);\n      results.push(keypair.verify(hash, sig.signature));\n    }\n    return results.every(res => res === true);\n  }\n  signAllInputsHD(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInputHD(i, hdKeyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsHDAsync(\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const results = [];\n      const promises = [];\n      for (const i of range(this.data.inputs.length)) {\n        promises.push(\n          this.signInputHDAsync(i, hdKeyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInputHD(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n      throw new Error('Need HDSigner to sign input');\n    }\n    const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n    signers.forEach(signer => this.signInput(inputIndex, signer, sighashTypes));\n    return this;\n  }\n  signInputHDAsync(\n    inputIndex,\n    hdKeyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {\n        return reject(new Error('Need HDSigner to sign input'));\n      }\n      const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);\n      const promises = signers.map(signer =>\n        this.signInputAsync(inputIndex, signer, sighashTypes),\n      );\n      return Promise.all(promises)\n        .then(() => {\n          resolve();\n        })\n        .catch(reject);\n    });\n  }\n  signAllInputs(\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    // TODO: Add a pubkey/pubkeyhash cache to each input\n    // as input information is added, then eventually\n    // optimize this method.\n    const results = [];\n    for (const i of range(this.data.inputs.length)) {\n      try {\n        this.signInput(i, keyPair, sighashTypes);\n        results.push(true);\n      } catch (err) {\n        results.push(false);\n      }\n    }\n    if (results.every(v => v === false)) {\n      throw new Error('No inputs were signed');\n    }\n    return this;\n  }\n  signAllInputsAsync(\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!keyPair || !keyPair.publicKey)\n        return reject(new Error('Need Signer to sign input'));\n      // TODO: Add a pubkey/pubkeyhash cache to each input\n      // as input information is added, then eventually\n      // optimize this method.\n      const results = [];\n      const promises = [];\n      for (const [i] of this.data.inputs.entries()) {\n        promises.push(\n          this.signInputAsync(i, keyPair, sighashTypes).then(\n            () => {\n              results.push(true);\n            },\n            () => {\n              results.push(false);\n            },\n          ),\n        );\n      }\n      return Promise.all(promises).then(() => {\n        if (results.every(v => v === false)) {\n          return reject(new Error('No inputs were signed'));\n        }\n        resolve();\n      });\n    });\n  }\n  signInput(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    if (!keyPair || !keyPair.publicKey)\n      throw new Error('Need Signer to sign input');\n    const { hash, sighashType } = getHashAndSighashType(\n      this.data.inputs,\n      inputIndex,\n      keyPair.publicKey,\n      this.__CACHE,\n      sighashTypes,\n    );\n    const partialSig = [\n      {\n        pubkey: keyPair.publicKey,\n        signature: bscript.signature.encode(keyPair.sign(hash), sighashType),\n      },\n    ];\n    this.data.updateInput(inputIndex, { partialSig });\n    return this;\n  }\n  signInputAsync(\n    inputIndex,\n    keyPair,\n    sighashTypes = [transaction_1.Transaction.SIGHASH_ALL],\n  ) {\n    return new Promise((resolve, reject) => {\n      if (!keyPair || !keyPair.publicKey)\n        return reject(new Error('Need Signer to sign input'));\n      const { hash, sighashType } = getHashAndSighashType(\n        this.data.inputs,\n        inputIndex,\n        keyPair.publicKey,\n        this.__CACHE,\n        sighashTypes,\n      );\n      Promise.resolve(keyPair.sign(hash)).then(signature => {\n        const partialSig = [\n          {\n            pubkey: keyPair.publicKey,\n            signature: bscript.signature.encode(signature, sighashType),\n          },\n        ];\n        this.data.updateInput(inputIndex, { partialSig });\n        resolve();\n      });\n    });\n  }\n  toBuffer() {\n    return this.data.toBuffer();\n  }\n  toHex() {\n    return this.data.toHex();\n  }\n  toBase64() {\n    return this.data.toBase64();\n  }\n  updateGlobal(updateData) {\n    this.data.updateGlobal(updateData);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    this.data.updateInput(inputIndex, updateData);\n    if (updateData.nonWitnessUtxo) {\n      addNonWitnessTxCache(\n        this.__CACHE,\n        this.data.inputs[inputIndex],\n        inputIndex,\n      );\n    }\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    this.data.updateOutput(outputIndex, updateData);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    this.data.addUnknownKeyValToGlobal(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    this.data.addUnknownKeyValToInput(inputIndex, keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    this.data.addUnknownKeyValToOutput(outputIndex, keyVal);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    this.data.clearFinalizedInput(inputIndex);\n    return this;\n  }\n}\nexports.Psbt = Psbt;\n/**\n * This function is needed to pass to the bip174 base class's fromBuffer.\n * It takes the \"transaction buffer\" portion of the psbt buffer and returns a\n * Transaction (From the bip174 library) interface.\n */\nconst transactionFromBuffer = buffer => new PsbtTransaction(buffer);\n/**\n * This class implements the Transaction interface from bip174 library.\n * It contains a bitcoinjs-lib Transaction object.\n */\nclass PsbtTransaction {\n  constructor(buffer = Buffer.from([2, 0, 0, 0, 0, 0, 0, 0, 0, 0])) {\n    this.tx = transaction_1.Transaction.fromBuffer(buffer);\n    checkTxEmpty(this.tx);\n    Object.defineProperty(this, 'tx', {\n      enumerable: false,\n      writable: true,\n    });\n  }\n  getInputOutputCounts() {\n    return {\n      inputCount: this.tx.ins.length,\n      outputCount: this.tx.outs.length,\n    };\n  }\n  addInput(input) {\n    if (\n      input.hash === undefined ||\n      input.index === undefined ||\n      (!Buffer.isBuffer(input.hash) && typeof input.hash !== 'string') ||\n      typeof input.index !== 'number'\n    ) {\n      throw new Error('Error adding input.');\n    }\n    const hash =\n      typeof input.hash === 'string'\n        ? bufferutils_1.reverseBuffer(Buffer.from(input.hash, 'hex'))\n        : input.hash;\n    this.tx.addInput(hash, input.index, input.sequence);\n  }\n  addOutput(output) {\n    if (\n      output.script === undefined ||\n      output.value === undefined ||\n      !Buffer.isBuffer(output.script) ||\n      typeof output.value !== 'number'\n    ) {\n      throw new Error('Error adding output.');\n    }\n    this.tx.addOutput(output.script, output.value);\n  }\n  toBuffer() {\n    return this.tx.toBuffer();\n  }\n}\nfunction canFinalize(input, script, scriptType) {\n  switch (scriptType) {\n    case 'pubkey':\n    case 'pubkeyhash':\n    case 'witnesspubkeyhash':\n      return hasSigs(1, input.partialSig);\n    case 'multisig':\n      const p2ms = payments.p2ms({ output: script });\n      return hasSigs(p2ms.m, input.partialSig);\n    default:\n      return false;\n  }\n}\nfunction hasSigs(neededSigs, partialSig) {\n  if (!partialSig) return false;\n  if (partialSig.length > neededSigs) throw new Error('Too many signatures');\n  return partialSig.length === neededSigs;\n}\nfunction isFinalized(input) {\n  return !!input.finalScriptSig || !!input.finalScriptWitness;\n}\nfunction isPaymentFactory(payment) {\n  return script => {\n    try {\n      payment({ output: script });\n      return true;\n    } catch (err) {\n      return false;\n    }\n  };\n}\nconst isP2MS = isPaymentFactory(payments.p2ms);\nconst isP2PK = isPaymentFactory(payments.p2pk);\nconst isP2PKH = isPaymentFactory(payments.p2pkh);\nconst isP2WPKH = isPaymentFactory(payments.p2wpkh);\nconst isP2WSHScript = isPaymentFactory(payments.p2wsh);\nfunction check32Bit(num) {\n  if (\n    typeof num !== 'number' ||\n    num !== Math.floor(num) ||\n    num > 0xffffffff ||\n    num < 0\n  ) {\n    throw new Error('Invalid 32 bit integer');\n  }\n}\nfunction checkFees(psbt, cache, opts) {\n  const feeRate = cache.__FEE_RATE || psbt.getFeeRate();\n  const vsize = cache.__EXTRACTED_TX.virtualSize();\n  const satoshis = feeRate * vsize;\n  if (feeRate >= opts.maximumFeeRate) {\n    throw new Error(\n      `Warning: You are paying around ${(satoshis / 1e8).toFixed(8)} in ` +\n        `fees, which is ${feeRate} satoshi per byte for a transaction ` +\n        `with a VSize of ${vsize} bytes (segwit counted as 0.25 byte per ` +\n        `byte). Use setMaximumFeeRate method to raise your threshold, or ` +\n        `pass true to the first arg of extractTransaction.`,\n    );\n  }\n}\nfunction checkInputsForPartialSig(inputs, action) {\n  inputs.forEach(input => {\n    let throws = false;\n    let pSigs = [];\n    if ((input.partialSig || []).length === 0) {\n      if (!input.finalScriptSig && !input.finalScriptWitness) return;\n      pSigs = getPsigsFromInputFinalScripts(input);\n    } else {\n      pSigs = input.partialSig;\n    }\n    pSigs.forEach(pSig => {\n      const { hashType } = bscript.signature.decode(pSig.signature);\n      const whitelist = [];\n      const isAnyoneCanPay =\n        hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY;\n      if (isAnyoneCanPay) whitelist.push('addInput');\n      const hashMod = hashType & 0x1f;\n      switch (hashMod) {\n        case transaction_1.Transaction.SIGHASH_ALL:\n          break;\n        case transaction_1.Transaction.SIGHASH_SINGLE:\n        case transaction_1.Transaction.SIGHASH_NONE:\n          whitelist.push('addOutput');\n          whitelist.push('setInputSequence');\n          break;\n      }\n      if (whitelist.indexOf(action) === -1) {\n        throws = true;\n      }\n    });\n    if (throws) {\n      throw new Error('Can not modify transaction, signatures exist.');\n    }\n  });\n}\nfunction checkPartialSigSighashes(input) {\n  if (!input.sighashType || !input.partialSig) return;\n  const { partialSig, sighashType } = input;\n  partialSig.forEach(pSig => {\n    const { hashType } = bscript.signature.decode(pSig.signature);\n    if (sighashType !== hashType) {\n      throw new Error('Signature sighash does not match input sighash type');\n    }\n  });\n}\nfunction checkScriptForPubkey(pubkey, script, action) {\n  const pubkeyHash = crypto_1.hash160(pubkey);\n  const decompiled = bscript.decompile(script);\n  if (decompiled === null) throw new Error('Unknown script error');\n  const hasKey = decompiled.some(element => {\n    if (typeof element === 'number') return false;\n    return element.equals(pubkey) || element.equals(pubkeyHash);\n  });\n  if (!hasKey) {\n    throw new Error(\n      `Can not ${action} for this input with the key ${pubkey.toString('hex')}`,\n    );\n  }\n}\nfunction checkTxEmpty(tx) {\n  const isEmpty = tx.ins.every(\n    input =>\n      input.script &&\n      input.script.length === 0 &&\n      input.witness &&\n      input.witness.length === 0,\n  );\n  if (!isEmpty) {\n    throw new Error('Format Error: Transaction ScriptSigs are not empty');\n  }\n}\nfunction checkTxForDupeIns(tx, cache) {\n  tx.ins.forEach(input => {\n    checkTxInputCache(cache, input);\n  });\n}\nfunction checkTxInputCache(cache, input) {\n  const key =\n    bufferutils_1.reverseBuffer(Buffer.from(input.hash)).toString('hex') +\n    ':' +\n    input.index;\n  if (cache.__TX_IN_CACHE[key]) throw new Error('Duplicate input detected.');\n  cache.__TX_IN_CACHE[key] = 1;\n}\nfunction scriptCheckerFactory(payment, paymentScriptName) {\n  return (inputIndex, scriptPubKey, redeemScript) => {\n    const redeemScriptOutput = payment({\n      redeem: { output: redeemScript },\n    }).output;\n    if (!scriptPubKey.equals(redeemScriptOutput)) {\n      throw new Error(\n        `${paymentScriptName} for input #${inputIndex} doesn't match the scriptPubKey in the prevout`,\n      );\n    }\n  };\n}\nconst checkRedeemScript = scriptCheckerFactory(payments.p2sh, 'Redeem script');\nconst checkWitnessScript = scriptCheckerFactory(\n  payments.p2wsh,\n  'Witness script',\n);\nfunction getTxCacheValue(key, name, inputs, c) {\n  if (!inputs.every(isFinalized))\n    throw new Error(`PSBT must be finalized to calculate ${name}`);\n  if (key === '__FEE_RATE' && c.__FEE_RATE) return c.__FEE_RATE;\n  if (key === '__FEE' && c.__FEE) return c.__FEE;\n  let tx;\n  let mustFinalize = true;\n  if (c.__EXTRACTED_TX) {\n    tx = c.__EXTRACTED_TX;\n    mustFinalize = false;\n  } else {\n    tx = c.__TX.clone();\n  }\n  inputFinalizeGetAmts(inputs, tx, c, mustFinalize);\n  if (key === '__FEE_RATE') return c.__FEE_RATE;\n  else if (key === '__FEE') return c.__FEE;\n}\nfunction getFinalScripts(\n  script,\n  scriptType,\n  partialSig,\n  isSegwit,\n  isP2SH,\n  isP2WSH,\n) {\n  let finalScriptSig;\n  let finalScriptWitness;\n  // Wow, the payments API is very handy\n  const payment = getPayment(script, scriptType, partialSig);\n  const p2wsh = !isP2WSH ? null : payments.p2wsh({ redeem: payment });\n  const p2sh = !isP2SH ? null : payments.p2sh({ redeem: p2wsh || payment });\n  if (isSegwit) {\n    if (p2wsh) {\n      finalScriptWitness = witnessStackToScriptWitness(p2wsh.witness);\n    } else {\n      finalScriptWitness = witnessStackToScriptWitness(payment.witness);\n    }\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    }\n  } else {\n    if (p2sh) {\n      finalScriptSig = p2sh.input;\n    } else {\n      finalScriptSig = payment.input;\n    }\n  }\n  return {\n    finalScriptSig,\n    finalScriptWitness,\n  };\n}\nfunction getHashAndSighashType(\n  inputs,\n  inputIndex,\n  pubkey,\n  cache,\n  sighashTypes,\n) {\n  const input = utils_1.checkForInput(inputs, inputIndex);\n  const { hash, sighashType, script } = getHashForSig(\n    inputIndex,\n    input,\n    cache,\n    sighashTypes,\n  );\n  checkScriptForPubkey(pubkey, script, 'sign');\n  return {\n    hash,\n    sighashType,\n  };\n}\nfunction getHashForSig(inputIndex, input, cache, sighashTypes) {\n  const unsignedTx = cache.__TX;\n  const sighashType =\n    input.sighashType || transaction_1.Transaction.SIGHASH_ALL;\n  if (sighashTypes && sighashTypes.indexOf(sighashType) < 0) {\n    const str = sighashTypeToString(sighashType);\n    throw new Error(\n      `Sighash type is not allowed. Retry the sign method passing the ` +\n        `sighashTypes array of whitelisted types. Sighash type: ${str}`,\n    );\n  }\n  let hash;\n  let script;\n  if (input.nonWitnessUtxo) {\n    const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n      cache,\n      input,\n      inputIndex,\n    );\n    const prevoutHash = unsignedTx.ins[inputIndex].hash;\n    const utxoHash = nonWitnessUtxoTx.getHash();\n    // If a non-witness UTXO is provided, its hash must match the hash specified in the prevout\n    if (!prevoutHash.equals(utxoHash)) {\n      throw new Error(\n        `Non-witness UTXO hash for input #${inputIndex} doesn't match the hash specified in the prevout`,\n      );\n    }\n    const prevoutIndex = unsignedTx.ins[inputIndex].index;\n    const prevout = nonWitnessUtxoTx.outs[prevoutIndex];\n    if (input.redeemScript) {\n      // If a redeemScript is provided, the scriptPubKey must be for that redeemScript\n      checkRedeemScript(inputIndex, prevout.script, input.redeemScript);\n      script = input.redeemScript;\n    } else {\n      script = prevout.script;\n    }\n    if (isP2WSHScript(script)) {\n      if (!input.witnessScript)\n        throw new Error('Segwit input needs witnessScript if not P2WPKH');\n      checkWitnessScript(inputIndex, script, input.witnessScript);\n      hash = unsignedTx.hashForWitnessV0(\n        inputIndex,\n        input.witnessScript,\n        prevout.value,\n        sighashType,\n      );\n      script = input.witnessScript;\n    } else if (isP2WPKH(script)) {\n      // P2WPKH uses the P2PKH template for prevoutScript when signing\n      const signingScript = payments.p2pkh({ hash: script.slice(2) }).output;\n      hash = unsignedTx.hashForWitnessV0(\n        inputIndex,\n        signingScript,\n        prevout.value,\n        sighashType,\n      );\n    } else {\n      hash = unsignedTx.hashForSignature(inputIndex, script, sighashType);\n    }\n  } else if (input.witnessUtxo) {\n    let _script; // so we don't shadow the `let script` above\n    if (input.redeemScript) {\n      // If a redeemScript is provided, the scriptPubKey must be for that redeemScript\n      checkRedeemScript(\n        inputIndex,\n        input.witnessUtxo.script,\n        input.redeemScript,\n      );\n      _script = input.redeemScript;\n    } else {\n      _script = input.witnessUtxo.script;\n    }\n    if (isP2WPKH(_script)) {\n      // P2WPKH uses the P2PKH template for prevoutScript when signing\n      const signingScript = payments.p2pkh({ hash: _script.slice(2) }).output;\n      hash = unsignedTx.hashForWitnessV0(\n        inputIndex,\n        signingScript,\n        input.witnessUtxo.value,\n        sighashType,\n      );\n      script = _script;\n    } else if (isP2WSHScript(_script)) {\n      if (!input.witnessScript)\n        throw new Error('Segwit input needs witnessScript if not P2WPKH');\n      checkWitnessScript(inputIndex, _script, input.witnessScript);\n      hash = unsignedTx.hashForWitnessV0(\n        inputIndex,\n        input.witnessScript,\n        input.witnessUtxo.value,\n        sighashType,\n      );\n      // want to make sure the script we return is the actual meaningful script\n      script = input.witnessScript;\n    } else {\n      throw new Error(\n        `Input #${inputIndex} has witnessUtxo but non-segwit script: ` +\n          `${_script.toString('hex')}`,\n      );\n    }\n  } else {\n    throw new Error('Need a Utxo input item for signing');\n  }\n  return {\n    script,\n    sighashType,\n    hash,\n  };\n}\nfunction getPayment(script, scriptType, partialSig) {\n  let payment;\n  switch (scriptType) {\n    case 'multisig':\n      const sigs = getSortedSigs(script, partialSig);\n      payment = payments.p2ms({\n        output: script,\n        signatures: sigs,\n      });\n      break;\n    case 'pubkey':\n      payment = payments.p2pk({\n        output: script,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'pubkeyhash':\n      payment = payments.p2pkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n    case 'witnesspubkeyhash':\n      payment = payments.p2wpkh({\n        output: script,\n        pubkey: partialSig[0].pubkey,\n        signature: partialSig[0].signature,\n      });\n      break;\n  }\n  return payment;\n}\nfunction getPsigsFromInputFinalScripts(input) {\n  const scriptItems = !input.finalScriptSig\n    ? []\n    : bscript.decompile(input.finalScriptSig) || [];\n  const witnessItems = !input.finalScriptWitness\n    ? []\n    : bscript.decompile(input.finalScriptWitness) || [];\n  return scriptItems\n    .concat(witnessItems)\n    .filter(item => {\n      return Buffer.isBuffer(item) && bscript.isCanonicalScriptSignature(item);\n    })\n    .map(sig => ({ signature: sig }));\n}\nfunction getScriptFromInput(inputIndex, input, cache) {\n  const unsignedTx = cache.__TX;\n  const res = {\n    script: null,\n    isSegwit: false,\n    isP2SH: false,\n    isP2WSH: false,\n  };\n  res.isP2SH = !!input.redeemScript;\n  res.isP2WSH = !!input.witnessScript;\n  if (input.witnessScript) {\n    res.script = input.witnessScript;\n  } else if (input.redeemScript) {\n    res.script = input.redeemScript;\n  } else {\n    if (input.nonWitnessUtxo) {\n      const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(\n        cache,\n        input,\n        inputIndex,\n      );\n      const prevoutIndex = unsignedTx.ins[inputIndex].index;\n      res.script = nonWitnessUtxoTx.outs[prevoutIndex].script;\n    } else if (input.witnessUtxo) {\n      res.script = input.witnessUtxo.script;\n    }\n  }\n  if (input.witnessScript || isP2WPKH(res.script)) {\n    res.isSegwit = true;\n  }\n  return res;\n}\nfunction getSignersFromHD(inputIndex, inputs, hdKeyPair) {\n  const input = utils_1.checkForInput(inputs, inputIndex);\n  if (!input.bip32Derivation || input.bip32Derivation.length === 0) {\n    throw new Error('Need bip32Derivation to sign with HD');\n  }\n  const myDerivations = input.bip32Derivation\n    .map(bipDv => {\n      if (bipDv.masterFingerprint.equals(hdKeyPair.fingerprint)) {\n        return bipDv;\n      } else {\n        return;\n      }\n    })\n    .filter(v => !!v);\n  if (myDerivations.length === 0) {\n    throw new Error(\n      'Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint',\n    );\n  }\n  const signers = myDerivations.map(bipDv => {\n    const node = hdKeyPair.derivePath(bipDv.path);\n    if (!bipDv.pubkey.equals(node.publicKey)) {\n      throw new Error('pubkey did not match bip32Derivation');\n    }\n    return node;\n  });\n  return signers;\n}\nfunction getSortedSigs(script, partialSig) {\n  const p2ms = payments.p2ms({ output: script });\n  // for each pubkey in order of p2ms script\n  return p2ms.pubkeys\n    .map(pk => {\n      // filter partialSig array by pubkey being equal\n      return (\n        partialSig.filter(ps => {\n          return ps.pubkey.equals(pk);\n        })[0] || {}\n      ).signature;\n      // Any pubkey without a match will return undefined\n      // this last filter removes all the undefined items in the array.\n    })\n    .filter(v => !!v);\n}\nfunction scriptWitnessToWitnessStack(buffer) {\n  let offset = 0;\n  function readSlice(n) {\n    offset += n;\n    return buffer.slice(offset - n, offset);\n  }\n  function readVarInt() {\n    const vi = varuint.decode(buffer, offset);\n    offset += varuint.decode.bytes;\n    return vi;\n  }\n  function readVarSlice() {\n    return readSlice(readVarInt());\n  }\n  function readVector() {\n    const count = readVarInt();\n    const vector = [];\n    for (let i = 0; i < count; i++) vector.push(readVarSlice());\n    return vector;\n  }\n  return readVector();\n}\nfunction sighashTypeToString(sighashType) {\n  let text =\n    sighashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY\n      ? 'SIGHASH_ANYONECANPAY | '\n      : '';\n  const sigMod = sighashType & 0x1f;\n  switch (sigMod) {\n    case transaction_1.Transaction.SIGHASH_ALL:\n      text += 'SIGHASH_ALL';\n      break;\n    case transaction_1.Transaction.SIGHASH_SINGLE:\n      text += 'SIGHASH_SINGLE';\n      break;\n    case transaction_1.Transaction.SIGHASH_NONE:\n      text += 'SIGHASH_NONE';\n      break;\n  }\n  return text;\n}\nfunction witnessStackToScriptWitness(witness) {\n  let buffer = Buffer.allocUnsafe(0);\n  function writeSlice(slice) {\n    buffer = Buffer.concat([buffer, Buffer.from(slice)]);\n  }\n  function writeVarInt(i) {\n    const currentLen = buffer.length;\n    const varintLen = varuint.encodingLength(i);\n    buffer = Buffer.concat([buffer, Buffer.allocUnsafe(varintLen)]);\n    varuint.encode(i, buffer, currentLen);\n  }\n  function writeVarSlice(slice) {\n    writeVarInt(slice.length);\n    writeSlice(slice);\n  }\n  function writeVector(vector) {\n    writeVarInt(vector.length);\n    vector.forEach(writeVarSlice);\n  }\n  writeVector(witness);\n  return buffer;\n}\nfunction addNonWitnessTxCache(cache, input, inputIndex) {\n  cache.__NON_WITNESS_UTXO_BUF_CACHE[inputIndex] = input.nonWitnessUtxo;\n  const tx = transaction_1.Transaction.fromBuffer(input.nonWitnessUtxo);\n  cache.__NON_WITNESS_UTXO_TX_CACHE[inputIndex] = tx;\n  const self = cache;\n  const selfIndex = inputIndex;\n  delete input.nonWitnessUtxo;\n  Object.defineProperty(input, 'nonWitnessUtxo', {\n    enumerable: true,\n    get() {\n      const buf = self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex];\n      const txCache = self.__NON_WITNESS_UTXO_TX_CACHE[selfIndex];\n      if (buf !== undefined) {\n        return buf;\n      } else {\n        const newBuf = txCache.toBuffer();\n        self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = newBuf;\n        return newBuf;\n      }\n    },\n    set(data) {\n      self.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = data;\n    },\n  });\n}\nfunction inputFinalizeGetAmts(inputs, tx, cache, mustFinalize) {\n  let inputAmount = 0;\n  inputs.forEach((input, idx) => {\n    if (mustFinalize && input.finalScriptSig)\n      tx.ins[idx].script = input.finalScriptSig;\n    if (mustFinalize && input.finalScriptWitness) {\n      tx.ins[idx].witness = scriptWitnessToWitnessStack(\n        input.finalScriptWitness,\n      );\n    }\n    if (input.witnessUtxo) {\n      inputAmount += input.witnessUtxo.value;\n    } else if (input.nonWitnessUtxo) {\n      const nwTx = nonWitnessUtxoTxFromCache(cache, input, idx);\n      const vout = tx.ins[idx].index;\n      const out = nwTx.outs[vout];\n      inputAmount += out.value;\n    }\n  });\n  const outputAmount = tx.outs.reduce((total, o) => total + o.value, 0);\n  const fee = inputAmount - outputAmount;\n  if (fee < 0) {\n    throw new Error('Outputs are spending more than Inputs');\n  }\n  const bytes = tx.virtualSize();\n  cache.__FEE = fee;\n  cache.__EXTRACTED_TX = tx;\n  cache.__FEE_RATE = Math.floor(fee / bytes);\n}\nfunction nonWitnessUtxoTxFromCache(cache, input, inputIndex) {\n  const c = cache.__NON_WITNESS_UTXO_TX_CACHE;\n  if (!c[inputIndex]) {\n    addNonWitnessTxCache(cache, input, inputIndex);\n  }\n  return c[inputIndex];\n}\nfunction classifyScript(script) {\n  if (isP2WPKH(script)) return 'witnesspubkeyhash';\n  if (isP2PKH(script)) return 'pubkeyhash';\n  if (isP2MS(script)) return 'multisig';\n  if (isP2PK(script)) return 'pubkey';\n  return 'nonstandard';\n}\nfunction range(n) {\n  return [...Array(n).keys()];\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst combiner_1 = require('./combiner');\nconst parser_1 = require('./parser');\nconst typeFields_1 = require('./typeFields');\nconst utils_1 = require('./utils');\nclass Psbt {\n  constructor(tx) {\n    this.inputs = [];\n    this.outputs = [];\n    this.globalMap = {\n      unsignedTx: tx,\n    };\n  }\n  static fromBase64(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'base64');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromHex(data, txFromBuffer) {\n    const buffer = Buffer.from(data, 'hex');\n    return this.fromBuffer(buffer, txFromBuffer);\n  }\n  static fromBuffer(buffer, txFromBuffer) {\n    const results = parser_1.psbtFromBuffer(buffer, txFromBuffer);\n    const psbt = new this(results.globalMap.unsignedTx);\n    Object.assign(psbt, results);\n    return psbt;\n  }\n  toBase64() {\n    const buffer = this.toBuffer();\n    return buffer.toString('base64');\n  }\n  toHex() {\n    const buffer = this.toBuffer();\n    return buffer.toString('hex');\n  }\n  toBuffer() {\n    return parser_1.psbtToBuffer(this);\n  }\n  updateGlobal(updateData) {\n    utils_1.updateGlobal(updateData, this.globalMap);\n    return this;\n  }\n  updateInput(inputIndex, updateData) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.updateInput(updateData, input);\n    return this;\n  }\n  updateOutput(outputIndex, updateData) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.updateOutput(updateData, output);\n    return this;\n  }\n  addUnknownKeyValToGlobal(keyVal) {\n    utils_1.checkHasKey(\n      keyVal,\n      this.globalMap.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.GlobalTypes),\n    );\n    if (!this.globalMap.unknownKeyVals) this.globalMap.unknownKeyVals = [];\n    this.globalMap.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToInput(inputIndex, keyVal) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      input.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.InputTypes),\n    );\n    if (!input.unknownKeyVals) input.unknownKeyVals = [];\n    input.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addUnknownKeyValToOutput(outputIndex, keyVal) {\n    const output = utils_1.checkForOutput(this.outputs, outputIndex);\n    utils_1.checkHasKey(\n      keyVal,\n      output.unknownKeyVals,\n      utils_1.getEnumLength(typeFields_1.OutputTypes),\n    );\n    if (!output.unknownKeyVals) output.unknownKeyVals = [];\n    output.unknownKeyVals.push(keyVal);\n    return this;\n  }\n  addInput(inputData) {\n    this.globalMap.unsignedTx.addInput(inputData);\n    this.inputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = inputData.unknownKeyVals || [];\n    const inputIndex = this.inputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(inputIndex, keyVal),\n    );\n    utils_1.addInputAttributes(this.inputs, inputData);\n    return this;\n  }\n  addOutput(outputData) {\n    this.globalMap.unsignedTx.addOutput(outputData);\n    this.outputs.push({\n      unknownKeyVals: [],\n    });\n    const addKeyVals = outputData.unknownKeyVals || [];\n    const outputIndex = this.outputs.length - 1;\n    if (!Array.isArray(addKeyVals)) {\n      throw new Error('unknownKeyVals must be an Array');\n    }\n    addKeyVals.forEach(keyVal =>\n      this.addUnknownKeyValToInput(outputIndex, keyVal),\n    );\n    utils_1.addOutputAttributes(this.outputs, outputData);\n    return this;\n  }\n  clearFinalizedInput(inputIndex) {\n    const input = utils_1.checkForInput(this.inputs, inputIndex);\n    utils_1.inputCheckUncleanFinalized(inputIndex, input);\n    for (const key of Object.keys(input)) {\n      if (\n        ![\n          'witnessUtxo',\n          'nonWitnessUtxo',\n          'finalScriptSig',\n          'finalScriptWitness',\n          'unknownKeyVals',\n        ].includes(key)\n      ) {\n        // @ts-ignore\n        delete input[key];\n      }\n    }\n    return this;\n  }\n  combine(...those) {\n    // Combine this with those.\n    // Return self for chaining.\n    const result = combiner_1.combine([this].concat(those));\n    Object.assign(this, result);\n    return this;\n  }\n  getTransaction() {\n    return this.globalMap.unsignedTx.toBuffer();\n  }\n}\nexports.Psbt = Psbt;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst parser_1 = require('../parser');\nfunction combine(psbts) {\n  const self = psbts[0];\n  const selfKeyVals = parser_1.psbtToKeyVals(self);\n  const others = psbts.slice(1);\n  if (others.length === 0) throw new Error('Combine: Nothing to combine');\n  const selfTx = getTx(self);\n  if (selfTx === undefined) {\n    throw new Error('Combine: Self missing transaction');\n  }\n  const selfGlobalSet = getKeySet(selfKeyVals.globalKeyVals);\n  const selfInputSets = selfKeyVals.inputKeyVals.map(getKeySet);\n  const selfOutputSets = selfKeyVals.outputKeyVals.map(getKeySet);\n  for (const other of others) {\n    const otherTx = getTx(other);\n    if (\n      otherTx === undefined ||\n      !otherTx.toBuffer().equals(selfTx.toBuffer())\n    ) {\n      throw new Error(\n        'Combine: One of the Psbts does not have the same transaction.',\n      );\n    }\n    const otherKeyVals = parser_1.psbtToKeyVals(other);\n    const otherGlobalSet = getKeySet(otherKeyVals.globalKeyVals);\n    otherGlobalSet.forEach(\n      keyPusher(\n        selfGlobalSet,\n        selfKeyVals.globalKeyVals,\n        otherKeyVals.globalKeyVals,\n      ),\n    );\n    const otherInputSets = otherKeyVals.inputKeyVals.map(getKeySet);\n    otherInputSets.forEach((inputSet, idx) =>\n      inputSet.forEach(\n        keyPusher(\n          selfInputSets[idx],\n          selfKeyVals.inputKeyVals[idx],\n          otherKeyVals.inputKeyVals[idx],\n        ),\n      ),\n    );\n    const otherOutputSets = otherKeyVals.outputKeyVals.map(getKeySet);\n    otherOutputSets.forEach((outputSet, idx) =>\n      outputSet.forEach(\n        keyPusher(\n          selfOutputSets[idx],\n          selfKeyVals.outputKeyVals[idx],\n          otherKeyVals.outputKeyVals[idx],\n        ),\n      ),\n    );\n  }\n  return parser_1.psbtFromKeyVals(selfTx, {\n    globalMapKeyVals: selfKeyVals.globalKeyVals,\n    inputKeyVals: selfKeyVals.inputKeyVals,\n    outputKeyVals: selfKeyVals.outputKeyVals,\n  });\n}\nexports.combine = combine;\nfunction keyPusher(selfSet, selfKeyVals, otherKeyVals) {\n  return key => {\n    if (selfSet.has(key)) return;\n    const newKv = otherKeyVals.filter(kv => kv.key.toString('hex') === key)[0];\n    selfKeyVals.push(newKv);\n    selfSet.add(key);\n  };\n}\nfunction getTx(psbt) {\n  return psbt.globalMap.unsignedTx;\n}\nfunction getKeySet(keyVals) {\n  const set = new Set();\n  keyVals.forEach(keyVal => {\n    const hex = keyVal.key.toString('hex');\n    if (set.has(hex))\n      throw new Error('Combine: KeyValue Map keys should be unique');\n    set.add(hex);\n  });\n  return set;\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nconst varuint = require('../converter/varint');\nconst typeFields_1 = require('../typeFields');\nfunction psbtFromBuffer(buffer, txGetter) {\n  let offset = 0;\n  function varSlice() {\n    const keyLen = varuint.decode(buffer, offset);\n    offset += varuint.encodingLength(keyLen);\n    const key = buffer.slice(offset, offset + keyLen);\n    offset += keyLen;\n    return key;\n  }\n  function readUInt32BE() {\n    const num = buffer.readUInt32BE(offset);\n    offset += 4;\n    return num;\n  }\n  function readUInt8() {\n    const num = buffer.readUInt8(offset);\n    offset += 1;\n    return num;\n  }\n  function getKeyValue() {\n    const key = varSlice();\n    const value = varSlice();\n    return {\n      key,\n      value,\n    };\n  }\n  function checkEndOfKeyValPairs() {\n    if (offset >= buffer.length) {\n      throw new Error('Format Error: Unexpected End of PSBT');\n    }\n    const isEnd = buffer.readUInt8(offset) === 0;\n    if (isEnd) {\n      offset++;\n    }\n    return isEnd;\n  }\n  if (readUInt32BE() !== 0x70736274) {\n    throw new Error('Format Error: Invalid Magic Number');\n  }\n  if (readUInt8() !== 0xff) {\n    throw new Error(\n      'Format Error: Magic Number must be followed by 0xff separator',\n    );\n  }\n  const globalMapKeyVals = [];\n  const globalKeyIndex = {};\n  while (!checkEndOfKeyValPairs()) {\n    const keyVal = getKeyValue();\n    const hexKey = keyVal.key.toString('hex');\n    if (globalKeyIndex[hexKey]) {\n      throw new Error(\n        'Format Error: Keys must be unique for global keymap: key ' + hexKey,\n      );\n    }\n    globalKeyIndex[hexKey] = 1;\n    globalMapKeyVals.push(keyVal);\n  }\n  const unsignedTxMaps = globalMapKeyVals.filter(\n    keyVal => keyVal.key[0] === typeFields_1.GlobalTypes.UNSIGNED_TX,\n  );\n  if (unsignedTxMaps.length !== 1) {\n    throw new Error('Format Error: Only one UNSIGNED_TX allowed');\n  }\n  const unsignedTx = txGetter(unsignedTxMaps[0].value);\n  // Get input and output counts to loop the respective fields\n  const { inputCount, outputCount } = unsignedTx.getInputOutputCounts();\n  const inputKeyVals = [];\n  const outputKeyVals = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const inputKeyIndex = {};\n    const input = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (inputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each input: ' +\n            'input index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      inputKeyIndex[hexKey] = 1;\n      input.push(keyVal);\n    }\n    inputKeyVals.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const outputKeyIndex = {};\n    const output = [];\n    while (!checkEndOfKeyValPairs()) {\n      const keyVal = getKeyValue();\n      const hexKey = keyVal.key.toString('hex');\n      if (outputKeyIndex[hexKey]) {\n        throw new Error(\n          'Format Error: Keys must be unique for each output: ' +\n            'output index ' +\n            index +\n            ' key ' +\n            hexKey,\n        );\n      }\n      outputKeyIndex[hexKey] = 1;\n      output.push(keyVal);\n    }\n    outputKeyVals.push(output);\n  }\n  return psbtFromKeyVals(unsignedTx, {\n    globalMapKeyVals,\n    inputKeyVals,\n    outputKeyVals,\n  });\n}\nexports.psbtFromBuffer = psbtFromBuffer;\nfunction checkKeyBuffer(type, keyBuf, keyNum) {\n  if (!keyBuf.equals(Buffer.from([keyNum]))) {\n    throw new Error(\n      `Format Error: Invalid ${type} key: ${keyBuf.toString('hex')}`,\n    );\n  }\n}\nexports.checkKeyBuffer = checkKeyBuffer;\nfunction psbtFromKeyVals(\n  unsignedTx,\n  { globalMapKeyVals, inputKeyVals, outputKeyVals },\n) {\n  // That was easy :-)\n  const globalMap = {\n    unsignedTx,\n  };\n  let txCount = 0;\n  for (const keyVal of globalMapKeyVals) {\n    // If a globalMap item needs pubkey, uncomment\n    // const pubkey = convert.globals.checkPubkey(keyVal);\n    switch (keyVal.key[0]) {\n      case typeFields_1.GlobalTypes.UNSIGNED_TX:\n        checkKeyBuffer(\n          'global',\n          keyVal.key,\n          typeFields_1.GlobalTypes.UNSIGNED_TX,\n        );\n        if (txCount > 0) {\n          throw new Error('Format Error: GlobalMap has multiple UNSIGNED_TX');\n        }\n        txCount++;\n        break;\n      case typeFields_1.GlobalTypes.GLOBAL_XPUB:\n        if (globalMap.globalXpub === undefined) {\n          globalMap.globalXpub = [];\n        }\n        globalMap.globalXpub.push(convert.globals.globalXpub.decode(keyVal));\n        break;\n      default:\n        // This will allow inclusion during serialization.\n        if (!globalMap.unknownKeyVals) globalMap.unknownKeyVals = [];\n        globalMap.unknownKeyVals.push(keyVal);\n    }\n  }\n  // Get input and output counts to loop the respective fields\n  const inputCount = inputKeyVals.length;\n  const outputCount = outputKeyVals.length;\n  const inputs = [];\n  const outputs = [];\n  // Get input fields\n  for (const index of tools_1.range(inputCount)) {\n    const input = {};\n    for (const keyVal of inputKeyVals[index]) {\n      convert.inputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.InputTypes.NON_WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.NON_WITNESS_UTXO,\n          );\n          if (\n            input.nonWitnessUtxo !== undefined ||\n            input.witnessUtxo !== undefined\n          ) {\n            throw new Error(\n              'Format Error: Input has multiple [NON_]WITNESS_UTXO',\n            );\n          }\n          input.nonWitnessUtxo = convert.inputs.nonWitnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_UTXO:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_UTXO,\n          );\n          if (\n            input.nonWitnessUtxo !== undefined ||\n            input.witnessUtxo !== undefined\n          ) {\n            throw new Error(\n              'Format Error: Input has multiple [NON_]WITNESS_UTXO',\n            );\n          }\n          input.witnessUtxo = convert.inputs.witnessUtxo.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.PARTIAL_SIG:\n          if (input.partialSig === undefined) {\n            input.partialSig = [];\n          }\n          input.partialSig.push(convert.inputs.partialSig.decode(keyVal));\n          break;\n        case typeFields_1.InputTypes.SIGHASH_TYPE:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.SIGHASH_TYPE,\n          );\n          if (input.sighashType !== undefined) {\n            throw new Error('Format Error: Input has multiple SIGHASH_TYPE');\n          }\n          input.sighashType = convert.inputs.sighashType.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.REDEEM_SCRIPT,\n          );\n          if (input.redeemScript !== undefined) {\n            throw new Error('Format Error: Input has multiple REDEEM_SCRIPT');\n          }\n          input.redeemScript = convert.inputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.WITNESS_SCRIPT,\n          );\n          if (input.witnessScript !== undefined) {\n            throw new Error('Format Error: Input has multiple WITNESS_SCRIPT');\n          }\n          input.witnessScript = convert.inputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.BIP32_DERIVATION:\n          if (input.bip32Derivation === undefined) {\n            input.bip32Derivation = [];\n          }\n          input.bip32Derivation.push(\n            convert.inputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTSIG:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTSIG,\n          );\n          input.finalScriptSig = convert.inputs.finalScriptSig.decode(keyVal);\n          break;\n        case typeFields_1.InputTypes.FINAL_SCRIPTWITNESS:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.FINAL_SCRIPTWITNESS,\n          );\n          input.finalScriptWitness = convert.inputs.finalScriptWitness.decode(\n            keyVal,\n          );\n          break;\n        case typeFields_1.InputTypes.POR_COMMITMENT:\n          checkKeyBuffer(\n            'input',\n            keyVal.key,\n            typeFields_1.InputTypes.POR_COMMITMENT,\n          );\n          input.porCommitment = convert.inputs.porCommitment.decode(keyVal);\n          break;\n        default:\n          // This will allow inclusion during serialization.\n          if (!input.unknownKeyVals) input.unknownKeyVals = [];\n          input.unknownKeyVals.push(keyVal);\n      }\n    }\n    inputs.push(input);\n  }\n  for (const index of tools_1.range(outputCount)) {\n    const output = {};\n    for (const keyVal of outputKeyVals[index]) {\n      convert.outputs.checkPubkey(keyVal);\n      switch (keyVal.key[0]) {\n        case typeFields_1.OutputTypes.REDEEM_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.REDEEM_SCRIPT,\n          );\n          if (output.redeemScript !== undefined) {\n            throw new Error('Format Error: Output has multiple REDEEM_SCRIPT');\n          }\n          output.redeemScript = convert.outputs.redeemScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.WITNESS_SCRIPT:\n          checkKeyBuffer(\n            'output',\n            keyVal.key,\n            typeFields_1.OutputTypes.WITNESS_SCRIPT,\n          );\n          if (output.witnessScript !== undefined) {\n            throw new Error('Format Error: Output has multiple WITNESS_SCRIPT');\n          }\n          output.witnessScript = convert.outputs.witnessScript.decode(keyVal);\n          break;\n        case typeFields_1.OutputTypes.BIP32_DERIVATION:\n          if (output.bip32Derivation === undefined) {\n            output.bip32Derivation = [];\n          }\n          output.bip32Derivation.push(\n            convert.outputs.bip32Derivation.decode(keyVal),\n          );\n          break;\n        default:\n          if (!output.unknownKeyVals) output.unknownKeyVals = [];\n          output.unknownKeyVals.push(keyVal);\n      }\n    }\n    outputs.push(output);\n  }\n  return { globalMap, inputs, outputs };\n}\nexports.psbtFromKeyVals = psbtFromKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst range = n => [...Array(n).keys()];\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.GlobalTypes.GLOBAL_XPUB) {\n    throw new Error(\n      'Decode Error: could not decode globalXpub with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (keyVal.key.length !== 79 || ![2, 3].includes(keyVal.key[46])) {\n    throw new Error(\n      'Decode Error: globalXpub has invalid extended pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if ((keyVal.value.length / 4) % 1 !== 0) {\n    throw new Error(\n      'Decode Error: Global GLOBAL_XPUB value length should be multiple of 4',\n    );\n  }\n  const extendedPubkey = keyVal.key.slice(1);\n  const data = {\n    masterFingerprint: keyVal.value.slice(0, 4),\n    extendedPubkey,\n    path: 'm',\n  };\n  for (const i of range(keyVal.value.length / 4 - 1)) {\n    const val = keyVal.value.readUInt32LE(i * 4 + 4);\n    const isHard = !!(val & 0x80000000);\n    const idx = val & 0x7fffffff;\n    data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n  }\n  return data;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const head = Buffer.from([typeFields_1.GlobalTypes.GLOBAL_XPUB]);\n  const key = Buffer.concat([head, data.extendedPubkey]);\n  const splitPath = data.path.split('/');\n  const value = Buffer.allocUnsafe(splitPath.length * 4);\n  data.masterFingerprint.copy(value, 0);\n  let offset = 4;\n  splitPath.slice(1).forEach(level => {\n    const isHard = level.slice(-1) === \"'\";\n    let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n    if (isHard) num += 0x80000000;\n    value.writeUInt32LE(num, offset);\n    offset += 4;\n  });\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected =\n  '{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }';\nfunction check(data) {\n  const epk = data.extendedPubkey;\n  const mfp = data.masterFingerprint;\n  const p = data.path;\n  return (\n    Buffer.isBuffer(epk) &&\n    epk.length === 78 &&\n    [2, 3].indexOf(epk[45]) > -1 &&\n    Buffer.isBuffer(mfp) &&\n    mfp.length === 4 &&\n    typeof p === 'string' &&\n    !!p.match(/^m(\\/\\d+'?)+$/)\n  );\n}\nexports.check = check;\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.extendedPubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return (\n    array.filter(v => v.extendedPubkey.equals(item.extendedPubkey)).length === 0\n  );\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.GlobalTypes.UNSIGNED_TX]),\n    value: data.toBuffer(),\n  };\n}\nexports.encode = encode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTSIG) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTSIG]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.finalScriptSig === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTWITNESS) {\n    throw new Error(\n      'Decode Error: could not decode finalScriptWitness with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.FINAL_SCRIPTWITNESS]);\n  return {\n    key,\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData && !!newData && currentData.finalScriptWitness === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.NON_WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode nonWitnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value;\n}\nexports.decode = decode;\nfunction encode(data) {\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.NON_WITNESS_UTXO]),\n    value: data,\n  };\n}\nexports.encode = encode;\nexports.expected = 'Buffer';\nfunction check(data) {\n  return Buffer.isBuffer(data);\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData &&\n    !!newData &&\n    currentData.witnessUtxo === undefined &&\n    currentData.nonWitnessUtxo === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.PARTIAL_SIG) {\n    throw new Error(\n      'Decode Error: could not decode partialSig with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  if (\n    !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n    ![2, 3, 4].includes(keyVal.key[1])\n  ) {\n    throw new Error(\n      'Decode Error: partialSig has invalid pubkey in key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const pubkey = keyVal.key.slice(1);\n  return {\n    pubkey,\n    signature: keyVal.value,\n  };\n}\nexports.decode = decode;\nfunction encode(pSig) {\n  const head = Buffer.from([typeFields_1.InputTypes.PARTIAL_SIG]);\n  return {\n    key: Buffer.concat([head, pSig.pubkey]),\n    value: pSig.signature,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ pubkey: Buffer; signature: Buffer; }';\nfunction check(data) {\n  return (\n    Buffer.isBuffer(data.pubkey) &&\n    Buffer.isBuffer(data.signature) &&\n    [33, 65].includes(data.pubkey.length) &&\n    [2, 3, 4].includes(data.pubkey[0]) &&\n    isDerSigWithSighash(data.signature)\n  );\n}\nexports.check = check;\nfunction isDerSigWithSighash(buf) {\n  if (!Buffer.isBuffer(buf) || buf.length < 9) return false;\n  if (buf[0] !== 0x30) return false;\n  if (buf.length !== buf[1] + 3) return false;\n  if (buf[2] !== 0x02) return false;\n  const rLen = buf[3];\n  if (rLen > 33 || rLen < 1) return false;\n  if (buf[3 + rLen + 1] !== 0x02) return false;\n  const sLen = buf[3 + rLen + 2];\n  if (sLen > 33 || sLen < 1) return false;\n  if (buf.length !== 3 + rLen + 2 + sLen + 2) return false;\n  return true;\n}\nfunction canAddToArray(array, item, dupeSet) {\n  const dupeString = item.pubkey.toString('hex');\n  if (dupeSet.has(dupeString)) return false;\n  dupeSet.add(dupeString);\n  return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n}\nexports.canAddToArray = canAddToArray;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.POR_COMMITMENT) {\n    throw new Error(\n      'Decode Error: could not decode porCommitment with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.toString('utf8');\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.POR_COMMITMENT]);\n  return {\n    key,\n    value: Buffer.from(data, 'utf8'),\n  };\n}\nexports.encode = encode;\nexports.expected = 'string';\nfunction check(data) {\n  return typeof data === 'string';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.porCommitment === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.SIGHASH_TYPE) {\n    throw new Error(\n      'Decode Error: could not decode sighashType with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  return keyVal.value.readUInt32LE(0);\n}\nexports.decode = decode;\nfunction encode(data) {\n  const key = Buffer.from([typeFields_1.InputTypes.SIGHASH_TYPE]);\n  const value = Buffer.allocUnsafe(4);\n  value.writeUInt32LE(data, 0);\n  return {\n    key,\n    value,\n  };\n}\nexports.encode = encode;\nexports.expected = 'number';\nfunction check(data) {\n  return typeof data === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return !!currentData && !!newData && currentData.sighashType === undefined;\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst typeFields_1 = require('../../typeFields');\nconst tools_1 = require('../tools');\nconst varuint = require('../varint');\nfunction decode(keyVal) {\n  if (keyVal.key[0] !== typeFields_1.InputTypes.WITNESS_UTXO) {\n    throw new Error(\n      'Decode Error: could not decode witnessUtxo with key 0x' +\n        keyVal.key.toString('hex'),\n    );\n  }\n  const value = tools_1.readUInt64LE(keyVal.value, 0);\n  let _offset = 8;\n  const scriptLen = varuint.decode(keyVal.value, _offset);\n  _offset += varuint.encodingLength(scriptLen);\n  const script = keyVal.value.slice(_offset);\n  if (script.length !== scriptLen) {\n    throw new Error('Decode Error: WITNESS_UTXO script is not proper length');\n  }\n  return {\n    script,\n    value,\n  };\n}\nexports.decode = decode;\nfunction encode(data) {\n  const { script, value } = data;\n  const varintLen = varuint.encodingLength(script.length);\n  const result = Buffer.allocUnsafe(8 + varintLen + script.length);\n  tools_1.writeUInt64LE(result, value, 0);\n  varuint.encode(script.length, result, 8);\n  script.copy(result, 8 + varintLen);\n  return {\n    key: Buffer.from([typeFields_1.InputTypes.WITNESS_UTXO]),\n    value: result,\n  };\n}\nexports.encode = encode;\nexports.expected = '{ script: Buffer; value: number; }';\nfunction check(data) {\n  return Buffer.isBuffer(data.script) && typeof data.value === 'number';\n}\nexports.check = check;\nfunction canAdd(currentData, newData) {\n  return (\n    !!currentData &&\n    !!newData &&\n    currentData.witnessUtxo === undefined &&\n    currentData.nonWitnessUtxo === undefined\n  );\n}\nexports.canAdd = canAdd;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst range = n => [...Array(n).keys()];\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode bip32Derivation with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if (\n      !(keyVal.key.length === 34 || keyVal.key.length === 66) ||\n      ![2, 3, 4].includes(keyVal.key[1])\n    ) {\n      throw new Error(\n        'Decode Error: bip32Derivation has invalid pubkey in key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    if ((keyVal.value.length / 4) % 1 !== 0) {\n      throw new Error(\n        'Decode Error: Input BIP32_DERIVATION value length should be multiple of 4',\n      );\n    }\n    const pubkey = keyVal.key.slice(1);\n    const data = {\n      masterFingerprint: keyVal.value.slice(0, 4),\n      pubkey,\n      path: 'm',\n    };\n    for (const i of range(keyVal.value.length / 4 - 1)) {\n      const val = keyVal.value.readUInt32LE(i * 4 + 4);\n      const isHard = !!(val & 0x80000000);\n      const idx = val & 0x7fffffff;\n      data.path += '/' + idx.toString(10) + (isHard ? \"'\" : '');\n    }\n    return data;\n  }\n  function encode(data) {\n    const head = Buffer.from([TYPE_BYTE]);\n    const key = Buffer.concat([head, data.pubkey]);\n    const splitPath = data.path.split('/');\n    const value = Buffer.allocUnsafe(splitPath.length * 4);\n    data.masterFingerprint.copy(value, 0);\n    let offset = 4;\n    splitPath.slice(1).forEach(level => {\n      const isHard = level.slice(-1) === \"'\";\n      let num = 0x7fffffff & parseInt(isHard ? level.slice(0, -1) : level, 10);\n      if (isHard) num += 0x80000000;\n      value.writeUInt32LE(num, offset);\n      offset += 4;\n    });\n    return {\n      key,\n      value,\n    };\n  }\n  const expected =\n    '{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }';\n  function check(data) {\n    return (\n      Buffer.isBuffer(data.pubkey) &&\n      Buffer.isBuffer(data.masterFingerprint) &&\n      typeof data.path === 'string' &&\n      [33, 65].includes(data.pubkey.length) &&\n      [2, 3, 4].includes(data.pubkey[0]) &&\n      data.masterFingerprint.length === 4\n    );\n  }\n  function canAddToArray(array, item, dupeSet) {\n    const dupeString = item.pubkey.toString('hex');\n    if (dupeSet.has(dupeString)) return false;\n    dupeSet.add(dupeString);\n    return array.filter(v => v.pubkey.equals(item.pubkey)).length === 0;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAddToArray,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeChecker(pubkeyTypes) {\n  return checkPubkey;\n  function checkPubkey(keyVal) {\n    let pubkey;\n    if (pubkeyTypes.includes(keyVal.key[0])) {\n      pubkey = keyVal.key.slice(1);\n      if (\n        !(pubkey.length === 33 || pubkey.length === 65) ||\n        ![2, 3, 4].includes(pubkey[0])\n      ) {\n        throw new Error(\n          'Format Error: invalid pubkey in key 0x' + keyVal.key.toString('hex'),\n        );\n      }\n    }\n    return pubkey;\n  }\n}\nexports.makeChecker = makeChecker;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode redeemScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return !!currentData && !!newData && currentData.redeemScript === undefined;\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nfunction makeConverter(TYPE_BYTE) {\n  function decode(keyVal) {\n    if (keyVal.key[0] !== TYPE_BYTE) {\n      throw new Error(\n        'Decode Error: could not decode witnessScript with key 0x' +\n          keyVal.key.toString('hex'),\n      );\n    }\n    return keyVal.value;\n  }\n  function encode(data) {\n    const key = Buffer.from([TYPE_BYTE]);\n    return {\n      key,\n      value: data,\n    };\n  }\n  const expected = 'Buffer';\n  function check(data) {\n    return Buffer.isBuffer(data);\n  }\n  function canAdd(currentData, newData) {\n    return (\n      !!currentData && !!newData && currentData.witnessScript === undefined\n    );\n  }\n  return {\n    decode,\n    encode,\n    check,\n    expected,\n    canAdd,\n  };\n}\nexports.makeConverter = makeConverter;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst convert = require('../converter');\nconst tools_1 = require('../converter/tools');\nfunction psbtToBuffer({ globalMap, inputs, outputs }) {\n  const { globalKeyVals, inputKeyVals, outputKeyVals } = psbtToKeyVals({\n    globalMap,\n    inputs,\n    outputs,\n  });\n  const globalBuffer = tools_1.keyValsToBuffer(globalKeyVals);\n  const keyValsOrEmptyToBuffer = keyVals =>\n    keyVals.length === 0\n      ? [Buffer.from([0])]\n      : keyVals.map(tools_1.keyValsToBuffer);\n  const inputBuffers = keyValsOrEmptyToBuffer(inputKeyVals);\n  const outputBuffers = keyValsOrEmptyToBuffer(outputKeyVals);\n  const header = Buffer.allocUnsafe(5);\n  header.writeUIntBE(0x70736274ff, 0, 5);\n  return Buffer.concat(\n    [header, globalBuffer].concat(inputBuffers, outputBuffers),\n  );\n}\nexports.psbtToBuffer = psbtToBuffer;\nconst sortKeyVals = (a, b) => {\n  return a.key.compare(b.key);\n};\nfunction keyValsFromMap(keyValMap, converterFactory) {\n  const keyHexSet = new Set();\n  const keyVals = Object.entries(keyValMap).reduce((result, [key, value]) => {\n    if (key === 'unknownKeyVals') return result;\n    // We are checking for undefined anyways. So ignore TS error\n    // @ts-ignore\n    const converter = converterFactory[key];\n    if (converter === undefined) return result;\n    const encodedKeyVals = (Array.isArray(value) ? value : [value]).map(\n      converter.encode,\n    );\n    const keyHexes = encodedKeyVals.map(kv => kv.key.toString('hex'));\n    keyHexes.forEach(hex => {\n      if (keyHexSet.has(hex))\n        throw new Error('Serialize Error: Duplicate key: ' + hex);\n      keyHexSet.add(hex);\n    });\n    return result.concat(encodedKeyVals);\n  }, []);\n  // Get other keyVals that have not yet been gotten\n  const otherKeyVals = keyValMap.unknownKeyVals\n    ? keyValMap.unknownKeyVals.filter(keyVal => {\n        return !keyHexSet.has(keyVal.key.toString('hex'));\n      })\n    : [];\n  return keyVals.concat(otherKeyVals).sort(sortKeyVals);\n}\nfunction psbtToKeyVals({ globalMap, inputs, outputs }) {\n  // First parse the global keyVals\n  // Get any extra keyvals to pass along\n  return {\n    globalKeyVals: keyValsFromMap(globalMap, convert.globals),\n    inputKeyVals: inputs.map(i => keyValsFromMap(i, convert.inputs)),\n    outputKeyVals: outputs.map(o => keyValsFromMap(o, convert.outputs)),\n  };\n}\nexports.psbtToKeyVals = psbtToKeyVals;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst baddress = require('./address');\nconst bufferutils_1 = require('./bufferutils');\nconst classify = require('./classify');\nconst bcrypto = require('./crypto');\nconst ECPair = require('./ecpair');\nconst networks = require('./networks');\nconst payments = require('./payments');\nconst bscript = require('./script');\nconst script_1 = require('./script');\nconst transaction_1 = require('./transaction');\nconst types = require('./types');\nconst typeforce = require('typeforce');\nconst SCRIPT_TYPES = classify.types;\nconst PREVOUT_TYPES = new Set([\n  // Raw\n  'p2pkh',\n  'p2pk',\n  'p2wpkh',\n  'p2ms',\n  // P2SH wrapped\n  'p2sh-p2pkh',\n  'p2sh-p2pk',\n  'p2sh-p2wpkh',\n  'p2sh-p2ms',\n  // P2WSH wrapped\n  'p2wsh-p2pkh',\n  'p2wsh-p2pk',\n  'p2wsh-p2ms',\n  // P2SH-P2WSH wrapper\n  'p2sh-p2wsh-p2pkh',\n  'p2sh-p2wsh-p2pk',\n  'p2sh-p2wsh-p2ms',\n]);\nfunction tfMessage(type, value, message) {\n  try {\n    typeforce(type, value);\n  } catch (err) {\n    throw new Error(message);\n  }\n}\nfunction txIsString(tx) {\n  return typeof tx === 'string' || tx instanceof String;\n}\nfunction txIsTransaction(tx) {\n  return tx instanceof transaction_1.Transaction;\n}\nclass TransactionBuilder {\n  // WARNING: maximumFeeRate is __NOT__ to be relied on,\n  //          it's just another potential safety mechanism (safety in-depth)\n  constructor(network = networks.bitcoin, maximumFeeRate = 2500) {\n    this.network = network;\n    this.maximumFeeRate = maximumFeeRate;\n    this.__PREV_TX_SET = {};\n    this.__INPUTS = [];\n    this.__TX = new transaction_1.Transaction();\n    this.__TX.version = 2;\n    this.__USE_LOW_R = false;\n    console.warn(\n      'Deprecation Warning: TransactionBuilder will be removed in the future. ' +\n        '(v6.x.x or later) Please use the Psbt class instead. Examples of usage ' +\n        'are available in the transactions-psbt.js integration test file on our ' +\n        'Github. A high level explanation is available in the psbt.ts and psbt.js ' +\n        'files as well.',\n    );\n  }\n  static fromTransaction(transaction, network) {\n    const txb = new TransactionBuilder(network);\n    // Copy transaction fields\n    txb.setVersion(transaction.version);\n    txb.setLockTime(transaction.locktime);\n    // Copy outputs (done first to avoid signature invalidation)\n    transaction.outs.forEach(txOut => {\n      txb.addOutput(txOut.script, txOut.value);\n    });\n    // Copy inputs\n    transaction.ins.forEach(txIn => {\n      txb.__addInputUnsafe(txIn.hash, txIn.index, {\n        sequence: txIn.sequence,\n        script: txIn.script,\n        witness: txIn.witness,\n      });\n    });\n    // fix some things not possible through the public API\n    txb.__INPUTS.forEach((input, i) => {\n      fixMultisigOrder(input, transaction, i);\n    });\n    return txb;\n  }\n  setLowR(setting) {\n    typeforce(typeforce.maybe(typeforce.Boolean), setting);\n    if (setting === undefined) {\n      setting = true;\n    }\n    this.__USE_LOW_R = setting;\n    return setting;\n  }\n  setLockTime(locktime) {\n    typeforce(types.UInt32, locktime);\n    // if any signatures exist, throw\n    if (\n      this.__INPUTS.some(input => {\n        if (!input.signatures) return false;\n        return input.signatures.some(s => s !== undefined);\n      })\n    ) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    this.__TX.locktime = locktime;\n  }\n  setVersion(version) {\n    typeforce(types.UInt32, version);\n    // XXX: this might eventually become more complex depending on what the versions represent\n    this.__TX.version = version;\n  }\n  addInput(txHash, vout, sequence, prevOutScript) {\n    if (!this.__canModifyInputs()) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    let value;\n    // is it a hex string?\n    if (txIsString(txHash)) {\n      // transaction hashs's are displayed in reverse order, un-reverse it\n      txHash = bufferutils_1.reverseBuffer(Buffer.from(txHash, 'hex'));\n      // is it a Transaction object?\n    } else if (txIsTransaction(txHash)) {\n      const txOut = txHash.outs[vout];\n      prevOutScript = txOut.script;\n      value = txOut.value;\n      txHash = txHash.getHash(false);\n    }\n    return this.__addInputUnsafe(txHash, vout, {\n      sequence,\n      prevOutScript,\n      value,\n    });\n  }\n  addOutput(scriptPubKey, value) {\n    if (!this.__canModifyOutputs()) {\n      throw new Error('No, this would invalidate signatures');\n    }\n    // Attempt to get a script if it's a base58 or bech32 address string\n    if (typeof scriptPubKey === 'string') {\n      scriptPubKey = baddress.toOutputScript(scriptPubKey, this.network);\n    }\n    return this.__TX.addOutput(scriptPubKey, value);\n  }\n  build() {\n    return this.__build(false);\n  }\n  buildIncomplete() {\n    return this.__build(true);\n  }\n  sign(\n    signParams,\n    keyPair,\n    redeemScript,\n    hashType,\n    witnessValue,\n    witnessScript,\n  ) {\n    trySign(\n      getSigningData(\n        this.network,\n        this.__INPUTS,\n        this.__needsOutputs.bind(this),\n        this.__TX,\n        signParams,\n        keyPair,\n        redeemScript,\n        hashType,\n        witnessValue,\n        witnessScript,\n        this.__USE_LOW_R,\n      ),\n    );\n  }\n  __addInputUnsafe(txHash, vout, options) {\n    if (transaction_1.Transaction.isCoinbaseHash(txHash)) {\n      throw new Error('coinbase inputs not supported');\n    }\n    const prevTxOut = txHash.toString('hex') + ':' + vout;\n    if (this.__PREV_TX_SET[prevTxOut] !== undefined)\n      throw new Error('Duplicate TxOut: ' + prevTxOut);\n    let input = {};\n    // derive what we can from the scriptSig\n    if (options.script !== undefined) {\n      input = expandInput(options.script, options.witness || []);\n    }\n    // if an input value was given, retain it\n    if (options.value !== undefined) {\n      input.value = options.value;\n    }\n    // derive what we can from the previous transactions output script\n    if (!input.prevOutScript && options.prevOutScript) {\n      let prevOutType;\n      if (!input.pubkeys && !input.signatures) {\n        const expanded = expandOutput(options.prevOutScript);\n        if (expanded.pubkeys) {\n          input.pubkeys = expanded.pubkeys;\n          input.signatures = expanded.signatures;\n        }\n        prevOutType = expanded.type;\n      }\n      input.prevOutScript = options.prevOutScript;\n      input.prevOutType = prevOutType || classify.output(options.prevOutScript);\n    }\n    const vin = this.__TX.addInput(\n      txHash,\n      vout,\n      options.sequence,\n      options.scriptSig,\n    );\n    this.__INPUTS[vin] = input;\n    this.__PREV_TX_SET[prevTxOut] = true;\n    return vin;\n  }\n  __build(allowIncomplete) {\n    if (!allowIncomplete) {\n      if (!this.__TX.ins.length) throw new Error('Transaction has no inputs');\n      if (!this.__TX.outs.length) throw new Error('Transaction has no outputs');\n    }\n    const tx = this.__TX.clone();\n    // create script signatures from inputs\n    this.__INPUTS.forEach((input, i) => {\n      if (!input.prevOutType && !allowIncomplete)\n        throw new Error('Transaction is not complete');\n      const result = build(input.prevOutType, input, allowIncomplete);\n      if (!result) {\n        if (!allowIncomplete && input.prevOutType === SCRIPT_TYPES.NONSTANDARD)\n          throw new Error('Unknown input type');\n        if (!allowIncomplete) throw new Error('Not enough information');\n        return;\n      }\n      tx.setInputScript(i, result.input);\n      tx.setWitness(i, result.witness);\n    });\n    if (!allowIncomplete) {\n      // do not rely on this, its merely a last resort\n      if (this.__overMaximumFees(tx.virtualSize())) {\n        throw new Error('Transaction has absurd fees');\n      }\n    }\n    return tx;\n  }\n  __canModifyInputs() {\n    return this.__INPUTS.every(input => {\n      if (!input.signatures) return true;\n      return input.signatures.every(signature => {\n        if (!signature) return true;\n        const hashType = signatureHashType(signature);\n        // if SIGHASH_ANYONECANPAY is set, signatures would not\n        // be invalidated by more inputs\n        return (\n          (hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY) !== 0\n        );\n      });\n    });\n  }\n  __needsOutputs(signingHashType) {\n    if (signingHashType === transaction_1.Transaction.SIGHASH_ALL) {\n      return this.__TX.outs.length === 0;\n    }\n    // if inputs are being signed with SIGHASH_NONE, we don't strictly need outputs\n    // .build() will fail, but .buildIncomplete() is OK\n    return (\n      this.__TX.outs.length === 0 &&\n      this.__INPUTS.some(input => {\n        if (!input.signatures) return false;\n        return input.signatures.some(signature => {\n          if (!signature) return false; // no signature, no issue\n          const hashType = signatureHashType(signature);\n          if (hashType & transaction_1.Transaction.SIGHASH_NONE) return false; // SIGHASH_NONE doesn't care about outputs\n          return true; // SIGHASH_* does care\n        });\n      })\n    );\n  }\n  __canModifyOutputs() {\n    const nInputs = this.__TX.ins.length;\n    const nOutputs = this.__TX.outs.length;\n    return this.__INPUTS.every(input => {\n      if (input.signatures === undefined) return true;\n      return input.signatures.every(signature => {\n        if (!signature) return true;\n        const hashType = signatureHashType(signature);\n        const hashTypeMod = hashType & 0x1f;\n        if (hashTypeMod === transaction_1.Transaction.SIGHASH_NONE) return true;\n        if (hashTypeMod === transaction_1.Transaction.SIGHASH_SINGLE) {\n          // if SIGHASH_SINGLE is set, and nInputs > nOutputs\n          // some signatures would be invalidated by the addition\n          // of more outputs\n          return nInputs <= nOutputs;\n        }\n        return false;\n      });\n    });\n  }\n  __overMaximumFees(bytes) {\n    // not all inputs will have .value defined\n    const incoming = this.__INPUTS.reduce((a, x) => a + (x.value >>> 0), 0);\n    // but all outputs do, and if we have any input value\n    // we can immediately determine if the outputs are too small\n    const outgoing = this.__TX.outs.reduce((a, x) => a + x.value, 0);\n    const fee = incoming - outgoing;\n    const feeRate = fee / bytes;\n    return feeRate > this.maximumFeeRate;\n  }\n}\nexports.TransactionBuilder = TransactionBuilder;\nfunction expandInput(scriptSig, witnessStack, type, scriptPubKey) {\n  if (scriptSig.length === 0 && witnessStack.length === 0) return {};\n  if (!type) {\n    let ssType = classify.input(scriptSig, true);\n    let wsType = classify.witness(witnessStack, true);\n    if (ssType === SCRIPT_TYPES.NONSTANDARD) ssType = undefined;\n    if (wsType === SCRIPT_TYPES.NONSTANDARD) wsType = undefined;\n    type = ssType || wsType;\n  }\n  switch (type) {\n    case SCRIPT_TYPES.P2WPKH: {\n      const { output, pubkey, signature } = payments.p2wpkh({\n        witness: witnessStack,\n      });\n      return {\n        prevOutScript: output,\n        prevOutType: SCRIPT_TYPES.P2WPKH,\n        pubkeys: [pubkey],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2PKH: {\n      const { output, pubkey, signature } = payments.p2pkh({\n        input: scriptSig,\n      });\n      return {\n        prevOutScript: output,\n        prevOutType: SCRIPT_TYPES.P2PKH,\n        pubkeys: [pubkey],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2PK: {\n      const { signature } = payments.p2pk({ input: scriptSig });\n      return {\n        prevOutType: SCRIPT_TYPES.P2PK,\n        pubkeys: [undefined],\n        signatures: [signature],\n      };\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const { m, pubkeys, signatures } = payments.p2ms(\n        {\n          input: scriptSig,\n          output: scriptPubKey,\n        },\n        { allowIncomplete: true },\n      );\n      return {\n        prevOutType: SCRIPT_TYPES.P2MS,\n        pubkeys,\n        signatures,\n        maxSignatures: m,\n      };\n    }\n  }\n  if (type === SCRIPT_TYPES.P2SH) {\n    const { output, redeem } = payments.p2sh({\n      input: scriptSig,\n      witness: witnessStack,\n    });\n    const outputType = classify.output(redeem.output);\n    const expanded = expandInput(\n      redeem.input,\n      redeem.witness,\n      outputType,\n      redeem.output,\n    );\n    if (!expanded.prevOutType) return {};\n    return {\n      prevOutScript: output,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      redeemScript: redeem.output,\n      redeemScriptType: expanded.prevOutType,\n      witnessScript: expanded.witnessScript,\n      witnessScriptType: expanded.witnessScriptType,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n    };\n  }\n  if (type === SCRIPT_TYPES.P2WSH) {\n    const { output, redeem } = payments.p2wsh({\n      input: scriptSig,\n      witness: witnessStack,\n    });\n    const outputType = classify.output(redeem.output);\n    let expanded;\n    if (outputType === SCRIPT_TYPES.P2WPKH) {\n      expanded = expandInput(redeem.input, redeem.witness, outputType);\n    } else {\n      expanded = expandInput(\n        bscript.compile(redeem.witness),\n        [],\n        outputType,\n        redeem.output,\n      );\n    }\n    if (!expanded.prevOutType) return {};\n    return {\n      prevOutScript: output,\n      prevOutType: SCRIPT_TYPES.P2WSH,\n      witnessScript: redeem.output,\n      witnessScriptType: expanded.prevOutType,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n    };\n  }\n  return {\n    prevOutType: SCRIPT_TYPES.NONSTANDARD,\n    prevOutScript: scriptSig,\n  };\n}\n// could be done in expandInput, but requires the original Transaction for hashForSignature\nfunction fixMultisigOrder(input, transaction, vin) {\n  if (input.redeemScriptType !== SCRIPT_TYPES.P2MS || !input.redeemScript)\n    return;\n  if (input.pubkeys.length === input.signatures.length) return;\n  const unmatched = input.signatures.concat();\n  input.signatures = input.pubkeys.map(pubKey => {\n    const keyPair = ECPair.fromPublicKey(pubKey);\n    let match;\n    // check for a signature\n    unmatched.some((signature, i) => {\n      // skip if undefined || OP_0\n      if (!signature) return false;\n      // TODO: avoid O(n) hashForSignature\n      const parsed = bscript.signature.decode(signature);\n      const hash = transaction.hashForSignature(\n        vin,\n        input.redeemScript,\n        parsed.hashType,\n      );\n      // skip if signature does not match pubKey\n      if (!keyPair.verify(hash, parsed.signature)) return false;\n      // remove matched signature from unmatched\n      unmatched[i] = undefined;\n      match = signature;\n      return true;\n    });\n    return match;\n  });\n}\nfunction expandOutput(script, ourPubKey) {\n  typeforce(types.Buffer, script);\n  const type = classify.output(script);\n  switch (type) {\n    case SCRIPT_TYPES.P2PKH: {\n      if (!ourPubKey) return { type };\n      // does our hash160(pubKey) match the output scripts?\n      const pkh1 = payments.p2pkh({ output: script }).hash;\n      const pkh2 = bcrypto.hash160(ourPubKey);\n      if (!pkh1.equals(pkh2)) return { type };\n      return {\n        type,\n        pubkeys: [ourPubKey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2WPKH: {\n      if (!ourPubKey) return { type };\n      // does our hash160(pubKey) match the output scripts?\n      const wpkh1 = payments.p2wpkh({ output: script }).hash;\n      const wpkh2 = bcrypto.hash160(ourPubKey);\n      if (!wpkh1.equals(wpkh2)) return { type };\n      return {\n        type,\n        pubkeys: [ourPubKey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2PK: {\n      const p2pk = payments.p2pk({ output: script });\n      return {\n        type,\n        pubkeys: [p2pk.pubkey],\n        signatures: [undefined],\n      };\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const p2ms = payments.p2ms({ output: script });\n      return {\n        type,\n        pubkeys: p2ms.pubkeys,\n        signatures: p2ms.pubkeys.map(() => undefined),\n        maxSignatures: p2ms.m,\n      };\n    }\n  }\n  return { type };\n}\nfunction prepareInput(input, ourPubKey, redeemScript, witnessScript) {\n  if (redeemScript && witnessScript) {\n    const p2wsh = payments.p2wsh({\n      redeem: { output: witnessScript },\n    });\n    const p2wshAlt = payments.p2wsh({ output: redeemScript });\n    const p2sh = payments.p2sh({ redeem: { output: redeemScript } });\n    const p2shAlt = payments.p2sh({ redeem: p2wsh });\n    // enforces P2SH(P2WSH(...))\n    if (!p2wsh.hash.equals(p2wshAlt.hash))\n      throw new Error('Witness script inconsistent with prevOutScript');\n    if (!p2sh.hash.equals(p2shAlt.hash))\n      throw new Error('Redeem script inconsistent with prevOutScript');\n    const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as witnessScript (' +\n          bscript.toASM(witnessScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    const signScript = witnessScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH)\n      throw new Error('P2SH(P2WSH(P2WPKH)) is a consensus failure');\n    return {\n      redeemScript,\n      redeemScriptType: SCRIPT_TYPES.P2WSH,\n      witnessScript,\n      witnessScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      prevOutScript: p2sh.output,\n      hasWitness: true,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (redeemScript) {\n    const p2sh = payments.p2sh({ redeem: { output: redeemScript } });\n    if (input.prevOutScript) {\n      let p2shAlt;\n      try {\n        p2shAlt = payments.p2sh({ output: input.prevOutScript });\n      } catch (e) {\n        throw new Error('PrevOutScript must be P2SH');\n      }\n      if (!p2sh.hash.equals(p2shAlt.hash))\n        throw new Error('Redeem script inconsistent with prevOutScript');\n    }\n    const expanded = expandOutput(p2sh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as redeemScript (' +\n          bscript.toASM(redeemScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    let signScript = redeemScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH) {\n      signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;\n    }\n    return {\n      redeemScript,\n      redeemScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2SH,\n      prevOutScript: p2sh.output,\n      hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (witnessScript) {\n    const p2wsh = payments.p2wsh({ redeem: { output: witnessScript } });\n    if (input.prevOutScript) {\n      const p2wshAlt = payments.p2wsh({ output: input.prevOutScript });\n      if (!p2wsh.hash.equals(p2wshAlt.hash))\n        throw new Error('Witness script inconsistent with prevOutScript');\n    }\n    const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported as witnessScript (' +\n          bscript.toASM(witnessScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    const signScript = witnessScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH)\n      throw new Error('P2WSH(P2WPKH) is a consensus failure');\n    return {\n      witnessScript,\n      witnessScriptType: expanded.type,\n      prevOutType: SCRIPT_TYPES.P2WSH,\n      prevOutScript: p2wsh.output,\n      hasWitness: true,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  if (input.prevOutType && input.prevOutScript) {\n    // embedded scripts are not possible without extra information\n    if (input.prevOutType === SCRIPT_TYPES.P2SH)\n      throw new Error(\n        'PrevOutScript is ' + input.prevOutType + ', requires redeemScript',\n      );\n    if (input.prevOutType === SCRIPT_TYPES.P2WSH)\n      throw new Error(\n        'PrevOutScript is ' + input.prevOutType + ', requires witnessScript',\n      );\n    if (!input.prevOutScript) throw new Error('PrevOutScript is missing');\n    const expanded = expandOutput(input.prevOutScript, ourPubKey);\n    if (!expanded.pubkeys)\n      throw new Error(\n        expanded.type +\n          ' not supported (' +\n          bscript.toASM(input.prevOutScript) +\n          ')',\n      );\n    if (input.signatures && input.signatures.some(x => x !== undefined)) {\n      expanded.signatures = input.signatures;\n    }\n    let signScript = input.prevOutScript;\n    if (expanded.type === SCRIPT_TYPES.P2WPKH) {\n      signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;\n    }\n    return {\n      prevOutType: expanded.type,\n      prevOutScript: input.prevOutScript,\n      hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,\n      signScript,\n      signType: expanded.type,\n      pubkeys: expanded.pubkeys,\n      signatures: expanded.signatures,\n      maxSignatures: expanded.maxSignatures,\n    };\n  }\n  const prevOutScript = payments.p2pkh({ pubkey: ourPubKey }).output;\n  return {\n    prevOutType: SCRIPT_TYPES.P2PKH,\n    prevOutScript,\n    hasWitness: false,\n    signScript: prevOutScript,\n    signType: SCRIPT_TYPES.P2PKH,\n    pubkeys: [ourPubKey],\n    signatures: [undefined],\n  };\n}\nfunction build(type, input, allowIncomplete) {\n  const pubkeys = input.pubkeys || [];\n  let signatures = input.signatures || [];\n  switch (type) {\n    case SCRIPT_TYPES.P2PKH: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2pkh({ pubkey: pubkeys[0], signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2WPKH: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2wpkh({ pubkey: pubkeys[0], signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2PK: {\n      if (pubkeys.length === 0) break;\n      if (signatures.length === 0) break;\n      return payments.p2pk({ signature: signatures[0] });\n    }\n    case SCRIPT_TYPES.P2MS: {\n      const m = input.maxSignatures;\n      if (allowIncomplete) {\n        signatures = signatures.map(x => x || script_1.OPS.OP_0);\n      } else {\n        signatures = signatures.filter(x => x);\n      }\n      // if the transaction is not not complete (complete), or if signatures.length === m, validate\n      // otherwise, the number of OP_0's may be >= m, so don't validate (boo)\n      const validate = !allowIncomplete || m === signatures.length;\n      return payments.p2ms(\n        { m, pubkeys, signatures },\n        { allowIncomplete, validate },\n      );\n    }\n    case SCRIPT_TYPES.P2SH: {\n      const redeem = build(input.redeemScriptType, input, allowIncomplete);\n      if (!redeem) return;\n      return payments.p2sh({\n        redeem: {\n          output: redeem.output || input.redeemScript,\n          input: redeem.input,\n          witness: redeem.witness,\n        },\n      });\n    }\n    case SCRIPT_TYPES.P2WSH: {\n      const redeem = build(input.witnessScriptType, input, allowIncomplete);\n      if (!redeem) return;\n      return payments.p2wsh({\n        redeem: {\n          output: input.witnessScript,\n          input: redeem.input,\n          witness: redeem.witness,\n        },\n      });\n    }\n  }\n}\nfunction canSign(input) {\n  return (\n    input.signScript !== undefined &&\n    input.signType !== undefined &&\n    input.pubkeys !== undefined &&\n    input.signatures !== undefined &&\n    input.signatures.length === input.pubkeys.length &&\n    input.pubkeys.length > 0 &&\n    (input.hasWitness === false || input.value !== undefined)\n  );\n}\nfunction signatureHashType(buffer) {\n  return buffer.readUInt8(buffer.length - 1);\n}\nfunction checkSignArgs(inputs, signParams) {\n  if (!PREVOUT_TYPES.has(signParams.prevOutScriptType)) {\n    throw new TypeError(\n      `Unknown prevOutScriptType \"${signParams.prevOutScriptType}\"`,\n    );\n  }\n  tfMessage(\n    typeforce.Number,\n    signParams.vin,\n    `sign must include vin parameter as Number (input index)`,\n  );\n  tfMessage(\n    types.Signer,\n    signParams.keyPair,\n    `sign must include keyPair parameter as Signer interface`,\n  );\n  tfMessage(\n    typeforce.maybe(typeforce.Number),\n    signParams.hashType,\n    `sign hashType parameter must be a number`,\n  );\n  const prevOutType = (inputs[signParams.vin] || []).prevOutType;\n  const posType = signParams.prevOutScriptType;\n  switch (posType) {\n    case 'p2pkh':\n      if (prevOutType && prevOutType !== 'pubkeyhash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2pkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2pk':\n      if (prevOutType && prevOutType !== 'pubkey') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2pk: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2wpkh':\n      if (prevOutType && prevOutType !== 'witnesspubkeyhash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2wpkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2ms':\n      if (prevOutType && prevOutType !== 'multisig') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2ms: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2sh-p2wpkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type p2sh-p2wpkh: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2sh-p2ms':\n    case 'p2sh-p2pk':\n    case 'p2sh-p2pkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessScript,\n        `${posType} requires NO witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires redeemScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.witnessValue,\n        `${posType} requires NO witnessValue`,\n      );\n      break;\n    case 'p2wsh-p2ms':\n    case 'p2wsh-p2pk':\n    case 'p2wsh-p2pkh':\n      if (prevOutType && prevOutType !== 'witnessscripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.Buffer,\n        signParams.witnessScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        typeforce.value(undefined),\n        signParams.redeemScript,\n        `${posType} requires NO redeemScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessValue`,\n      );\n      break;\n    case 'p2sh-p2wsh-p2ms':\n    case 'p2sh-p2wsh-p2pk':\n    case 'p2sh-p2wsh-p2pkh':\n      if (prevOutType && prevOutType !== 'scripthash') {\n        throw new TypeError(\n          `input #${signParams.vin} is not of type ${posType}: ${prevOutType}`,\n        );\n      }\n      tfMessage(\n        typeforce.Buffer,\n        signParams.witnessScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        typeforce.Buffer,\n        signParams.redeemScript,\n        `${posType} requires witnessScript`,\n      );\n      tfMessage(\n        types.Satoshi,\n        signParams.witnessValue,\n        `${posType} requires witnessScript`,\n      );\n      break;\n  }\n}\nfunction trySign({\n  input,\n  ourPubKey,\n  keyPair,\n  signatureHash,\n  hashType,\n  useLowR,\n}) {\n  // enforce in order signing of public keys\n  let signed = false;\n  for (const [i, pubKey] of input.pubkeys.entries()) {\n    if (!ourPubKey.equals(pubKey)) continue;\n    if (input.signatures[i]) throw new Error('Signature already exists');\n    // TODO: add tests\n    if (ourPubKey.length !== 33 && input.hasWitness) {\n      throw new Error(\n        'BIP143 rejects uncompressed public keys in P2WPKH or P2WSH',\n      );\n    }\n    const signature = keyPair.sign(signatureHash, useLowR);\n    input.signatures[i] = bscript.signature.encode(signature, hashType);\n    signed = true;\n  }\n  if (!signed) throw new Error('Key pair cannot sign for this input');\n}\nfunction getSigningData(\n  network,\n  inputs,\n  needsOutputs,\n  tx,\n  signParams,\n  keyPair,\n  redeemScript,\n  hashType,\n  witnessValue,\n  witnessScript,\n  useLowR,\n) {\n  let vin;\n  if (typeof signParams === 'number') {\n    console.warn(\n      'DEPRECATED: TransactionBuilder sign method arguments ' +\n        'will change in v6, please use the TxbSignArg interface',\n    );\n    vin = signParams;\n  } else if (typeof signParams === 'object') {\n    checkSignArgs(inputs, signParams);\n    ({\n      vin,\n      keyPair,\n      redeemScript,\n      hashType,\n      witnessValue,\n      witnessScript,\n    } = signParams);\n  } else {\n    throw new TypeError(\n      'TransactionBuilder sign first arg must be TxbSignArg or number',\n    );\n  }\n  if (keyPair === undefined) {\n    throw new Error('sign requires keypair');\n  }\n  // TODO: remove keyPair.network matching in 4.0.0\n  if (keyPair.network && keyPair.network !== network)\n    throw new TypeError('Inconsistent network');\n  if (!inputs[vin]) throw new Error('No input at index: ' + vin);\n  hashType = hashType || transaction_1.Transaction.SIGHASH_ALL;\n  if (needsOutputs(hashType)) throw new Error('Transaction needs outputs');\n  const input = inputs[vin];\n  // if redeemScript was previously provided, enforce consistency\n  if (\n    input.redeemScript !== undefined &&\n    redeemScript &&\n    !input.redeemScript.equals(redeemScript)\n  ) {\n    throw new Error('Inconsistent redeemScript');\n  }\n  const ourPubKey =\n    keyPair.publicKey || (keyPair.getPublicKey && keyPair.getPublicKey());\n  if (!canSign(input)) {\n    if (witnessValue !== undefined) {\n      if (input.value !== undefined && input.value !== witnessValue)\n        throw new Error('Input did not match witnessValue');\n      typeforce(types.Satoshi, witnessValue);\n      input.value = witnessValue;\n    }\n    if (!canSign(input)) {\n      const prepared = prepareInput(\n        input,\n        ourPubKey,\n        redeemScript,\n        witnessScript,\n      );\n      // updates inline\n      Object.assign(input, prepared);\n    }\n    if (!canSign(input)) throw Error(input.prevOutType + ' not supported');\n  }\n  // ready to sign\n  let signatureHash;\n  if (input.hasWitness) {\n    signatureHash = tx.hashForWitnessV0(\n      vin,\n      input.signScript,\n      input.value,\n      hashType,\n    );\n  } else {\n    signatureHash = tx.hashForSignature(vin, input.signScript, hashType);\n  }\n  return {\n    input,\n    ourPubKey,\n    keyPair,\n    signatureHash,\n    hashType,\n    useLowR: !!useLowR,\n  };\n}\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst script_1 = require('./script');\nconst multisig = require('./templates/multisig');\nconst nullData = require('./templates/nulldata');\nconst pubKey = require('./templates/pubkey');\nconst pubKeyHash = require('./templates/pubkeyhash');\nconst scriptHash = require('./templates/scripthash');\nconst witnessCommitment = require('./templates/witnesscommitment');\nconst witnessPubKeyHash = require('./templates/witnesspubkeyhash');\nconst witnessScriptHash = require('./templates/witnessscripthash');\nconst types = {\n  P2MS: 'multisig',\n  NONSTANDARD: 'nonstandard',\n  NULLDATA: 'nulldata',\n  P2PK: 'pubkey',\n  P2PKH: 'pubkeyhash',\n  P2SH: 'scripthash',\n  P2WPKH: 'witnesspubkeyhash',\n  P2WSH: 'witnessscripthash',\n  WITNESS_COMMITMENT: 'witnesscommitment',\n};\nexports.types = types;\nfunction classifyOutput(script) {\n  if (witnessPubKeyHash.output.check(script)) return types.P2WPKH;\n  if (witnessScriptHash.output.check(script)) return types.P2WSH;\n  if (pubKeyHash.output.check(script)) return types.P2PKH;\n  if (scriptHash.output.check(script)) return types.P2SH;\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (multisig.output.check(chunks)) return types.P2MS;\n  if (pubKey.output.check(chunks)) return types.P2PK;\n  if (witnessCommitment.output.check(chunks)) return types.WITNESS_COMMITMENT;\n  if (nullData.output.check(chunks)) return types.NULLDATA;\n  return types.NONSTANDARD;\n}\nexports.output = classifyOutput;\nfunction classifyInput(script, allowIncomplete) {\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (pubKeyHash.input.check(chunks)) return types.P2PKH;\n  if (scriptHash.input.check(chunks, allowIncomplete)) return types.P2SH;\n  if (multisig.input.check(chunks, allowIncomplete)) return types.P2MS;\n  if (pubKey.input.check(chunks)) return types.P2PK;\n  return types.NONSTANDARD;\n}\nexports.input = classifyInput;\nfunction classifyWitness(script, allowIncomplete) {\n  // XXX: optimization, below functions .decompile before use\n  const chunks = script_1.decompile(script);\n  if (!chunks) throw new TypeError('Invalid script');\n  if (witnessPubKeyHash.input.check(chunks)) return types.P2WPKH;\n  if (witnessScriptHash.input.check(chunks, allowIncomplete))\n    return types.P2WSH;\n  return types.NONSTANDARD;\n}\nexports.witness = classifyWitness;\n","'use strict';\n// OP_0 [signatures ...]\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction partialSignature(value) {\n  return (\n    value === script_1.OPS.OP_0 || bscript.isCanonicalScriptSignature(value)\n  );\n}\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 2) return false;\n  if (chunks[0] !== script_1.OPS.OP_0) return false;\n  if (allowIncomplete) {\n    return chunks.slice(1).every(partialSignature);\n  }\n  return chunks.slice(1).every(bscript.isCanonicalScriptSignature);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'multisig input';\n};\n","'use strict';\n// m [pubKeys ...] n OP_CHECKMULTISIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nconst types = require('../../types');\nconst OP_INT_BASE = script_1.OPS.OP_RESERVED; // OP_1 - 1\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 4) return false;\n  if (chunks[chunks.length - 1] !== script_1.OPS.OP_CHECKMULTISIG) return false;\n  if (!types.Number(chunks[0])) return false;\n  if (!types.Number(chunks[chunks.length - 2])) return false;\n  const m = chunks[0] - OP_INT_BASE;\n  const n = chunks[chunks.length - 2] - OP_INT_BASE;\n  if (m <= 0) return false;\n  if (n > 16) return false;\n  if (m > n) return false;\n  if (n !== chunks.length - 3) return false;\n  if (allowIncomplete) return true;\n  const keys = chunks.slice(1, -2);\n  return keys.every(bscript.isCanonicalPubKey);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'multi-sig output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\n// OP_RETURN {data}\nconst bscript = require('../script');\nconst OPS = bscript.OPS;\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return buffer.length > 1 && buffer[0] === OPS.OP_RETURN;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'null data output';\n};\nconst output = { check };\nexports.output = output;\n","'use strict';\n// {signature}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return chunks.length === 1 && bscript.isCanonicalScriptSignature(chunks[0]);\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKey input';\n};\n","'use strict';\n// {pubKey} OP_CHECKSIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalPubKey(chunks[0]) &&\n    chunks[1] === script_1.OPS.OP_CHECKSIG\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKey output';\n};\n","'use strict';\n// {signature} {pubKey}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalScriptSignature(chunks[0]) &&\n    bscript.isCanonicalPubKey(chunks[1])\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKeyHash input';\n};\n","'use strict';\n// OP_DUP OP_HASH160 {pubKeyHash} OP_EQUALVERIFY OP_CHECKSIG\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 25 &&\n    buffer[0] === script_1.OPS.OP_DUP &&\n    buffer[1] === script_1.OPS.OP_HASH160 &&\n    buffer[2] === 0x14 &&\n    buffer[23] === script_1.OPS.OP_EQUALVERIFY &&\n    buffer[24] === script_1.OPS.OP_CHECKSIG\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'pubKeyHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// <scriptSig> {serialized scriptPubKey script}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst p2ms = require('../multisig');\nconst p2pk = require('../pubkey');\nconst p2pkh = require('../pubkeyhash');\nconst p2wpkho = require('../witnesspubkeyhash/output');\nconst p2wsho = require('../witnessscripthash/output');\nfunction check(script, allowIncomplete) {\n  const chunks = bscript.decompile(script);\n  if (chunks.length < 1) return false;\n  const lastChunk = chunks[chunks.length - 1];\n  if (!Buffer.isBuffer(lastChunk)) return false;\n  const scriptSigChunks = bscript.decompile(\n    bscript.compile(chunks.slice(0, -1)),\n  );\n  const redeemScriptChunks = bscript.decompile(lastChunk);\n  // is redeemScript a valid script?\n  if (!redeemScriptChunks) return false;\n  // is redeemScriptSig push only?\n  if (!bscript.isPushOnly(scriptSigChunks)) return false;\n  // is witness?\n  if (chunks.length === 1) {\n    return (\n      p2wsho.check(redeemScriptChunks) || p2wpkho.check(redeemScriptChunks)\n    );\n  }\n  // match types\n  if (\n    p2pkh.input.check(scriptSigChunks) &&\n    p2pkh.output.check(redeemScriptChunks)\n  )\n    return true;\n  if (\n    p2ms.input.check(scriptSigChunks, allowIncomplete) &&\n    p2ms.output.check(redeemScriptChunks)\n  )\n    return true;\n  if (\n    p2pk.input.check(scriptSigChunks) &&\n    p2pk.output.check(redeemScriptChunks)\n  )\n    return true;\n  return false;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'scriptHash input';\n};\n","'use strict';\n// OP_HASH160 {scriptHash} OP_EQUAL\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length === 23 &&\n    buffer[0] === script_1.OPS.OP_HASH160 &&\n    buffer[1] === 0x14 &&\n    buffer[22] === script_1.OPS.OP_EQUAL\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'scriptHash output';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// OP_RETURN {aa21a9ed} {commitment}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst script_1 = require('../../script');\nconst types = require('../../types');\nconst typeforce = require('typeforce');\nconst HEADER = Buffer.from('aa21a9ed', 'hex');\nfunction check(script) {\n  const buffer = bscript.compile(script);\n  return (\n    buffer.length > 37 &&\n    buffer[0] === script_1.OPS.OP_RETURN &&\n    buffer[1] === 0x24 &&\n    buffer.slice(2, 6).equals(HEADER)\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'Witness commitment output';\n};\nfunction encode(commitment) {\n  typeforce(types.Hash256bit, commitment);\n  const buffer = Buffer.allocUnsafe(36);\n  HEADER.copy(buffer, 0);\n  commitment.copy(buffer, 4);\n  return bscript.compile([script_1.OPS.OP_RETURN, buffer]);\n}\nexports.encode = encode;\nfunction decode(buffer) {\n  typeforce(check, buffer);\n  return bscript.decompile(buffer)[1].slice(4, 36);\n}\nexports.decode = decode;\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// {signature} {pubKey}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nfunction isCompressedCanonicalPubKey(pubKey) {\n  return bscript.isCanonicalPubKey(pubKey) && pubKey.length === 33;\n}\nfunction check(script) {\n  const chunks = bscript.decompile(script);\n  return (\n    chunks.length === 2 &&\n    bscript.isCanonicalScriptSignature(chunks[0]) &&\n    isCompressedCanonicalPubKey(chunks[1])\n  );\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'witnessPubKeyHash input';\n};\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nconst input = require('./input');\nexports.input = input;\nconst output = require('./output');\nexports.output = output;\n","'use strict';\n// <scriptSig> {serialized scriptPubKey script}\nObject.defineProperty(exports, '__esModule', { value: true });\nconst bscript = require('../../script');\nconst typeforce = require('typeforce');\nconst p2ms = require('../multisig');\nconst p2pk = require('../pubkey');\nconst p2pkh = require('../pubkeyhash');\nfunction check(chunks, allowIncomplete) {\n  typeforce(typeforce.Array, chunks);\n  if (chunks.length < 1) return false;\n  const witnessScript = chunks[chunks.length - 1];\n  if (!Buffer.isBuffer(witnessScript)) return false;\n  const witnessScriptChunks = bscript.decompile(witnessScript);\n  // is witnessScript a valid script?\n  if (!witnessScriptChunks || witnessScriptChunks.length === 0) return false;\n  const witnessRawScriptSig = bscript.compile(chunks.slice(0, -1));\n  // match types\n  if (\n    p2pkh.input.check(witnessRawScriptSig) &&\n    p2pkh.output.check(witnessScriptChunks)\n  )\n    return true;\n  if (\n    p2ms.input.check(witnessRawScriptSig, allowIncomplete) &&\n    p2ms.output.check(witnessScriptChunks)\n  )\n    return true;\n  if (\n    p2pk.input.check(witnessRawScriptSig) &&\n    p2pk.output.check(witnessScriptChunks)\n  )\n    return true;\n  return false;\n}\nexports.check = check;\ncheck.toJSON = () => {\n  return 'witnessScriptHash input';\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst base64url_1 = require(\"base64url\");\nconst cryptoClients_1 = require(\"./cryptoClients\");\nconst errors_1 = require(\"./errors\");\nconst sha256_1 = require(\"./cryptoClients/sha256\");\nfunction createSigningInput(payload, header) {\n    const tokenParts = [];\n    // add in the header\n    const encodedHeader = base64url_1.default.encode(JSON.stringify(header));\n    tokenParts.push(encodedHeader);\n    // add in the payload\n    const encodedPayload = base64url_1.default.encode(JSON.stringify(payload));\n    tokenParts.push(encodedPayload);\n    // prepare the message\n    const signingInput = tokenParts.join('.');\n    // return the signing input\n    return signingInput;\n}\nfunction createUnsecuredToken(payload) {\n    const header = { typ: 'JWT', alg: 'none' };\n    return createSigningInput(payload, header) + '.';\n}\nexports.createUnsecuredToken = createUnsecuredToken;\nclass TokenSigner {\n    constructor(signingAlgorithm, rawPrivateKey) {\n        if (!(signingAlgorithm && rawPrivateKey)) {\n            throw new errors_1.MissingParametersError('a signing algorithm and private key are required');\n        }\n        if (typeof signingAlgorithm !== 'string') {\n            throw new Error('signing algorithm parameter must be a string');\n        }\n        signingAlgorithm = signingAlgorithm.toUpperCase();\n        if (!cryptoClients_1.cryptoClients.hasOwnProperty(signingAlgorithm)) {\n            throw new Error('invalid signing algorithm');\n        }\n        this.tokenType = 'JWT';\n        this.cryptoClient = cryptoClients_1.cryptoClients[signingAlgorithm];\n        this.rawPrivateKey = rawPrivateKey;\n    }\n    header(header = {}) {\n        const defaultHeader = { typ: this.tokenType,\n            alg: this.cryptoClient.algorithmName };\n        return Object.assign({}, defaultHeader, header);\n    }\n    sign(payload, expanded = false, customHeader = {}) {\n        // generate the token header\n        const header = this.header(customHeader);\n        // prepare the message to be signed\n        const signingInput = createSigningInput(payload, header);\n        const signingInputHash = sha256_1.hashSha256(signingInput);\n        return this.createWithSignedHash(payload, expanded, header, signingInput, signingInputHash);\n    }\n    signAsync(payload, expanded = false, customHeader = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // generate the token header\n            const header = this.header(customHeader);\n            // prepare the message to be signed\n            const signingInput = createSigningInput(payload, header);\n            const signingInputHash = yield sha256_1.hashSha256Async(signingInput);\n            return this.createWithSignedHash(payload, expanded, header, signingInput, signingInputHash);\n        });\n    }\n    createWithSignedHash(payload, expanded, header, signingInput, signingInputHash) {\n        // sign the message and add in the signature\n        const signature = this.cryptoClient.signHash(signingInputHash, this.rawPrivateKey);\n        if (expanded) {\n            const signedToken = {\n                'header': [\n                    base64url_1.default.encode(JSON.stringify(header))\n                ],\n                'payload': JSON.stringify(payload),\n                'signature': [\n                    signature\n                ]\n            };\n            return signedToken;\n        }\n        else {\n            return [signingInput, signature].join('.');\n        }\n    }\n}\nexports.TokenSigner = TokenSigner;\n//# sourceMappingURL=signer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar pad_string_1 = require(\"./pad-string\");\nfunction encode(input, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    if (Buffer.isBuffer(input)) {\n        return fromBase64(input.toString(\"base64\"));\n    }\n    return fromBase64(Buffer.from(input, encoding).toString(\"base64\"));\n}\n;\nfunction decode(base64url, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    return Buffer.from(toBase64(base64url), \"base64\").toString(encoding);\n}\nfunction toBase64(base64url) {\n    base64url = base64url.toString();\n    return pad_string_1.default(base64url)\n        .replace(/\\-/g, \"+\")\n        .replace(/_/g, \"/\");\n}\nfunction fromBase64(base64) {\n    return base64\n        .replace(/=/g, \"\")\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\");\n}\nfunction toBuffer(base64url) {\n    return Buffer.from(toBase64(base64url), \"base64\");\n}\nvar base64url = encode;\nbase64url.encode = encode;\nbase64url.decode = decode;\nbase64url.toBase64 = toBase64;\nbase64url.fromBase64 = fromBase64;\nbase64url.toBuffer = toBuffer;\nexports.default = base64url;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction padString(input) {\n    var segmentLength = 4;\n    var stringLength = input.length;\n    var diff = stringLength % segmentLength;\n    if (!diff) {\n        return input;\n    }\n    var position = stringLength;\n    var padLength = segmentLength - diff;\n    var paddedStringLength = stringLength + padLength;\n    var buffer = Buffer.alloc(paddedStringLength);\n    buffer.write(input);\n    while (padLength--) {\n        buffer.write(\"=\", position++);\n    }\n    return buffer.toString();\n}\nexports.default = padString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst elliptic_1 = require(\"elliptic\");\nconst ecdsa_sig_formatter_1 = require(\"ecdsa-sig-formatter\");\nconst errors_1 = require(\"../errors\");\nclass SECP256K1Client {\n    constructor() {\n    }\n    static loadPrivateKey(rawPrivateKey) {\n        if (rawPrivateKey.length === 66) {\n            rawPrivateKey = rawPrivateKey.slice(0, 64);\n        }\n        return SECP256K1Client.ec.keyFromPrivate(rawPrivateKey);\n    }\n    static loadPublicKey(rawPublicKey) {\n        return SECP256K1Client.ec.keyFromPublic(rawPublicKey, 'hex');\n    }\n    static derivePublicKey(privateKey, compressed = true) {\n        if (typeof privateKey !== 'string') {\n            throw Error('private key must be a string');\n        }\n        if (!(/^[0-9A-F]+$/i.test(privateKey))) {\n            throw Error('private key must be a hex string');\n        }\n        if (privateKey.length == 66) {\n            privateKey = privateKey.slice(0, 64);\n        }\n        else if (privateKey.length <= 64) {\n            // do nothing\n        }\n        else {\n            throw Error('private key must be 66 characters or less');\n        }\n        const keypair = SECP256K1Client.ec.keyFromPrivate(privateKey);\n        return keypair.getPublic(compressed, 'hex');\n    }\n    static signHash(signingInputHash, rawPrivateKey, format = 'jose') {\n        // make sure the required parameters are provided\n        if (!(signingInputHash && rawPrivateKey)) {\n            throw new errors_1.MissingParametersError('a signing input hash and private key are all required');\n        }\n        // prepare the private key\n        const privateKeyObject = SECP256K1Client.loadPrivateKey(rawPrivateKey);\n        // calculate the signature\n        const signatureObject = privateKeyObject.sign(signingInputHash);\n        const derSignature = Buffer.from(signatureObject.toDER());\n        if (format === 'der') {\n            return derSignature.toString('hex');\n        }\n        else if (format === 'jose') {\n            // return the JOSE-formatted signature\n            return ecdsa_sig_formatter_1.derToJose(derSignature, 'ES256');\n        }\n        else {\n            throw Error('Invalid signature format');\n        }\n    }\n    static loadSignature(joseSignature) {\n        // create and return the DER-formatted signature buffer\n        return ecdsa_sig_formatter_1.joseToDer(joseSignature, 'ES256');\n    }\n    static verifyHash(signingInputHash, derSignatureBuffer, rawPublicKey) {\n        // make sure the required parameters are provided\n        if (!(signingInputHash && derSignatureBuffer && rawPublicKey)) {\n            throw new errors_1.MissingParametersError('a signing input hash, der signature, and public key are all required');\n        }\n        // prepare the public key\n        const publicKeyObject = SECP256K1Client.loadPublicKey(rawPublicKey);\n        // verify the token\n        return publicKeyObject.verify(signingInputHash, derSignatureBuffer);\n    }\n}\nexports.SECP256K1Client = SECP256K1Client;\nSECP256K1Client.ec = new elliptic_1.ec('secp256k1');\nSECP256K1Client.algorithmName = 'ES256K';\n//# sourceMappingURL=secp256k1.js.map","'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\n\nvar getParamBytesForAlg = require('./param-bytes-for-alg');\n\nvar MAX_OCTET = 0x80,\n\tCLASS_UNIVERSAL = 0,\n\tPRIMITIVE_BIT = 0x20,\n\tTAG_SEQ = 0x10,\n\tTAG_INT = 0x02,\n\tENCODED_TAG_SEQ = (TAG_SEQ | PRIMITIVE_BIT) | (CLASS_UNIVERSAL << 6),\n\tENCODED_TAG_INT = TAG_INT | (CLASS_UNIVERSAL << 6);\n\nfunction base64Url(base64) {\n\treturn base64\n\t\t.replace(/=/g, '')\n\t\t.replace(/\\+/g, '-')\n\t\t.replace(/\\//g, '_');\n}\n\nfunction signatureAsBuffer(signature) {\n\tif (Buffer.isBuffer(signature)) {\n\t\treturn signature;\n\t} else if ('string' === typeof signature) {\n\t\treturn Buffer.from(signature, 'base64');\n\t}\n\n\tthrow new TypeError('ECDSA signature must be a Base64 string or a Buffer');\n}\n\nfunction derToJose(signature, alg) {\n\tsignature = signatureAsBuffer(signature);\n\tvar paramBytes = getParamBytesForAlg(alg);\n\n\t// the DER encoded param should at most be the param size, plus a padding\n\t// zero, since due to being a signed integer\n\tvar maxEncodedParamLength = paramBytes + 1;\n\n\tvar inputLength = signature.length;\n\n\tvar offset = 0;\n\tif (signature[offset++] !== ENCODED_TAG_SEQ) {\n\t\tthrow new Error('Could not find expected \"seq\"');\n\t}\n\n\tvar seqLength = signature[offset++];\n\tif (seqLength === (MAX_OCTET | 1)) {\n\t\tseqLength = signature[offset++];\n\t}\n\n\tif (inputLength - offset < seqLength) {\n\t\tthrow new Error('\"seq\" specified length of \"' + seqLength + '\", only \"' + (inputLength - offset) + '\" remaining');\n\t}\n\n\tif (signature[offset++] !== ENCODED_TAG_INT) {\n\t\tthrow new Error('Could not find expected \"int\" for \"r\"');\n\t}\n\n\tvar rLength = signature[offset++];\n\n\tif (inputLength - offset - 2 < rLength) {\n\t\tthrow new Error('\"r\" specified length of \"' + rLength + '\", only \"' + (inputLength - offset - 2) + '\" available');\n\t}\n\n\tif (maxEncodedParamLength < rLength) {\n\t\tthrow new Error('\"r\" specified length of \"' + rLength + '\", max of \"' + maxEncodedParamLength + '\" is acceptable');\n\t}\n\n\tvar rOffset = offset;\n\toffset += rLength;\n\n\tif (signature[offset++] !== ENCODED_TAG_INT) {\n\t\tthrow new Error('Could not find expected \"int\" for \"s\"');\n\t}\n\n\tvar sLength = signature[offset++];\n\n\tif (inputLength - offset !== sLength) {\n\t\tthrow new Error('\"s\" specified length of \"' + sLength + '\", expected \"' + (inputLength - offset) + '\"');\n\t}\n\n\tif (maxEncodedParamLength < sLength) {\n\t\tthrow new Error('\"s\" specified length of \"' + sLength + '\", max of \"' + maxEncodedParamLength + '\" is acceptable');\n\t}\n\n\tvar sOffset = offset;\n\toffset += sLength;\n\n\tif (offset !== inputLength) {\n\t\tthrow new Error('Expected to consume entire buffer, but \"' + (inputLength - offset) + '\" bytes remain');\n\t}\n\n\tvar rPadding = paramBytes - rLength,\n\t\tsPadding = paramBytes - sLength;\n\n\tvar dst = Buffer.allocUnsafe(rPadding + rLength + sPadding + sLength);\n\n\tfor (offset = 0; offset < rPadding; ++offset) {\n\t\tdst[offset] = 0;\n\t}\n\tsignature.copy(dst, offset, rOffset + Math.max(-rPadding, 0), rOffset + rLength);\n\n\toffset = paramBytes;\n\n\tfor (var o = offset; offset < o + sPadding; ++offset) {\n\t\tdst[offset] = 0;\n\t}\n\tsignature.copy(dst, offset, sOffset + Math.max(-sPadding, 0), sOffset + sLength);\n\n\tdst = dst.toString('base64');\n\tdst = base64Url(dst);\n\n\treturn dst;\n}\n\nfunction countPadding(buf, start, stop) {\n\tvar padding = 0;\n\twhile (start + padding < stop && buf[start + padding] === 0) {\n\t\t++padding;\n\t}\n\n\tvar needsSign = buf[start + padding] >= MAX_OCTET;\n\tif (needsSign) {\n\t\t--padding;\n\t}\n\n\treturn padding;\n}\n\nfunction joseToDer(signature, alg) {\n\tsignature = signatureAsBuffer(signature);\n\tvar paramBytes = getParamBytesForAlg(alg);\n\n\tvar signatureBytes = signature.length;\n\tif (signatureBytes !== paramBytes * 2) {\n\t\tthrow new TypeError('\"' + alg + '\" signatures must be \"' + paramBytes * 2 + '\" bytes, saw \"' + signatureBytes + '\"');\n\t}\n\n\tvar rPadding = countPadding(signature, 0, paramBytes);\n\tvar sPadding = countPadding(signature, paramBytes, signature.length);\n\tvar rLength = paramBytes - rPadding;\n\tvar sLength = paramBytes - sPadding;\n\n\tvar rsBytes = 1 + 1 + rLength + 1 + 1 + sLength;\n\n\tvar shortLength = rsBytes < MAX_OCTET;\n\n\tvar dst = Buffer.allocUnsafe((shortLength ? 2 : 3) + rsBytes);\n\n\tvar offset = 0;\n\tdst[offset++] = ENCODED_TAG_SEQ;\n\tif (shortLength) {\n\t\t// Bit 8 has value \"0\"\n\t\t// bits 7-1 give the length.\n\t\tdst[offset++] = rsBytes;\n\t} else {\n\t\t// Bit 8 of first octet has value \"1\"\n\t\t// bits 7-1 give the number of additional length octets.\n\t\tdst[offset++] = MAX_OCTET\t| 1;\n\t\t// length, base 256\n\t\tdst[offset++] = rsBytes & 0xff;\n\t}\n\tdst[offset++] = ENCODED_TAG_INT;\n\tdst[offset++] = rLength;\n\tif (rPadding < 0) {\n\t\tdst[offset++] = 0;\n\t\toffset += signature.copy(dst, offset, 0, paramBytes);\n\t} else {\n\t\toffset += signature.copy(dst, offset, rPadding, paramBytes);\n\t}\n\tdst[offset++] = ENCODED_TAG_INT;\n\tdst[offset++] = sLength;\n\tif (sPadding < 0) {\n\t\tdst[offset++] = 0;\n\t\tsignature.copy(dst, offset, paramBytes);\n\t} else {\n\t\tsignature.copy(dst, offset, paramBytes + sPadding);\n\t}\n\n\treturn dst;\n}\n\nmodule.exports = {\n\tderToJose: derToJose,\n\tjoseToDer: joseToDer\n};\n","'use strict';\n\nfunction getParamSize(keySize) {\n\tvar result = ((keySize / 8) | 0) + (keySize % 8 === 0 ? 0 : 1);\n\treturn result;\n}\n\nvar paramBytesForAlg = {\n\tES256: getParamSize(256),\n\tES384: getParamSize(384),\n\tES512: getParamSize(521)\n};\n\nfunction getParamBytesForAlg(alg) {\n\tvar paramBytes = paramBytesForAlg[alg];\n\tif (paramBytes) {\n\t\treturn paramBytes;\n\t}\n\n\tthrow new Error('Unknown algorithm \"' + alg + '\"');\n}\n\nmodule.exports = getParamBytesForAlg;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst base64url_1 = require(\"base64url\");\nconst cryptoClients_1 = require(\"./cryptoClients\");\nconst errors_1 = require(\"./errors\");\nconst sha256_1 = require(\"./cryptoClients/sha256\");\nclass TokenVerifier {\n    constructor(signingAlgorithm, rawPublicKey) {\n        if (!(signingAlgorithm && rawPublicKey)) {\n            throw new errors_1.MissingParametersError('a signing algorithm and public key are required');\n        }\n        if (typeof signingAlgorithm !== 'string') {\n            throw 'signing algorithm parameter must be a string';\n        }\n        signingAlgorithm = signingAlgorithm.toUpperCase();\n        if (!cryptoClients_1.cryptoClients.hasOwnProperty(signingAlgorithm)) {\n            throw 'invalid signing algorithm';\n        }\n        this.tokenType = 'JWT';\n        this.cryptoClient = cryptoClients_1.cryptoClients[signingAlgorithm];\n        this.rawPublicKey = rawPublicKey;\n    }\n    verify(token) {\n        if (typeof token === 'string') {\n            return this.verifyCompact(token, false);\n        }\n        else if (typeof token === 'object') {\n            return this.verifyExpanded(token, false);\n        }\n        else {\n            false;\n        }\n    }\n    verifyAsync(token) {\n        if (typeof token === 'string') {\n            return this.verifyCompact(token, true);\n        }\n        else if (typeof token === 'object') {\n            return this.verifyExpanded(token, true);\n        }\n        else {\n            return Promise.resolve(false);\n        }\n    }\n    verifyCompact(token, async) {\n        // decompose the token into parts\n        const tokenParts = token.split('.');\n        // calculate the signing input hash\n        const signingInput = tokenParts[0] + '.' + tokenParts[1];\n        const performVerify = (signingInputHash) => {\n            // extract the signature as a DER array\n            const derSignatureBuffer = this.cryptoClient.loadSignature(tokenParts[2]);\n            // verify the signed hash\n            return this.cryptoClient.verifyHash(signingInputHash, derSignatureBuffer, this.rawPublicKey);\n        };\n        if (async) {\n            return sha256_1.hashSha256Async(signingInput).then(signingInputHash => performVerify(signingInputHash));\n        }\n        else {\n            const signingInputHash = sha256_1.hashSha256(signingInput);\n            return performVerify(signingInputHash);\n        }\n    }\n    verifyExpanded(token, async) {\n        const signingInput = [\n            token['header'].join('.'),\n            base64url_1.default.encode(token['payload'])\n        ].join('.');\n        let verified = true;\n        const performVerify = (signingInputHash) => {\n            token['signature'].map((signature) => {\n                const derSignatureBuffer = this.cryptoClient.loadSignature(signature);\n                const signatureVerified = this.cryptoClient.verifyHash(signingInputHash, derSignatureBuffer, this.rawPublicKey);\n                if (!signatureVerified) {\n                    verified = false;\n                }\n            });\n            return verified;\n        };\n        if (async) {\n            return sha256_1.hashSha256Async(signingInput).then(signingInputHash => performVerify(signingInputHash));\n        }\n        else {\n            const signingInputHash = sha256_1.hashSha256(signingInput);\n            return performVerify(signingInputHash);\n        }\n    }\n}\nexports.TokenVerifier = TokenVerifier;\n//# sourceMappingURL=verifier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst base64url_1 = require(\"base64url\");\nfunction decodeToken(token) {\n    if (typeof token === 'string') {\n        // decompose the token into parts\n        const tokenParts = token.split('.');\n        const header = JSON.parse(base64url_1.default.decode(tokenParts[0]));\n        const payload = JSON.parse(base64url_1.default.decode(tokenParts[1]));\n        const signature = tokenParts[2];\n        // return the token object\n        return {\n            header: header,\n            payload: payload,\n            signature: signature\n        };\n    }\n    else if (typeof token === 'object') {\n        if (typeof token.payload !== 'string') {\n            throw new Error('Expected token payload to be a base64 or json string');\n        }\n        let payload = token.payload;\n        if (token.payload[0] !== '{') {\n            payload = base64url_1.default.decode(payload);\n        }\n        const allHeaders = [];\n        token.header.map((headerValue) => {\n            const header = JSON.parse(base64url_1.default.decode(headerValue));\n            allHeaders.push(header);\n        });\n        return {\n            header: allHeaders,\n            payload: JSON.parse(payload),\n            signature: token.signature\n        };\n    }\n}\nexports.decodeToken = decodeToken;\n//# sourceMappingURL=decode.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getZoneFileTemplate = getZoneFileTemplate;\n\nfunction getZoneFileTemplate() {\n  return '{$origin}\\n\\\n{$ttl}\\n\\\n\\n\\\n; SOA Record\\n\\\n{name} {ttl}    IN  SOA {mname}{rname}(\\n\\\n{serial} ;serial\\n\\\n{refresh} ;refresh\\n\\\n{retry} ;retry\\n\\\n{expire} ;expire\\n\\\n{minimum} ;minimum ttl\\n\\\n)\\n\\\n\\n\\\n; NS Records\\n\\\n{ns}\\n\\\n\\n\\\n; MX Records\\n\\\n{mx}\\n\\\n\\n\\\n; A Records\\n\\\n{a}\\n\\\n\\n\\\n; AAAA Records\\n\\\n{aaaa}\\n\\\n\\n\\\n; CNAME Records\\n\\\n{cname}\\n\\\n\\n\\\n; PTR Records\\n\\\n{ptr}\\n\\\n\\n\\\n; TXT Records\\n\\\n{txt}\\n\\\n\\n\\\n; SRV Records\\n\\\n{srv}\\n\\\n\\n\\\n; SPF Records\\n\\\n{spf}\\n\\\n\\n\\\n; URI Records\\n\\\n{uri}\\n\\\n';\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ZoneFile = void 0;\n\nvar _makeZoneFile = require(\"./makeZoneFile\");\n\nvar _parseZoneFile = require(\"./parseZoneFile\");\n\nclass ZoneFile {\n  constructor(zoneFile) {\n    if (typeof zoneFile === 'object') {\n      this.jsonZoneFile = JSON.parse(JSON.stringify(zoneFile));\n    } else if (typeof zoneFile === 'string') {\n      this.jsonZoneFile = (0, _parseZoneFile.parseZoneFile)(zoneFile);\n    }\n  }\n\n  toJSON() {\n    return this.jsonZoneFile;\n  }\n\n  toString() {\n    return (0, _makeZoneFile.makeZoneFile)(this.toJSON());\n  }\n\n}\n\nexports.ZoneFile = ZoneFile;","/*\n * This module is intended to be executed both on client side and server side.\n * No error should be thrown. (soft error handling)\n */\n\n(function () {\n\tvar root = {};\n\t// Dependencies --------------------------------------------------------------\n\troot.async = (typeof require === 'function') ? require('async') : window.async;\n\tif (typeof root.async !== 'object') {\n\t\tthrow new Error('Module async is required (https://github.com/caolan/async)');\n\t}\n\tvar async = root.async;\n\n\tfunction _extend(origin, add) {\n\t\tif (!add || typeof add !== 'object') {\n\t\t\treturn origin;\n\t\t}\n\t\tvar keys = Object.keys(add);\n\t\tvar i = keys.length;\n\t\twhile (i--) {\n\t\t\torigin[keys[i]] = add[keys[i]];\n\t\t}\n\t\treturn origin;\n\t}\n\n\tfunction _merge() {\n\t\tvar ret = {};\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\tvar keys = null;\n\t\tvar i = null;\n\n\t\targs.forEach(function (arg) {\n\t\t\tif (arg && arg.constructor === Object) {\n\t\t\t\tkeys = Object.keys(arg);\n\t\t\t\ti = keys.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tret[keys[i]] = arg[keys[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn ret;\n\t}\n\n\t// Customisable class (Base class) -------------------------------------------\n\t// Use with operation \"new\" to extend Validation and Sanitization themselves,\n\t// not their prototype. In other words, constructor shall be call to extend\n\t// those functions, instead of being in their constructor, like this:\n\t//\t\t_extend(Validation, new Customisable);\n\n\tfunction Customisable() {\n\t\tthis.custom = {};\n\n\t\tthis.extend = function (custom) {\n\t\t\treturn _extend(this.custom, custom);\n\t\t};\n\n\t\tthis.reset = function () {\n\t\t\tthis.custom = {};\n\t\t};\n\n\t\tthis.remove = function (fields) {\n\t\t\tif (!_typeIs.array(fields)) {\n\t\t\t\tfields = [fields];\n\t\t\t}\n\t\t\tfields.forEach(function (field) {\n\t\t\t\tdelete this.custom[field];\n\t\t\t}, this);\n\t\t};\n\t}\n\n\t// Inspection class (Base class) ---------------------------------------------\n\t// Use to extend Validation and Sanitization prototypes. Inspection\n\t// constructor shall be called in derived class constructor.\n\n\tfunction Inspection(schema, custom) {\n\t\tvar _stack = ['@'];\n\n\t\tthis._schema = schema;\n\t\tthis._custom = {};\n\t\tif (custom != null) {\n\t\t\tfor (var key in custom) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(custom, key)) {\n\t\t\t\t\tthis._custom['$' + key] = custom[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._getDepth = function () {\n\t\t\treturn _stack.length;\n\t\t};\n\n\t\tthis._dumpStack = function () {\n\t\t\treturn _stack.map(function (i) {return i.replace(/^\\[/g, '\\u001b\\u001c\\u001d\\u001e');})\n\t\t\t.join('.').replace(/\\.\\u001b\\u001c\\u001d\\u001e/g, '[');\n\t\t};\n\n\t\tthis._deeperObject = function (name) {\n\t\t\t_stack.push((/^[a-z$_][a-z0-9$_]*$/i).test(name) ? name : '[\"' + name + '\"]');\n\t\t\treturn this;\n\t\t};\n\n\t\tthis._deeperArray = function (i) {\n\t\t\t_stack.push('[' + i + ']');\n\t\t\treturn this;\n\t\t};\n\n\t\tthis._back = function () {\n\t\t\t_stack.pop();\n\t\t\treturn this;\n\t\t};\n\t}\n\t// Simple types --------------------------------------------------------------\n\t// If the property is not defined or is not in this list:\n\tvar _typeIs = {\n\t\t\"function\": function (element) {\n\t\t\treturn typeof element === 'function';\n\t\t},\n\t\t\"string\": function (element) {\n\t\t\treturn typeof element === 'string';\n\t\t},\n\t\t\"number\": function (element) {\n\t\t\treturn typeof element === 'number' && !isNaN(element);\n\t\t},\n\t\t\"integer\": function (element) {\n\t\t\treturn typeof element === 'number' && element % 1 === 0;\n\t\t},\n\t\t\"NaN\": function (element) {\n\t\t\treturn typeof element === 'number' && isNaN(element);\n\t\t},\n\t\t\"boolean\": function (element) {\n\t\t\treturn typeof element === 'boolean';\n\t\t},\n\t\t\"null\": function (element) {\n\t\t\treturn element === null;\n\t\t},\n\t\t\"date\": function (element) {\n\t\t\treturn element != null && element instanceof Date;\n\t\t},\n\t\t\"object\": function (element) {\n\t\t\treturn element != null && element.constructor === Object;\n\t\t},\n\t\t\"array\": function (element) {\n\t\t\treturn element != null && element.constructor === Array;\n\t\t},\n\t\t\"any\": function (element) {\n\t\t\treturn true;\n\t\t}\n\t};\n\n\tfunction _simpleType(type, candidate) {\n\t\tif (typeof type == 'function') {\n\t\t\treturn candidate instanceof type;\n\t\t}\n\t\ttype = type in _typeIs ? type : 'any';\n\t\treturn _typeIs[type](candidate);\n\t}\n\n\tfunction _realType(candidate) {\n\t\tfor (var i in _typeIs) {\n\t\t\tif (_simpleType(i, candidate)) {\n\t\t\t\tif (i !== 'any') { return i; }\n\t\t\t\treturn 'an instance of ' + candidate.constructor.name;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getIndexes(a, value) {\n\t\tvar indexes = [];\n\t\tvar i = a.indexOf(value);\n\n\t\twhile (i !== -1) {\n\t\t\tindexes.push(i);\n\t\t\ti = a.indexOf(value, i + 1);\n\t\t}\n\t\treturn indexes;\n\t}\n\n\t// Available formats ---------------------------------------------------------\n\tvar _formats = {\n\t\t'void': /^$/,\n\t\t'url': /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)?(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i,\n\t\t'date-time': /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?(Z?|(-|\\+)\\d{2}:\\d{2})$/,\n\t\t'date': /^\\d{4}-\\d{2}-\\d{2}$/,\n\t\t'coolDateTime': /^\\d{4}(-|\\/)\\d{2}(-|\\/)\\d{2}(T| )\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?Z?$/,\n\t\t'time': /^\\d{2}\\:\\d{2}\\:\\d{2}$/,\n\t\t'color': /^#([0-9a-f])+$/i,\n\t\t'email': /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?$/i,\n\t\t'numeric': /^[0-9]+$/,\n\t\t'integer': /^\\-?[0-9]+$/,\n\t\t'decimal': /^\\-?[0-9]*\\.?[0-9]+$/,\n\t\t'alpha': /^[a-z]+$/i,\n\t\t'alphaNumeric': /^[a-z0-9]+$/i,\n\t\t'alphaDash': /^[a-z0-9_-]+$/i,\n\t\t'javascript': /^[a-z_\\$][a-z0-9_\\$]*$/i,\n\t\t'upperString': /^[A-Z ]*$/,\n\t\t'lowerString': /^[a-z ]*$/\n\t};\n\n// Validation ------------------------------------------------------------------\n\tvar _validationAttribut = {\n\t\toptional: function (schema, candidate) {\n\t\t\tvar opt = typeof schema.optional === 'boolean' ? schema.optional : (schema.optional === 'true'); // Default is false\n\n\t\t\tif (opt === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof candidate === 'undefined') {\n\t\t\t\tthis.report('is missing and not optional', null, 'optional');\n\t\t\t}\n\t\t},\n\t\ttype: function (schema, candidate) {\n\t\t\t// return because optional function already handle this case\n\t\t\tif (typeof candidate === 'undefined' || (typeof schema.type !== 'string' && !(schema.type instanceof Array) && typeof schema.type !== 'function')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar types = _typeIs.array(schema.type) ? schema.type : [schema.type];\n\t\t\tvar typeIsValid = types.some(function (type) {\n\t\t\t\treturn _simpleType(type, candidate);\n\t\t\t});\n\t\t\tif (!typeIsValid) {\n\t\t\t\ttypes = types.map(function (t) {return typeof t === 'function' ? 'and instance of ' + t.name : t; });\n\t\t\t\tthis.report('must be ' + types.join(' or ') + ', but is ' + _realType(candidate), null, 'type');\n\t\t\t}\n\t\t},\n\t\tuniqueness: function (schema, candidate) {\n\t\t\tif (typeof schema.uniqueness === 'string') { schema.uniqueness = (schema.uniqueness === 'true'); }\n\t\t\tif (typeof schema.uniqueness !== 'boolean' || schema.uniqueness === false || (!_typeIs.array(candidate) && typeof candidate !== 'string')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar reported = [];\n\t\t\tfor (var i = 0; i < candidate.length; i++) {\n\t\t\t\tif (reported.indexOf(candidate[i]) >= 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvar indexes = getIndexes(candidate, candidate[i]);\n\t\t\t\tif (indexes.length > 1) {\n\t\t\t\t\treported.push(candidate[i]);\n\t\t\t\t\tthis.report('has value [' + candidate[i] + '] more than once at indexes [' + indexes.join(', ') + ']', null, 'uniqueness');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tpattern: function (schema, candidate) {\n\t\t\tvar self = this;\n\t\t\tvar regexs = schema.pattern;\n\t\t\tif (typeof candidate !== 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar matches = false;\n\t\t\tif (!_typeIs.array(regexs)) {\n\t\t\t\tregexs = [regexs];\n\t\t\t}\n\t\t\tregexs.forEach(function (regex) {\n\t\t\t\tif (typeof regex === 'string' && regex in _formats) {\n\t\t\t\t\tregex = _formats[regex];\n\t\t\t\t}\n\t\t\t\tif (regex instanceof RegExp) {\n\t\t\t\t\tif (regex.test(candidate)) {\n\t\t\t\t\t\tmatches = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!matches) {\n\t\t\t\tself.report('must match [' + regexs.join(' or ') + '], but is equal to \"' + candidate + '\"', null, 'pattern');\n\t\t\t}\n\t\t},\n\t\tvalidDate: function (schema, candidate) {\n\t\t\tif (String(schema.validDate) === 'true' && candidate instanceof Date && isNaN(candidate.getTime())) {\n\t\t\t\tthis.report('must be a valid date', null, 'validDate');\n\t\t\t}\n\t\t},\n\t\tminLength: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar minLength = Number(schema.minLength);\n\t\t\tif (isNaN(minLength)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate.length < minLength) {\n\t\t\t\tthis.report('must be longer than ' + minLength + ' elements, but it has ' + candidate.length, null, 'minLength');\n\t\t\t}\n\t\t},\n\t\tmaxLength: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar maxLength = Number(schema.maxLength);\n\t\t\tif (isNaN(maxLength)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate.length > maxLength) {\n\t\t\t\tthis.report('must be shorter than ' + maxLength + ' elements, but it has ' + candidate.length, null, 'maxLength');\n\t\t\t}\n\t\t},\n\t\texactLength: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'string' && !_typeIs.array(candidate)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar exactLength = Number(schema.exactLength);\n\t\t\tif (isNaN(exactLength)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate.length !== exactLength) {\n\t\t\t\tthis.report('must have exactly ' + exactLength + ' elements, but it have ' + candidate.length, null, 'exactLength');\n\t\t\t}\n\t\t},\n\t\tlt: function (schema, candidate) {\n\t\t\tvar limit = Number(schema.lt);\n\t\t\tif (typeof candidate !== 'number' || isNaN(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate >= limit) {\n\t\t\t\tthis.report('must be less than ' + limit + ', but is equal to \"' + candidate + '\"', null, 'lt');\n\t\t\t}\n\t\t},\n\t\tlte: function (schema, candidate) {\n\t\t\tvar limit = Number(schema.lte);\n\t\t\tif (typeof candidate !== 'number' || isNaN(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate > limit) {\n\t\t\t\tthis.report('must be less than or equal to ' + limit + ', but is equal to \"' + candidate + '\"', null, 'lte');\n\t\t\t}\n\t\t},\n\t\tgt: function (schema, candidate) {\n\t\t\tvar limit = Number(schema.gt);\n\t\t\tif (typeof candidate !== 'number' || isNaN(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate <= limit) {\n\t\t\t\tthis.report('must be greater than ' + limit + ', but is equal to \"' + candidate + '\"', null, 'gt');\n\t\t\t}\n\t\t},\n\t\tgte: function (schema, candidate) {\n\t\t\tvar limit = Number(schema.gte);\n\t\t\tif (typeof candidate !== 'number' || isNaN(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (candidate < limit) {\n\t\t\t\tthis.report('must be greater than or equal to ' + limit + ', but is equal to \"' + candidate + '\"', null, 'gte');\n\t\t\t}\n\t\t},\n\t\teq: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'number' && typeof candidate !== 'string' && typeof candidate !== 'boolean') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar limit = schema.eq;\n\t\t\tif (typeof limit !== 'number' && typeof limit !== 'string' && typeof limit !== 'boolean' && !_typeIs.array(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_typeIs.array(limit)) {\n\t\t\t\tfor (var i = 0; i < limit.length; i++) {\n\t\t\t\t\tif (candidate === limit[i]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.report('must be equal to [' + limit.map(function (l) {\n\t\t\t\t\treturn '\"' + l + '\"';\n\t\t\t\t}).join(' or ') + '], but is equal to \"' + candidate + '\"', null, 'eq');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (candidate !== limit) {\n\t\t\t\t\tthis.report('must be equal to \"' + limit + '\", but is equal to \"' + candidate + '\"', null, 'eq');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tne: function (schema, candidate) {\n\t\t\tif (typeof candidate !== 'number' && typeof candidate !== 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar limit = schema.ne;\n\t\t\tif (typeof limit !== 'number' && typeof limit !== 'string' && !_typeIs.array(limit)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_typeIs.array(limit)) {\n\t\t\t\tfor (var i = 0; i < limit.length; i++) {\n\t\t\t\t\tif (candidate === limit[i]) {\n\t\t\t\t\t\tthis.report('must not be equal to \"' + limit[i] + '\"', null, 'ne');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (candidate === limit) {\n\t\t\t\t\tthis.report('must not be equal to \"' + limit + '\"', null, 'ne');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsomeKeys: function (schema, candidat) {\n\t\t\tvar _keys = schema.someKeys;\n\t\t\tif (!_typeIs.object(candidat)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar valid = _keys.some(function (action) {\n\t\t\t\treturn (action in candidat);\n\t\t\t});\n\t\t\tif (!valid) {\n\t\t\t\tthis.report('must have at least key ' + _keys.map(function (i) {\n\t\t\t\t\treturn '\"' + i + '\"';\n\t\t\t\t}).join(' or '), null, 'someKeys');\n\t\t\t}\n\t\t},\n\t\tstrict: function (schema, candidate) {\n\t\t\tif (typeof schema.strict === 'string') { schema.strict = (schema.strict === 'true'); }\n\t\t\tif (schema.strict !== true || !_typeIs.object(candidate) || !_typeIs.object(schema.properties)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tif (typeof schema.properties['*'] === 'undefined') {\n\t\t\t\tvar intruder = Object.keys(candidate).filter(function (key) {\n\t\t\t\t\treturn (typeof schema.properties[key] === 'undefined');\n\t\t\t\t});\n\t\t\t\tif (intruder.length > 0) {\n\t\t\t\t\tvar msg = 'should not contains ' + (intruder.length > 1 ? 'properties' : 'property') +\n\t\t\t\t\t\t' [' + intruder.map(function (i) { return '\"' + i + '\"'; }).join(', ') + ']';\n\t\t\t\t\tself.report(msg, null, 'strict');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\texec: function (schema, candidate, callback) {\n\t\t\tvar self = this;\n\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncExec(schema, candidate, callback);\n\t\t\t}\n\t\t\t(_typeIs.array(schema.exec) ? schema.exec : [schema.exec]).forEach(function (exec) {\n\t\t\t\tif (typeof exec === 'function') {\n\t\t\t\t\texec.call(self, schema, candidate);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tproperties: function (schema, candidate, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncProperties(schema, candidate, callback);\n\t\t\t}\n\t\t\tif (!(schema.properties instanceof Object) || !(candidate instanceof Object)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar properties = schema.properties,\n\t\t\t\t\ti;\n\t\t\tif (properties['*'] != null) {\n\t\t\t\tfor (i in candidate) {\n\t\t\t\t\tif (i in properties) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis._deeperObject(i);\n\t\t\t\t\tthis._validate(properties['*'], candidate[i]);\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (i in properties) {\n\t\t\t\tif (i === '*') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tthis._deeperObject(i);\n\t\t\t\tthis._validate(properties[i], candidate[i]);\n\t\t\t\tthis._back();\n\t\t\t}\n\t\t},\n\t\titems: function (schema, candidate, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncItems(schema, candidate, callback);\n\t\t\t}\n\t\t\tif (!(schema.items instanceof Object) || !(candidate instanceof Object)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar items = schema.items;\n\t\t\tvar i, l;\n\t\t\t// If provided schema is an array\n\t\t\t// then call validate for each case\n\t\t\t// else it is an Object\n\t\t\t// then call validate for each key\n\t\t\tif (_typeIs.array(items) && _typeIs.array(candidate)) {\n\t\t\t\tfor (i = 0, l = items.length; i < l; i++) {\n\t\t\t\t\tthis._deeperArray(i);\n\t\t\t\t\tthis._validate(items[i], candidate[i]);\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var key in candidate) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(candidate, key)) {\n\t\t\t\t\t\tthis._deeperArray(key);\n\t\t\t\t\t\tthis._validate(items, candidate[key]);\n\t\t\t\t\t\tthis._back();\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar _asyncValidationAttribut = {\n\t\tasyncExec: function (schema, candidate, callback) {\n\t\t\tvar self = this;\n\t\t\tasync.eachSeries(_typeIs.array(schema.exec) ? schema.exec : [schema.exec], function (exec, done) {\n\t\t\t\tif (typeof exec === 'function') {\n\t\t\t\t\tif (exec.length > 2) {\n\t\t\t\t\t\treturn exec.call(self, schema, candidate, done);\n\t\t\t\t\t}\n\t\t\t\t\texec.call(self, schema, candidate);\n\t\t\t\t}\n\t\t\t\tasync.nextTick(done);\n\t\t\t}, callback);\n\t\t},\n\t\tasyncProperties: function (schema, candidate, callback) {\n\t\t\tif (!(schema.properties instanceof Object) || !_typeIs.object(candidate)) {\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar properties = schema.properties;\n\t\t\tasync.series([\n\t\t\t\tfunction (next) {\n\t\t\t\t\tif (properties['*'] == null) {\n\t\t\t\t\t\treturn next();\n\t\t\t\t\t}\n\t\t\t\t\tasync.eachSeries(Object.keys(candidate), function (i, done) {\n\t\t\t\t\t\tif (i in properties) {\n\t\t\t\t\t\t\treturn async.nextTick(done);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._deeperObject(i);\n\t\t\t\t\t\tself._asyncValidate(properties['*'], candidate[i], function (err) {\n\t\t\t\t\t\t\tself._back();\n\t\t\t\t\t\t\tdone(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, next);\n\t\t\t\t},\n\t\t\t\tfunction (next) {\n\t\t\t\t\tasync.eachSeries(Object.keys(properties), function (i, done) {\n\t\t\t\t\t\tif (i === '*') {\n\t\t\t\t\t\t\treturn async.nextTick(done);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._deeperObject(i);\n\t\t\t\t\t\tself._asyncValidate(properties[i], candidate[i], function (err) {\n\t\t\t\t\t\t\tself._back();\n\t\t\t\t\t\t\tdone(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, next);\n\t\t\t\t}\n\t\t\t], callback);\n\t\t},\n\t\tasyncItems: function (schema, candidate, callback) {\n\t\t\tif (!(schema.items instanceof Object) || !(candidate instanceof Object)) {\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar items = schema.items;\n\t\t\tvar i, l;\n\n\t\t\tif (_typeIs.array(items) && _typeIs.array(candidate)) {\n\t\t\t\tasync.timesSeries(items.length, function (i, done) {\n\t\t\t\t\tself._deeperArray(i);\n\t\t\t\t\tself._asyncValidate(items[i], candidate[i], function (err, res) {\n\t\t\t\t\t\tself._back();\n\t\t\t\t\t\tdone(err, res);\n\t\t\t\t\t});\n\t\t\t\t\tself._back();\n\t\t\t\t}, callback);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tasync.eachSeries(Object.keys(candidate), function (key, done) {\n\t\t\t\t\tself._deeperArray(key);\n\t\t\t\t\tself._asyncValidate(items, candidate[key], function (err, res) {\n\t\t\t\t\t\tself._back();\n\t\t\t\t\t\tdone(err, res);\n\t\t\t\t\t});\n\t\t\t\t}, callback);\n\t\t\t}\n\t\t}\n\t};\n\n\t// Validation Class ----------------------------------------------------------\n\t// inherits from Inspection class (actually we just call Inspection\n\t// constructor with the new context, because its prototype is empty\n\tfunction Validation(schema, custom) {\n\t\tInspection.prototype.constructor.call(this, schema, _merge(Validation.custom, custom));\n\t\tvar _error = [];\n\n\t\tthis._basicFields = Object.keys(_validationAttribut);\n\t\tthis._customFields = Object.keys(this._custom);\n\t\tthis.origin = null;\n\n\t\tthis.report = function (message, code, reason) {\n\t\t\tvar newErr = {\n\t\t\t\tcode: code || this.userCode || null,\n\t\t\t\treason: reason || 'unknown',\n\t\t\t\tmessage: this.userError || message || 'is invalid',\n\t\t\t\tproperty: this.userAlias ? (this.userAlias + ' (' + this._dumpStack() + ')') : this._dumpStack()\n\t\t\t};\n\t\t\t_error.push(newErr);\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.result = function () {\n\t\t\treturn {\n\t\t\t\terror: _error,\n\t\t\t\tvalid: _error.length === 0,\n\t\t\t\tformat: function () {\n\t\t\t\t\tif (this.valid === true) {\n\t\t\t\t\t\treturn 'Candidate is valid';\n\t\t\t\t\t}\n\t\t\t\t\treturn this.error.map(function (i) {\n\t\t\t\t\t\treturn 'Property ' + i.property + ': ' + i.message;\n\t\t\t\t\t}).join('\\n');\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n\n\t_extend(Validation.prototype, _validationAttribut);\n\t_extend(Validation.prototype, _asyncValidationAttribut);\n\t_extend(Validation, new Customisable());\n\n\tValidation.prototype.validate = function (candidate, callback) {\n\t\tthis.origin = candidate;\n\t\tif (typeof callback === 'function') {\n\t\t\tvar self = this;\n\t\t\treturn async.nextTick(function () {\n\t\t\t\tself._asyncValidate(self._schema, candidate, function (err) {\n\t\t\t\t\tself.origin = null;\n\t\t\t\t\tcallback(err, self.result());\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this._validate(this._schema, candidate).result();\n\t};\n\n\tValidation.prototype._validate = function (schema, candidate, callback) {\n\t\tthis.userCode = schema.code || null;\n\t\tthis.userError = schema.error || null;\n\t\tthis.userAlias = schema.alias || null;\n\t\tthis._basicFields.forEach(function (i) {\n\t\t\tif ((i in schema || i === 'optional') && typeof this[i] === 'function') {\n\t\t\t\tthis[i](schema, candidate);\n\t\t\t}\n\t\t}, this);\n\t\tthis._customFields.forEach(function (i) {\n\t\t\tif (i in schema && typeof this._custom[i] === 'function') {\n\t\t\t\tthis._custom[i].call(this, schema, candidate);\n\t\t\t}\n\t\t}, this);\n\t\treturn this;\n\t};\n\n\tValidation.prototype._asyncValidate = function (schema, candidate, callback) {\n\t\tvar self = this;\n\t\tthis.userCode = schema.code || null;\n\t\tthis.userError = schema.error || null;\n\t\tthis.userAlias = schema.alias || null;\n\n\t\tasync.series([\n\t\t\tfunction (next) {\n\t\t\t\tasync.eachSeries(Object.keys(_validationAttribut), function (i, done) {\n\t\t\t\t\tasync.nextTick(function () {\n\t\t\t\t\t\tif ((i in schema || i === 'optional') && typeof self[i] === 'function') {\n\t\t\t\t\t\t\tif (self[i].length > 2) {\n\t\t\t\t\t\t\t\treturn self[i](schema, candidate, done);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself[i](schema, candidate);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t}, next);\n\t\t\t},\n\t\t\tfunction (next) {\n\t\t\t\tasync.eachSeries(Object.keys(self._custom), function (i, done) {\n\t\t\t\t\tasync.nextTick(function () {\n\t\t\t\t\t\tif (i in schema && typeof self._custom[i] === 'function') {\n\t\t\t\t\t\t\tif (self._custom[i].length > 2) {\n\t\t\t\t\t\t\t\treturn self._custom[i].call(self, schema, candidate, done);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself._custom[i].call(self, schema, candidate);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdone();\n\t\t\t\t\t});\n\t\t\t\t}, next);\n\t\t\t}\n\t\t], callback);\n\t};\n\n// Sanitization ----------------------------------------------------------------\n\t// functions called by _sanitization.type method.\n\tvar _forceType = {\n\t\tnumber: function (post, schema) {\n\t\t\tvar n;\n\t\t\tif (typeof post === 'number') {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\telse if (post === '') {\n\t\t\t\tif (typeof schema.def !== 'undefined')\n\t\t\t\t\treturn schema.def;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (typeof post === 'string') {\n\t\t\t\tn = parseFloat(post.replace(/,/g, '.').replace(/ /g, ''));\n\t\t\t\tif (typeof n === 'number') {\n\t\t\t\t\treturn n;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (post instanceof Date) {\n\t\t\t\treturn +post;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tinteger: function (post, schema) {\n\t\t\tvar n;\n\t\t\tif (typeof post === 'number' && post % 1 === 0) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\telse if (post === '') {\n\t\t\t\tif (typeof schema.def !== 'undefined')\n\t\t\t\t\treturn schema.def;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (typeof post === 'string') {\n\t\t\t\tn = parseInt(post.replace(/ /g, ''), 10);\n\t\t\t\tif (typeof n === 'number') {\n\t\t\t\t\treturn n;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof post === 'number') {\n\t\t\t\treturn parseInt(post, 10);\n\t\t\t}\n\t\t\telse if (typeof post === 'boolean') {\n\t\t\t\tif (post) { return 1; }\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\telse if (post instanceof Date) {\n\t\t\t\treturn +post;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tstring: function (post, schema) {\n\t\t\tif (typeof post === 'boolean' || typeof post === 'number' || post instanceof Date) {\n\t\t\t\treturn post.toString();\n\t\t\t}\n\t\t\telse if (_typeIs.array(post)) {\n\t\t\t\t// If user authorize array and strings...\n\t\t\t\tif (schema.items || schema.properties)\n\t\t\t\t\treturn post;\n\t\t\t\treturn post.join(String(schema.joinWith || ','));\n\t\t\t}\n\t\t\telse if (post instanceof Object) {\n\t\t\t\t// If user authorize objects ans strings...\n\t\t\t\tif (schema.items || schema.properties)\n\t\t\t\t\treturn post;\n\t\t\t\treturn JSON.stringify(post);\n\t\t\t}\n\t\t\telse if (typeof post === 'string' && post.length) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tdate: function (post, schema) {\n\t\t\tif (post instanceof Date) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar d = new Date(post);\n\t\t\t\tif (!isNaN(d.getTime())) { // if valid date\n\t\t\t\t\treturn d;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tboolean: function (post, schema) {\n\t\t\tif (typeof post === 'undefined') return null;\n\t\t\tif (typeof post === 'string' && post.toLowerCase() === 'false') return false;\n\t\t\treturn !!post;\n\t\t},\n\t\tobject: function (post, schema) {\n\t\t\tif (typeof post !== 'string' || _typeIs.object(post)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(post);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\t\tarray: function (post, schema) {\n\t\t\tif (_typeIs.array(post))\n\t\t\t\treturn post;\n\t\t\tif (typeof post === 'undefined')\n\t\t\t\treturn null;\n\t\t\tif (typeof post === 'string') {\n\t\t\t\tif (post.substring(0,1) === '[' && post.slice(-1) === ']') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn JSON.parse(post);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn post.split(String(schema.splitWith || ','));\n\n\t\t\t}\n\t\t\tif (!_typeIs.array(post))\n\t\t\t\treturn [ post ];\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tvar _applyRules = {\n\t\tupper: function (post) {\n\t\t\treturn post.toUpperCase();\n\t\t},\n\t\tlower: function (post) {\n\t\t\treturn post.toLowerCase();\n\t\t},\n\t\ttitle: function (post) {\n\t\t\t// Fix by seb (replace \\w\\S* by \\S* => exemple : coucou a va)\n\t\t\treturn post.replace(/\\S*/g, function (txt) {\n\t\t\t\treturn txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n\t\t\t});\n\t\t},\n\t\tcapitalize: function (post) {\n\t\t\treturn post.charAt(0).toUpperCase() + post.substr(1).toLowerCase();\n\t\t},\n\t\tucfirst: function (post) {\n\t\t\treturn post.charAt(0).toUpperCase() + post.substr(1);\n\t\t},\n\t\ttrim: function (post) {\n\t\t\treturn post.trim();\n\t\t}\n\t};\n\n\t// Every function return the future value of each property. Therefore you\n\t// have to return post even if you do not change its value\n\tvar _sanitizationAttribut = {\n\t\tstrict: function (schema, post) {\n\t\t\tif (typeof schema.strict === 'string') { schema.strict = (schema.strict === 'true'); }\n\t\t\tif (schema.strict !== true)\n\t\t\t\treturn post;\n\t\t\tif (!_typeIs.object(schema.properties))\n\t\t\t\treturn post;\n\t\t\tif (!_typeIs.object(post))\n\t\t\t\treturn post;\n\t\t\tvar that = this;\n\t\t\tObject.keys(post).forEach(function (key) {\n\t\t\t\tif (!(key in schema.properties)) {\n\t\t\t\t\tdelete post[key];\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn post;\n\t\t},\n\t\toptional: function (schema, post) {\n\t\t\tvar opt = typeof schema.optional === 'boolean' ? schema.optional : (schema.optional !== 'false'); // Default: true\n\t\t\tif (opt === true) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tif (typeof post !== 'undefined') {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tthis.report();\n\t\t\tif (schema.def === Date) {\n\t\t\t\treturn new Date();\n\t\t\t}\n\t\t\treturn schema.def;\n\t\t},\n\t\ttype: function (schema, post) {\n\t\t\t// if (_typeIs['object'](post) || _typeIs.array(post)) {\n\t\t\t// \treturn post;\n\t\t\t// }\n\t\t\tif (typeof schema.type !== 'string' || typeof _forceType[schema.type] !== 'function') {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar n;\n\t\t\tvar opt = typeof schema.optional === 'boolean' ? schema.optional : true;\n\t\t\tif (typeof _forceType[schema.type] === 'function') {\n\t\t\t\tn = _forceType[schema.type](post, schema);\n\t\t\t\tif ((n === null && !opt) || (!n && isNaN(n)) || (n === null && schema.type === 'string')) {\n\t\t\t\t\tn = schema.def;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!opt) {\n\t\t\t\tn = schema.def;\n\t\t\t}\n\t\t\tif ((n != null || (typeof schema.def !== 'undefined' && schema.def === n)) && n !== post) {\n\t\t\t\tthis.report();\n\t\t\t\treturn n;\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\trules: function (schema, post) {\n\t\t\tvar rules = schema.rules;\n\t\t\tif (typeof post !== 'string' || (typeof rules !== 'string' && !_typeIs.array(rules))) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar modified = false;\n\t\t\t(_typeIs.array(rules) ? rules : [rules]).forEach(function (rule) {\n\t\t\t\tif (typeof _applyRules[rule] === 'function') {\n\t\t\t\t\tpost = _applyRules[rule](post);\n\t\t\t\t\tmodified = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (modified) {\n\t\t\t\tthis.report();\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tmin: function (schema, post) {\n\t\t\tvar postTest = Number(post);\n\t\t\tif (isNaN(postTest)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar min = Number(schema.min);\n\t\t\tif (isNaN(min)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tif (postTest < min) {\n\t\t\t\tthis.report();\n\t\t\t\treturn min;\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tmax: function (schema, post) {\n\t\t\tvar postTest = Number(post);\n\t\t\tif (isNaN(postTest)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar max = Number(schema.max);\n\t\t\tif (isNaN(max)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tif (postTest > max) {\n\t\t\t\tthis.report();\n\t\t\t\treturn max;\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tminLength: function (schema, post) {\n\t\t\tvar limit = Number(schema.minLength);\n\t\t\tif (typeof post !== 'string' || isNaN(limit) || limit < 0) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar str = '';\n\t\t\tvar gap = limit - post.length;\n\t\t\tif (gap > 0) {\n\t\t\t\tfor (var i = 0; i < gap; i++) {\n\t\t\t\t\tstr += '-';\n\t\t\t\t}\n\t\t\t\tthis.report();\n\t\t\t\treturn post + str;\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tmaxLength: function (schema, post) {\n\t\t\tvar limit = Number(schema.maxLength);\n\t\t\tif (typeof post !== 'string' || isNaN(limit) || limit < 0) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tif (post.length > limit) {\n\t\t\t\tthis.report();\n\t\t\t\treturn post.slice(0, limit);\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\tproperties: function (schema, post, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncProperties(schema, post, callback);\n\t\t\t}\n\t\t\tif (!post || typeof post !== 'object') {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar properties = schema.properties;\n\t\t\tvar tmp;\n\t\t\tvar i;\n\t\t\tif (typeof properties['*'] !== 'undefined') {\n\t\t\t\tfor (i in post) {\n\t\t\t\t\tif (i in properties) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tthis._deeperObject(i);\n\t\t\t\t\ttmp = this._sanitize(schema.properties['*'], post[i]);\n\t\t\t\t\tif (typeof tmp !== 'undefined') {\n\t\t\t\t\t\tpost[i]= tmp;\n\t\t\t\t\t}\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (i in schema.properties) {\n\t\t\t\tif (i !== '*') {\n\t\t\t\t\tthis._deeperObject(i);\n\t\t\t\t\ttmp = this._sanitize(schema.properties[i], post[i]);\n\t\t\t\t\tif (typeof tmp !== 'undefined') {\n\t\t\t\t\t\tpost[i]= tmp;\n\t\t\t\t\t}\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\titems: function (schema, post, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncItems(schema, post, callback);\n\t\t\t}\n\t\t\tif (!(schema.items instanceof Object) || !(post instanceof Object)) {\n\t\t\t\treturn post;\n\t\t\t}\n\t\t\tvar i;\n\t\t\tif (_typeIs.array(schema.items) && _typeIs.array(post)) {\n\t\t\t\tvar minLength = schema.items.length < post.length ? schema.items.length : post.length;\n\t\t\t\tfor (i = 0; i < minLength; i++) {\n\t\t\t\t\tthis._deeperArray(i);\n\t\t\t\t\tpost[i] = this._sanitize(schema.items[i], post[i]);\n\t\t\t\t\tthis._back();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (i in post) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(post, i)) {\n\t\t\t\t\t\tthis._deeperArray(i);\n\t\t\t\t\t\tpost[i] = this._sanitize(schema.items, post[i]);\n\t\t\t\t\t\tthis._back();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn post;\n\t\t},\n\t\texec: function (schema, post, callback) {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\treturn this.asyncExec(schema, post, callback);\n\t\t\t}\n\t\t\tvar execs = _typeIs.array(schema.exec) ? schema.exec : [schema.exec];\n\n\t\t\texecs.forEach(function (exec) {\n\t\t\t\tif (typeof exec === 'function') {\n\t\t\t\t\tpost = exec.call(this, schema, post);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\treturn post;\n\t\t}\n\t};\n\n\tvar _asyncSanitizationAttribut = {\n\t\tasyncExec: function (schema, post, callback) {\n\t\t\tvar self = this;\n\t\t\tvar execs = _typeIs.array(schema.exec) ? schema.exec : [schema.exec];\n\n\t\t\tasync.eachSeries(execs, function (exec, done) {\n\t\t\t\tif (typeof exec === 'function') {\n\t\t\t\t\tif (exec.length > 2) {\n\t\t\t\t\t\treturn exec.call(self, schema, post, function (err, res) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treturn done(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpost = res;\n\t\t\t\t\t\t\tdone();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tpost = exec.call(self, schema, post);\n\t\t\t\t}\n\t\t\t\tdone();\n\t\t\t}, function (err) {\n\t\t\t\tcallback(err, post);\n\t\t\t});\n\t\t},\n\t\tasyncProperties: function (schema, post, callback) {\n\t\t\tif (!post || typeof post !== 'object') {\n\t\t\t\treturn callback(null, post);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar properties = schema.properties;\n\n\t\t\tasync.series([\n\t\t\t\tfunction (next) {\n\t\t\t\t\tif (properties['*'] == null) {\n\t\t\t\t\t\treturn next();\n\t\t\t\t\t}\n\t\t\t\t\tvar globing = properties['*'];\n\t\t\t\t\tasync.eachSeries(Object.keys(post), function (i, next) {\n\t\t\t\t\t\tif (i in properties) {\n\t\t\t\t\t\t\treturn next();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._deeperObject(i);\n\t\t\t\t\t\tself._asyncSanitize(globing, post[i], function (err, res) {\n\t\t\t\t\t\t\tif (err) { /* Error can safely be ignored here */ }\n\t\t\t\t\t\t\tif (typeof res !== 'undefined') {\n\t\t\t\t\t\t\t\tpost[i] = res;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself._back();\n\t\t\t\t\t\t\tnext();\n\t\t\t\t\t\t});\n\t\t\t\t\t}, next);\n\t\t\t\t},\n\t\t\t\tfunction (next) {\n\t\t\t\t\tasync.eachSeries(Object.keys(properties), function (i, next) {\n\t\t\t\t\t\tif (i === '*') {\n\t\t\t\t\t\t\treturn next();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself._deeperObject(i);\n\t\t\t\t\t\tself._asyncSanitize(properties[i], post[i], function (err, res) {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treturn next(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (typeof res !== 'undefined') {\n\t\t\t\t\t\t\t\tpost[i] = res;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself._back();\n\t\t\t\t\t\t\tnext();\n\t\t\t\t\t\t});\n\t\t\t\t\t}, next);\n\t\t\t\t}\n\t\t\t], function (err) {\n\t\t\t\treturn callback(err, post);\n\t\t\t});\n\t\t},\n\t\tasyncItems: function (schema, post, callback) {\n\t\t\tif (!(schema.items instanceof Object) || !(post instanceof Object)) {\n\t\t\t\treturn callback(null, post);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tvar items = schema.items;\n\t\t\tif (_typeIs.array(items) && _typeIs.array(post)) {\n\t\t\t\tvar minLength = items.length < post.length ? items.length : post.length;\n\t\t\t\tasync.timesSeries(minLength, function (i, next) {\n\t\t\t\t\tself._deeperArray(i);\n\t\t\t\t\tself._asyncSanitize(items[i], post[i], function (err, res) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treturn next(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpost[i] = res;\n\t\t\t\t\t\tself._back();\n\t\t\t\t\t\tnext();\n\t\t\t\t\t});\n\t\t\t\t}, function (err) {\n\t\t\t\t\tcallback(err, post);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tasync.eachSeries(Object.keys(post), function (key, next) {\n\t\t\t\t\tself._deeperArray(key);\n\t\t\t\t\tself._asyncSanitize(items, post[key], function (err, res) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treturn next();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpost[key] = res;\n\t\t\t\t\t\tself._back();\n\t\t\t\t\t\tnext();\n\t\t\t\t\t});\n\t\t\t\t}, function (err) {\n\t\t\t\t\tcallback(err, post);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn post;\n\t\t}\n\t};\n\n\t// Sanitization Class --------------------------------------------------------\n\t// inherits from Inspection class (actually we just call Inspection\n\t// constructor with the new context, because its prototype is empty\n\tfunction Sanitization(schema, custom) {\n\t\tInspection.prototype.constructor.call(this, schema, _merge(Sanitization.custom, custom));\n\t\tvar _reporting = [];\n\n\t\tthis._basicFields = Object.keys(_sanitizationAttribut);\n\t\tthis._customFields = Object.keys(this._custom);\n\t\tthis.origin = null;\n\n\t\tthis.report = function (message) {\n\t\t\tvar newNot = {\n\t\t\t\t\tmessage: message || 'was sanitized',\n\t\t\t\t\tproperty: this.userAlias ? (this.userAlias + ' (' + this._dumpStack() + ')') : this._dumpStack()\n\t\t\t};\n\t\t\tif (!_reporting.some(function (e) { return e.property === newNot.property; })) {\n\t\t\t\t_reporting.push(newNot);\n\t\t\t}\n\t\t};\n\n\t\tthis.result = function (data) {\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\treporting: _reporting,\n\t\t\t\tformat: function () {\n\t\t\t\t\treturn this.reporting.map(function (i) {\n\t\t\t\t\t\treturn 'Property ' + i.property + ' ' + i.message;\n\t\t\t\t\t}).join('\\n');\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n\n\t_extend(Sanitization.prototype, _sanitizationAttribut);\n\t_extend(Sanitization.prototype, _asyncSanitizationAttribut);\n\t_extend(Sanitization, new Customisable());\n\n\n\tSanitization.prototype.sanitize = function (post, callback) {\n\t\tthis.origin = post;\n\t\tif (typeof callback === 'function') {\n\t\t\tvar self = this;\n\t\t\treturn this._asyncSanitize(this._schema, post, function (err, data) {\n\t\t\t\tself.origin = null;\n\t\t\t\tcallback(err, self.result(data));\n\t\t\t});\n\t\t}\n\t\tvar data = this._sanitize(this._schema, post);\n\t\tthis.origin = null;\n\t\treturn this.result(data);\n\t};\n\n\tSanitization.prototype._sanitize = function (schema, post) {\n\t\tthis.userAlias = schema.alias || null;\n\t\tthis._basicFields.forEach(function (i) {\n\t\t\tif ((i in schema || i === 'optional') && typeof this[i] === 'function') {\n\t\t\t\tpost = this[i](schema, post);\n\t\t\t}\n\t\t}, this);\n\t\tthis._customFields.forEach(function (i) {\n\t\t\tif (i in schema && typeof this._custom[i] === 'function') {\n\t\t\t\tpost = this._custom[i].call(this, schema, post);\n\t\t\t}\n\t\t}, this);\n\t\treturn post;\n\t};\n\n\tSanitization.prototype._asyncSanitize = function (schema, post, callback) {\n\t\tvar self = this;\n\t\tthis.userAlias = schema.alias || null;\n\n\t\tasync.waterfall([\n\t\t\tfunction (next) {\n\t\t\t\tasync.reduce(self._basicFields, post, function (value, i, next) {\n\t\t\t\t\tasync.nextTick(function () {\n\t\t\t\t\t\tif ((i in schema || i === 'optional') && typeof self[i] === 'function') {\n\t\t\t\t\t\t\tif (self[i].length > 2) {\n\t\t\t\t\t\t\t\treturn self[i](schema, value, next);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue = self[i](schema, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnext(null, value);\n\t\t\t\t\t});\n\t\t\t\t}, next);\n\t\t\t},\n\t\t\tfunction (inter, next) {\n\t\t\t\tasync.reduce(self._customFields, inter, function (value, i, next) {\n\t\t\t\t\tasync.nextTick(function () {\n\t\t\t\t\t\tif (i in schema && typeof self._custom[i] === 'function') {\n\t\t\t\t\t\t\tif (self._custom[i].length > 2) {\n\t\t\t\t\t\t\t\treturn self._custom[i].call(self, schema, value, next);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvalue = self._custom[i].call(self, schema, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnext(null, value);\n\t\t\t\t\t});\n\t\t\t\t}, next);\n\t\t\t}\n\t\t], callback);\n\t};\n\n\t// ---------------------------------------------------------------------------\n\n\tvar INT_MIN = -2147483648;\n\tvar INT_MAX = 2147483647;\n\n\tvar _rand = {\n\t\tint: function (min, max) {\n\t\t\treturn min + (0 | Math.random() * (max - min + 1));\n\t\t},\n\t\tfloat: function (min, max) {\n\t\t\treturn (Math.random() * (max - min) + min);\n\t\t},\n\t\tbool: function () {\n\t\t\treturn (Math.random() > 0.5);\n\t\t},\n\t\tchar: function (min, max) {\n\t\t\treturn String.fromCharCode(this.int(min, max));\n\t\t},\n\t\tfromList: function (list) {\n\t\t\treturn list[this.int(0, list.length - 1)];\n\t\t}\n\t};\n\n\tvar _formatSample = {\n\t\t'date-time': function () {\n\t\t\treturn new Date().toISOString();\n\t\t},\n\t\t'date': function () {\n\t\t\treturn new Date().toISOString().replace(/T.*$/, '');\n\t\t},\n\t\t'time': function () {\n\t\t\treturn new Date().toLocaleTimeString({}, { hour12: false });\n\t\t},\n\t\t'color': function (min, max) {\n\t\t\tvar s = '#';\n\t\t\tif (min < 1) {\n\t\t\t\tmin = 1;\n\t\t\t}\n\t\t\tfor (var i = 0, l = _rand.int(min, max); i < l; i++) {\n\t\t\t\ts += _rand.fromList('0123456789abcdefABCDEF');\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\t'numeric': function () {\n\t\t\treturn '' + _rand.int(0, INT_MAX);\n\t\t},\n\t\t'integer': function () {\n\t\t\tif (_rand.bool() === true) {\n\t\t\t\treturn '-' + this.numeric();\n\t\t\t}\n\t\t\treturn this.numeric();\n\t\t},\n\t\t'decimal': function () {\n\t\t\treturn this.integer() + '.' + this.numeric();\n\t\t},\n\t\t'alpha': function (min, max) {\n\t\t\tvar s = '';\n\t\t\tif (min < 1) {\n\t\t\t\tmin = 1;\n\t\t\t}\n\t\t\tfor (var i = 0, l = _rand.int(min, max); i < l; i++) {\n\t\t\t\ts += _rand.fromList('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\t'alphaNumeric': function (min, max) {\n\t\t\tvar s = '';\n\t\t\tif (min < 1) {\n\t\t\t\tmin = 1;\n\t\t\t}\n\t\t\tfor (var i = 0, l = _rand.int(min, max); i < l; i++) {\n\t\t\t\ts += _rand.fromList('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789');\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\t'alphaDash': function (min, max) {\n\t\t\tvar s = '';\n\t\t\tif (min < 1) {\n\t\t\t\tmin = 1;\n\t\t\t}\n\t\t\tfor (var i = 0, l = _rand.int(min, max); i < l; i++) {\n\t\t\t\ts += _rand.fromList('_-abcdefghijklmnopqrstuvwxyz_-ABCDEFGHIJKLMNOPQRSTUVWXYZ_-0123456789_-');\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\t'javascript': function (min, max) {\n\t\t\tvar s = _rand.fromList('_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$');\n\t\t\tfor (var i = 0, l = _rand.int(min, max - 1); i < l; i++) {\n\t\t\t\ts += _rand.fromList('_$abcdefghijklmnopqrstuvwxyz_$ABCDEFGHIJKLMNOPQRSTUVWXYZ_$0123456789_$');\n\t\t\t}\n\t\t\treturn s;\n\t\t}\n\t};\n\n\tfunction _getLimits(schema) {\n\t\tvar min = INT_MIN;\n\t\tvar max = INT_MAX;\n\n\t\tif (schema.gte != null) {\n\t\t\tmin = schema.gte;\n\t\t}\n\t\telse if (schema.gt != null) {\n\t\t\tmin = schema.gt + 1;\n\t\t}\n\t\tif (schema.lte != null) {\n\t\t\tmax = schema.lte;\n\t\t}\n\t\telse if (schema.lt != null) {\n\t\t\tmax = schema.lt - 1;\n\t\t}\n\t\treturn { min: min, max: max };\n\t}\n\n\tvar _typeGenerator = {\n\t\tstring: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\tvar s = '';\n\t\t\tvar minLength = schema.minLength != null ? schema.minLength : 0;\n\t\t\tvar maxLength = schema.maxLength != null ? schema.maxLength : 32;\n\t\t\tif (typeof schema.pattern === 'string' && typeof _formatSample[schema.pattern] === 'function') {\n\t\t\t\treturn _formatSample[schema.pattern](minLength, maxLength);\n\t\t\t}\n\n\t\t\tvar l = schema.exactLength != null ? schema.exactLength : _rand.int(minLength, maxLength);\n\t\t\tfor (var i = 0; i < l; i++) {\n\t\t\t\ts += _rand.char(32, 126);\n\t\t\t}\n\t\t\treturn s;\n\t\t},\n\t\tnumber: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\tvar limit = _getLimits(schema);\n\t\t\tvar n = _rand.float(limit.min, limit.max);\n\t\t\tif (schema.ne != null) {\n\t\t\t\tvar ne = _typeIs.array(schema.ne) ? schema.ne : [schema.ne];\n\t\t\t\twhile (ne.indexOf(n) !== -1) {\n\t\t\t\t\tn = _rand.float(limit.min, limit.max);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn n;\n\t\t},\n\t\tinteger: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\tvar limit = _getLimits(schema);\n\t\t\tvar n = _rand.int(limit.min, limit.max);\n\t\t\tif (schema.ne != null) {\n\t\t\t\tvar ne = _typeIs.array(schema.ne) ? schema.ne : [schema.ne];\n\t\t\t\twhile (ne.indexOf(n) !== -1) {\n\t\t\t\t\tn = _rand.int(limit.min, limit.max);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn n;\n\t\t},\n\t\tboolean: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\treturn _rand.bool();\n\t\t},\n\t\t\"null\": function (schema) {\n\t\t\treturn null;\n\t\t},\n\t\tdate: function (schema) {\n\t\t\tif (schema.eq != null) {\n\t\t\t\treturn schema.eq;\n\t\t\t}\n\t\t\treturn new Date();\n\t\t},\n\t\tobject: function (schema) {\n\t\t\tvar o = {};\n\t\t\tvar prop = schema.properties || {};\n\n\t\t\tfor (var key in prop) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(prop, key)) {\n\t\t\t\t\tif (prop[key].optional === true && _rand.bool() === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (key !== '*') {\n\t\t\t\t\t\to[key] = this.generate(prop[key]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar rk = '__random_key_';\n\t\t\t\t\t\tvar randomKey = rk + 0;\n\t\t\t\t\t\tvar n = _rand.int(1, 9);\n\t\t\t\t\t\tfor (var i = 1; i <= n; i++) {\n\t\t\t\t\t\t\tif (!(randomKey in prop)) {\n\t\t\t\t\t\t\t\to[randomKey] = this.generate(prop[key]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trandomKey = rk + i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn o;\n\t\t},\n\t\tarray: function (schema) {\n\t\t\tvar self = this;\n\t\t\tvar items = schema.items || {};\n\t\t\tvar minLength = schema.minLength != null ? schema.minLength : 0;\n\t\t\tvar maxLength = schema.maxLength != null ? schema.maxLength : 16;\n\t\t\tvar type;\n\t\t\tvar candidate;\n\t\t\tvar size;\n\t\t\tvar i;\n\n\t\t\tif (_typeIs.array(items)) {\n\t\t\t\tsize = items.length;\n\t\t\t\tif (schema.exactLength != null) {\n\t\t\t\t\tsize = schema.exactLength;\n\t\t\t\t}\n\t\t\t\telse if (size < minLength) {\n\t\t\t\t\tsize = minLength;\n\t\t\t\t}\n\t\t\t\telse if (size > maxLength) {\n\t\t\t\t\tsize = maxLength;\n\t\t\t\t}\n\t\t\t\tcandidate = new Array(size);\n\t\t\t\ttype = null;\n\t\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\t\ttype = items[i].type || 'any';\n\t\t\t\t\tif (_typeIs.array(type)) {\n\t\t\t\t\t\ttype = type[_rand.int(0, type.length - 1)];\n\t\t\t\t\t}\n\t\t\t\t\tcandidate[i] = self[type](items[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsize = schema.exactLength != null ? schema.exactLength : _rand.int(minLength, maxLength);\n\t\t\t\tcandidate = new Array(size);\n\t\t\t\ttype = items.type || 'any';\n\t\t\t\tif (_typeIs.array(type)) {\n\t\t\t\t\ttype = type[_rand.int(0, type.length - 1)];\n\t\t\t\t}\n\t\t\t\tfor (i = 0; i < size; i++) {\n\t\t\t\t\tcandidate[i] = self[type](items);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn candidate;\n\t\t},\n\t\tany: function (schema) {\n\t\t\tvar fields = Object.keys(_typeGenerator);\n\t\t\tvar i = fields[_rand.int(0, fields.length - 2)];\n\t\t\treturn this[i](schema);\n\t\t}\n\t};\n\n\t// CandidateGenerator Class (Singleton) --------------------------------------\n\tfunction CandidateGenerator() {\n\t\t// Maybe extends Inspection class too ?\n\t}\n\n\t_extend(CandidateGenerator.prototype, _typeGenerator);\n\n\tvar _instance = null;\n\tCandidateGenerator.instance = function () {\n\t\tif (!(_instance instanceof CandidateGenerator)) {\n\t\t\t_instance = new CandidateGenerator();\n\t\t}\n\t\treturn _instance;\n\t};\n\n\tCandidateGenerator.prototype.generate = function (schema) {\n\t\tvar type = schema.type || 'any';\n\t\tif (_typeIs.array(type)) {\n\t\t\ttype = type[_rand.int(0, type.length - 1)];\n\t\t}\n\t\treturn this[type](schema);\n\t};\n\n// Exports ---------------------------------------------------------------------\n\tvar SchemaInspector = {};\n\n\t// if server-side (node.js) else client-side\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = SchemaInspector;\n\t}\n\telse {\n\t\twindow.SchemaInspector = SchemaInspector;\n\t}\n\n\tSchemaInspector.newSanitization = function (schema, custom) {\n\t\treturn new Sanitization(schema, custom);\n\t};\n\n\tSchemaInspector.newValidation = function (schema, custom) {\n\t\treturn new Validation(schema, custom);\n\t};\n\n\tSchemaInspector.Validation = Validation;\n\tSchemaInspector.Sanitization = Sanitization;\n\n\tSchemaInspector.sanitize = function (schema, post, custom, callback) {\n\t\tif (arguments.length === 3 && typeof custom === 'function') {\n\t\t\tcallback = custom;\n\t\t\tcustom = null;\n\t\t}\n\t\treturn new Sanitization(schema, custom).sanitize(post, callback);\n\t};\n\n\tSchemaInspector.validate = function (schema, candidate, custom, callback) {\n\t\tif (arguments.length === 3 && typeof custom === 'function') {\n\t\t\tcallback = custom;\n\t\t\tcustom = null;\n\t\t}\n\t\treturn new Validation(schema, custom).validate(candidate, callback);\n\t};\n\n\tSchemaInspector.generate = function (schema, n) {\n\t\tif (typeof n === 'number') {\n\t\t\tvar r = new Array(n);\n\t\t\tfor (var i = 0; i < n; i++) {\n\t\t\t\tr[i] = CandidateGenerator.instance().generate(schema);\n\t\t\t}\n\t\t\treturn r;\n\t\t}\n\t\treturn CandidateGenerator.instance().generate(schema);\n\t};\n})();\n","/**\n * Creates a continuation function with some arguments already applied.\n *\n * Useful as a shorthand when combined with other control flow functions. Any\n * arguments passed to the returned function are added to the arguments\n * originally passed to apply.\n *\n * @name apply\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {Function} fn - The function you want to eventually apply all\n * arguments to. Invokes with (arguments...).\n * @param {...*} arguments... - Any number of arguments to automatically apply\n * when the continuation is called.\n * @returns {Function} the partially-applied function\n * @example\n *\n * // using apply\n * async.parallel([\n *     async.apply(fs.writeFile, 'testfile1', 'test1'),\n *     async.apply(fs.writeFile, 'testfile2', 'test2')\n * ]);\n *\n *\n * // the same process without using apply\n * async.parallel([\n *     function(callback) {\n *         fs.writeFile('testfile1', 'test1', callback);\n *     },\n *     function(callback) {\n *         fs.writeFile('testfile2', 'test2', callback);\n *     }\n * ]);\n *\n * // It's possible to pass any number of additional arguments when calling the\n * // continuation:\n *\n * node> var fn = async.apply(sys.puts, 'one');\n * node> fn('two', 'three');\n * one\n * two\n * three\n */\nfunction apply(fn, ...args) {\n    return (...callArgs) => fn(...args,...callArgs);\n}\n\nfunction initialParams (fn) {\n    return function (...args/*, callback*/) {\n        var callback = args.pop();\n        return fn.call(this, args, callback);\n    };\n}\n\n/* istanbul ignore file */\n\nvar hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return (fn, ...args) => defer(() => fn(...args));\n}\n\nvar _defer;\n\nif (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nvar setImmediate$1 = wrap(_defer);\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    if (isAsync(func)) {\n        return function (...args/*, callback*/) {\n            const callback = args.pop();\n            const promise = func.apply(this, args);\n            return handlePromise(promise, callback)\n        }\n    }\n\n    return initialParams(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if (result && typeof result.then === 'function') {\n            return handlePromise(result, callback)\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction handlePromise(promise, callback) {\n    return promise.then(value => {\n        invokeCallback(callback, null, value);\n    }, err => {\n        invokeCallback(callback, err && err.message ? err : new Error(err));\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (err) {\n        setImmediate$1(e => { throw e }, err);\n    }\n}\n\nfunction isAsync(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction isAsyncGenerator(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncGenerator';\n}\n\nfunction isAsyncIterable(obj) {\n    return typeof obj[Symbol.asyncIterator] === 'function';\n}\n\nfunction wrapAsync(asyncFn) {\n    if (typeof asyncFn !== 'function') throw new Error('expected a function')\n    return isAsync(asyncFn) ? asyncify(asyncFn) : asyncFn;\n}\n\n// conditionally promisify a function.\n// only return a promise if a callback is omitted\nfunction awaitify (asyncFn, arity = asyncFn.length) {\n    if (!arity) throw new Error('arity is undefined')\n    function awaitable (...args) {\n        if (typeof args[arity - 1] === 'function') {\n            return asyncFn.apply(this, args)\n        }\n\n        return new Promise((resolve, reject) => {\n            args[arity - 1] = (err, ...cbArgs) => {\n                if (err) return reject(err)\n                resolve(cbArgs.length > 1 ? cbArgs : cbArgs[0]);\n            };\n            asyncFn.apply(this, args);\n        })\n    }\n\n    return awaitable\n}\n\nfunction applyEach (eachfn) {\n    return function applyEach(fns, ...callArgs) {\n        const go = awaitify(function (callback) {\n            var that = this;\n            return eachfn(fns, (fn, cb) => {\n                wrapAsync(fn).apply(that, callArgs.concat(cb));\n            }, callback);\n        });\n        return go;\n    };\n}\n\nfunction _asyncMap(eachfn, arr, iteratee, callback) {\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = wrapAsync(iteratee);\n\n    return eachfn(arr, (value, _, iterCb) => {\n        var index = counter++;\n        _iteratee(value, (err, v) => {\n            results[index] = v;\n            iterCb(err);\n        });\n    }, err => {\n        callback(err, results);\n    });\n}\n\nfunction isArrayLike(value) {\n    return value &&\n        typeof value.length === 'number' &&\n        value.length >= 0 &&\n        value.length % 1 === 0;\n}\n\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nconst breakLoop = {};\n\nfunction once(fn) {\n    function wrapper (...args) {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    }\n    Object.assign(wrapper, fn);\n    return wrapper\n}\n\nfunction getIterator (coll) {\n    return coll[Symbol.iterator] && coll[Symbol.iterator]();\n}\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? {value: coll[i], key: i} : null;\n    }\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done)\n            return null;\n        i++;\n        return {value: item.value, key: i};\n    }\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = obj ? Object.keys(obj) : [];\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        return i < len ? {value: obj[key], key} : null;\n    };\n}\n\nfunction createIterator(coll) {\n    if (isArrayLike(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = getIterator(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\n\nfunction onlyOnce(fn) {\n    return function (...args) {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    };\n}\n\n// for async generators\nfunction asyncEachOfLimit(generator, limit, iteratee, callback) {\n    let done = false;\n    let canceled = false;\n    let awaiting = false;\n    let running = 0;\n    let idx = 0;\n\n    function replenish() {\n        //console.log('replenish')\n        if (running >= limit || awaiting || done) return\n        //console.log('replenish awaiting')\n        awaiting = true;\n        generator.next().then(({value, done: iterDone}) => {\n            //console.log('got value', value)\n            if (canceled || done) return\n            awaiting = false;\n            if (iterDone) {\n                done = true;\n                if (running <= 0) {\n                    //console.log('done nextCb')\n                    callback(null);\n                }\n                return;\n            }\n            running++;\n            iteratee(value, idx, iterateeCallback);\n            idx++;\n            replenish();\n        }).catch(handleError);\n    }\n\n    function iterateeCallback(err, result) {\n        //console.log('iterateeCallback')\n        running -= 1;\n        if (canceled) return\n        if (err) return handleError(err)\n\n        if (err === false) {\n            done = true;\n            canceled = true;\n            return\n        }\n\n        if (result === breakLoop || (done && running <= 0)) {\n            done = true;\n            //console.log('done iterCb')\n            return callback(null);\n        }\n        replenish();\n    }\n\n    function handleError(err) {\n        if (canceled) return\n        awaiting = false;\n        done = true;\n        callback(err);\n    }\n\n    replenish();\n}\n\nvar eachOfLimit = (limit) => {\n    return (obj, iteratee, callback) => {\n        callback = once(callback);\n        if (limit <= 0) {\n            throw new RangeError('concurrency limit cannot be less than 1')\n        }\n        if (!obj) {\n            return callback(null);\n        }\n        if (isAsyncGenerator(obj)) {\n            return asyncEachOfLimit(obj, limit, iteratee, callback)\n        }\n        if (isAsyncIterable(obj)) {\n            return asyncEachOfLimit(obj[Symbol.asyncIterator](), limit, iteratee, callback)\n        }\n        var nextElem = createIterator(obj);\n        var done = false;\n        var canceled = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            if (canceled) return\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            }\n            else if (err === false) {\n                done = true;\n                canceled = true;\n            }\n            else if (value === breakLoop || (done && running <= 0)) {\n                done = true;\n                return callback(null);\n            }\n            else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish () {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, onlyOnce(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n};\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfLimit$1(coll, limit, iteratee, callback) {\n    return eachOfLimit(limit)(coll, wrapAsync(iteratee), callback);\n}\n\nvar eachOfLimit$2 = awaitify(eachOfLimit$1, 4);\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = once(callback);\n    var index = 0,\n        completed = 0,\n        {length} = coll,\n        canceled = false;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err === false) {\n            canceled = true;\n        }\n        if (canceled === true) return\n        if (err) {\n            callback(err);\n        } else if ((++completed === length) || value === breakLoop) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, onlyOnce(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nfunction eachOfGeneric (coll, iteratee, callback) {\n    return eachOfLimit$2(coll, Infinity, iteratee, callback);\n}\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * var obj = {dev: \"/dev.json\", test: \"/test.json\", prod: \"/prod.json\"};\n * var configs = {};\n *\n * async.forEachOf(obj, function (value, key, callback) {\n *     fs.readFile(__dirname + value, \"utf8\", function (err, data) {\n *         if (err) return callback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }, function (err) {\n *     if (err) console.error(err.message);\n *     // configs is now a map of JSON data\n *     doSomethingWith(configs);\n * });\n */\nfunction eachOf(coll, iteratee, callback) {\n    var eachOfImplementation = isArrayLike(coll) ? eachOfArrayLike : eachOfGeneric;\n    return eachOfImplementation(coll, wrapAsync(iteratee), callback);\n}\n\nvar eachOf$1 = awaitify(eachOf, 3);\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callback\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.map(['file1','file2','file3'], fs.stat, function(err, results) {\n *     // results is now an array of stats for each file\n * });\n */\nfunction map (coll, iteratee, callback) {\n    return _asyncMap(eachOf$1, coll, iteratee, callback)\n}\nvar map$1 = awaitify(map, 3);\n\n/**\n * Applies the provided arguments to each function in the array, calling\n * `callback` after all functions have completed. If you only provide the first\n * argument, `fns`, then it will return a function which lets you pass in the\n * arguments as if it were a single function call. If more arguments are\n * provided, `callback` is required while `args` is still optional. The results\n * for each of the applied async functions are passed to the final callback\n * as an array.\n *\n * @name applyEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} fns - A collection of {@link AsyncFunction}s\n * to all call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {AsyncFunction} - Returns a function that takes no args other than\n * an optional callback, that is the result of applying the `args` to each\n * of the functions.\n * @example\n *\n * const appliedFn = async.applyEach([enableSearch, updateSchema], 'bucket')\n *\n * appliedFn((err, results) => {\n *     // results[0] is the results for `enableSearch`\n *     // results[1] is the results for `updateSchema`\n * });\n *\n * // partial application example:\n * async.each(\n *     buckets,\n *     async (bucket) => async.applyEach([enableSearch, updateSchema], bucket)(),\n *     callback\n * );\n */\nvar applyEach$1 = applyEach(map$1);\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n *\n * @name eachOfSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfSeries(coll, iteratee, callback) {\n    return eachOfLimit$2(coll, 1, iteratee, callback)\n}\nvar eachOfSeries$1 = awaitify(eachOfSeries, 3);\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs only a single async operation at a time.\n *\n * @name mapSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapSeries (coll, iteratee, callback) {\n    return _asyncMap(eachOfSeries$1, coll, iteratee, callback)\n}\nvar mapSeries$1 = awaitify(mapSeries, 3);\n\n/**\n * The same as [`applyEach`]{@link module:ControlFlow.applyEach} but runs only a single async operation at a time.\n *\n * @name applyEachSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.applyEach]{@link module:ControlFlow.applyEach}\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} fns - A collection of {@link AsyncFunction}s to all\n * call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {AsyncFunction} - A function, that when called, is the result of\n * appling the `args` to the list of functions.  It takes no args, other than\n * a callback.\n */\nvar applyEachSeries = applyEach(mapSeries$1);\n\nconst PROMISE_SYMBOL = Symbol('promiseCallback');\n\nfunction promiseCallback () {\n    let resolve, reject;\n    function callback (err, ...args) {\n        if (err) return reject(err)\n        resolve(args.length > 1 ? args : args[0]);\n    }\n\n    callback[PROMISE_SYMBOL] = new Promise((res, rej) => {\n        resolve = res,\n        reject = rej;\n    });\n\n    return callback\n}\n\n/**\n * Determines the best order for running the {@link AsyncFunction}s in `tasks`, based on\n * their requirements. Each function can optionally depend on other functions\n * being completed first, and each function is run as soon as its requirements\n * are satisfied.\n *\n * If any of the {@link AsyncFunction}s pass an error to their callback, the `auto` sequence\n * will stop. Further tasks will not execute (so any other functions depending\n * on it will not run), and the main `callback` is immediately called with the\n * error.\n *\n * {@link AsyncFunction}s also receive an object containing the results of functions which\n * have completed so far as the first argument, if they have dependencies. If a\n * task function has no dependencies, it will only be passed a callback.\n *\n * @name auto\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Object} tasks - An object. Each of its properties is either a\n * function or an array of requirements, with the {@link AsyncFunction} itself the last item\n * in the array. The object's key of a property serves as the name of the task\n * defined by that property, i.e. can be used when specifying requirements for\n * other tasks. The function receives one or two arguments:\n * * a `results` object, containing the results of the previously executed\n *   functions, only passed if the task has any dependencies,\n * * a `callback(err, result)` function, which must be called when finished,\n *   passing an `error` (which can be `null`) and the result of the function's\n *   execution.\n * @param {number} [concurrency=Infinity] - An optional `integer` for\n * determining the maximum number of tasks that can be run in parallel. By\n * default, as many as possible.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback. Results are always returned; however, if an\n * error occurs, no further `tasks` will be performed, and the results object\n * will only contain partial results. Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n * @example\n *\n * async.auto({\n *     // this function will just be passed a callback\n *     readData: async.apply(fs.readFile, 'data.txt', 'utf-8'),\n *     showData: ['readData', function(results, cb) {\n *         // results.readData is the file's contents\n *         // ...\n *     }]\n * }, callback);\n *\n * async.auto({\n *     get_data: function(callback) {\n *         console.log('in get_data');\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         console.log('in make_folder');\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: ['get_data', 'make_folder', function(results, callback) {\n *         console.log('in write_file', JSON.stringify(results));\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(results, callback) {\n *         console.log('in email_link', JSON.stringify(results));\n *         // once the file is written let's email a link to it...\n *         // results.write_file contains the filename returned by write_file.\n *         callback(null, {'file':results.write_file, 'email':'user@example.com'});\n *     }]\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('results = ', results);\n * });\n */\nfunction auto(tasks, concurrency, callback) {\n    if (typeof concurrency !== 'number') {\n        // concurrency is optional, shift the args.\n        callback = concurrency;\n        concurrency = null;\n    }\n    callback = once(callback || promiseCallback());\n    var numTasks = Object.keys(tasks).length;\n    if (!numTasks) {\n        return callback(null);\n    }\n    if (!concurrency) {\n        concurrency = numTasks;\n    }\n\n    var results = {};\n    var runningTasks = 0;\n    var canceled = false;\n    var hasError = false;\n\n    var listeners = Object.create(null);\n\n    var readyTasks = [];\n\n    // for cycle detection:\n    var readyToCheck = []; // tasks that have been identified as reachable\n    // without the possibility of returning to an ancestor task\n    var uncheckedDependencies = {};\n\n    Object.keys(tasks).forEach(key => {\n        var task = tasks[key];\n        if (!Array.isArray(task)) {\n            // no dependencies\n            enqueueTask(key, [task]);\n            readyToCheck.push(key);\n            return;\n        }\n\n        var dependencies = task.slice(0, task.length - 1);\n        var remainingDependencies = dependencies.length;\n        if (remainingDependencies === 0) {\n            enqueueTask(key, task);\n            readyToCheck.push(key);\n            return;\n        }\n        uncheckedDependencies[key] = remainingDependencies;\n\n        dependencies.forEach(dependencyName => {\n            if (!tasks[dependencyName]) {\n                throw new Error('async.auto task `' + key +\n                    '` has a non-existent dependency `' +\n                    dependencyName + '` in ' +\n                    dependencies.join(', '));\n            }\n            addListener(dependencyName, () => {\n                remainingDependencies--;\n                if (remainingDependencies === 0) {\n                    enqueueTask(key, task);\n                }\n            });\n        });\n    });\n\n    checkForDeadlocks();\n    processQueue();\n\n    function enqueueTask(key, task) {\n        readyTasks.push(() => runTask(key, task));\n    }\n\n    function processQueue() {\n        if (canceled) return\n        if (readyTasks.length === 0 && runningTasks === 0) {\n            return callback(null, results);\n        }\n        while(readyTasks.length && runningTasks < concurrency) {\n            var run = readyTasks.shift();\n            run();\n        }\n\n    }\n\n    function addListener(taskName, fn) {\n        var taskListeners = listeners[taskName];\n        if (!taskListeners) {\n            taskListeners = listeners[taskName] = [];\n        }\n\n        taskListeners.push(fn);\n    }\n\n    function taskComplete(taskName) {\n        var taskListeners = listeners[taskName] || [];\n        taskListeners.forEach(fn => fn());\n        processQueue();\n    }\n\n\n    function runTask(key, task) {\n        if (hasError) return;\n\n        var taskCallback = onlyOnce((err, ...result) => {\n            runningTasks--;\n            if (err === false) {\n                canceled = true;\n                return\n            }\n            if (result.length < 2) {\n                [result] = result;\n            }\n            if (err) {\n                var safeResults = {};\n                Object.keys(results).forEach(rkey => {\n                    safeResults[rkey] = results[rkey];\n                });\n                safeResults[key] = result;\n                hasError = true;\n                listeners = Object.create(null);\n                if (canceled) return\n                callback(err, safeResults);\n            } else {\n                results[key] = result;\n                taskComplete(key);\n            }\n        });\n\n        runningTasks++;\n        var taskFn = wrapAsync(task[task.length - 1]);\n        if (task.length > 1) {\n            taskFn(results, taskCallback);\n        } else {\n            taskFn(taskCallback);\n        }\n    }\n\n    function checkForDeadlocks() {\n        // Kahn's algorithm\n        // https://en.wikipedia.org/wiki/Topological_sorting#Kahn.27s_algorithm\n        // http://connalle.blogspot.com/2013/10/topological-sortingkahn-algorithm.html\n        var currentTask;\n        var counter = 0;\n        while (readyToCheck.length) {\n            currentTask = readyToCheck.pop();\n            counter++;\n            getDependents(currentTask).forEach(dependent => {\n                if (--uncheckedDependencies[dependent] === 0) {\n                    readyToCheck.push(dependent);\n                }\n            });\n        }\n\n        if (counter !== numTasks) {\n            throw new Error(\n                'async.auto cannot execute tasks due to a recursive dependency'\n            );\n        }\n    }\n\n    function getDependents(taskName) {\n        var result = [];\n        Object.keys(tasks).forEach(key => {\n            const task = tasks[key];\n            if (Array.isArray(task) && task.indexOf(taskName) >= 0) {\n                result.push(key);\n            }\n        });\n        return result;\n    }\n\n    return callback[PROMISE_SYMBOL]\n}\n\nvar FN_ARGS = /^(?:async\\s+)?(?:function)?\\s*\\w*\\s*\\(\\s*([^)]+)\\s*\\)(?:\\s*{)/;\nvar ARROW_FN_ARGS = /^(?:async\\s+)?\\(?\\s*([^)=]+)\\s*\\)?(?:\\s*=>)/;\nvar FN_ARG_SPLIT = /,/;\nvar FN_ARG = /(=.+)?(\\s*)$/;\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\n\nfunction parseParams(func) {\n    const src = func.toString().replace(STRIP_COMMENTS, '');\n    let match = src.match(FN_ARGS);\n    if (!match) {\n        match = src.match(ARROW_FN_ARGS);\n    }\n    if (!match) throw new Error('could not parse args in autoInject\\nSource:\\n' + src)\n    let [, args] = match;\n    return args\n        .replace(/\\s/g, '')\n        .split(FN_ARG_SPLIT)\n        .map((arg) => arg.replace(FN_ARG, '').trim());\n}\n\n/**\n * A dependency-injected version of the [async.auto]{@link module:ControlFlow.auto} function. Dependent\n * tasks are specified as parameters to the function, after the usual callback\n * parameter, with the parameter names matching the names of the tasks it\n * depends on. This can provide even more readable task graphs which can be\n * easier to maintain.\n *\n * If a final callback is specified, the task results are similarly injected,\n * specified as named parameters after the initial error parameter.\n *\n * The autoInject function is purely syntactic sugar and its semantics are\n * otherwise equivalent to [async.auto]{@link module:ControlFlow.auto}.\n *\n * @name autoInject\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.auto]{@link module:ControlFlow.auto}\n * @category Control Flow\n * @param {Object} tasks - An object, each of whose properties is an {@link AsyncFunction} of\n * the form 'func([dependencies...], callback). The object's key of a property\n * serves as the name of the task defined by that property, i.e. can be used\n * when specifying requirements for other tasks.\n * * The `callback` parameter is a `callback(err, result)` which must be called\n *   when finished, passing an `error` (which can be `null`) and the result of\n *   the function's execution. The remaining parameters name other tasks on\n *   which the task is dependent, and the results from those tasks are the\n *   arguments of those parameters.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback, and a `results` object with any completed\n * task results, similar to `auto`.\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * //  The example from `auto` can be rewritten as follows:\n * async.autoInject({\n *     get_data: function(callback) {\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: function(get_data, make_folder, callback) {\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     },\n *     email_link: function(write_file, callback) {\n *         // once the file is written let's email a link to it...\n *         // write_file contains the filename returned by write_file.\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n *\n * // If you are using a JS minifier that mangles parameter names, `autoInject`\n * // will not work with plain functions, since the parameter names will be\n * // collapsed to a single letter identifier.  To work around this, you can\n * // explicitly specify the names of the parameters your task function needs\n * // in an array, similar to Angular.js dependency injection.\n *\n * // This still has an advantage over plain `auto`, since the results a task\n * // depends on are still spread into arguments.\n * async.autoInject({\n *     //...\n *     write_file: ['get_data', 'make_folder', function(get_data, make_folder, callback) {\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(write_file, callback) {\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }]\n *     //...\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n */\nfunction autoInject(tasks, callback) {\n    var newTasks = {};\n\n    Object.keys(tasks).forEach(key => {\n        var taskFn = tasks[key];\n        var params;\n        var fnIsAsync = isAsync(taskFn);\n        var hasNoDeps =\n            (!fnIsAsync && taskFn.length === 1) ||\n            (fnIsAsync && taskFn.length === 0);\n\n        if (Array.isArray(taskFn)) {\n            params = [...taskFn];\n            taskFn = params.pop();\n\n            newTasks[key] = params.concat(params.length > 0 ? newTask : taskFn);\n        } else if (hasNoDeps) {\n            // no dependencies, use the function as-is\n            newTasks[key] = taskFn;\n        } else {\n            params = parseParams(taskFn);\n            if ((taskFn.length === 0 && !fnIsAsync) && params.length === 0) {\n                throw new Error(\"autoInject task functions require explicit parameters.\");\n            }\n\n            // remove callback param\n            if (!fnIsAsync) params.pop();\n\n            newTasks[key] = params.concat(newTask);\n        }\n\n        function newTask(results, taskCb) {\n            var newArgs = params.map(name => results[name]);\n            newArgs.push(taskCb);\n            wrapAsync(taskFn)(...newArgs);\n        }\n    });\n\n    return auto(newTasks, callback);\n}\n\n// Simple doubly linked list (https://en.wikipedia.org/wiki/Doubly_linked_list) implementation\n// used for queues. This implementation assumes that the node provided by the user can be modified\n// to adjust the next and last properties. We implement only the minimal functionality\n// for queue support.\nclass DLL {\n    constructor() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n\n    removeLink(node) {\n        if (node.prev) node.prev.next = node.next;\n        else this.head = node.next;\n        if (node.next) node.next.prev = node.prev;\n        else this.tail = node.prev;\n\n        node.prev = node.next = null;\n        this.length -= 1;\n        return node;\n    }\n\n    empty () {\n        while(this.head) this.shift();\n        return this;\n    }\n\n    insertAfter(node, newNode) {\n        newNode.prev = node;\n        newNode.next = node.next;\n        if (node.next) node.next.prev = newNode;\n        else this.tail = newNode;\n        node.next = newNode;\n        this.length += 1;\n    }\n\n    insertBefore(node, newNode) {\n        newNode.prev = node.prev;\n        newNode.next = node;\n        if (node.prev) node.prev.next = newNode;\n        else this.head = newNode;\n        node.prev = newNode;\n        this.length += 1;\n    }\n\n    unshift(node) {\n        if (this.head) this.insertBefore(this.head, node);\n        else setInitial(this, node);\n    }\n\n    push(node) {\n        if (this.tail) this.insertAfter(this.tail, node);\n        else setInitial(this, node);\n    }\n\n    shift() {\n        return this.head && this.removeLink(this.head);\n    }\n\n    pop() {\n        return this.tail && this.removeLink(this.tail);\n    }\n\n    toArray() {\n        return [...this]\n    }\n\n    *[Symbol.iterator] () {\n        var cur = this.head;\n        while (cur) {\n            yield cur.data;\n            cur = cur.next;\n        }\n    }\n\n    remove (testFn) {\n        var curr = this.head;\n        while(curr) {\n            var {next} = curr;\n            if (testFn(curr)) {\n                this.removeLink(curr);\n            }\n            curr = next;\n        }\n        return this;\n    }\n}\n\nfunction setInitial(dll, node) {\n    dll.length = 1;\n    dll.head = dll.tail = node;\n}\n\nfunction queue(worker, concurrency, payload) {\n    if (concurrency == null) {\n        concurrency = 1;\n    }\n    else if(concurrency === 0) {\n        throw new RangeError('Concurrency must not be zero');\n    }\n\n    var _worker = wrapAsync(worker);\n    var numRunning = 0;\n    var workersList = [];\n    const events = {\n        error: [],\n        drain: [],\n        saturated: [],\n        unsaturated: [],\n        empty: []\n    };\n\n    function on (event, handler) {\n        events[event].push(handler);\n    }\n\n    function once (event, handler) {\n        const handleAndRemove = (...args) => {\n            off(event, handleAndRemove);\n            handler(...args);\n        };\n        events[event].push(handleAndRemove);\n    }\n\n    function off (event, handler) {\n        if (!event) return Object.keys(events).forEach(ev => events[ev] = [])\n        if (!handler) return events[event] = []\n        events[event] = events[event].filter(ev => ev !== handler);\n    }\n\n    function trigger (event, ...args) {\n        events[event].forEach(handler => handler(...args));\n    }\n\n    var processingScheduled = false;\n    function _insert(data, insertAtFront, rejectOnError, callback) {\n        if (callback != null && typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n\n        var res, rej;\n        function promiseCallback (err, ...args) {\n            // we don't care about the error, let the global error handler\n            // deal with it\n            if (err) return rejectOnError ? rej(err) : res()\n            if (args.length <= 1) return res(args[0])\n            res(args);\n        }\n\n        var item = {\n            data,\n            callback: rejectOnError ?\n                promiseCallback :\n                (callback || promiseCallback)\n        };\n\n        if (insertAtFront) {\n            q._tasks.unshift(item);\n        } else {\n            q._tasks.push(item);\n        }\n\n        if (!processingScheduled) {\n            processingScheduled = true;\n            setImmediate$1(() => {\n                processingScheduled = false;\n                q.process();\n            });\n        }\n\n        if (rejectOnError || !callback) {\n            return new Promise((resolve, reject) => {\n                res = resolve;\n                rej = reject;\n            })\n        }\n    }\n\n    function _createCB(tasks) {\n        return function (err, ...args) {\n            numRunning -= 1;\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                var task = tasks[i];\n\n                var index = workersList.indexOf(task);\n                if (index === 0) {\n                    workersList.shift();\n                } else if (index > 0) {\n                    workersList.splice(index, 1);\n                }\n\n                task.callback(err, ...args);\n\n                if (err != null) {\n                    trigger('error', err, task.data);\n                }\n            }\n\n            if (numRunning <= (q.concurrency - q.buffer) ) {\n                trigger('unsaturated');\n            }\n\n            if (q.idle()) {\n                trigger('drain');\n            }\n            q.process();\n        };\n    }\n\n    function _maybeDrain(data) {\n        if (data.length === 0 && q.idle()) {\n            // call drain immediately if there are no tasks\n            setImmediate$1(() => trigger('drain'));\n            return true\n        }\n        return false\n    }\n\n    const eventMethod = (name) => (handler) => {\n        if (!handler) {\n            return new Promise((resolve, reject) => {\n                once(name, (err, data) => {\n                    if (err) return reject(err)\n                    resolve(data);\n                });\n            })\n        }\n        off(name);\n        on(name, handler);\n\n    };\n\n    var isProcessing = false;\n    var q = {\n        _tasks: new DLL(),\n        *[Symbol.iterator] () {\n            yield* q._tasks[Symbol.iterator]();\n        },\n        concurrency,\n        payload,\n        buffer: concurrency / 4,\n        started: false,\n        paused: false,\n        push (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, false, false, callback))\n            }\n            return _insert(data, false, false, callback);\n        },\n        pushAsync (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, false, true, callback))\n            }\n            return _insert(data, false, true, callback);\n        },\n        kill () {\n            off();\n            q._tasks.empty();\n        },\n        unshift (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, true, false, callback))\n            }\n            return _insert(data, true, false, callback);\n        },\n        unshiftAsync (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, true, true, callback))\n            }\n            return _insert(data, true, true, callback);\n        },\n        remove (testFn) {\n            q._tasks.remove(testFn);\n        },\n        process () {\n            // Avoid trying to start too many processing operations. This can occur\n            // when callbacks resolve synchronously (#1267).\n            if (isProcessing) {\n                return;\n            }\n            isProcessing = true;\n            while(!q.paused && numRunning < q.concurrency && q._tasks.length){\n                var tasks = [], data = [];\n                var l = q._tasks.length;\n                if (q.payload) l = Math.min(l, q.payload);\n                for (var i = 0; i < l; i++) {\n                    var node = q._tasks.shift();\n                    tasks.push(node);\n                    workersList.push(node);\n                    data.push(node.data);\n                }\n\n                numRunning += 1;\n\n                if (q._tasks.length === 0) {\n                    trigger('empty');\n                }\n\n                if (numRunning === q.concurrency) {\n                    trigger('saturated');\n                }\n\n                var cb = onlyOnce(_createCB(tasks));\n                _worker(data, cb);\n            }\n            isProcessing = false;\n        },\n        length () {\n            return q._tasks.length;\n        },\n        running () {\n            return numRunning;\n        },\n        workersList () {\n            return workersList;\n        },\n        idle() {\n            return q._tasks.length + numRunning === 0;\n        },\n        pause () {\n            q.paused = true;\n        },\n        resume () {\n            if (q.paused === false) { return; }\n            q.paused = false;\n            setImmediate$1(q.process);\n        }\n    };\n    // define these as fixed properties, so people get useful errors when updating\n    Object.defineProperties(q, {\n        saturated: {\n            writable: false,\n            value: eventMethod('saturated')\n        },\n        unsaturated: {\n            writable: false,\n            value: eventMethod('unsaturated')\n        },\n        empty: {\n            writable: false,\n            value: eventMethod('empty')\n        },\n        drain: {\n            writable: false,\n            value: eventMethod('drain')\n        },\n        error: {\n            writable: false,\n            value: eventMethod('error')\n        },\n    });\n    return q;\n}\n\n/**\n * Creates a `cargo` object with the specified payload. Tasks added to the\n * cargo will be processed altogether (up to the `payload` limit). If the\n * `worker` is in progress, the task is queued until it becomes available. Once\n * the `worker` has completed some tasks, each callback of those tasks is\n * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n * for how `cargo` and `queue` work.\n *\n * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n * at a time, cargo passes an array of tasks to a single worker, repeating\n * when the worker is finished.\n *\n * @name cargo\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An asynchronous function for processing an array\n * of queued tasks. Invoked with `(tasks, callback)`.\n * @param {number} [payload=Infinity] - An optional `integer` for determining\n * how many tasks should be processed per round; if omitted, the default is\n * unlimited.\n * @returns {module:ControlFlow.QueueObject} A cargo object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the cargo and inner queue.\n * @example\n *\n * // create a cargo object with payload 2\n * var cargo = async.cargo(function(tasks, callback) {\n *     for (var i=0; i<tasks.length; i++) {\n *         console.log('hello ' + tasks[i].name);\n *     }\n *     callback();\n * }, 2);\n *\n * // add some items\n * cargo.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * cargo.push({name: 'bar'}, function(err) {\n *     console.log('finished processing bar');\n * });\n * await cargo.push({name: 'baz'});\n * console.log('finished processing baz');\n */\nfunction cargo(worker, payload) {\n    return queue(worker, 1, payload);\n}\n\n/**\n * Creates a `cargoQueue` object with the specified payload. Tasks added to the\n * cargoQueue will be processed together (up to the `payload` limit) in `concurrency` parallel workers.\n * If the all `workers` are in progress, the task is queued until one becomes available. Once\n * a `worker` has completed some tasks, each callback of those tasks is\n * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n * for how `cargo` and `queue` work.\n *\n * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n * at a time, and [`cargo`]{@link module:ControlFlow.cargo} passes an array of tasks to a single worker,\n * the cargoQueue passes an array of tasks to multiple parallel workers.\n *\n * @name cargoQueue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @see [async.cargo]{@link module:ControlFLow.cargo}\n * @category Control Flow\n * @param {AsyncFunction} worker - An asynchronous function for processing an array\n * of queued tasks. Invoked with `(tasks, callback)`.\n * @param {number} [concurrency=1] - An `integer` for determining how many\n * `worker` functions should be run in parallel.  If omitted, the concurrency\n * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n * @param {number} [payload=Infinity] - An optional `integer` for determining\n * how many tasks should be processed per round; if omitted, the default is\n * unlimited.\n * @returns {module:ControlFlow.QueueObject} A cargoQueue object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the cargoQueue and inner queue.\n * @example\n *\n * // create a cargoQueue object with payload 2 and concurrency 2\n * var cargoQueue = async.cargoQueue(function(tasks, callback) {\n *     for (var i=0; i<tasks.length; i++) {\n *         console.log('hello ' + tasks[i].name);\n *     }\n *     callback();\n * }, 2, 2);\n *\n * // add some items\n * cargoQueue.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * cargoQueue.push({name: 'bar'}, function(err) {\n *     console.log('finished processing bar');\n * });\n * cargoQueue.push({name: 'baz'}, function(err) {\n *     console.log('finished processing baz');\n * });\n * cargoQueue.push({name: 'boo'}, function(err) {\n *     console.log('finished processing boo');\n * });\n */\nfunction cargo$1(worker, concurrency, payload) {\n    return queue(worker, concurrency, payload);\n}\n\n/**\n * Reduces `coll` into a single value using an async `iteratee` to return each\n * successive step. `memo` is the initial state of the reduction. This function\n * only operates in series.\n *\n * For performance reasons, it may make sense to split a call to this function\n * into a parallel map, and then use the normal `Array.prototype.reduce` on the\n * results. This function is for situations where each step in the reduction\n * needs to be async; if you can get the data before reducing it, then it's\n * probably a good idea to do so.\n *\n * @name reduce\n * @static\n * @memberOf module:Collections\n * @method\n * @alias inject\n * @alias foldl\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee complete with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.reduce([1,2,3], 0, function(memo, item, callback) {\n *     // pointless async:\n *     process.nextTick(function() {\n *         callback(null, memo + item)\n *     });\n * }, function(err, result) {\n *     // result is now equal to the last value of memo, which is 6\n * });\n */\nfunction reduce(coll, memo, iteratee, callback) {\n    callback = once(callback);\n    var _iteratee = wrapAsync(iteratee);\n    return eachOfSeries$1(coll, (x, i, iterCb) => {\n        _iteratee(memo, x, (err, v) => {\n            memo = v;\n            iterCb(err);\n        });\n    }, err => callback(err, memo));\n}\nvar reduce$1 = awaitify(reduce, 4);\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nfunction seq(...functions) {\n    var _functions = functions.map(wrapAsync);\n    return function (...args) {\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = promiseCallback();\n        }\n\n        reduce$1(_functions, args, (newargs, fn, iterCb) => {\n            fn.apply(that, newargs.concat((err, ...nextargs) => {\n                iterCb(err, nextargs);\n            }));\n        },\n        (err, results) => cb(err, ...results));\n\n        return cb[PROMISE_SYMBOL]\n    };\n}\n\n/**\n * Creates a function which is a composition of the passed asynchronous\n * functions. Each function consumes the return value of the function that\n * follows. Composing functions `f()`, `g()`, and `h()` would produce the result\n * of `f(g(h()))`, only this version uses callbacks to obtain the return values.\n *\n * If the last argument to the composed function is not a function, a promise\n * is returned when you call it.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name compose\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} an asynchronous function that is the composed\n * asynchronous `functions`\n * @example\n *\n * function add1(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n + 1);\n *     }, 10);\n * }\n *\n * function mul3(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n * 3);\n *     }, 10);\n * }\n *\n * var add1mul3 = async.compose(mul3, add1);\n * add1mul3(4, function (err, result) {\n *     // result now equals 15\n * });\n */\nfunction compose(...args) {\n    return seq(...args.reverse());\n}\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs a maximum of `limit` async operations at a time.\n *\n * @name mapLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapLimit (coll, limit, iteratee, callback) {\n    return _asyncMap(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar mapLimit$1 = awaitify(mapLimit, 4);\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs a maximum of `limit` async operations at a time.\n *\n * @name concatLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @alias flatMapLimit\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n */\nfunction concatLimit(coll, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(coll, limit, (val, iterCb) => {\n        _iteratee(val, (err, ...args) => {\n            if (err) return iterCb(err);\n            return iterCb(err, args);\n        });\n    }, (err, mapResults) => {\n        var result = [];\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                result = result.concat(...mapResults[i]);\n            }\n        }\n\n        return callback(err, result);\n    });\n}\nvar concatLimit$1 = awaitify(concatLimit, 4);\n\n/**\n * Applies `iteratee` to each item in `coll`, concatenating the results. Returns\n * the concatenated list. The `iteratee`s are called in parallel, and the\n * results are concatenated as they return. The results array will be returned in\n * the original order of `coll` passed to the `iteratee` function.\n *\n * @name concat\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @alias flatMap\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n * @example\n *\n * async.concat(['dir1','dir2','dir3'], fs.readdir, function(err, files) {\n *     // files is now a list of filenames that exist in the 3 directories\n * });\n */\nfunction concat(coll, iteratee, callback) {\n    return concatLimit$1(coll, Infinity, iteratee, callback)\n}\nvar concat$1 = awaitify(concat, 3);\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs only a single async operation at a time.\n *\n * @name concatSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @alias flatMapSeries\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`.\n * The iteratee should complete with an array an array of results.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n */\nfunction concatSeries(coll, iteratee, callback) {\n    return concatLimit$1(coll, 1, iteratee, callback)\n}\nvar concatSeries$1 = awaitify(concatSeries, 3);\n\n/**\n * Returns a function that when called, calls-back with the values provided.\n * Useful as the first function in a [`waterfall`]{@link module:ControlFlow.waterfall}, or for plugging values in to\n * [`auto`]{@link module:ControlFlow.auto}.\n *\n * @name constant\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {...*} arguments... - Any number of arguments to automatically invoke\n * callback with.\n * @returns {AsyncFunction} Returns a function that when invoked, automatically\n * invokes the callback with the previous given arguments.\n * @example\n *\n * async.waterfall([\n *     async.constant(42),\n *     function (value, next) {\n *         // value === 42\n *     },\n *     //...\n * ], callback);\n *\n * async.waterfall([\n *     async.constant(filename, \"utf8\"),\n *     fs.readFile,\n *     function (fileData, next) {\n *         //...\n *     }\n *     //...\n * ], callback);\n *\n * async.auto({\n *     hostname: async.constant(\"https://server.net/\"),\n *     port: findFreePort,\n *     launchServer: [\"hostname\", \"port\", function (options, cb) {\n *         startServer(options, cb);\n *     }],\n *     //...\n * }, callback);\n */\nfunction constant(...args) {\n    return function (...ignoredArgs/*, callback*/) {\n        var callback = ignoredArgs.pop();\n        return callback(null, ...args);\n    };\n}\n\nfunction _createTester(check, getResult) {\n    return (eachfn, arr, _iteratee, cb) => {\n        var testPassed = false;\n        var testResult;\n        const iteratee = wrapAsync(_iteratee);\n        eachfn(arr, (value, _, callback) => {\n            iteratee(value, (err, result) => {\n                if (err || err === false) return callback(err);\n\n                if (check(result) && !testResult) {\n                    testPassed = true;\n                    testResult = getResult(true, value);\n                    return callback(null, breakLoop);\n                }\n                callback();\n            });\n        }, err => {\n            if (err) return cb(err);\n            cb(null, testPassed ? testResult : getResult(false));\n        });\n    };\n}\n\n/**\n * Returns the first value in `coll` that passes an async truth test. The\n * `iteratee` is applied in parallel, meaning the first iteratee to return\n * `true` will fire the detect `callback` with that result. That means the\n * result might not be the first item in the original `coll` (in terms of order)\n * that passes the test.\n\n * If order within the original `coll` is important, then look at\n * [`detectSeries`]{@link module:Collections.detectSeries}.\n *\n * @name detect\n * @static\n * @memberOf module:Collections\n * @method\n * @alias find\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns A Promise, if no callback is passed\n * @example\n *\n * async.detect(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // result now equals the first file in the list that exists\n * });\n */\nfunction detect(coll, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOf$1, coll, iteratee, callback)\n}\nvar detect$1 = awaitify(detect, 3);\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name detectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findLimit\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns a Promise if no callback is passed\n */\nfunction detectLimit(coll, limit, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar detectLimit$1 = awaitify(detectLimit, 4);\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs only a single async operation at a time.\n *\n * @name detectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findSeries\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns a Promise if no callback is passed\n */\nfunction detectSeries(coll, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOfLimit(1), coll, iteratee, callback)\n}\n\nvar detectSeries$1 = awaitify(detectSeries, 3);\n\nfunction consoleFunc(name) {\n    return (fn, ...args) => wrapAsync(fn)(...args, (err, ...resultArgs) => {\n        if (typeof console === 'object') {\n            if (err) {\n                if (console.error) {\n                    console.error(err);\n                }\n            } else if (console[name]) {\n                resultArgs.forEach(x => console[name](x));\n            }\n        }\n    })\n}\n\n/**\n * Logs the result of an [`async` function]{@link AsyncFunction} to the\n * `console` using `console.dir` to display the properties of the resulting object.\n * Only works in Node.js or in browsers that support `console.dir` and\n * `console.error` (such as FF and Chrome).\n * If multiple arguments are returned from the async function,\n * `console.dir` is called on each argument in order.\n *\n * @name dir\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, {hello: name});\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.dir(hello, 'world');\n * {hello: 'world'}\n */\nvar dir = consoleFunc('dir');\n\n/**\n * The post-check version of [`whilst`]{@link module:ControlFlow.whilst}. To reflect the difference in\n * the order of operations, the arguments `test` and `iteratee` are switched.\n *\n * `doWhilst` is to `whilst` as `do while` is to `while` in plain JavaScript.\n *\n * @name doWhilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - A function which is called each time `test`\n * passes. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform after each\n * execution of `iteratee`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `iteratee`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped.\n * `callback` will be passed an error and any arguments passed to the final\n * `iteratee`'s callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction doWhilst(iteratee, test, callback) {\n    callback = onlyOnce(callback);\n    var _fn = wrapAsync(iteratee);\n    var _test = wrapAsync(test);\n    var results;\n\n    function next(err, ...args) {\n        if (err) return callback(err);\n        if (err === false) return;\n        results = args;\n        _test(...args, check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (err === false) return;\n        if (!truth) return callback(null, ...results);\n        _fn(next);\n    }\n\n    return check(null, true);\n}\n\nvar doWhilst$1 = awaitify(doWhilst, 3);\n\n/**\n * Like ['doWhilst']{@link module:ControlFlow.doWhilst}, except the `test` is inverted. Note the\n * argument ordering differs from `until`.\n *\n * @name doUntil\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.doWhilst]{@link module:ControlFlow.doWhilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform after each\n * execution of `iteratee`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `iteratee`\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction doUntil(iteratee, test, callback) {\n    const _test = wrapAsync(test);\n    return doWhilst$1(iteratee, (...args) => {\n        const cb = args.pop();\n        _test(...args, (err, truth) => cb (err, !truth));\n    }, callback);\n}\n\nfunction _withoutIndex(iteratee) {\n    return (value, index, callback) => iteratee(value, callback);\n}\n\n/**\n * Applies the function `iteratee` to each item in `coll`, in parallel.\n * The `iteratee` is called with an item from the list, and a callback for when\n * it has finished. If the `iteratee` passes an error to its `callback`, the\n * main `callback` (for the `each` function) is immediately called with the\n * error.\n *\n * Note, that since this function applies `iteratee` to each item in parallel,\n * there is no guarantee that the iteratee functions will complete in order.\n *\n * @name each\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEach\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to\n * each item in `coll`. Invoked with (item, callback).\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOf`.\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // assuming openFiles is an array of file names and saveFile is a function\n * // to save the modified contents of that file:\n *\n * async.each(openFiles, saveFile, function(err){\n *   // if any of the saves produced an error, err would equal that error\n * });\n *\n * // assuming openFiles is an array of file names\n * async.each(openFiles, function(file, callback) {\n *\n *     // Perform operation on file here.\n *     console.log('Processing file ' + file);\n *\n *     if( file.length > 32 ) {\n *       console.log('This file name is too long');\n *       callback('File name too long');\n *     } else {\n *       // Do work to process file here\n *       console.log('File processed');\n *       callback();\n *     }\n * }, function(err) {\n *     // if any of the file processing produced an error, err would equal that error\n *     if( err ) {\n *       // One of the iterations produced an error.\n *       // All processing will now stop.\n *       console.log('A file failed to process');\n *     } else {\n *       console.log('All files have been processed successfully');\n *     }\n * });\n */\nfunction eachLimit(coll, iteratee, callback) {\n    return eachOf$1(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\n\nvar each = awaitify(eachLimit, 3);\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n *\n * @name eachLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfLimit`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachLimit$1(coll, limit, iteratee, callback) {\n    return eachOfLimit(limit)(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\nvar eachLimit$2 = awaitify(eachLimit$1, 4);\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n *\n * Note, that unlike [`each`]{@link module:Collections.each}, this function applies iteratee to each item\n * in series and therefore the iteratee functions will complete in order.\n\n * @name eachSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfSeries`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachSeries(coll, iteratee, callback) {\n    return eachLimit$2(coll, 1, iteratee, callback)\n}\nvar eachSeries$1 = awaitify(eachSeries, 3);\n\n/**\n * Wrap an async function and ensure it calls its callback on a later tick of\n * the event loop.  If the function already calls its callback on a next tick,\n * no extra deferral is added. This is useful for preventing stack overflows\n * (`RangeError: Maximum call stack size exceeded`) and generally keeping\n * [Zalgo](http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony)\n * contained. ES2017 `async` functions are returned as-is -- they are immune\n * to Zalgo's corrupting influences, as they always resolve on a later tick.\n *\n * @name ensureAsync\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - an async function, one that expects a node-style\n * callback as its last argument.\n * @returns {AsyncFunction} Returns a wrapped function with the exact same call\n * signature as the function passed in.\n * @example\n *\n * function sometimesAsync(arg, callback) {\n *     if (cache[arg]) {\n *         return callback(null, cache[arg]); // this would be synchronous!!\n *     } else {\n *         doSomeIO(arg, callback); // this IO would be asynchronous\n *     }\n * }\n *\n * // this has a risk of stack overflows if many results are cached in a row\n * async.mapSeries(args, sometimesAsync, done);\n *\n * // this will defer sometimesAsync's callback if necessary,\n * // preventing stack overflows\n * async.mapSeries(args, async.ensureAsync(sometimesAsync), done);\n */\nfunction ensureAsync(fn) {\n    if (isAsync(fn)) return fn;\n    return function (...args/*, callback*/) {\n        var callback = args.pop();\n        var sync = true;\n        args.push((...innerArgs) => {\n            if (sync) {\n                setImmediate$1(() => callback(...innerArgs));\n            } else {\n                callback(...innerArgs);\n            }\n        });\n        fn.apply(this, args);\n        sync = false;\n    };\n}\n\n/**\n * Returns `true` if every element in `coll` satisfies an async test. If any\n * iteratee call returns `false`, the main `callback` is immediately called.\n *\n * @name every\n * @static\n * @memberOf module:Collections\n * @method\n * @alias all\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * async.every(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // if result is true then every file exists\n * });\n */\nfunction every(coll, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOf$1, coll, iteratee, callback)\n}\nvar every$1 = awaitify(every, 3);\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs a maximum of `limit` async operations at a time.\n *\n * @name everyLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction everyLimit(coll, limit, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar everyLimit$1 = awaitify(everyLimit, 4);\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs only a single async operation at a time.\n *\n * @name everySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in series.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction everySeries(coll, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOfSeries$1, coll, iteratee, callback)\n}\nvar everySeries$1 = awaitify(everySeries, 3);\n\nfunction filterArray(eachfn, arr, iteratee, callback) {\n    var truthValues = new Array(arr.length);\n    eachfn(arr, (x, index, iterCb) => {\n        iteratee(x, (err, v) => {\n            truthValues[index] = !!v;\n            iterCb(err);\n        });\n    }, err => {\n        if (err) return callback(err);\n        var results = [];\n        for (var i = 0; i < arr.length; i++) {\n            if (truthValues[i]) results.push(arr[i]);\n        }\n        callback(null, results);\n    });\n}\n\nfunction filterGeneric(eachfn, coll, iteratee, callback) {\n    var results = [];\n    eachfn(coll, (x, index, iterCb) => {\n        iteratee(x, (err, v) => {\n            if (err) return iterCb(err);\n            if (v) {\n                results.push({index, value: x});\n            }\n            iterCb(err);\n        });\n    }, err => {\n        if (err) return callback(err);\n        callback(null, results\n            .sort((a, b) => a.index - b.index)\n            .map(v => v.value));\n    });\n}\n\nfunction _filter(eachfn, coll, iteratee, callback) {\n    var filter = isArrayLike(coll) ? filterArray : filterGeneric;\n    return filter(eachfn, coll, wrapAsync(iteratee), callback);\n}\n\n/**\n * Returns a new array of all the values in `coll` which pass an async truth\n * test. This operation is performed in parallel, but the results array will be\n * in the same order as the original.\n *\n * @name filter\n * @static\n * @memberOf module:Collections\n * @method\n * @alias select\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * async.filter(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, results) {\n *     // results now equals an array of the existing files\n * });\n */\nfunction filter (coll, iteratee, callback) {\n    return _filter(eachOf$1, coll, iteratee, callback)\n}\nvar filter$1 = awaitify(filter, 3);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name filterLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction filterLimit (coll, limit, iteratee, callback) {\n    return _filter(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar filterLimit$1 = awaitify(filterLimit, 4);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs only a single async operation at a time.\n *\n * @name filterSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results)\n * @returns {Promise} a promise, if no callback provided\n */\nfunction filterSeries (coll, iteratee, callback) {\n    return _filter(eachOfSeries$1, coll, iteratee, callback)\n}\nvar filterSeries$1 = awaitify(filterSeries, 3);\n\n/**\n * Calls the asynchronous function `fn` with a callback parameter that allows it\n * to call itself again, in series, indefinitely.\n\n * If an error is passed to the callback then `errback` is called with the\n * error, and execution stops, otherwise it will never be called.\n *\n * @name forever\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} fn - an async function to call repeatedly.\n * Invoked with (next).\n * @param {Function} [errback] - when `fn` passes an error to it's callback,\n * this function will be called, and execution stops. Invoked with (err).\n * @returns {Promise} a promise that rejects if an error occurs and an errback\n * is not passed\n * @example\n *\n * async.forever(\n *     function(next) {\n *         // next is suitable for passing to things that need a callback(err [, whatever]);\n *         // it will result in this function being called again.\n *     },\n *     function(err) {\n *         // if next is called with a value in its first parameter, it will appear\n *         // in here as 'err', and execution will stop.\n *     }\n * );\n */\nfunction forever(fn, errback) {\n    var done = onlyOnce(errback);\n    var task = wrapAsync(ensureAsync(fn));\n\n    function next(err) {\n        if (err) return done(err);\n        if (err === false) return;\n        task(next);\n    }\n    return next();\n}\nvar forever$1 = awaitify(forever, 2);\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs a maximum of `limit` async operations at a time.\n *\n * @name groupByLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction groupByLimit(coll, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(coll, limit, (val, iterCb) => {\n        _iteratee(val, (err, key) => {\n            if (err) return iterCb(err);\n            return iterCb(err, {key, val});\n        });\n    }, (err, mapResults) => {\n        var result = {};\n        // from MDN, handle object having an `hasOwnProperty` prop\n        var {hasOwnProperty} = Object.prototype;\n\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                var {key} = mapResults[i];\n                var {val} = mapResults[i];\n\n                if (hasOwnProperty.call(result, key)) {\n                    result[key].push(val);\n                } else {\n                    result[key] = [val];\n                }\n            }\n        }\n\n        return callback(err, result);\n    });\n}\n\nvar groupByLimit$1 = awaitify(groupByLimit, 4);\n\n/**\n * Returns a new object, where each value corresponds to an array of items, from\n * `coll`, that returned the corresponding key. That is, the keys of the object\n * correspond to the values passed to the `iteratee` callback.\n *\n * Note: Since this function applies the `iteratee` to each item in parallel,\n * there is no guarantee that the `iteratee` functions will complete in order.\n * However, the values for each key in the `result` will be in the same order as\n * the original `coll`. For Objects, the values will roughly be in the order of\n * the original Objects' keys (but this can vary across JavaScript engines).\n *\n * @name groupBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.groupBy(['userId1', 'userId2', 'userId3'], function(userId, callback) {\n *     db.findById(userId, function(err, user) {\n *         if (err) return callback(err);\n *         return callback(null, user.age);\n *     });\n * }, function(err, result) {\n *     // result is object containing the userIds grouped by age\n *     // e.g. { 30: ['userId1', 'userId3'], 42: ['userId2']};\n * });\n */\nfunction groupBy (coll, iteratee, callback) {\n    return groupByLimit$1(coll, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs only a single async operation at a time.\n *\n * @name groupBySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction groupBySeries (coll, iteratee, callback) {\n    return groupByLimit$1(coll, 1, iteratee, callback)\n}\n\n/**\n * Logs the result of an `async` function to the `console`. Only works in\n * Node.js or in browsers that support `console.log` and `console.error` (such\n * as FF and Chrome). If multiple arguments are returned from the async\n * function, `console.log` is called on each argument in order.\n *\n * @name log\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, 'hello ' + name);\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.log(hello, 'world');\n * 'hello world'\n */\nvar log = consoleFunc('log');\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name mapValuesLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapValuesLimit(obj, limit, iteratee, callback) {\n    callback = once(callback);\n    var newObj = {};\n    var _iteratee = wrapAsync(iteratee);\n    return eachOfLimit(limit)(obj, (val, key, next) => {\n        _iteratee(val, key, (err, result) => {\n            if (err) return next(err);\n            newObj[key] = result;\n            next(err);\n        });\n    }, err => callback(err, newObj));\n}\n\nvar mapValuesLimit$1 = awaitify(mapValuesLimit, 4);\n\n/**\n * A relative of [`map`]{@link module:Collections.map}, designed for use with objects.\n *\n * Produces a new Object by mapping each value of `obj` through the `iteratee`\n * function. The `iteratee` is called each `value` and `key` from `obj` and a\n * callback for when it has finished processing. Each of these callbacks takes\n * two arguments: an `error`, and the transformed item from `obj`. If `iteratee`\n * passes an error to its callback, the main `callback` (for the `mapValues`\n * function) is immediately called with the error.\n *\n * Note, the order of the keys in the result is not guaranteed.  The keys will\n * be roughly in the order they complete, (but this is very engine-specific)\n *\n * @name mapValues\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.mapValues({\n *     f1: 'file1',\n *     f2: 'file2',\n *     f3: 'file3'\n * }, function (file, key, callback) {\n *   fs.stat(file, callback);\n * }, function(err, result) {\n *     // result is now a map of stats for each file, e.g.\n *     // {\n *     //     f1: [stats for file1],\n *     //     f2: [stats for file2],\n *     //     f3: [stats for file3]\n *     // }\n * });\n */\nfunction mapValues(obj, iteratee, callback) {\n    return mapValuesLimit$1(obj, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs only a single async operation at a time.\n *\n * @name mapValuesSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapValuesSeries(obj, iteratee, callback) {\n    return mapValuesLimit$1(obj, 1, iteratee, callback)\n}\n\n/**\n * Caches the results of an async function. When creating a hash to store\n * function results against, the callback is omitted from the hash and an\n * optional hash function can be used.\n *\n * **Note: if the async function errs, the result will not be cached and\n * subsequent calls will call the wrapped function.**\n *\n * If no hash function is specified, the first argument is used as a hash key,\n * which may work reasonably if it is a string or a data type that converts to a\n * distinct string. Note that objects and arrays will not behave reasonably.\n * Neither will cases where the other arguments are significant. In such cases,\n * specify your own hash function.\n *\n * The cache of results is exposed as the `memo` property of the function\n * returned by `memoize`.\n *\n * @name memoize\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function to proxy and cache results from.\n * @param {Function} hasher - An optional function for generating a custom hash\n * for storing results. It has all the arguments applied to it apart from the\n * callback, and must be synchronous.\n * @returns {AsyncFunction} a memoized version of `fn`\n * @example\n *\n * var slow_fn = function(name, callback) {\n *     // do something\n *     callback(null, result);\n * };\n * var fn = async.memoize(slow_fn);\n *\n * // fn can now be used as if it were slow_fn\n * fn('some name', function() {\n *     // callback\n * });\n */\nfunction memoize(fn, hasher = v => v) {\n    var memo = Object.create(null);\n    var queues = Object.create(null);\n    var _fn = wrapAsync(fn);\n    var memoized = initialParams((args, callback) => {\n        var key = hasher(...args);\n        if (key in memo) {\n            setImmediate$1(() => callback(null, ...memo[key]));\n        } else if (key in queues) {\n            queues[key].push(callback);\n        } else {\n            queues[key] = [callback];\n            _fn(...args, (err, ...resultArgs) => {\n                // #1465 don't memoize if an error occurred\n                if (!err) {\n                    memo[key] = resultArgs;\n                }\n                var q = queues[key];\n                delete queues[key];\n                for (var i = 0, l = q.length; i < l; i++) {\n                    q[i](err, ...resultArgs);\n                }\n            });\n        }\n    });\n    memoized.memo = memo;\n    memoized.unmemoized = fn;\n    return memoized;\n}\n\n/**\n * Calls `callback` on a later loop around the event loop. In Node.js this just\n * calls `process.nextTick`.  In the browser it will use `setImmediate` if\n * available, otherwise `setTimeout(callback, 0)`, which means other higher\n * priority events may precede the execution of `callback`.\n *\n * This is used internally for browser-compatibility purposes.\n *\n * @name nextTick\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.setImmediate]{@link module:Utils.setImmediate}\n * @category Util\n * @param {Function} callback - The function to call on a later loop around\n * the event loop. Invoked with (args...).\n * @param {...*} args... - any number of additional arguments to pass to the\n * callback on the next tick.\n * @example\n *\n * var call_order = [];\n * async.nextTick(function() {\n *     call_order.push('two');\n *     // call_order now equals ['one','two']\n * });\n * call_order.push('one');\n *\n * async.setImmediate(function (a, b, c) {\n *     // a, b, and c equal 1, 2, and 3\n * }, 1, 2, 3);\n */\nvar _defer$1;\n\nif (hasNextTick) {\n    _defer$1 = process.nextTick;\n} else if (hasSetImmediate) {\n    _defer$1 = setImmediate;\n} else {\n    _defer$1 = fallback;\n}\n\nvar nextTick = wrap(_defer$1);\n\nvar _parallel = awaitify((eachfn, tasks, callback) => {\n    var results = isArrayLike(tasks) ? [] : {};\n\n    eachfn(tasks, (task, key, taskCb) => {\n        wrapAsync(task)((err, ...result) => {\n            if (result.length < 2) {\n                [result] = result;\n            }\n            results[key] = result;\n            taskCb(err);\n        });\n    }, err => callback(err, results));\n}, 3);\n\n/**\n * Run the `tasks` collection of functions in parallel, without waiting until\n * the previous function has completed. If any of the functions pass an error to\n * its callback, the main `callback` is immediately called with the value of the\n * error. Once the `tasks` have completed, the results are passed to the final\n * `callback` as an array.\n *\n * **Note:** `parallel` is about kicking-off I/O tasks in parallel, not about\n * parallel execution of code.  If your tasks do not use any timers or perform\n * any I/O, they will actually be executed in series.  Any synchronous setup\n * sections for each task will happen one after the other.  JavaScript remains\n * single-threaded.\n *\n * **Hint:** Use [`reflect`]{@link module:Utils.reflect} to continue the\n * execution of other tasks when a task fails.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n * results from {@link async.parallel}.\n *\n * @name parallel\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n *\n * @example\n * async.parallel([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // the results array will equal ['one','two'] even though\n *     // the second function had a shorter timeout.\n * });\n *\n * // an example using an object instead of an array\n * async.parallel({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equals to: {one: 1, two: 2}\n * });\n */\nfunction parallel(tasks, callback) {\n    return _parallel(eachOf$1, tasks, callback);\n}\n\n/**\n * The same as [`parallel`]{@link module:ControlFlow.parallel} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name parallelLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.parallel]{@link module:ControlFlow.parallel}\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n */\nfunction parallelLimit(tasks, limit, callback) {\n    return _parallel(eachOfLimit(limit), tasks, callback);\n}\n\n/**\n * A queue of tasks for the worker function to complete.\n * @typedef {Iterable} QueueObject\n * @memberOf module:ControlFlow\n * @property {Function} length - a function returning the number of items\n * waiting to be processed. Invoke with `queue.length()`.\n * @property {boolean} started - a boolean indicating whether or not any\n * items have been pushed and processed by the queue.\n * @property {Function} running - a function returning the number of items\n * currently being processed. Invoke with `queue.running()`.\n * @property {Function} workersList - a function returning the array of items\n * currently being processed. Invoke with `queue.workersList()`.\n * @property {Function} idle - a function returning false if there are items\n * waiting or being processed, or true if not. Invoke with `queue.idle()`.\n * @property {number} concurrency - an integer for determining how many `worker`\n * functions should be run in parallel. This property can be changed after a\n * `queue` is created to alter the concurrency on-the-fly.\n * @property {number} payload - an integer that specifies how many items are\n * passed to the worker function at a time. only applies if this is a\n * [cargo]{@link module:ControlFlow.cargo} object\n * @property {AsyncFunction} push - add a new task to the `queue`. Calls `callback`\n * once the `worker` has finished processing the task. Instead of a single task,\n * a `tasks` array can be submitted. The respective callback is used for every\n * task in the list. Invoke with `queue.push(task, [callback])`,\n * @property {AsyncFunction} unshift - add a new task to the front of the `queue`.\n * Invoke with `queue.unshift(task, [callback])`.\n * @property {AsyncFunction} pushAsync - the same as `q.push`, except this returns\n * a promise that rejects if an error occurs.\n * @property {AsyncFunction} unshirtAsync - the same as `q.unshift`, except this returns\n * a promise that rejects if an error occurs.\n * @property {Function} remove - remove items from the queue that match a test\n * function.  The test function will be passed an object with a `data` property,\n * and a `priority` property, if this is a\n * [priorityQueue]{@link module:ControlFlow.priorityQueue} object.\n * Invoked with `queue.remove(testFn)`, where `testFn` is of the form\n * `function ({data, priority}) {}` and returns a Boolean.\n * @property {Function} saturated - a function that sets a callback that is\n * called when the number of running workers hits the `concurrency` limit, and\n * further tasks will be queued.  If the callback is omitted, `q.saturated()`\n * returns a promise for the next occurrence.\n * @property {Function} unsaturated - a function that sets a callback that is\n * called when the number of running workers is less than the `concurrency` &\n * `buffer` limits, and further tasks will not be queued. If the callback is\n * omitted, `q.unsaturated()` returns a promise for the next occurrence.\n * @property {number} buffer - A minimum threshold buffer in order to say that\n * the `queue` is `unsaturated`.\n * @property {Function} empty - a function that sets a callback that is called\n * when the last item from the `queue` is given to a `worker`. If the callback\n * is omitted, `q.empty()` returns a promise for the next occurrence.\n * @property {Function} drain - a function that sets a callback that is called\n * when the last item from the `queue` has returned from the `worker`. If the\n * callback is omitted, `q.drain()` returns a promise for the next occurrence.\n * @property {Function} error - a function that sets a callback that is called\n * when a task errors. Has the signature `function(error, task)`. If the\n * callback is omitted, `error()` returns a promise that rejects on the next\n * error.\n * @property {boolean} paused - a boolean for determining whether the queue is\n * in a paused state.\n * @property {Function} pause - a function that pauses the processing of tasks\n * until `resume()` is called. Invoke with `queue.pause()`.\n * @property {Function} resume - a function that resumes the processing of\n * queued tasks when the queue is paused. Invoke with `queue.resume()`.\n * @property {Function} kill - a function that removes the `drain` callback and\n * empties remaining tasks from the queue forcing it to go idle. No more tasks\n * should be pushed to the queue after calling this function. Invoke with `queue.kill()`.\n *\n * @example\n * const q = aync.queue(worker, 2)\n * q.push(item1)\n * q.push(item2)\n * q.push(item3)\n * // queues are iterable, spread into an array to inspect\n * const items = [...q] // [item1, item2, item3]\n * // or use for of\n * for (let item of q) {\n *     console.log(item)\n * }\n *\n * q.drain(() => {\n *     console.log('all done')\n * })\n * // or\n * await q.drain()\n */\n\n/**\n * Creates a `queue` object with the specified `concurrency`. Tasks added to the\n * `queue` are processed in parallel (up to the `concurrency` limit). If all\n * `worker`s are in progress, the task is queued until one becomes available.\n * Once a `worker` completes a `task`, that `task`'s callback is called.\n *\n * @name queue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`. Invoked with (task, callback).\n * @param {number} [concurrency=1] - An `integer` for determining how many\n * `worker` functions should be run in parallel.  If omitted, the concurrency\n * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A queue object to manage the tasks. Callbacks can be\n * attached as certain properties to listen for specific events during the\n * lifecycle of the queue.\n * @example\n *\n * // create a queue object with concurrency 2\n * var q = async.queue(function(task, callback) {\n *     console.log('hello ' + task.name);\n *     callback();\n * }, 2);\n *\n * // assign a callback\n * q.drain(function() {\n *     console.log('all items have been processed');\n * });\n * // or await the end\n * await q.drain()\n *\n * // assign an error callback\n * q.error(function(err, task) {\n *     console.error('task experienced an error');\n * });\n *\n * // add some items to the queue\n * q.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * // callback is optional\n * q.push({name: 'bar'});\n *\n * // add some items to the queue (batch-wise)\n * q.push([{name: 'baz'},{name: 'bay'},{name: 'bax'}], function(err) {\n *     console.log('finished processing item');\n * });\n *\n * // add some items to the front of the queue\n * q.unshift({name: 'bar'}, function (err) {\n *     console.log('finished processing bar');\n * });\n */\nfunction queue$1 (worker, concurrency) {\n    var _worker = wrapAsync(worker);\n    return queue((items, cb) => {\n        _worker(items[0], cb);\n    }, concurrency, 1);\n}\n\n// Binary min-heap implementation used for priority queue.\n// Implementation is stable, i.e. push time is considered for equal priorities\nclass Heap {\n    constructor() {\n        this.heap = [];\n        this.pushCount = Number.MIN_SAFE_INTEGER;\n    }\n\n    get length() {\n        return this.heap.length;\n    }\n\n    empty () {\n        this.heap = [];\n        return this;\n    }\n\n    percUp(index) {\n        let p;\n\n        while (index > 0 && smaller(this.heap[index], this.heap[p=parent(index)])) {\n            let t = this.heap[index];\n            this.heap[index] = this.heap[p];\n            this.heap[p] = t;\n\n            index = p;\n        }\n    }\n\n    percDown(index) {\n        let l;\n\n        while ((l=leftChi(index)) < this.heap.length) {\n            if (l+1 < this.heap.length && smaller(this.heap[l+1], this.heap[l])) {\n                l = l+1;\n            }\n\n            if (smaller(this.heap[index], this.heap[l])) {\n                break;\n            }\n\n            let t = this.heap[index];\n            this.heap[index] = this.heap[l];\n            this.heap[l] = t;\n\n            index = l;\n        }\n    }\n\n    push(node) {\n        node.pushCount = ++this.pushCount;\n        this.heap.push(node);\n        this.percUp(this.heap.length-1);\n    }\n\n    unshift(node) {\n        return this.heap.push(node);\n    }\n\n    shift() {\n        let [top] = this.heap;\n\n        this.heap[0] = this.heap[this.heap.length-1];\n        this.heap.pop();\n        this.percDown(0);\n\n        return top;\n    }\n\n    toArray() {\n        return [...this];\n    }\n\n    *[Symbol.iterator] () {\n        for (let i = 0; i < this.heap.length; i++) {\n            yield this.heap[i].data;\n        }\n    }\n\n    remove (testFn) {\n        let j = 0;\n        for (let i = 0; i < this.heap.length; i++) {\n            if (!testFn(this.heap[i])) {\n                this.heap[j] = this.heap[i];\n                j++;\n            }\n        }\n\n        this.heap.splice(j);\n\n        for (let i = parent(this.heap.length-1); i >= 0; i--) {\n            this.percDown(i);\n        }\n\n        return this;\n    }\n}\n\nfunction leftChi(i) {\n    return (i<<1)+1;\n}\n\nfunction parent(i) {\n    return ((i+1)>>1)-1;\n}\n\nfunction smaller(x, y) {\n    if (x.priority !== y.priority) {\n        return x.priority < y.priority;\n    }\n    else {\n        return x.pushCount < y.pushCount;\n    }\n}\n\n/**\n * The same as [async.queue]{@link module:ControlFlow.queue} only tasks are assigned a priority and\n * completed in ascending priority order.\n *\n * @name priorityQueue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`.\n * Invoked with (task, callback).\n * @param {number} concurrency - An `integer` for determining how many `worker`\n * functions should be run in parallel.  If omitted, the concurrency defaults to\n * `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A priorityQueue object to manage the tasks. There are two\n * differences between `queue` and `priorityQueue` objects:\n * * `push(task, priority, [callback])` - `priority` should be a number. If an\n *   array of `tasks` is given, all tasks will be assigned the same priority.\n * * The `unshift` method was removed.\n */\nfunction priorityQueue(worker, concurrency) {\n    // Start with a normal queue\n    var q = queue$1(worker, concurrency);\n\n    q._tasks = new Heap();\n\n    // Override push to accept second parameter representing priority\n    q.push = function(data, priority = 0, callback = () => {}) {\n        if (typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n        if (!Array.isArray(data)) {\n            data = [data];\n        }\n        if (data.length === 0 && q.idle()) {\n            // call drain immediately if there are no tasks\n            return setImmediate$1(() => q.drain());\n        }\n\n        for (var i = 0, l = data.length; i < l; i++) {\n            var item = {\n                data: data[i],\n                priority,\n                callback\n            };\n\n            q._tasks.push(item);\n        }\n\n        setImmediate$1(q.process);\n    };\n\n    // Remove unshift function\n    delete q.unshift;\n\n    return q;\n}\n\n/**\n * Runs the `tasks` array of functions in parallel, without waiting until the\n * previous function has completed. Once any of the `tasks` complete or pass an\n * error to its callback, the main `callback` is immediately called. It's\n * equivalent to `Promise.race()`.\n *\n * @name race\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array containing [async functions]{@link AsyncFunction}\n * to run. Each function can complete with an optional `result` value.\n * @param {Function} callback - A callback to run once any of the functions have\n * completed. This function gets an error or result from the first function that\n * completed. Invoked with (err, result).\n * @returns undefined\n * @example\n *\n * async.race([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // main callback\n * function(err, result) {\n *     // the result will be equal to 'two' as it finishes earlier\n * });\n */\nfunction race(tasks, callback) {\n    callback = once(callback);\n    if (!Array.isArray(tasks)) return callback(new TypeError('First argument to race must be an array of functions'));\n    if (!tasks.length) return callback();\n    for (var i = 0, l = tasks.length; i < l; i++) {\n        wrapAsync(tasks[i])(callback);\n    }\n}\n\nvar race$1 = awaitify(race, 2);\n\n/**\n * Same as [`reduce`]{@link module:Collections.reduce}, only operates on `array` in reverse order.\n *\n * @name reduceRight\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reduce]{@link module:Collections.reduce}\n * @alias foldr\n * @category Collection\n * @param {Array} array - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee complete with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction reduceRight (array, memo, iteratee, callback) {\n    var reversed = [...array].reverse();\n    return reduce$1(reversed, memo, iteratee, callback);\n}\n\n/**\n * Wraps the async function in another function that always completes with a\n * result object, even when it errors.\n *\n * The result object has either the property `error` or `value`.\n *\n * @name reflect\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function you want to wrap\n * @returns {Function} - A function that always passes null to it's callback as\n * the error. The second argument to the callback will be an `object` with\n * either an `error` or a `value` property.\n * @example\n *\n * async.parallel([\n *     async.reflect(function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff but error ...\n *         callback('bad stuff happened');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     })\n * ],\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = 'bad stuff happened'\n *     // results[2].value = 'two'\n * });\n */\nfunction reflect(fn) {\n    var _fn = wrapAsync(fn);\n    return initialParams(function reflectOn(args, reflectCallback) {\n        args.push((error, ...cbArgs) => {\n            let retVal = {};\n            if (error) {\n                retVal.error = error;\n            }\n            if (cbArgs.length > 0){\n                var value = cbArgs;\n                if (cbArgs.length <= 1) {\n                    [value] = cbArgs;\n                }\n                retVal.value = value;\n            }\n            reflectCallback(null, retVal);\n        });\n\n        return _fn.apply(this, args);\n    });\n}\n\n/**\n * A helper function that wraps an array or an object of functions with `reflect`.\n *\n * @name reflectAll\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.reflect]{@link module:Utils.reflect}\n * @category Util\n * @param {Array|Object|Iterable} tasks - The collection of\n * [async functions]{@link AsyncFunction} to wrap in `async.reflect`.\n * @returns {Array} Returns an array of async functions, each wrapped in\n * `async.reflect`\n * @example\n *\n * let tasks = [\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         // do some more stuff but error ...\n *         callback(new Error('bad stuff happened'));\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ];\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = Error('bad stuff happened')\n *     // results[2].value = 'two'\n * });\n *\n * // an example using an object instead of an array\n * let tasks = {\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         callback('two');\n *     },\n *     three: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'three');\n *         }, 100);\n *     }\n * };\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results.one.value = 'one'\n *     // results.two.error = 'two'\n *     // results.three.value = 'three'\n * });\n */\nfunction reflectAll(tasks) {\n    var results;\n    if (Array.isArray(tasks)) {\n        results = tasks.map(reflect);\n    } else {\n        results = {};\n        Object.keys(tasks).forEach(key => {\n            results[key] = reflect.call(this, tasks[key]);\n        });\n    }\n    return results;\n}\n\nfunction reject(eachfn, arr, _iteratee, callback) {\n    const iteratee = wrapAsync(_iteratee);\n    return _filter(eachfn, arr, (value, cb) => {\n        iteratee(value, (err, v) => {\n            cb(err, !v);\n        });\n    }, callback);\n}\n\n/**\n * The opposite of [`filter`]{@link module:Collections.filter}. Removes values that pass an `async` truth test.\n *\n * @name reject\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.reject(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, results) {\n *     // results now equals an array of missing files\n *     createFiles(results);\n * });\n */\nfunction reject$1 (coll, iteratee, callback) {\n    return reject(eachOf$1, coll, iteratee, callback)\n}\nvar reject$2 = awaitify(reject$1, 3);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name rejectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction rejectLimit (coll, limit, iteratee, callback) {\n    return reject(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar rejectLimit$1 = awaitify(rejectLimit, 4);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs only a single async operation at a time.\n *\n * @name rejectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction rejectSeries (coll, iteratee, callback) {\n    return reject(eachOfSeries$1, coll, iteratee, callback)\n}\nvar rejectSeries$1 = awaitify(rejectSeries, 3);\n\nfunction constant$1(value) {\n    return function () {\n        return value;\n    }\n}\n\n/**\n * Attempts to get a successful response from `task` no more than `times` times\n * before returning an error. If the task is successful, the `callback` will be\n * passed the result of the successful task. If all attempts fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name retry\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @see [async.retryable]{@link module:ControlFlow.retryable}\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - Can be either an\n * object with `times` and `interval` or a number.\n * * `times` - The number of attempts to make before giving up.  The default\n *   is `5`.\n * * `interval` - The time to wait between retries, in milliseconds.  The\n *   default is `0`. The interval may also be specified as a function of the\n *   retry count (see example).\n * * `errorFilter` - An optional synchronous function that is invoked on\n *   erroneous result. If it returns `true` the retry attempts will continue;\n *   if the function returns `false` the retry flow is aborted with the current\n *   attempt's error and result being returned to the final callback.\n *   Invoked with (err).\n * * If `opts` is a number, the number specifies the number of times to retry,\n *   with the default interval of `0`.\n * @param {AsyncFunction} task - An async function to retry.\n * Invoked with (callback).\n * @param {Function} [callback] - An optional callback which is called when the\n * task has succeeded, or after the final failed attempt. It receives the `err`\n * and `result` arguments of the last attempt at completing the `task`. Invoked\n * with (err, results).\n * @returns {Promise} a promise if no callback provided\n *\n * @example\n *\n * // The `retry` function can be used as a stand-alone control flow by passing\n * // a callback, as shown below:\n *\n * // try calling apiMethod 3 times\n * async.retry(3, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 3 times, waiting 200 ms between each retry\n * async.retry({times: 3, interval: 200}, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 10 times with exponential backoff\n * // (i.e. intervals of 100, 200, 400, 800, 1600, ... milliseconds)\n * async.retry({\n *   times: 10,\n *   interval: function(retryCount) {\n *     return 50 * Math.pow(2, retryCount);\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod the default 5 times no delay between each retry\n * async.retry(apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod only when error condition satisfies, all other\n * // errors will abort the retry control flow and return to final callback\n * async.retry({\n *   errorFilter: function(err) {\n *     return err.message === 'Temporary error'; // only retry on a specific error\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // to retry individual methods that are not as reliable within other\n * // control flow functions, use the `retryable` wrapper:\n * async.auto({\n *     users: api.getUsers.bind(api),\n *     payments: async.retryable(3, api.getPayments.bind(api))\n * }, function(err, results) {\n *     // do something with the results\n * });\n *\n */\nconst DEFAULT_TIMES = 5;\nconst DEFAULT_INTERVAL = 0;\n\nfunction retry(opts, task, callback) {\n    var options = {\n        times: DEFAULT_TIMES,\n        intervalFunc: constant$1(DEFAULT_INTERVAL)\n    };\n\n    if (arguments.length < 3 && typeof opts === 'function') {\n        callback = task || promiseCallback();\n        task = opts;\n    } else {\n        parseTimes(options, opts);\n        callback = callback || promiseCallback();\n    }\n\n    if (typeof task !== 'function') {\n        throw new Error(\"Invalid arguments for async.retry\");\n    }\n\n    var _task = wrapAsync(task);\n\n    var attempt = 1;\n    function retryAttempt() {\n        _task((err, ...args) => {\n            if (err === false) return\n            if (err && attempt++ < options.times &&\n                (typeof options.errorFilter != 'function' ||\n                    options.errorFilter(err))) {\n                setTimeout(retryAttempt, options.intervalFunc(attempt - 1));\n            } else {\n                callback(err, ...args);\n            }\n        });\n    }\n\n    retryAttempt();\n    return callback[PROMISE_SYMBOL]\n}\n\nfunction parseTimes(acc, t) {\n    if (typeof t === 'object') {\n        acc.times = +t.times || DEFAULT_TIMES;\n\n        acc.intervalFunc = typeof t.interval === 'function' ?\n            t.interval :\n            constant$1(+t.interval || DEFAULT_INTERVAL);\n\n        acc.errorFilter = t.errorFilter;\n    } else if (typeof t === 'number' || typeof t === 'string') {\n        acc.times = +t || DEFAULT_TIMES;\n    } else {\n        throw new Error(\"Invalid arguments for async.retry\");\n    }\n}\n\n/**\n * A close relative of [`retry`]{@link module:ControlFlow.retry}.  This method\n * wraps a task and makes it retryable, rather than immediately calling it\n * with retries.\n *\n * @name retryable\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.retry]{@link module:ControlFlow.retry}\n * @category Control Flow\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - optional\n * options, exactly the same as from `retry`, except for a `opts.arity` that\n * is the arity of the `task` function, defaulting to `task.length`\n * @param {AsyncFunction} task - the asynchronous function to wrap.\n * This function will be passed any arguments passed to the returned wrapper.\n * Invoked with (...args, callback).\n * @returns {AsyncFunction} The wrapped function, which when invoked, will\n * retry on an error, based on the parameters specified in `opts`.\n * This function will accept the same parameters as `task`.\n * @example\n *\n * async.auto({\n *     dep1: async.retryable(3, getFromFlakyService),\n *     process: [\"dep1\", async.retryable(3, function (results, cb) {\n *         maybeProcessData(results.dep1, cb);\n *     })]\n * }, callback);\n */\nfunction retryable (opts, task) {\n    if (!task) {\n        task = opts;\n        opts = null;\n    }\n    let arity = (opts && opts.arity) || task.length;\n    if (isAsync(task)) {\n        arity += 1;\n    }\n    var _task = wrapAsync(task);\n    return initialParams((args, callback) => {\n        if (args.length < arity - 1 || callback == null) {\n            args.push(callback);\n            callback = promiseCallback();\n        }\n        function taskFn(cb) {\n            _task(...args, cb);\n        }\n\n        if (opts) retry(opts, taskFn, callback);\n        else retry(taskFn, callback);\n\n        return callback[PROMISE_SYMBOL]\n    });\n}\n\n/**\n * Run the functions in the `tasks` collection in series, each one running once\n * the previous function has completed. If any functions in the series pass an\n * error to its callback, no more functions are run, and `callback` is\n * immediately called with the value of the error. Otherwise, `callback`\n * receives an array of results when `tasks` have completed.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function, and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n *  results from {@link async.series}.\n *\n * **Note** that while many implementations preserve the order of object\n * properties, the [ECMAScript Language Specification](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6)\n * explicitly states that\n *\n * > The mechanics and order of enumerating the properties is not specified.\n *\n * So if you rely on the order in which your series of functions are executed,\n * and want this to work on all platforms, consider using an array.\n *\n * @name series\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection containing\n * [async functions]{@link AsyncFunction} to run in series.\n * Each function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This function gets a results array (or object)\n * containing all the result arguments passed to the `task` callbacks. Invoked\n * with (err, result).\n * @return {Promise} a promise, if no callback is passed\n * @example\n * async.series([\n *     function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     },\n *     function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // results is now equal to ['one', 'two']\n * });\n *\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback){\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equal to: {one: 1, two: 2}\n * });\n */\nfunction series(tasks, callback) {\n    return _parallel(eachOfSeries$1, tasks, callback);\n}\n\n/**\n * Returns `true` if at least one element in the `coll` satisfies an async test.\n * If any iteratee call returns `true`, the main `callback` is immediately\n * called.\n *\n * @name some\n * @static\n * @memberOf module:Collections\n * @method\n * @alias any\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * async.some(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // if result is true then at least one of the files exists\n * });\n */\nfunction some(coll, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOf$1, coll, iteratee, callback)\n}\nvar some$1 = awaitify(some, 3);\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs a maximum of `limit` async operations at a time.\n *\n * @name someLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anyLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction someLimit(coll, limit, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar someLimit$1 = awaitify(someLimit, 4);\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs only a single async operation at a time.\n *\n * @name someSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anySeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in series.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction someSeries(coll, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOfSeries$1, coll, iteratee, callback)\n}\nvar someSeries$1 = awaitify(someSeries, 3);\n\n/**\n * Sorts a list by the results of running each `coll` value through an async\n * `iteratee`.\n *\n * @name sortBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a value to use as the sort criteria as\n * its `result`.\n * Invoked with (item, callback).\n * @param {Function} callback - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is the items\n * from the original `coll` sorted by the values returned by the `iteratee`\n * calls. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback passed\n * @example\n *\n * async.sortBy(['file1','file2','file3'], function(file, callback) {\n *     fs.stat(file, function(err, stats) {\n *         callback(err, stats.mtime);\n *     });\n * }, function(err, results) {\n *     // results is now the original array of files sorted by\n *     // modified date\n * });\n *\n * // By modifying the callback parameter the\n * // sorting order can be influenced:\n *\n * // ascending order\n * async.sortBy([1,9,3,5], function(x, callback) {\n *     callback(null, x);\n * }, function(err,result) {\n *     // result callback\n * });\n *\n * // descending order\n * async.sortBy([1,9,3,5], function(x, callback) {\n *     callback(null, x*-1);    //<- x*-1 instead of x, turns the order around\n * }, function(err,result) {\n *     // result callback\n * });\n */\nfunction sortBy (coll, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return map$1(coll, (x, iterCb) => {\n        _iteratee(x, (err, criteria) => {\n            if (err) return iterCb(err);\n            iterCb(err, {value: x, criteria});\n        });\n    }, (err, results) => {\n        if (err) return callback(err);\n        callback(null, results.sort(comparator).map(v => v.value));\n    });\n\n    function comparator(left, right) {\n        var a = left.criteria, b = right.criteria;\n        return a < b ? -1 : a > b ? 1 : 0;\n    }\n}\nvar sortBy$1 = awaitify(sortBy, 3);\n\n/**\n * Sets a time limit on an asynchronous function. If the function does not call\n * its callback within the specified milliseconds, it will be called with a\n * timeout error. The code property for the error object will be `'ETIMEDOUT'`.\n *\n * @name timeout\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} asyncFn - The async function to limit in time.\n * @param {number} milliseconds - The specified time limit.\n * @param {*} [info] - Any variable you want attached (`string`, `object`, etc)\n * to timeout Error for more information..\n * @returns {AsyncFunction} Returns a wrapped function that can be used with any\n * of the control flow functions.\n * Invoke this function with the same parameters as you would `asyncFunc`.\n * @example\n *\n * function myFunction(foo, callback) {\n *     doAsyncTask(foo, function(err, data) {\n *         // handle errors\n *         if (err) return callback(err);\n *\n *         // do some stuff ...\n *\n *         // return processed data\n *         return callback(null, data);\n *     });\n * }\n *\n * var wrapped = async.timeout(myFunction, 1000);\n *\n * // call `wrapped` as you would `myFunction`\n * wrapped({ bar: 'bar' }, function(err, data) {\n *     // if `myFunction` takes < 1000 ms to execute, `err`\n *     // and `data` will have their expected values\n *\n *     // else `err` will be an Error with the code 'ETIMEDOUT'\n * });\n */\nfunction timeout(asyncFn, milliseconds, info) {\n    var fn = wrapAsync(asyncFn);\n\n    return initialParams((args, callback) => {\n        var timedOut = false;\n        var timer;\n\n        function timeoutCallback() {\n            var name = asyncFn.name || 'anonymous';\n            var error  = new Error('Callback function \"' + name + '\" timed out.');\n            error.code = 'ETIMEDOUT';\n            if (info) {\n                error.info = info;\n            }\n            timedOut = true;\n            callback(error);\n        }\n\n        args.push((...cbArgs) => {\n            if (!timedOut) {\n                callback(...cbArgs);\n                clearTimeout(timer);\n            }\n        });\n\n        // setup timer and call original function\n        timer = setTimeout(timeoutCallback, milliseconds);\n        fn(...args);\n    });\n}\n\nfunction range(size) {\n    var result = Array(size);\n    while (size--) {\n        result[size] = size;\n    }\n    return result;\n}\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name timesLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} count - The number of times to run the function.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see [async.map]{@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n */\nfunction timesLimit(count, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(range(count), limit, _iteratee, callback);\n}\n\n/**\n * Calls the `iteratee` function `n` times, and accumulates results in the same\n * manner you would use with [map]{@link module:Collections.map}.\n *\n * @name times\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n * @example\n *\n * // Pretend this is some complicated async factory\n * var createUser = function(id, callback) {\n *     callback(null, {\n *         id: 'user' + id\n *     });\n * };\n *\n * // generate 5 users\n * async.times(5, function(n, next) {\n *     createUser(n, function(err, user) {\n *         next(err, user);\n *     });\n * }, function(err, users) {\n *     // we should now have 5 users\n * });\n */\nfunction times (n, iteratee, callback) {\n    return timesLimit(n, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs only a single async operation at a time.\n *\n * @name timesSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n */\nfunction timesSeries (n, iteratee, callback) {\n    return timesLimit(n, 1, iteratee, callback)\n}\n\n/**\n * A relative of `reduce`.  Takes an Object or Array, and iterates over each\n * element in parallel, each step potentially mutating an `accumulator` value.\n * The type of the accumulator defaults to the type of collection passed in.\n *\n * @name transform\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {*} [accumulator] - The initial state of the transform.  If omitted,\n * it will default to an empty Object or Array, depending on the type of `coll`\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * collection that potentially modifies the accumulator.\n * Invoked with (accumulator, item, key, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the transformed accumulator.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * async.transform([1,2,3], function(acc, item, index, callback) {\n *     // pointless async:\n *     process.nextTick(function() {\n *         acc[index] = item * 2\n *         callback(null)\n *     });\n * }, function(err, result) {\n *     // result is now equal to [2, 4, 6]\n * });\n *\n * @example\n *\n * async.transform({a: 1, b: 2, c: 3}, function (obj, val, key, callback) {\n *     setImmediate(function () {\n *         obj[key] = val * 2;\n *         callback();\n *     })\n * }, function (err, result) {\n *     // result is equal to {a: 2, b: 4, c: 6}\n * })\n */\nfunction transform (coll, accumulator, iteratee, callback) {\n    if (arguments.length <= 3 && typeof accumulator === 'function') {\n        callback = iteratee;\n        iteratee = accumulator;\n        accumulator = Array.isArray(coll) ? [] : {};\n    }\n    callback = once(callback || promiseCallback());\n    var _iteratee = wrapAsync(iteratee);\n\n    eachOf$1(coll, (v, k, cb) => {\n        _iteratee(accumulator, v, k, cb);\n    }, err => callback(err, accumulator));\n    return callback[PROMISE_SYMBOL]\n}\n\n/**\n * It runs each task in series but stops whenever any of the functions were\n * successful. If one of the tasks were successful, the `callback` will be\n * passed the result of the successful task. If all tasks fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name tryEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection containing functions to\n * run, each function is passed a `callback(err, result)` it must call on\n * completion with an error `err` (which can be `null`) and an optional `result`\n * value.\n * @param {Function} [callback] - An optional callback which is called when one\n * of the tasks has succeeded, or all have failed. It receives the `err` and\n * `result` arguments of the last attempt at completing the `task`. Invoked with\n * (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n * async.tryEach([\n *     function getDataFromFirstWebsite(callback) {\n *         // Try getting the data from the first website\n *         callback(err, data);\n *     },\n *     function getDataFromSecondWebsite(callback) {\n *         // First website failed,\n *         // Try getting the data from the backup website\n *         callback(err, data);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     Now do something with the data.\n * });\n *\n */\nfunction tryEach(tasks, callback) {\n    var error = null;\n    var result;\n    return eachSeries$1(tasks, (task, taskCb) => {\n        wrapAsync(task)((err, ...args) => {\n            if (err === false) return taskCb(err);\n\n            if (args.length < 2) {\n                [result] = args;\n            } else {\n                result = args;\n            }\n            error = err;\n            taskCb(err ? null : {});\n        });\n    }, () => callback(error, result));\n}\n\nvar tryEach$1 = awaitify(tryEach);\n\n/**\n * Undoes a [memoize]{@link module:Utils.memoize}d function, reverting it to the original,\n * unmemoized form. Handy for testing.\n *\n * @name unmemoize\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.memoize]{@link module:Utils.memoize}\n * @category Util\n * @param {AsyncFunction} fn - the memoized function\n * @returns {AsyncFunction} a function that calls the original unmemoized function\n */\nfunction unmemoize(fn) {\n    return (...args) => {\n        return (fn.unmemoized || fn)(...args);\n    };\n}\n\n/**\n * Repeatedly call `iteratee`, while `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs.\n *\n * @name whilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `iteratee`. Invoked with ().\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * var count = 0;\n * async.whilst(\n *     function test(cb) { cb(null, count < 5); },\n *     function iter(callback) {\n *         count++;\n *         setTimeout(function() {\n *             callback(null, count);\n *         }, 1000);\n *     },\n *     function (err, n) {\n *         // 5 seconds have passed, n = 5\n *     }\n * );\n */\nfunction whilst(test, iteratee, callback) {\n    callback = onlyOnce(callback);\n    var _fn = wrapAsync(iteratee);\n    var _test = wrapAsync(test);\n    var results = [];\n\n    function next(err, ...rest) {\n        if (err) return callback(err);\n        results = rest;\n        if (err === false) return;\n        _test(check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (err === false) return;\n        if (!truth) return callback(null, ...results);\n        _fn(next);\n    }\n\n    return _test(check);\n}\nvar whilst$1 = awaitify(whilst, 3);\n\n/**\n * Repeatedly call `iteratee` until `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs. `callback` will be passed an error and any\n * arguments passed to the final `iteratee`'s callback.\n *\n * The inverse of [whilst]{@link module:ControlFlow.whilst}.\n *\n * @name until\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `iteratee`. Invoked with (callback).\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if a callback is not passed\n *\n * @example\n * const results = []\n * let finished = false\n * async.until(function test(page, cb) {\n *     cb(null, finished)\n * }, function iter(next) {\n *     fetchPage(url, (err, body) => {\n *         if (err) return next(err)\n *         results = results.concat(body.objects)\n *         finished = !!body.next\n *         next(err)\n *     })\n * }, function done (err) {\n *     // all pages have been fetched\n * })\n */\nfunction until(test, iteratee, callback) {\n    const _test = wrapAsync(test);\n    return whilst$1((cb) => _test((err, truth) => cb (err, !truth)), iteratee, callback);\n}\n\n/**\n * Runs the `tasks` array of functions in series, each passing their results to\n * the next in the array. However, if any of the `tasks` pass an error to their\n * own callback, the next function is not executed, and the main `callback` is\n * immediately called with the error.\n *\n * @name waterfall\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array of [async functions]{@link AsyncFunction}\n * to run.\n * Each function should complete with any number of `result` values.\n * The `result` values will be passed as arguments, in order, to the next task.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This will be passed the results of the last task's\n * callback. Invoked with (err, [results]).\n * @returns undefined\n * @example\n *\n * async.waterfall([\n *     function(callback) {\n *         callback(null, 'one', 'two');\n *     },\n *     function(arg1, arg2, callback) {\n *         // arg1 now equals 'one' and arg2 now equals 'two'\n *         callback(null, 'three');\n *     },\n *     function(arg1, callback) {\n *         // arg1 now equals 'three'\n *         callback(null, 'done');\n *     }\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n *\n * // Or, with named functions:\n * async.waterfall([\n *     myFirstFunction,\n *     mySecondFunction,\n *     myLastFunction,\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n * function myFirstFunction(callback) {\n *     callback(null, 'one', 'two');\n * }\n * function mySecondFunction(arg1, arg2, callback) {\n *     // arg1 now equals 'one' and arg2 now equals 'two'\n *     callback(null, 'three');\n * }\n * function myLastFunction(arg1, callback) {\n *     // arg1 now equals 'three'\n *     callback(null, 'done');\n * }\n */\nfunction waterfall (tasks, callback) {\n    callback = once(callback);\n    if (!Array.isArray(tasks)) return callback(new Error('First argument to waterfall must be an array of functions'));\n    if (!tasks.length) return callback();\n    var taskIndex = 0;\n\n    function nextTask(args) {\n        var task = wrapAsync(tasks[taskIndex++]);\n        task(...args, onlyOnce(next));\n    }\n\n    function next(err, ...args) {\n        if (err === false) return\n        if (err || taskIndex === tasks.length) {\n            return callback(err, ...args);\n        }\n        nextTask(args);\n    }\n\n    nextTask([]);\n}\n\nvar waterfall$1 = awaitify(waterfall);\n\n/**\n * An \"async function\" in the context of Async is an asynchronous function with\n * a variable number of parameters, with the final parameter being a callback.\n * (`function (arg1, arg2, ..., callback) {}`)\n * The final callback is of the form `callback(err, results...)`, which must be\n * called once the function is completed.  The callback should be called with a\n * Error as its first argument to signal that an error occurred.\n * Otherwise, if no error occurred, it should be called with `null` as the first\n * argument, and any additional `result` arguments that may apply, to signal\n * successful completion.\n * The callback must be called exactly once, ideally on a later tick of the\n * JavaScript event loop.\n *\n * This type of function is also referred to as a \"Node-style async function\",\n * or a \"continuation passing-style function\" (CPS). Most of the methods of this\n * library are themselves CPS/Node-style async functions, or functions that\n * return CPS/Node-style async functions.\n *\n * Wherever we accept a Node-style async function, we also directly accept an\n * [ES2017 `async` function]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function}.\n * In this case, the `async` function will not be passed a final callback\n * argument, and any thrown error will be used as the `err` argument of the\n * implicit callback, and the return value will be used as the `result` value.\n * (i.e. a `rejected` of the returned Promise becomes the `err` callback\n * argument, and a `resolved` value becomes the `result`.)\n *\n * Note, due to JavaScript limitations, we can only detect native `async`\n * functions and not transpilied implementations.\n * Your environment must have `async`/`await` support for this to work.\n * (e.g. Node > v7.6, or a recent version of a modern browser).\n * If you are using `async` functions through a transpiler (e.g. Babel), you\n * must still wrap the function with [asyncify]{@link module:Utils.asyncify},\n * because the `async function` will be compiled to an ordinary function that\n * returns a promise.\n *\n * @typedef {Function} AsyncFunction\n * @static\n */\n\nvar index = {\n    apply,\n    applyEach: applyEach$1,\n    applyEachSeries,\n    asyncify,\n    auto,\n    autoInject,\n    cargo,\n    cargoQueue: cargo$1,\n    compose,\n    concat: concat$1,\n    concatLimit: concatLimit$1,\n    concatSeries: concatSeries$1,\n    constant,\n    detect: detect$1,\n    detectLimit: detectLimit$1,\n    detectSeries: detectSeries$1,\n    dir,\n    doUntil,\n    doWhilst: doWhilst$1,\n    each,\n    eachLimit: eachLimit$2,\n    eachOf: eachOf$1,\n    eachOfLimit: eachOfLimit$2,\n    eachOfSeries: eachOfSeries$1,\n    eachSeries: eachSeries$1,\n    ensureAsync,\n    every: every$1,\n    everyLimit: everyLimit$1,\n    everySeries: everySeries$1,\n    filter: filter$1,\n    filterLimit: filterLimit$1,\n    filterSeries: filterSeries$1,\n    forever: forever$1,\n    groupBy,\n    groupByLimit: groupByLimit$1,\n    groupBySeries,\n    log,\n    map: map$1,\n    mapLimit: mapLimit$1,\n    mapSeries: mapSeries$1,\n    mapValues,\n    mapValuesLimit: mapValuesLimit$1,\n    mapValuesSeries,\n    memoize,\n    nextTick,\n    parallel,\n    parallelLimit,\n    priorityQueue,\n    queue: queue$1,\n    race: race$1,\n    reduce: reduce$1,\n    reduceRight,\n    reflect,\n    reflectAll,\n    reject: reject$2,\n    rejectLimit: rejectLimit$1,\n    rejectSeries: rejectSeries$1,\n    retry,\n    retryable,\n    seq,\n    series,\n    setImmediate: setImmediate$1,\n    some: some$1,\n    someLimit: someLimit$1,\n    someSeries: someSeries$1,\n    sortBy: sortBy$1,\n    timeout,\n    times,\n    timesLimit,\n    timesSeries,\n    transform,\n    tryEach: tryEach$1,\n    unmemoize,\n    until,\n    waterfall: waterfall$1,\n    whilst: whilst$1,\n\n    // aliases\n    all: every$1,\n    allLimit: everyLimit$1,\n    allSeries: everySeries$1,\n    any: some$1,\n    anyLimit: someLimit$1,\n    anySeries: someSeries$1,\n    find: detect$1,\n    findLimit: detectLimit$1,\n    findSeries: detectSeries$1,\n    flatMap: concat$1,\n    flatMapLimit: concatLimit$1,\n    flatMapSeries: concatSeries$1,\n    forEach: each,\n    forEachSeries: eachSeries$1,\n    forEachLimit: eachLimit$2,\n    forEachOf: eachOf$1,\n    forEachOfSeries: eachOfSeries$1,\n    forEachOfLimit: eachOfLimit$2,\n    inject: reduce$1,\n    foldl: reduce$1,\n    foldr: reduceRight,\n    select: filter$1,\n    selectLimit: filterLimit$1,\n    selectSeries: filterSeries$1,\n    wrapSync: asyncify,\n    during: whilst$1,\n    doDuring: doWhilst$1\n};\n\nexport default index;\nexport { apply, applyEach$1 as applyEach, applyEachSeries, asyncify, auto, autoInject, cargo, cargo$1 as cargoQueue, compose, concat$1 as concat, concatLimit$1 as concatLimit, concatSeries$1 as concatSeries, constant, detect$1 as detect, detectLimit$1 as detectLimit, detectSeries$1 as detectSeries, dir, doUntil, doWhilst$1 as doWhilst, each, eachLimit$2 as eachLimit, eachOf$1 as eachOf, eachOfLimit$2 as eachOfLimit, eachOfSeries$1 as eachOfSeries, eachSeries$1 as eachSeries, ensureAsync, every$1 as every, everyLimit$1 as everyLimit, everySeries$1 as everySeries, filter$1 as filter, filterLimit$1 as filterLimit, filterSeries$1 as filterSeries, forever$1 as forever, groupBy, groupByLimit$1 as groupByLimit, groupBySeries, log, map$1 as map, mapLimit$1 as mapLimit, mapSeries$1 as mapSeries, mapValues, mapValuesLimit$1 as mapValuesLimit, mapValuesSeries, memoize, nextTick, parallel, parallelLimit, priorityQueue, queue$1 as queue, race$1 as race, reduce$1 as reduce, reduceRight, reflect, reflectAll, reject$2 as reject, rejectLimit$1 as rejectLimit, rejectSeries$1 as rejectSeries, retry, retryable, seq, series, setImmediate$1 as setImmediate, some$1 as some, someLimit$1 as someLimit, someSeries$1 as someSeries, sortBy$1 as sortBy, timeout, times, timesLimit, timesSeries, transform, tryEach$1 as tryEach, unmemoize, until, waterfall$1 as waterfall, whilst$1 as whilst, every$1 as all, everyLimit$1 as allLimit, everySeries$1 as allSeries, some$1 as any, someLimit$1 as anyLimit, someSeries$1 as anySeries, detect$1 as find, detectLimit$1 as findLimit, detectSeries$1 as findSeries, concat$1 as flatMap, concatLimit$1 as flatMapLimit, concatSeries$1 as flatMapSeries, each as forEach, eachSeries$1 as forEachSeries, eachLimit$2 as forEachLimit, eachOf$1 as forEachOf, eachOfSeries$1 as forEachOfSeries, eachOfLimit$2 as forEachOfLimit, reduce$1 as inject, reduce$1 as foldl, reduceRight as foldr, filter$1 as select, filterLimit$1 as selectLimit, filterSeries$1 as selectSeries, asyncify as wrapSync, whilst$1 as during, doWhilst$1 as doDuring };\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","exports.pbkdf2 = require('./lib/async')\nexports.pbkdf2Sync = require('./lib/sync')\n","var checkParameters = require('./precondition')\nvar defaultEncoding = require('./default-encoding')\nvar sync = require('./sync')\nvar Buffer = require('safe-buffer').Buffer\n\nvar ZERO_BUF\nvar subtle = global.crypto && global.crypto.subtle\nvar toBrowser = {\n  'sha': 'SHA-1',\n  'sha-1': 'SHA-1',\n  'sha1': 'SHA-1',\n  'sha256': 'SHA-256',\n  'sha-256': 'SHA-256',\n  'sha384': 'SHA-384',\n  'sha-384': 'SHA-384',\n  'sha-512': 'SHA-512',\n  'sha512': 'SHA-512'\n}\nvar checks = []\nfunction checkNative (algo) {\n  if (global.process && !global.process.browser) {\n    return Promise.resolve(false)\n  }\n  if (!subtle || !subtle.importKey || !subtle.deriveBits) {\n    return Promise.resolve(false)\n  }\n  if (checks[algo] !== undefined) {\n    return checks[algo]\n  }\n  ZERO_BUF = ZERO_BUF || Buffer.alloc(8)\n  var prom = browserPbkdf2(ZERO_BUF, ZERO_BUF, 10, 128, algo)\n    .then(function () {\n      return true\n    }).catch(function () {\n      return false\n    })\n  checks[algo] = prom\n  return prom\n}\n\nfunction browserPbkdf2 (password, salt, iterations, length, algo) {\n  return subtle.importKey(\n    'raw', password, {name: 'PBKDF2'}, false, ['deriveBits']\n  ).then(function (key) {\n    return subtle.deriveBits({\n      name: 'PBKDF2',\n      salt: salt,\n      iterations: iterations,\n      hash: {\n        name: algo\n      }\n    }, key, length << 3)\n  }).then(function (res) {\n    return Buffer.from(res)\n  })\n}\n\nfunction resolvePromise (promise, callback) {\n  promise.then(function (out) {\n    process.nextTick(function () {\n      callback(null, out)\n    })\n  }, function (e) {\n    process.nextTick(function () {\n      callback(e)\n    })\n  })\n}\nmodule.exports = function (password, salt, iterations, keylen, digest, callback) {\n  if (typeof digest === 'function') {\n    callback = digest\n    digest = undefined\n  }\n\n  digest = digest || 'sha1'\n  var algo = toBrowser[digest.toLowerCase()]\n\n  if (!algo || typeof global.Promise !== 'function') {\n    return process.nextTick(function () {\n      var out\n      try {\n        out = sync(password, salt, iterations, keylen, digest)\n      } catch (e) {\n        return callback(e)\n      }\n      callback(null, out)\n    })\n  }\n\n  checkParameters(password, salt, iterations, keylen)\n  if (typeof callback !== 'function') throw new Error('No callback provided to pbkdf2')\n  if (!Buffer.isBuffer(password)) password = Buffer.from(password, defaultEncoding)\n  if (!Buffer.isBuffer(salt)) salt = Buffer.from(salt, defaultEncoding)\n\n  resolvePromise(checkNative(algo).then(function (resp) {\n    if (resp) return browserPbkdf2(password, salt, iterations, keylen, algo)\n\n    return sync(password, salt, iterations, keylen, digest)\n  }), callback)\n}\n","// TODO: replace with 'ajv' - its already a dependency and it is maintained\n// @ts-ignore: Could not find a declaration file for module\nimport inspector from 'schema-inspector'\n\nimport { extractProfile } from '../profileTokens'\nimport { Profile } from '../profile'\n\nconst schemaDefinition: {[key: string]: any} = {\n  type: 'object',\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' },\n    '@id': { type: 'string', optional: true }\n  }\n}\n\n/**\n * @ignore\n */\nexport class Organization extends Profile {\n  constructor(profile = {}) {\n    super(profile)\n    this._profile = Object.assign({}, {\n      '@type': 'Organization'\n    }, this._profile)\n  }\n\n  static validateSchema(profile: any, strict = false) {\n    schemaDefinition.strict = strict\n    return inspector.validate(schemaDefinition, profile)\n  }\n\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): \n    Organization {\n    const profile = extractProfile(token, publicKeyOrAddress)\n    return new Organization(profile)\n  }\n}\n","// @ts-ignore: Could not find a declaration file for module\nimport inspector from 'schema-inspector'\nimport { extractProfile } from '../profileTokens'\nimport { Profile } from '../profile'\n\nconst schemaDefinition: {[key: string]: any} = {\n  type: 'object',\n  properties: {\n    '@context': { type: 'string', optional: true },\n    '@type': { type: 'string' },\n    '@id': { type: 'string', optional: true }\n  }\n}\n\n/**\n * @ignore\n */\nexport class CreativeWork extends Profile {\n  constructor(profile = {}) {\n    super(profile)\n    this._profile = Object.assign({}, {\n      '@type': 'CreativeWork'\n    }, this._profile)\n  }\n\n  /**\n   * \n   * @ignore\n   */\n  static validateSchema(profile: any, strict = false) {\n    schemaDefinition.strict = strict\n    return inspector.validate(schemaDefinition, profile)\n  }\n\n  /**\n   * @ignore\n   */\n  static fromToken(token: string, publicKeyOrAddress: string | null = null): \n    CreativeWork {\n    const profile = extractProfile(token, publicKeyOrAddress)\n    return new CreativeWork(profile)\n  }\n}\n","// @ts-ignore: Could not find a declaration file for module\nimport { parseZoneFile } from 'zone-file'\n\nimport { Person } from './person'\nimport { getTokenFileUrl } from '../profileZoneFiles'\nimport { extractProfile } from '../profileTokens'\nimport { fetchPrivate } from '../../fetchUtil'\n\n/**\n * \n * @param zoneFile \n * @param publicKeyOrAddress \n * @param callback \n * \n * @ignore\n */\nexport function resolveZoneFileToPerson(\n  zoneFile: any, \n  publicKeyOrAddress: string, \n  callback: (profile: any) => void) {\n  let zoneFileJson = null\n  try {\n    zoneFileJson = parseZoneFile(zoneFile)\n    if (!zoneFileJson.hasOwnProperty('$origin')) {\n      zoneFileJson = null\n      throw new Error('zone file is missing an origin')\n    }\n  } catch (e) {\n    console.error(e)\n  }\n\n  let tokenFileUrl = null\n  if (zoneFileJson && Object.keys(zoneFileJson).length > 0) {\n    tokenFileUrl = getTokenFileUrl(zoneFileJson)\n  } else {\n    let profile = null\n    try {\n      profile = JSON.parse(zoneFile)\n      const person = Person.fromLegacyFormat(profile)\n      profile = person.profile()\n    } catch (error) {\n      console.warn(error)\n    }\n    callback(profile)\n    return\n  }\n\n  if (tokenFileUrl) {\n    fetchPrivate(tokenFileUrl)\n      .then(response => response.text())\n      .then(responseText => JSON.parse(responseText))\n      .then((responseJson) => {\n        const tokenRecords = responseJson\n        const token = tokenRecords[0].token\n        const profile = extractProfile(token, publicKeyOrAddress)\n\n        callback(profile)\n      })\n      .catch((error) => {\n        console.warn(error)\n      })\n  } else {\n    console.warn('Token file url not found')\n    callback({})\n  }\n}\n","\n\nimport { config } from '../config'\n\n/**\n* @ignore\n*/\nfunction isNameValid(fullyQualifiedName: string = '') {\n  const NAME_PART_RULE = /^[a-z0-9\\-_+]+$/\n  const LENGTH_MAX_NAME = 37\n\n  if (!fullyQualifiedName\n      || fullyQualifiedName.length > LENGTH_MAX_NAME) {\n    return Promise.resolve(false)\n  }\n  const nameParts = fullyQualifiedName.split('.')\n  if (nameParts.length !== 2) {\n    return Promise.resolve(false)\n  }\n  return Promise.resolve(\n    nameParts.reduce(\n      (agg, namePart) => {\n        if (!agg) {\n          return false\n        } else {\n          return NAME_PART_RULE.test(namePart)\n        }\n      }, true\n    )\n  )\n}\n\n/**\n* @ignore\n*/\nfunction isNamespaceValid(namespaceID: string) {\n  const NAMESPACE_RULE = /^[a-z0-9\\-_]{1,19}$/\n  return Promise.resolve(\n    namespaceID.match(NAMESPACE_RULE) !== null\n  )\n}\n\n/**\n* @ignore\n*/\nfunction isNameAvailable(fullyQualifiedName: string) {\n  return config.network.getNameInfo(fullyQualifiedName)\n    .then(() => false)\n    .catch((e) => {\n      if (e.message === 'Name not found') {\n        return true\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction isNamespaceAvailable(namespaceID: string) {\n  return config.network.getNamespaceInfo(namespaceID)\n    .then(() => false)\n    .catch((e) => {\n      if (e.message === 'Namespace not found') {\n        return true\n      } else {\n        throw e\n      }\n    })\n}       \n\n/**\n* @ignore\n*/\nfunction ownsName(fullyQualifiedName: string, ownerAddress: string) {\n  return config.network.getNameInfo(fullyQualifiedName)\n    .then(nameInfo => nameInfo.address === ownerAddress)\n    .catch((e) => {\n      if (e.message === 'Name not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction revealedNamespace(namespaceID: string, revealAddress: string) {\n  return config.network.getNamespaceInfo(namespaceID)\n    .then(namespaceInfo => namespaceInfo.recipient_address === revealAddress)\n    .catch((e) => {\n      if (e.message === 'Namespace not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction namespaceIsReady(namespaceID: string) {\n  return config.network.getNamespaceInfo(namespaceID)\n    .then(namespaceInfo => namespaceInfo.ready)\n    .catch((e) => {\n      if (e.message === 'Namespace not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction namespaceIsRevealed(namespaceID: string) {\n  return config.network.getNamespaceInfo(namespaceID)\n    .then(namespaceInfo => !namespaceInfo.ready)\n    .catch((e) => {\n      if (e.message === 'Namespace not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction isInGracePeriod(fullyQualifiedName: string) {\n  const network = config.network\n  return Promise.all([network.getNameInfo(fullyQualifiedName),\n                      network.getBlockHeight(),\n                      network.getGracePeriod(fullyQualifiedName)])\n    .then(([nameInfo, blockHeight, gracePeriod]) => {\n      const expiresAt = nameInfo.expire_block\n      return (blockHeight >= expiresAt) && (blockHeight < (gracePeriod + expiresAt))\n    })\n    .catch((e) => {\n      if (e.message === 'Name not found') {\n        return false\n      } else {\n        throw e\n      }\n    })\n}\n\n/**\n* @ignore\n*/\nfunction addressCanReceiveName(address: string) {\n  return config.network.getNamesOwned(address)\n    .then(names => (Promise.all(names.map(name => isNameValid(name)))\n      .then(validNames => validNames.filter(nameValid => nameValid).length < 25)))\n}\n\n/**\n* @ignore\n*/\nfunction isAccountSpendable(address: string, tokenType: string, blockHeight: number) {\n  return config.network.getAccountStatus(address, tokenType)\n    .then(accountStatus => accountStatus.transfer_send_block_id >= blockHeight)\n}\n\n/**\n* @ignore\n*/\nexport const safety = {\n  addressCanReceiveName,\n  isInGracePeriod,\n  ownsName,\n  isNameAvailable,\n  isNameValid,\n  isNamespaceValid,\n  isNamespaceAvailable,\n  revealedNamespace,\n  namespaceIsReady,\n  namespaceIsRevealed,\n  isAccountSpendable\n}\n","\nimport { protocolEchoReplyDetection } from './auth/protocolEchoDetection'\n\ntry {\n  /**\n   * Located here so it executes ASAP. The protocol handler detection is designed to work \n   * as a drop-in-replacement (non-breaking upgrade) for apps using blockstack.js. That \n   * requires doing this global and immediate detection. \n   * This function is also called in `isSignInPending` so that web app bundling the \n   * blockstack.js lib in a more modular way will still perform the protocol detection \n   * handling without any changes if this index file is not bundled in. \n   */\n  protocolEchoReplyDetection()\n} catch (error) {\n  console.error(`Error performing global protocol echo reply detection: ${error}`)\n}\n\nexport * from './auth'\nexport * from './profiles'\n\nexport {\n  EncryptionOptions, EncryptContentOptions,\n  PutFileOptions, getUserAppFileUrl, GetFileUrlOptions, GetFileOptions, getAppBucketUrl\n} from './storage'\n\nexport {\n  makeDIDFromAddress, makeDIDFromPublicKey, getDIDType, getAddressFromDID\n} from './dids'\n\nexport {\n  getEntropy, makeECPrivateKey, publicKeyToAddress, getPublicKeyFromPrivate,\n  hexStringToECPair, ecPairToHexString, ecPairToAddress\n} from './keys'\n\nexport {\n  nextYear, nextMonth, nextHour, makeUUID4, updateQueryStringParameter,\n  isLaterVersion, isSameOriginAbsoluteUrl\n} from './utils'\n\nexport {\n  transactions, safety, TransactionSigner,\n  PubkeyHashSigner, addUTXOsToFund, estimateTXBytes\n} from './operations'\n\nexport { BlockstackWallet, IdentityKeyPair } from './wallet'\n\nexport { network } from './network'\n\nexport { decodeToken } from 'jsontokens'\n\nexport { config } from './config'\n\nexport { encryptMnemonic, decryptMnemonic } from './encryption'\n\nexport { UserSession } from './auth/userSession'\n","import * as publicExports from './public'\n\nexport default publicExports\nexport * from './public'\n"],"sourceRoot":""}